"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[179],{2011:(wt,Ne,j)=>{j.d(Ne,{Dh:()=>ge,GT:()=>le,cc:()=>ke,hO:()=>qe,on:()=>K,pX:()=>he,xv:()=>ve});var h=j(4650),W=j(9260),L=j(2122);wt=j.hmd(wt);const ae=["ngOnDestroy"],he=(Pe,xe,We,Fe={})=>new Proxy(Pe,{get:(Re,Le)=>We.runOutsideAngular(()=>{var Ke;if(Pe[Le])return!(null===(Ke=Fe?.spy)||void 0===Ke)&&Ke.get&&Fe.spy.get(Le,Pe[Le]),Pe[Le];if(ae.indexOf(Le)>-1)return()=>{};const Ge=xe.toPromise().then(Q=>{const Ce=Q&&Q[Le];return"function"==typeof Ce?Ce.bind(Q):Ce&&Ce.then?Ce.then(Ye=>We.run(()=>Ye)):We.run(()=>Ce)});return new Proxy(()=>{},{get:(Q,Ce)=>Ge[Ce],apply:(Q,Ce,Ye)=>Ge.then(Qe=>{var Mt;const nt=Qe&&Qe(...Ye);return!(null===(Mt=Fe?.spy)||void 0===Mt)&&Mt.apply&&Fe.spy.apply(Le,Ye,nt),nt})})})}),le=(Pe,xe)=>{xe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Fe=>{Object.defineProperty(Pe.prototype,Fe,Object.getOwnPropertyDescriptor(We.prototype||We,Fe))})})};class be{constructor(xe){return xe}}const ge=new h.OlP("angularfire2.app.options"),ve=new h.OlP("angularfire2.app.name");function K(Pe,xe,We){const Re="object"==typeof We&&We||{};Re.name=Re.name||"string"==typeof We&&We||"[DEFAULT]";const Ke=W.Z.apps.filter(Ge=>Ge&&Ge.name===Re.name)[0]||xe.runOutsideAngular(()=>W.Z.initializeApp(Pe,Re));try{JSON.stringify(Pe)!==JSON.stringify(Ke.options)&&Y("error",`${Ke.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new be(Ke)}const Y=(Pe,...xe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Pe](...xe)},ie={provide:be,useFactory:K,deps:[ge,h.R0b,[new h.FiY,ve]]};let qe=(()=>{class Pe{constructor(We){W.Z.registerVersion("angularfire",L.q4.full,"core"),W.Z.registerVersion("angularfire",L.q4.full,"app-compat"),W.Z.registerVersion("angular",h.q4F.full,We.toString())}static initializeApp(We,Fe){return{ngModule:Pe,providers:[{provide:ge,useValue:We},{provide:ve,useValue:Fe}]}}}return Pe.\u0275fac=function(We){return new(We||Pe)(h.LFG(h.Lbi))},Pe.\u0275mod=h.oAB({type:Pe}),Pe.\u0275inj=h.cJS({providers:[ie]}),Pe})();function ke(Pe,xe,We,Fe,Re){const[,Le,Ke]=globalThis.\u0275AngularfireInstanceCache.find(Ge=>Ge[0]===Pe)||[];if(Le)return function Xe(Pe,xe){try{return Pe.toString()===xe.toString()}catch{return Pe===xe}}(Re,Ke)||(we("error",`${xe} was already initialized on the ${We} Firebase App with different settings.${ct?" You may need to reload as Firebase is not HMR aware.":""}`),we("warn",{is:Re,was:Ke})),Le;{const Ge=Fe();return globalThis.\u0275AngularfireInstanceCache.push([Pe,Ge,Re]),Ge}}const ct=!!wt.hot,we=(Pe,...xe)=>{(0,h.X6Q)()&&typeof console<"u"&&console[Pe](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(wt,Ne,j)=>{j.d(Ne,{q4:()=>jc,iC:()=>Hc,fc:()=>Gs,HU:()=>Il,vb:()=>wl,JM:()=>Wp});var h=j(4650),W=j(259),L=j(5861),ae=j(9681),he=j(2090),le=j(4859),be=j(1877),ge=j(8766);const ve="@firebase/installations",K="0.6.5",Y=1e4,ie=`w:${K}`,qe="FIS_v2",ke="https://firebaseinstallations.googleapis.com/v1",Xe=36e5,xe=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(b){return b instanceof he.ZR&&b.code.includes("request-failed")}function Fe({projectId:b}){return`${ke}/projects/${b}/installations`}function Re(b){return{token:b.token,requestStatus:2,expiresIn:Qe(b.expiresIn),creationTime:Date.now()}}function Le(b,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,L.Z)(function*(b,S){const G=(yield S.json()).error;return xe.create("request-failed",{requestName:b,serverCode:G.code,serverMessage:G.message,serverStatus:G.status})})).apply(this,arguments)}function Ge({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Ce(b){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,L.Z)(function*(b){const S=yield b();return S.status>=500&&S.status<600?b():S})).apply(this,arguments)}function Qe(b){return Number(b.replace("s","000"))}function Ln(){return(Ln=(0,L.Z)(function*({appConfig:b,heartbeatServiceProvider:S},{fid:x}){const G=Fe(b),ne=Ge(b),ue=S.getImmediate({optional:!0});if(ue){const Ct=yield ue.getHeartbeatsHeader();Ct&&ne.append("x-firebase-client",Ct)}const st={method:"POST",headers:ne,body:JSON.stringify({fid:x,authVersion:qe,appId:b.appId,sdkVersion:ie})},lt=yield Ce(()=>fetch(G,st));if(lt.ok){const Ct=yield lt.json();return{fid:Ct.fid||x,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:Re(Ct.authToken)}}throw yield Le("Create Installation",lt)})).apply(this,arguments)}function xr(b){return new Promise(S=>{setTimeout(S,b)})}const Wr=/^[cdef][\w-]{21}$/,de="";function _e(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function me(b){return function Dn(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Wr.test(x)?x:de}catch{return de}}function se(b){return`${b.appName}!${b.appId}`}const Se=new Map;function ze(b,S){const x=se(b);cn(x,S),function St(b,S){const x=function vn(){return!Qt&&"BroadcastChannel"in self&&(Qt=new BroadcastChannel("[Firebase] FID Change"),Qt.onmessage=b=>{cn(b.data.key,b.data.fid)}),Qt}();x&&x.postMessage({key:b,fid:S}),function Sn(){0===Se.size&&Qt&&(Qt.close(),Qt=null)}()}(x,S)}function cn(b,S){const x=Se.get(b);if(x)for(const G of x)G(S)}let Qt=null;const Gn="firebase-installations-database",Zn=1,Rn="firebase-installations-store";let rr=null;function si(){return rr||(rr=(0,ge.X3)(Gn,Zn,{upgrade:(b,S)=>{0===S&&b.createObjectStore(Rn)}})),rr}function Pn(b,S){return _t.apply(this,arguments)}function _t(){return(_t=(0,L.Z)(function*(b,S){const x=se(b),ne=(yield si()).transaction(Rn,"readwrite"),ue=ne.objectStore(Rn),He=yield ue.get(x);return yield ue.put(S,x),yield ne.done,(!He||He.fid!==S.fid)&&ze(b,S.fid),S})).apply(this,arguments)}function On(b){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,L.Z)(function*(b){const S=se(b),G=(yield si()).transaction(Rn,"readwrite");yield G.objectStore(Rn).delete(S),yield G.done})).apply(this,arguments)}function Vn(b,S){return vs.apply(this,arguments)}function vs(){return(vs=(0,L.Z)(function*(b,S){const x=se(b),ne=(yield si()).transaction(Rn,"readwrite"),ue=ne.objectStore(Rn),He=yield ue.get(x),st=S(He);return void 0===st?yield ue.delete(x):yield ue.put(st,x),yield ne.done,st&&(!He||He.fid!==st.fid)&&ze(b,st.fid),st})).apply(this,arguments)}function dr(b){return En.apply(this,arguments)}function En(){return En=(0,L.Z)(function*(b){let S;const x=yield Vn(b.appConfig,G=>{const ne=function Mn(b){return kr(b||{fid:_e(),registrationStatus:0})}(G),ue=function Et(b,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(xe.create("app-offline"))};const x={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},G=function jt(b,S){return ir.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:G}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:yr(b)}:{installationEntry:S}}(b,ne);return S=ue.registrationPromise,ue.installationEntry});return x.fid===de?{installationEntry:yield S}:{installationEntry:x,registrationPromise:S}}),En.apply(this,arguments)}function ir(){return ir=(0,L.Z)(function*(b,S){try{const x=yield function nt(b,S){return Ln.apply(this,arguments)}(b,S);return Pn(b.appConfig,x)}catch(x){throw We(x)&&409===x.customData.serverCode?yield On(b.appConfig):yield Pn(b.appConfig,{fid:S.fid,registrationStatus:0}),x}}),ir.apply(this,arguments)}function yr(b){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(b){let S=yield Nr(b.appConfig);for(;1===S.registrationStatus;)yield xr(100),S=yield Nr(b.appConfig);if(0===S.registrationStatus){const{installationEntry:x,registrationPromise:G}=yield dr(b);return G||x}return S})).apply(this,arguments)}function Nr(b){return Vn(b,S=>{if(!S)throw xe.create("installation-not-found");return kr(S)})}function kr(b){return function qr(b){return 1===b.registrationStatus&&b.registrationTime+Y<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function oi(){return(oi=(0,L.Z)(function*({appConfig:b,heartbeatServiceProvider:S},x){const G=function Jt(b,{fid:S}){return`${Fe(b)}/${S}/authTokens:generate`}(b,x),ne=function Q(b,{refreshToken:S}){const x=Ge(b);return x.append("Authorization",function Mt(b){return`${qe} ${b}`}(S)),x}(b,x),ue=S.getImmediate({optional:!0});if(ue){const Ct=yield ue.getHeartbeatsHeader();Ct&&ne.append("x-firebase-client",Ct)}const st={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:ie,appId:b.appId}})},lt=yield Ce(()=>fetch(G,st));if(lt.ok)return Re(yield lt.json());throw yield Le("Generate Auth Token",lt)})).apply(this,arguments)}function Es(b){return qt.apply(this,arguments)}function qt(){return qt=(0,L.Z)(function*(b,S=!1){let x;const G=yield Vn(b.appConfig,ue=>{if(!mn(ue))throw xe.create("not-registered");const He=ue.authToken;if(!S&&function Hn(b){return 2===b.requestStatus&&!function q(b){const S=Date.now();return S<b.creationTime||b.creationTime+b.expiresIn<S+Xe}(b)}(He))return ue;if(1===He.requestStatus)return x=function rt(b,S){return Me.apply(this,arguments)}(b,S),ue;{if(!navigator.onLine)throw xe.create("app-offline");const st=function z(b){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:S})}(ue);return x=function Rt(b,S){return Xt.apply(this,arguments)}(b,st),st}});return x?yield x:G.authToken}),qt.apply(this,arguments)}function Me(){return(Me=(0,L.Z)(function*(b,S){let x=yield Je(b.appConfig);for(;1===x.authToken.requestStatus;)yield xr(100),x=yield Je(b.appConfig);const G=x.authToken;return 0===G.requestStatus?Es(b,S):G})).apply(this,arguments)}function Je(b){return Vn(b,S=>{if(!mn(S))throw xe.create("not-registered");return function V(b){return 1===b.requestStatus&&b.requestTime+Y<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Xt(){return Xt=(0,L.Z)(function*(b,S){try{const x=yield function Wt(b,S){return oi.apply(this,arguments)}(b,S),G=Object.assign(Object.assign({},S),{authToken:x});return yield Pn(b.appConfig,G),x}catch(x){if(!We(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const G=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Pn(b.appConfig,G)}else yield On(b.appConfig);throw x}}),Xt.apply(this,arguments)}function mn(b){return void 0!==b&&2===b.registrationStatus}function N(){return(N=(0,L.Z)(function*(b){const S=b,{installationEntry:x,registrationPromise:G}=yield dr(S);return G?G.catch(console.error):Es(S).catch(console.error),x.fid})).apply(this,arguments)}function Ie(){return Ie=(0,L.Z)(function*(b,S=!1){const x=b;return yield function ft(b){return xt.apply(this,arguments)}(x),(yield Es(x,S)).token}),Ie.apply(this,arguments)}function xt(){return(xt=(0,L.Z)(function*(b){const{registrationPromise:S}=yield dr(b);S&&(yield S)})).apply(this,arguments)}function oa(b){return xe.create("missing-app-config-values",{valueName:b})}const Ou="installations",tc=b=>{const S=b.getProvider("app").getImmediate(),x=function Ja(b){if(!b||!b.options)throw oa("App Configuration");if(!b.name)throw oa("App Name");const S=["projectId","apiKey","appId"];for(const x of S)if(!b.options[x])throw oa(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(S);return{app:S,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},dh=b=>{const S=b.getProvider("app").getImmediate(),x=(0,ae._getProvider)(S,Ou).getImmediate();return{getId:()=>function U(b){return N.apply(this,arguments)}(x),getToken:ne=>function ee(b){return Ie.apply(this,arguments)}(x,ne)}};(function In(){(0,ae._registerComponent)(new le.wA(Ou,tc,"PUBLIC")),(0,ae._registerComponent)(new le.wA("installations-internal",dh,"PRIVATE"))})(),(0,ae.registerVersion)(ve,K),(0,ae.registerVersion)(ve,K,"esm2017");const vr="@firebase/remote-config",Kr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class So{constructor(S,x,G,ne){this.client=S,this.storage=x,this.storageCache=G,this.logger=ne}isCachedDataFresh(S,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const G=Date.now()-x,ne=G<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${G}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ne}.`),ne}fetch(S){var x=this;return(0,L.Z)(function*(){const[G,ne]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(ne&&x.isCachedDataFresh(S.cacheMaxAgeMillis,G))return ne;S.eTag=ne&&ne.eTag;const ue=yield x.client.fetch(S),He=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&He.push(x.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(He),ue})()}}function rs(b=navigator){return b.languages&&b.languages[0]||b.language}class ic{constructor(S,x,G,ne,ue,He){this.firebaseInstallations=S,this.sdkVersion=x,this.namespace=G,this.projectId=ne,this.apiKey=ue,this.appId=He}fetch(S){var x=this;return(0,L.Z)(function*(){const[G,ne]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),He=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,st={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},lt={sdk_version:x.sdkVersion,app_instance_id:G,app_instance_id_token:ne,app_id:x.appId,language_code:rs()},Ct={method:"POST",headers:st,body:JSON.stringify(lt)},nn=fetch(He,Ct),Ft=new Promise((us,hn)=>{S.signal.addEventListener(()=>{const Vo=new Error("The operation was aborted.");Vo.name="AbortError",hn(Vo)})});let Xr;try{yield Promise.race([nn,Ft]),Xr=yield nn}catch(us){let hn="fetch-client-network";throw"AbortError"===us?.name&&(hn="fetch-timeout"),Kr.create(hn,{originalErrorMessage:us?.message})}let bn=Xr.status;const Ca=Xr.headers.get("ETag")||void 0;let qn,Cs;if(200===Xr.status){let us;try{us=yield Xr.json()}catch(hn){throw Kr.create("fetch-client-parse",{originalErrorMessage:hn?.message})}qn=us.entries,Cs=us.state}if("INSTANCE_STATE_UNSPECIFIED"===Cs?bn=500:"NO_CHANGE"===Cs?bn=304:("NO_TEMPLATE"===Cs||"EMPTY_CONFIG"===Cs)&&(qn={}),304!==bn&&200!==bn)throw Kr.create("fetch-status",{httpStatus:bn});return{status:bn,eTag:Ca,config:qn}})()}}class is{constructor(S,x){this.client=S,this.storage=x}fetch(S){var x=this;return(0,L.Z)(function*(){const G=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(S,G)})()}attemptFetch(S,{throttleEndTimeMillis:x,backoffCount:G}){var ne=this;return(0,L.Z)(function*(){yield function Pp(b,S){return new Promise((x,G)=>{const ne=Math.max(S-Date.now(),0),ue=setTimeout(x,ne);b.addEventListener(()=>{clearTimeout(ue),G(Kr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,x);try{const ue=yield ne.client.fetch(S);return yield ne.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Un(b){if(!(b instanceof he.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ue))throw ue;const He={throttleEndTimeMillis:Date.now()+(0,he.$s)(G),backoffCount:G+1};return yield ne.storage.setThrottleMetadata(He),ne.attemptFetch(S,He)}})()}}class sc{constructor(S,x,G,ne,ue){this.app=S,this._client=x,this._storageCache=G,this._storage=ne,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ji(b,S){const x=b.target.error||void 0;return Kr.create(S,{originalErrorMessage:x&&x?.message})}const Ri="app_namespace_store";class ss{constructor(S,x,G,ne=function li(){return new Promise((b,S)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=G=>{S(ji(G,"storage-open"))},x.onsuccess=G=>{b(G.target.result)},x.onupgradeneeded=G=>{0===G.oldVersion&&G.target.result.createObjectStore(Ri,{keyPath:"compositeKey"})}}catch(x){S(Kr.create("storage-open",{originalErrorMessage:x?.message}))}})}()){this.appId=S,this.appName=x,this.namespace=G,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var x=this;return(0,L.Z)(function*(){const G=yield x.openDbPromise;return new Promise((ne,ue)=>{const st=G.transaction([Ri],"readonly").objectStore(Ri),lt=x.createCompositeKey(S);try{const Ct=st.get(lt);Ct.onerror=nn=>{ue(ji(nn,"storage-get"))},Ct.onsuccess=nn=>{const Ft=nn.target.result;ne(Ft?Ft.value:void 0)}}catch(Ct){ue(Kr.create("storage-get",{originalErrorMessage:Ct?.message}))}})})()}set(S,x){var G=this;return(0,L.Z)(function*(){const ne=yield G.openDbPromise;return new Promise((ue,He)=>{const lt=ne.transaction([Ri],"readwrite").objectStore(Ri),Ct=G.createCompositeKey(S);try{const nn=lt.put({compositeKey:Ct,value:x});nn.onerror=Ft=>{He(ji(Ft,"storage-set"))},nn.onsuccess=()=>{ue()}}catch(nn){He(Kr.create("storage-set",{originalErrorMessage:nn?.message}))}})})()}delete(S){var x=this;return(0,L.Z)(function*(){const G=yield x.openDbPromise;return new Promise((ne,ue)=>{const st=G.transaction([Ri],"readwrite").objectStore(Ri),lt=x.createCompositeKey(S);try{const Ct=st.delete(lt);Ct.onerror=nn=>{ue(ji(nn,"storage-delete"))},Ct.onsuccess=()=>{ne()}}catch(Ct){ue(Kr.create("storage-delete",{originalErrorMessage:Ct?.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class tl{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,L.Z)(function*(){const x=S.storage.getLastFetchStatus(),G=S.storage.getLastSuccessfulFetchTimestampMillis(),ne=S.storage.getActiveConfig(),ue=yield x;ue&&(S.lastFetchStatus=ue);const He=yield G;He&&(S.lastSuccessfulFetchTimestampMillis=He);const st=yield ne;st&&(S.activeConfig=st)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Uu(){return il.apply(this,arguments)}function il(){return(il=(0,L.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}!function nl(){(0,ae._registerComponent)(new le.wA("remote-config",function b(S,{instanceIdentifier:x}){const G=S.getProvider("app").getImmediate(),ne=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Kr.create("registration-window");if(!(0,he.hl)())throw Kr.create("indexed-db-unavailable");const{projectId:ue,apiKey:He,appId:st}=G.options;if(!ue)throw Kr.create("registration-project-id");if(!He)throw Kr.create("registration-api-key");if(!st)throw Kr.create("registration-app-id");const lt=new ss(st,G.name,x=x||"firebase"),Ct=new tl(lt),nn=new be.Yd(vr);nn.logLevel=be.in.ERROR;const Ft=new ic(ne,ae.SDK_VERSION,x,ue,He,st),Xr=new is(Ft,lt),bn=new So(Xr,lt,Ct,nn),Ca=new sc(G,bn,Ct,lt,nn);return function Qn(b){const S=(0,he.m9)(b);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ca),Ca},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(vr,"0.4.5"),(0,ae.registerVersion)(vr,"0.4.5","esm2017")}();const Bu="/firebase-messaging-sw.js",Mp="/firebase-cloud-messaging-push-scope",ju="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",u_="https://fcmregistrations.googleapis.com/v1",oc="google.c.a.c_id",d_="google.c.a.c_l",fh="google.c.a.ts",h_="google.c.a.e";var Ro=(()=>{return(b=Ro||(Ro={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Ro;var b})();function Fs(b){const S=new Uint8Array(b);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lv(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),G=atob(x),ne=new Uint8Array(G.length);for(let ue=0;ue<G.length;++ue)ne[ue]=G.charCodeAt(ue);return ne}const sl="fcm_token_details_db",ol=5,os="fcm_token_object_Store";function ph(){return ph=(0,L.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(sl))return null;let S=null;return(yield(0,ge.X3)(sl,ol,{upgrade:(G=(0,L.Z)(function*(ne,ue,He,st){var lt;if(ue<2||!ne.objectStoreNames.contains(os))return;const Ct=st.objectStore(os),nn=yield Ct.index("fcmSenderId").get(b);if(yield Ct.clear(),nn)if(2===ue){const Ft=nn;if(!Ft.auth||!Ft.p256dh||!Ft.endpoint)return;S={token:Ft.fcmToken,createTime:null!==(lt=Ft.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:Ft.auth,p256dh:Ft.p256dh,endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:"string"==typeof Ft.vapidKey?Ft.vapidKey:Fs(Ft.vapidKey)}}}else if(3===ue){const Ft=nn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Fs(Ft.auth),p256dh:Fs(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Fs(Ft.vapidKey)}}}else if(4===ue){const Ft=nn;S={token:Ft.fcmToken,createTime:Ft.createTime,subscriptionOptions:{auth:Fs(Ft.auth),p256dh:Fs(Ft.p256dh),endpoint:Ft.endpoint,swScope:Ft.swScope,vapidKey:Fs(Ft.vapidKey)}}}}),function(ue,He,st,lt){return G.apply(this,arguments)})})).close(),yield(0,ge.Lj)(sl),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),function Ls(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:S}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}(S)?S:null;var G}),ph.apply(this,arguments)}const xp="firebase-messaging-database",ao=1,ca="firebase-messaging-store";let ua=null;function lc(){return ua||(ua=(0,ge.X3)(xp,ao,{upgrade:(b,S)=>{0===S&&b.createObjectStore(ca)}})),ua}function cc(b){return uc.apply(this,arguments)}function uc(){return uc=(0,L.Z)(function*(b){const S=ll(b),G=yield(yield lc()).transaction(ca).objectStore(ca).get(S);if(G)return G;{const ne=yield function ac(b){return ph.apply(this,arguments)}(b.appConfig.senderId);if(ne)return yield dc(b,ne),ne}}),uc.apply(this,arguments)}function dc(b,S){return al.apply(this,arguments)}function al(){return(al=(0,L.Z)(function*(b,S){const x=ll(b),ne=(yield lc()).transaction(ca,"readwrite");return yield ne.objectStore(ca).put(S,x),yield ne.done,S})).apply(this,arguments)}function hc(){return(hc=(0,L.Z)(function*(b){const S=ll(b),G=(yield lc()).transaction(ca,"readwrite");yield G.objectStore(ca).delete(S),yield G.done})).apply(this,arguments)}function ll({appConfig:b}){return b.appId}const Lr=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function fc(b,S){return xn.apply(this,arguments)}function xn(){return(xn=(0,L.Z)(function*(b,S){const x=yield Po(b),G=gh(S),ne={method:"POST",headers:x,body:JSON.stringify(G)};let ue;try{ue=yield(yield fetch(pc(b.appConfig),ne)).json()}catch(He){throw Lr.create("token-subscribe-failed",{errorInfo:He?.toString()})}if(ue.error)throw Lr.create("token-subscribe-failed",{errorInfo:ue.error.message});if(!ue.token)throw Lr.create("token-subscribe-no-token");return ue.token})).apply(this,arguments)}function ws(){return(ws=(0,L.Z)(function*(b,S){const x=yield Po(b),G=gh(S.subscriptionOptions),ne={method:"PATCH",headers:x,body:JSON.stringify(G)};let ue;try{ue=yield(yield fetch(`${pc(b.appConfig)}/${S.token}`,ne)).json()}catch(He){throw Lr.create("token-update-failed",{errorInfo:He?.toString()})}if(ue.error)throw Lr.create("token-update-failed",{errorInfo:ue.error.message});if(!ue.token)throw Lr.create("token-update-no-token");return ue.token})).apply(this,arguments)}function Vr(b,S){return $u.apply(this,arguments)}function $u(){return($u=(0,L.Z)(function*(b,S){const G={method:"DELETE",headers:yield Po(b)};try{const ue=yield(yield fetch(`${pc(b.appConfig)}/${S}`,G)).json();if(ue.error)throw Lr.create("token-unsubscribe-failed",{errorInfo:ue.error.message})}catch(ne){throw Lr.create("token-unsubscribe-failed",{errorInfo:ne?.toString()})}})).apply(this,arguments)}function pc({projectId:b}){return`${u_}/projects/${b}/registrations`}function Po(b){return sr.apply(this,arguments)}function sr(){return(sr=(0,L.Z)(function*({appConfig:b,installations:S}){const x=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function gh({p256dh:b,auth:S,endpoint:x,vapidKey:G}){const ne={web:{endpoint:x,auth:S,p256dh:b}};return G!==ju&&(ne.web.applicationPubKey=G),ne}const Mo=6048e5;function Is(){return Is=(0,L.Z)(function*(b){const S=yield function _h(b,S){return mc.apply(this,arguments)}(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:S.endpoint,auth:Fs(S.getKey("auth")),p256dh:Fs(S.getKey("p256dh"))},G=yield cc(b.firebaseDependencies);if(G){if(function yh(b,S){return S.vapidKey===b.vapidKey&&S.endpoint===b.endpoint&&S.auth===b.auth&&S.p256dh===b.p256dh}(G.subscriptionOptions,x))return Date.now()>=G.createTime+Mo?function Gt(b,S){return gc.apply(this,arguments)}(b,{token:G.token,createTime:Date.now(),subscriptionOptions:x}):G.token;try{yield Vr(b.firebaseDependencies,G.token)}catch(ne){console.warn(ne)}return mh(b.firebaseDependencies,x)}return mh(b.firebaseDependencies,x)}),Is.apply(this,arguments)}function Zr(){return Zr=(0,L.Z)(function*(b){const S=yield cc(b.firebaseDependencies);S&&(yield Vr(b.firebaseDependencies,S.token),yield function lo(b){return hc.apply(this,arguments)}(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()}),Zr.apply(this,arguments)}function gc(){return gc=(0,L.Z)(function*(b,S){try{const x=yield function Vs(b,S){return ws.apply(this,arguments)}(b.firebaseDependencies,S),G=Object.assign(Object.assign({},S),{token:x,createTime:Date.now()});return yield dc(b.firebaseDependencies,G),x}catch(x){throw yield function cl(b){return Zr.apply(this,arguments)}(b),x}}),gc.apply(this,arguments)}function mh(b,S){return da.apply(this,arguments)}function da(){return(da=(0,L.Z)(function*(b,S){const G={token:yield fc(b,S),createTime:Date.now(),subscriptionOptions:S};return yield dc(b,G),G.token})).apply(this,arguments)}function mc(){return(mc=(0,L.Z)(function*(b,S){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lv(S)})})).apply(this,arguments)}function Gu(b){const S={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function zu(b,S){if(!S.notification)return;b.notification={};const x=S.notification.title;x&&(b.notification.title=x);const G=S.notification.body;G&&(b.notification.body=G);const ne=S.notification.image;ne&&(b.notification.image=ne);const ue=S.notification.icon;ue&&(b.notification.icon=ue)}(S,b),function Ee(b,S){S.data&&(b.data=S.data)}(S,b),function an(b,S){var x,G,ne,ue,He;if(!(S.fcmOptions||null!==(x=S.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const st=null!==(ne=null===(G=S.fcmOptions)||void 0===G?void 0:G.link)&&void 0!==ne?ne:null===(ue=S.notification)||void 0===ue?void 0:ue.click_action;st&&(b.fcmOptions.link=st);const lt=null===(He=S.fcmOptions)||void 0===He?void 0:He.analytics_label;lt&&(b.fcmOptions.analyticsLabel=lt)}(S,b),S}function qu(b,S){const x=[];for(let G=0;G<b.length;G++)x.push(b.charAt(G)),G<S.length&&x.push(S.charAt(G));return x.join("")}function _c(b){return Lr.create("missing-app-config-values",{valueName:b})}qu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ha{constructor(S,x,G){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function Ar(b){if(!b||!b.options)throw _c("App Configuration Object");if(!b.name)throw _c("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const G of S)if(!x[G])throw _c(G);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ne,installations:x,analyticsProvider:G}}_delete(){return Promise.resolve()}}function _i(b){return fa.apply(this,arguments)}function fa(){return(fa=(0,L.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Bu,{scope:Mp}),b.swRegistration.update().catch(()=>{})}catch(S){throw Lr.create("failed-service-worker-registration",{browserErrorMessage:S?.message})}})).apply(this,arguments)}function yc(){return(yc=(0,L.Z)(function*(b,S){if(!S&&!b.swRegistration&&(yield _i(b)),S||!b.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Lr.create("invalid-sw-registration");b.swRegistration=S}})).apply(this,arguments)}function pa(){return(pa=(0,L.Z)(function*(b,S){S?b.vapidKey=S:b.vapidKey||(b.vapidKey=ju)})).apply(this,arguments)}function ui(){return ui=(0,L.Z)(function*(b,S){if(!navigator)throw Lr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Lr.create("permission-blocked");return yield function vh(b,S){return pa.apply(this,arguments)}(b,S?.vapidKey),yield function Ku(b,S){return yc.apply(this,arguments)}(b,S?.serviceWorkerRegistration),function Np(b){return Is.apply(this,arguments)}(b)}),ui.apply(this,arguments)}function Us(){return(Us=(0,L.Z)(function*(b,S,x){const G=function Hi(b){switch(b){case Ro.NOTIFICATION_CLICKED:return"notification_open";case Ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(S);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(G,{message_id:x[oc],message_name:x[d_],message_time:x[fh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function xo(){return xo=(0,L.Z)(function*(b,S){const x=S.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Ro.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Gu(x)):b.onMessageHandler.next(Gu(x)));const G=x.data;(function Wu(b){return"object"==typeof b&&!!b&&oc in b})(G)&&"1"===G[h_]&&(yield function ga(b,S,x){return Us.apply(this,arguments)}(b,x.messageType,G))}),xo.apply(this,arguments)}const Ec="@firebase/messaging",ul=b=>{const S=new ha(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function vc(b,S){return xo.apply(this,arguments)}(S,x)),S},wc=b=>{const S=b.getProvider("messaging").getImmediate();return{getToken:G=>function Yr(b,S){return ui.apply(this,arguments)}(S,G)}};function Qu(){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,L.Z)(function*(){try{yield(0,he.eu)()}catch{return!1}return typeof window<"u"&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Yu(){(0,ae._registerComponent)(new le.wA("messaging",ul,"PUBLIC")),(0,ae._registerComponent)(new le.wA("messaging-internal",wc,"PRIVATE")),(0,ae.registerVersion)(Ec,"0.12.6"),(0,ae.registerVersion)(Ec,"0.12.6","esm2017")}();const Xu="analytics",di="firebase_id",Bs="origin",Xn=6e4,Fp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tc="https://www.googletagmanager.com/gtag/js",Dr=new be.Yd("@firebase/analytics"),yi=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function bh(b){if(!b.startsWith(Tc)){const S=yi.create("invalid-gtag-resource",{gtagURL:b});return Dr.warn(S.message),""}return b}function bc(b){return Promise.all(b.map(S=>S.catch(x=>x)))}function js(){return(js=(0,L.Z)(function*(b,S,x,G,ne,ue){const He=G[ne];try{if(He)yield S[He];else{const lt=(yield bc(x)).find(Ct=>Ct.measurementId===ne);lt&&(yield S[lt.appId])}}catch(st){Dr.error(st)}b("config",ne,ue)})).apply(this,arguments)}function $i(){return($i=(0,L.Z)(function*(b,S,x,G,ne){try{let ue=[];if(ne&&ne.send_to){let He=ne.send_to;Array.isArray(He)||(He=[He]);const st=yield bc(x);for(const lt of He){const Ct=st.find(Ft=>Ft.measurementId===lt),nn=Ct&&S[Ct.appId];if(!nn){ue=[];break}ue.push(nn)}}0===ue.length&&(ue=Object.values(S)),yield Promise.all(ue),b("event",G,ne||{})}catch(ue){Dr.error(ue)}})).apply(this,arguments)}const Ch=30,pl=new class ya{constructor(S={},x=1e3){this.throttleMetadata=S,this.intervalMillis=x}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,x){this.throttleMetadata[S]=x}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ed(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function gl(){return(gl=(0,L.Z)(function*(b){var S;const{appId:x,apiKey:G}=b,ne={method:"GET",headers:ed(G)},ue=Fp.replace("{app-id}",x),He=yield fetch(ue,ne);if(200!==He.status&&304!==He.status){let st="";try{const lt=yield He.json();null!==(S=lt.error)&&void 0!==S&&S.message&&(st=lt.error.message)}catch{}throw yi.create("config-fetch-failed",{httpStatus:He.status,responseMessage:st})}return He.json()})).apply(this,arguments)}function Hs(){return(Hs=(0,L.Z)(function*(b,S=pl,x){const{appId:G,apiKey:ne,measurementId:ue}=b.options;if(!G)throw yi.create("no-app-id");if(!ne){if(ue)return{measurementId:ue,appId:G};throw yi.create("no-api-key")}const He=S.getThrottleMetadata(G)||{backoffCount:0,throttleEndTimeMillis:Date.now()},st=new Mc;return setTimeout((0,L.Z)(function*(){st.abort()}),void 0!==x?x:Xn),Sc({appId:G,apiKey:ne,measurementId:ue},He,st,S)})).apply(this,arguments)}function Sc(b,S,x){return Rc.apply(this,arguments)}function Rc(){return Rc=(0,L.Z)(function*(b,{throttleEndTimeMillis:S,backoffCount:x},G,ne=pl){var ue;const{appId:He,measurementId:st}=b;try{yield function Pc(b,S){return new Promise((x,G)=>{const ne=Math.max(S-Date.now(),0),ue=setTimeout(x,ne);b.addEventListener(()=>{clearTimeout(ue),G(yi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(G,S)}catch(lt){if(st)return Dr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:He,measurementId:st};throw lt}try{const lt=yield function Dc(b){return gl.apply(this,arguments)}(b);return ne.deleteThrottleMetadata(He),lt}catch(lt){const Ct=lt;if(!function td(b){if(!(b instanceof he.ZR&&b.customData))return!1;const S=Number(b.customData.httpStatus);return 429===S||500===S||503===S||504===S}(Ct)){if(ne.deleteThrottleMetadata(He),st)return Dr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${st} provided in the "measurementId" field in the local Firebase config. [${Ct?.message}]`),{appId:He,measurementId:st};throw lt}const nn=503===Number(null===(ue=Ct?.customData)||void 0===ue?void 0:ue.httpStatus)?(0,he.$s)(x,ne.intervalMillis,Ch):(0,he.$s)(x,ne.intervalMillis),Ft={throttleEndTimeMillis:Date.now()+nn,backoffCount:x+1};return ne.setThrottleMetadata(He,Ft),Dr.debug(`Calling attemptFetch again in ${nn} millis`),Sc(b,Ft,G,ne)}}),Rc.apply(this,arguments)}class Mc{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let ml,rd;function Bp(){return(Bp=(0,L.Z)(function*(b,S,x,G,ne){if(ne&&ne.global)b("event",x,G);else{const ue=yield S;b("event",x,Object.assign(Object.assign({},G),{send_to:ue}))}})).apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(){if(!(0,he.hl)())return Dr.warn(yi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(b){return Dr.warn(yi.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function as(){return as=(0,L.Z)(function*(b,S,x,G,ne,ue,He){var st;const lt=function va(b){return Hs.apply(this,arguments)}(b);lt.then(bn=>{x[bn.measurementId]=bn.appId,b.options.measurementId&&bn.measurementId!==b.options.measurementId&&Dr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>Dr.error(bn)),S.push(lt);const Ct=function Oc(){return wa.apply(this,arguments)}().then(bn=>{if(bn)return G.getId()}),[nn,Ft]=yield Promise.all([lt,Ct]);(function Ac(b){const S=window.document.getElementsByTagName("script");for(const x of Object.values(S))if(x.src&&x.src.includes(Tc)&&x.src.includes(b))return x;return null})(ue)||function Ju(b,S){const x=function hl(b,S){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(b,S)),x}("firebase-js-sdk-policy",{createScriptURL:bh}),G=document.createElement("script"),ne=`${Tc}?l=${b}&id=${S}`;G.src=x?x?.createScriptURL(ne):ne,G.async=!0,document.head.appendChild(G)}(ue,nn.measurementId),rd&&(ne("consent","default",rd),function id(b){rd=b}(void 0)),ne("js",new Date);const Xr=null!==(st=He?.config)&&void 0!==st?st:{};return Xr[Bs]="firebase",Xr.update=!0,null!=Ft&&(Xr[di]=Ft),ne("config",nn.measurementId,Xr),ml&&(ne("set",ml),function kc(b){ml=b}(void 0)),nn.measurementId}),as.apply(this,arguments)}class ko{constructor(S){this.app=S}_delete(){return delete $s[this.app.options.appId],Promise.resolve()}}let $s={},Fc=[];const Ah={};let Dh,hi,co="dataLayer",sd="gtag",od=!1;function Oo(b,S,x){!function uo(){const b=[];if((0,he.ru)()&&b.push("This is a browser extension environment."),(0,he.zI)()||b.push("Cookies are not available."),b.length>0){const S=b.map((G,ne)=>`(${ne+1}) ${G}`).join(" "),x=yi.create("invalid-analytics-context",{errorInfo:S});Dr.warn(x.message)}}();const G=b.options.appId;if(!G)throw yi.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw yi.create("no-api-key");Dr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$s[G])throw yi.create("already-exists",{id:G});if(!od){!function fl(b){let S=[];Array.isArray(window[b])?S=window[b]:window[b]=S}(co);const{wrappedGtag:ue,gtagCore:He}=function Vp(b,S,x,G,ne){let ue=function(...He){window[G].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(ue=window[ne]),window[ne]=function Lp(b,S,x,G){function ue(){return ue=(0,L.Z)(function*(He,...st){try{if("event"===He){const[lt,Ct]=st;yield function _a(b,S,x,G,ne){return $i.apply(this,arguments)}(b,S,x,lt,Ct)}else if("config"===He){const[lt,Ct]=st;yield function Cc(b,S,x,G,ne,ue){return js.apply(this,arguments)}(b,S,x,G,lt,Ct)}else if("consent"===He){const[lt]=st;b("consent","update",lt)}else if("get"===He){const[lt,Ct,nn]=st;b("get",lt,Ct,nn)}else if("set"===He){const[lt]=st;b("set",lt)}else b(He,...st)}catch(lt){Dr.error(lt)}}),ue.apply(this,arguments)}return function ne(He){return ue.apply(this,arguments)}}(ue,b,S,x),{gtagCore:ue,wrappedGtag:window[ne]}}($s,Fc,Ah,co,sd);hi=ue,Dh=He,od=!0}return $s[G]=function $p(b,S,x,G,ne,ue,He){return as.apply(this,arguments)}(b,Fc,Ah,S,Dh,co,x),new ko(b)}function Lc(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,L.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch{return!1}})).apply(this,arguments)}const g_="@firebase/analytics";!function Ia(){(0,ae._registerComponent)(new le.wA(Xu,(S,{options:x})=>Oo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new le.wA("analytics-internal",function b(S){try{const x=S.getProvider(Xu).getImmediate();return{logEvent:(G,ne,ue)=>function El(b,S,x,G){b=(0,he.m9)(b),function xc(b,S,x,G,ne){return Bp.apply(this,arguments)}(hi,$s[b.app.options.appId],S,x,G).catch(ne=>Dr.error(ne))}(x,G,ne,ue)}}catch(x){throw yi.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(g_,"0.10.1"),(0,ae.registerVersion)(g_,"0.10.1","esm2017")}();var zp=j(4408),hr=j(7565);const Bc=new class ad extends hr.v{}(class Uv extends zp.o{constructor(S,x){super(S,x),this.scheduler=S,this.work=x}schedule(S,x=0){return x>0?super.schedule(S,x):(this.delay=x,this.state=S,this.scheduler.flush(this),this)}execute(S,x){return x>0||this.closed?super.execute(S,x):this._execute(S,x)}requestAsyncId(S,x,G=0){return null!=G&&G>0||null==G&&this.delay>0?super.requestAsyncId(S,x,G):(S.flush(this),0)}});var Ts=j(4986),Lo=j(8505),xh=j(5363),ld=j(9468);const jc=new h.GfV("7.6.1"),Nh="__angularfire_symbol__analyticsIsSupportedValue",cd="__angularfire_symbol__analyticsIsSupported",Ta="__angularfire_symbol__remoteConfigIsSupportedValue",ud="__angularfire_symbol__remoteConfigIsSupported",Ei="__angularfire_symbol__messagingIsSupportedValue",dn="__angularfire_symbol__messagingIsSupported";function Wp(b,S,x){if(S){if(1===S.length)return S[0];const ue=S.filter(He=>He.app===x);if(1===ue.length)return ue[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[cd]||(globalThis[cd]=Lc().then(b=>globalThis[Nh]=b).catch(()=>globalThis[Nh]=!1)),globalThis[dn]||(globalThis[dn]=Qu().then(b=>globalThis[Ei]=b).catch(()=>globalThis[Ei]=!1)),globalThis[ud]||(globalThis[ud]=Uu().then(b=>globalThis[Ta]=b).catch(()=>globalThis[Ta]=!1));const wl=(b,S)=>{const x=S?[S]:(0,W.C6)(),G=[];return x.forEach(ne=>{ne.container.getProvider(b).instances.forEach(He=>{G.includes(He)||G.push(He)})}),G};function Rr(){}class kh{constructor(S,x=Bc){this.zone=S,this.delegate=x}now(){return this.delegate.now()}schedule(S,x,G){const ne=this.zone;return this.delegate.schedule(function(He){ne.runGuarded(()=>{S.apply(this,[He])})},x,G)}}class qp{constructor(S){this.zone=S,this.task=null}call(S,x){const G=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rr,{},Rr,Rr)),x.pipe((0,Lo.b)({next:G,complete:G,error:G})).subscribe(S).add(G)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Il=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new kh(Zone.current)),this.insideAngular=x.run(()=>new kh(Zone.current,Ts.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function bs(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Gs(b){return b.pipe((0,xh.Q)(bs().outsideAngular))}function Hc(b){return bs(),function Tl(b){return function(x){return(x=x.lift(new qp(b.ngZone))).pipe((0,ld.R)(b.outsideAngular),(0,xh.Q)(b.insideAngular))}}(bs())(b)}},45:(wt,Ne,j)=>{j.d(Ne,{$:()=>Np,A:()=>Y,G:()=>ke,K:()=>Un,L:()=>ji,N:()=>Ls,P:()=>S,R:()=>kh,U:()=>xt,V:()=>fc,W:()=>Vr,X:()=>$u,Y:()=>pc,Z:()=>ws,_:()=>Mo,a:()=>hi,a0:()=>gc,a1:()=>_i,a2:()=>Ku,a3:()=>vh,a4:()=>ga,a5:()=>wc,a6:()=>Qu,a7:()=>kp,a8:()=>Eh,a9:()=>f_,aA:()=>tc,aB:()=>Re,aC:()=>Q,aD:()=>Yp,aE:()=>Ie,aF:()=>kt,aG:()=>Kp,aH:()=>Oh,aI:()=>Bv,aJ:()=>pt,aN:()=>uo,aQ:()=>sr,aa:()=>Op,ab:()=>Xu,ac:()=>di,ad:()=>Xn,ae:()=>Fp,af:()=>yi,ag:()=>bc,ah:()=>Ju,ak:()=>_a,al:()=>Lp,am:()=>Vp,ap:()=>yh,aq:()=>Hs,as:()=>yl,at:()=>$p,au:()=>Ye,av:()=>aa,aw:()=>Ja,ax:()=>Fe,ay:()=>ig,az:()=>Jr,b:()=>sd,c:()=>nn,d:()=>Ca,e:()=>Xr,f:()=>xi,g:()=>y_,h:()=>Cl,i:()=>Lo,j:()=>Ot,k:()=>T_,l:()=>cs,m:()=>$h,p:()=>ge,r:()=>gt,s:()=>bs,u:()=>$c});var h=j(5861),W=j(2090),L=j(9681),ae=j(1877),he=j(7582),le=j(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Xe=function qe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ct=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new ae.Yd("@firebase/auth");function We(E,...g){Pe.logLevel<=ae.in.ERROR&&Pe.error(`Auth (${L.SDK_VERSION}): ${E}`,...g)}function Fe(E,...g){throw Ge(E,...g)}function Re(E,...g){return Ge(E,...g)}function Le(E,g,_){const I=Object.assign(Object.assign({},Xe()),{[g]:_});return new W.LL("auth","Firebase",I).create(g,{appName:E.name})}function Ke(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Fe(E,"argument-error"),Le(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ge(E,...g){if("string"!=typeof E){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=E.name),E._errorFactory.create(_,...I)}return ct.create(E,...g)}function Q(E,g,..._){if(!E)throw Ge(g,..._)}function Ce(E){const g="INTERNAL ASSERTION FAILED: "+E;throw We(g),new Error(g)}function Ye(E,g){E||Ce(g)}function Qe(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Mt(){return"http:"===nt()||"https:"===nt()}function nt(){var E;return typeof self<"u"&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class Dn{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ye(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function Ln(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Mt()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Wr(E,g){Ye(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class de{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void Ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void Ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void Ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},me=new Dn(3e4,6e4);function se(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function Se(E,g,_,I){return ze.apply(this,arguments)}function ze(){return(ze=(0,h.Z)(function*(E,g,_,I,P={}){return mt(E,P,(0,h.Z)(function*(){let F={},te={};I&&("GET"===g?te=I:F={body:JSON.stringify(I)});const fe=(0,W.xO)(Object.assign({key:E.config.apiKey},te)).slice(1),Ve=yield E._getAdditionalHeaders();return Ve["Content-Type"]="application/json",E.languageCode&&(Ve["X-Firebase-Locale"]=E.languageCode),de.fetch()(Qt(E,E.config.apiHost,_,fe),Object.assign({method:g,headers:Ve,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function mt(E,g,_){return ut.apply(this,arguments)}function ut(){return(ut=(0,h.Z)(function*(E,g,_){E._canInitEmulator=!1;const I=Object.assign(Object.assign({},_e),g);try{const P=new Sn(E),F=yield Promise.race([_(),P.promise]);P.clearNetworkTimeout();const te=yield F.json();if("needConfirmation"in te)throw Gn(E,"account-exists-with-different-credential",te);if(F.ok&&!("errorMessage"in te))return te;{const fe=F.ok?te.errorMessage:te.error.message,[Ve,dt]=fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Gn(E,"credential-already-in-use",te);if("EMAIL_EXISTS"===Ve)throw Gn(E,"email-already-in-use",te);if("USER_DISABLED"===Ve)throw Gn(E,"user-disabled",te);const bt=I[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(dt)throw Le(E,bt,dt);Fe(E,bt)}}catch(P){if(P instanceof W.ZR)throw P;Fe(E,"network-request-failed",{message:String(P)})}})).apply(this,arguments)}function cn(E,g,_,I){return St.apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(E,g,_,I,P={}){const F=yield Se(E,g,_,I,P);return"mfaPendingCredential"in F&&Fe(E,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function Qt(E,g,_,I){const P=`${g}${_}?${I}`;return E.config.emulator?Wr(E.config,P):`${E.config.apiScheme}://${P}`}function vn(E){switch(E){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Re(this.auth,"network-request-failed")),me.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gn(E,g,_){const I={appName:E.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const P=Re(E,g,I);return P.customData._tokenResponse=_,P}function Zn(E){return void 0!==E&&void 0!==E.getResponse}function Rn(E){return void 0!==E&&void 0!==E.enterprise}class rr{constructor(g){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=g.recaptchaEnforcementState}getProviderEnforcementState(g){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const _ of this.recaptchaEnforcementState)if(_.provider&&_.provider===g)return vn(_.enforcementState);return null}isProviderEnabled(g){return"ENFORCE"===this.getProviderEnforcementState(g)||"AUDIT"===this.getProviderEnforcementState(g)}}function Pn(){return(Pn=(0,h.Z)(function*(E){return(yield Se(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _t(E,g){return On.apply(this,arguments)}function On(){return(On=(0,h.Z)(function*(E,g){return Se(E,"GET","/v2/recaptchaConfig",se(E,g))})).apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function dr(){return(dr=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Et(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function yr(){return(yr=(0,h.Z)(function*(E,g=!1){const _=(0,W.m9)(E),I=yield _.getIdToken(g),P=Nr(I);Q(P&&P.exp&&P.auth_time&&P.iat,_.auth,"internal-error");const F="object"==typeof P.firebase?P.firebase:void 0,te=F?.sign_in_provider;return{claims:P,token:I,authTime:Et(zn(P.auth_time)),issuedAtTime:Et(zn(P.iat)),expirationTime:Et(zn(P.exp)),signInProvider:te||null,signInSecondFactor:F?.sign_in_second_factor||null}})).apply(this,arguments)}function zn(E){return 1e3*Number(E)}function Nr(E){const[g,_,I]=E.split(".");if(void 0===g||void 0===_||void 0===I)return We("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,W.tV)(_);return P?JSON.parse(P):(We("Failed to decode base64 JWT payload"),null)}catch(P){return We("Caught error parsing JWT payload as JSON",P?.toString()),null}}function qr(E,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,h.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof W.ZR&&function oi({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}(I)&&E.auth.currentUser===E&&(yield E.auth.signOut()),I}})).apply(this,arguments)}class Jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const P=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,P)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,h.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class Es{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Et(this.lastLoginAt),this.creationTime=Et(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function qt(E){return rt.apply(this,arguments)}function rt(){return rt=(0,h.Z)(function*(E){var g;const _=E.auth,I=yield E.getIdToken(),P=yield qr(E,function En(E,g){return Mn.apply(this,arguments)}(_,{idToken:I}));Q(P?.users.length,_,"internal-error");const F=P.users[0];E._notifyReloadListener(F);const te=null!==(g=F.providerUserInfo)&&void 0!==g&&g.length?function Xt(E){return E.map(g=>{var{providerId:_}=g,I=(0,he._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}(F.providerUserInfo):[],fe=function Rt(E,g){return[...E.filter(I=>!g.some(P=>P.providerId===I.providerId)),...g]}(E.providerData,te),bt=!!E.isAnonymous&&!(E.email&&F.passwordHash||fe?.length),tn={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:fe,metadata:new Es(F.createdAt,F.lastLoginAt),isAnonymous:bt};Object.assign(E,tn)}),rt.apply(this,arguments)}function Je(){return(Je=(0,h.Z)(function*(E){const g=(0,W.m9)(E);yield qt(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Hn(){return(Hn=(0,h.Z)(function*(E,g){const _=yield mt(E,{},(0,h.Z)(function*(){const I=(0,W.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:P,apiKey:F}=E.config,te=Qt(E,P,"/v1/token",`key=${F}`),fe=yield E._getAdditionalHeaders();return fe["Content-Type"]="application/x-www-form-urlencoded",de.fetch()(te,{method:"POST",headers:fe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}function z(){return(z=(0,h.Z)(function*(E,g){return Se(E,"POST","/v2/accounts:revokeToken",se(E,g))})).apply(this,arguments)}class V{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Q(g.idToken,"internal-error"),Q(typeof g.idToken<"u","internal-error"),Q(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function kr(E){const g=Nr(E);return Q(g,"internal-error"),Q(typeof g.exp<"u","internal-error"),Q(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,h.Z)(function*(){return Q(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,h.Z)(function*(){const{accessToken:P,refreshToken:F,expiresIn:te}=yield function mn(E,g){return Hn.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(P,F,Number(te))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:P,expirationTime:F}=_,te=new V;return I&&(Q("string"==typeof I,"internal-error",{appName:g}),te.refreshToken=I),P&&(Q("string"==typeof P,"internal-error",{appName:g}),te.accessToken=P),F&&(Q("number"==typeof F,"internal-error",{appName:g}),te.expirationTime=F),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new V,this.toJSON())}_performRefresh(){return Ce("not implemented")}}function U(E,g){Q("string"==typeof E||typeof E>"u","internal-error",{appName:g})}class N{constructor(g){var{uid:_,auth:I,stsTokenManager:P}=g,F=(0,he._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=P,this.accessToken=P.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Es(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,h.Z)(function*(){const I=yield qr(_,_.stsTokenManager.getToken(_.auth,g));return Q(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function ir(E){return yr.apply(this,arguments)}(this,g)}reload(){return function Me(E){return Je.apply(this,arguments)}(this)}_assign(g){this!==g&&(Q(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const _=new N(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return _.metadata._copy(this.metadata),_}_onReload(g){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,h.Z)(function*(){let P=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),P=!0),_&&(yield qt(I)),yield I.auth._persistUserIfCurrent(I),P&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,h.Z)(function*(){const _=yield g.getIdToken();return yield qr(g,function Bi(E,g){return Vn.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,P,F,te,fe,Ve,dt,bt;const tn=null!==(I=_.displayName)&&void 0!==I?I:void 0,ar=null!==(P=_.email)&&void 0!==P?P:void 0,po=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,zs=null!==(te=_.photoURL)&&void 0!==te?te:void 0,Qc=null!==(fe=_.tenantId)&&void 0!==fe?fe:void 0,$o=null!==(Ve=_._redirectEventId)&&void 0!==Ve?Ve:void 0,Xc=null!==(dt=_.createdAt)&&void 0!==dt?dt:void 0,Ml=null!==(bt=_.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:dg,emailVerified:S_,isAnonymous:$v,providerData:hg,stsTokenManager:zh}=_;Q(dg&&zh,g,"internal-error");const Gv=V.fromJSON(this.name,zh);Q("string"==typeof dg,g,"internal-error"),U(tn,g.name),U(ar,g.name),Q("boolean"==typeof S_,g,"internal-error"),Q("boolean"==typeof $v,g,"internal-error"),U(po,g.name),U(zs,g.name),U(Qc,g.name),U($o,g.name),U(Xc,g.name),U(Ml,g.name);const Wh=new N({uid:dg,auth:g,email:ar,emailVerified:S_,displayName:tn,isAnonymous:$v,photoURL:zs,phoneNumber:po,tenantId:Qc,stsTokenManager:Gv,createdAt:Xc,lastLoginAt:Ml});return hg&&Array.isArray(hg)&&(Wh.providerData=hg.map(qh=>Object.assign({},qh))),$o&&(Wh._redirectEventId=$o),Wh}static _fromIdTokenResponse(g,_,I=!1){return(0,h.Z)(function*(){const P=new V;P.updateFromServerResponse(_);const F=new N({uid:_.localId,auth:g,stsTokenManager:P,isAnonymous:I});return yield qt(F),F})()}}const ee=new Map;function Ie(E){Ye(E instanceof Function,"Expected a class definition");let g=ee.get(E);return g?(Ye(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,ee.set(E,g),g)}const xt=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,I){var P=this;return(0,h.Z)(function*(){P.storage[_]=I})()}_get(_){var I=this;return(0,h.Z)(function*(){const P=I.storage[_];return void 0===P?null:P})()}_remove(_){var I=this;return(0,h.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return E.type="NONE",E})();function kt(E,g,_){return`firebase:${E}:${g}:${_}`}class Ht{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:P,name:F}=this.auth;this.fullUserKey=kt(this.userKey,P.apiKey,F),this.fullPersistenceKey=kt("persistence",P.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,h.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?N._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,h.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,h.Z)(function*(){if(!_.length)return new Ht(Ie(xt),g,I);const P=(yield Promise.all(_.map(function(){var dt=(0,h.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return dt.apply(this,arguments)}}()))).filter(dt=>dt);let F=P[0]||Ie(xt);const te=kt(I,g.config.apiKey,g.name);let fe=null;for(const dt of _)try{const bt=yield dt._get(te);if(bt){const tn=N._fromJSON(g,bt);dt!==F&&(fe=tn),F=dt;break}}catch{}const Ve=P.filter(dt=>dt._shouldAllowMigration);return F._shouldAllowMigration&&Ve.length?(F=Ve[0],fe&&(yield F._set(te,fe.toJSON())),yield Promise.all(_.map(function(){var dt=(0,h.Z)(function*(bt){if(bt!==F)try{yield bt._remove(te)}catch{}});return function(bt){return dt.apply(this,arguments)}}())),new Ht(F,g,I)):new Ht(F,g,I)})()}}function Vt(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ec(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Yn(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(oa(g))return"Blackberry";if(Ou(g))return"Webos";if(zt(g))return"Safari";if((g.includes("chrome/")||Si(g))&&!g.includes("edge/"))return"Chrome";if(Ja(g))return"Android";{const I=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function Yn(E=(0,W.z$)()){return/firefox\//i.test(E)}function zt(E=(0,W.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Si(E=(0,W.z$)()){return/crios\//i.test(E)}function ec(E=(0,W.z$)()){return/iemobile/i.test(E)}function Ja(E=(0,W.z$)()){return/android/i.test(E)}function oa(E=(0,W.z$)()){return/blackberry/i.test(E)}function Ou(E=(0,W.z$)()){return/webos/i.test(E)}function aa(E=(0,W.z$)()){return/iphone|ipad|ipod/i.test(E)||/macintosh/i.test(E)&&/mobile/i.test(E)}function tc(E=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function vr(E=(0,W.z$)()){return aa(E)||Ja(E)||Ou(E)||oa(E)||/windows phone/i.test(E)||ec(E)}function Os(E,g=[]){let _;switch(E){case"Browser":_=Vt((0,W.z$)());break;case"Worker":_=`${Vt((0,W.z$)())}-${E}`;break;default:_=E}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${L.SDK_VERSION}/${I}`}class ai{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=F=>new Promise((te,fe)=>{try{te(g(F))}catch(Ve){fe(Ve)}});I.onAbort=_,this.queue.push(I);const P=this.queue.length-1;return()=>{this.queue[P]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,h.Z)(function*(){if(_.auth.currentUser===g)return;const I=[];try{for(const P of _.queue)yield P(g),P.onAbort&&I.push(P.onAbort)}catch(P){I.reverse();for(const F of I)try{F()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:P?.message})}})()}}function Kr(){return(Kr=(0,h.Z)(function*(E,g={}){return Se(E,"GET","/v2/passwordPolicy",se(E,g))})).apply(this,arguments)}class es{constructor(g){var _,I,P,F;const te=g.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(_=te.minPasswordLength)&&void 0!==_?_:6,te.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=te.maxPasswordLength),void 0!==te.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=te.containsLowercaseCharacter),void 0!==te.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=te.containsUppercaseCharacter),void 0!==te.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=te.containsNumericCharacter),void 0!==te.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=te.containsNonAlphanumericCharacter),this.enforcementState=g.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(P=null===(I=g.allowedNonAlphanumericCharacters)||void 0===I?void 0:I.join(""))&&void 0!==P?P:"",this.forceUpgradeOnSignin=null!==(F=g.forceUpgradeOnSignin)&&void 0!==F&&F,this.schemaVersion=g.schemaVersion}validatePassword(g){var _,I,P,F,te,fe;const Ve={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(g,Ve),this.validatePasswordCharacterOptions(g,Ve),Ve.isValid&&(Ve.isValid=null===(_=Ve.meetsMinPasswordLength)||void 0===_||_),Ve.isValid&&(Ve.isValid=null===(I=Ve.meetsMaxPasswordLength)||void 0===I||I),Ve.isValid&&(Ve.isValid=null===(P=Ve.containsLowercaseLetter)||void 0===P||P),Ve.isValid&&(Ve.isValid=null===(F=Ve.containsUppercaseLetter)||void 0===F||F),Ve.isValid&&(Ve.isValid=null===(te=Ve.containsNumericCharacter)||void 0===te||te),Ve.isValid&&(Ve.isValid=null===(fe=Ve.containsNonAlphanumericCharacter)||void 0===fe||fe),Ve}validatePasswordLengthOptions(g,_){const I=this.customStrengthOptions.minPasswordLength,P=this.customStrengthOptions.maxPasswordLength;I&&(_.meetsMinPasswordLength=g.length>=I),P&&(_.meetsMaxPasswordLength=g.length<=P)}validatePasswordCharacterOptions(g,_){let I;this.updatePasswordCharacterOptionsStatuses(_,!1,!1,!1,!1);for(let P=0;P<g.length;P++)I=g.charAt(P),this.updatePasswordCharacterOptionsStatuses(_,I>="a"&&I<="z",I>="A"&&I<="Z",I>="0"&&I<="9",this.allowedNonAlphanumericCharacters.includes(I))}updatePasswordCharacterOptionsStatuses(g,_,I,P,F){this.customStrengthOptions.containsLowercaseLetter&&(g.containsLowercaseLetter||(g.containsLowercaseLetter=_)),this.customStrengthOptions.containsUppercaseLetter&&(g.containsUppercaseLetter||(g.containsUppercaseLetter=I)),this.customStrengthOptions.containsNumericCharacter&&(g.containsNumericCharacter||(g.containsNumericCharacter=P)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(g.containsNonAlphanumericCharacter||(g.containsNonAlphanumericCharacter=F))}}class at{constructor(g,_,I,P){this.app=g,this.heartbeatServiceProvider=_,this.appCheckServiceProvider=I,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.beforeStateQueue=new ai(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ct,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=Ie(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var P,F;if(!I._deleted&&(I.persistenceManager=yield Ht.create(I,g),!I._deleted)){if(null!==(P=I._popupRedirectResolver)&&void 0!==P&&P._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(F=I.currentUser)||void 0===F?void 0:F.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,h.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,h.Z)(function*(){var I;const P=yield _.assertedPersistence.getCurrentUser();let F=P,te=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const fe=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,Ve=F?._redirectEventId,dt=yield _.tryRedirectSignIn(g);(!fe||fe===Ve)&&dt?.user&&(F=dt.user,te=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(te)try{yield _.beforeStateQueue.runMiddleware(F)}catch(fe){F=P,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(fe))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return Q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(g){var _=this;return(0,h.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,h.Z)(function*(){try{yield qt(g)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function xr(){if(typeof navigator>"u")return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,h.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,h.Z)(function*(){const I=g?(0,W.m9)(g):null;return I&&Q(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,h.Z)(function*(){if(!I._deleted)return g&&Q(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,h.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,h.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(Ie(g))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(g){var _=this;return(0,h.Z)(function*(){_._getPasswordPolicyInternal()||(yield _._updatePasswordPolicy());const I=_._getPasswordPolicyInternal();return I.schemaVersion!==_.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(_._errorFactory.create("unsupported-password-policy-schema-version",{})):I.validatePassword(g)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var g=this;return(0,h.Z)(function*(){const _=yield function hh(E){return Kr.apply(this,arguments)}(g),I=new es(_);null===g.tenantId?g._projectPasswordPolicy=I:g._tenantPasswordPolicies[g.tenantId]=I})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new W.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}authStateReady(){return new Promise((g,_)=>{if(this.currentUser)g();else{const I=this.onAuthStateChanged(()=>{I(),g()},_)}})}revokeAccessToken(g){var _=this;return(0,h.Z)(function*(){if(_.currentUser){const I=yield _.currentUser.getIdToken(),P={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:g,idToken:I};null!=_.tenantId&&(P.tenantId=_.tenantId),yield function q(E,g){return z.apply(this,arguments)}(_,P)}})()}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,h.Z)(function*(){const P=yield I.getOrInitRedirectPersistenceManager(_);return null===g?P.removeCurrentUser():P.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&Ie(g)||_._popupRedirectResolver;Q(I,_,"argument-error"),_.redirectPersistenceManager=yield Ht.create(_,[Ie(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,h.Z)(function*(){var I,P;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(P=_.redirectUser)||void 0===P?void 0:P._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,h.Z)(function*(){if(g===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,P){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_);let te=!1;const fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(fe,this,"internal-error"),fe.then(()=>{te||F(this.currentUser)}),"function"==typeof _){const Ve=g.addObserver(_,I,P);return()=>{te=!0,Ve()}}{const Ve=g.addObserver(_);return()=>{te=!0,Ve()}}}directlySetCurrentUser(g){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,h.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const P=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();P&&(I["X-Firebase-Client"]=P);const F=yield g._getAppCheckToken();return F&&(I["X-Firebase-AppCheck"]=F),I})()}_getAppCheckToken(){var g=this;return(0,h.Z)(function*(){var _;const I=yield null===(_=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getToken();return I?.error&&function xe(E,...g){Pe.logLevel<=ae.in.WARN&&Pe.warn(`Auth (${L.SDK_VERSION}): ${E}`,...g)}(`Error while retrieving App Check token: ${I.error}`),I?.token})()}}function pt(E){return(0,W.m9)(E)}class Wn{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,W.ne)(_=>this.observer=_)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let br={loadJS:()=>(0,h.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cr(E){return br.loadJS(E)}function ts(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Fu="NO_RECAPTCHA";class Do{constructor(g){this.type="recaptcha-enterprise",this.auth=pt(g)}verify(g="verify",_=!1){var I=this;return(0,h.Z)(function*(){function F(){return F=(0,h.Z)(function*(fe){if(!_){if(null==fe.tenantId&&null!=fe._agentRecaptchaConfig)return fe._agentRecaptchaConfig.siteKey;if(null!=fe.tenantId&&void 0!==fe._tenantRecaptchaConfigs[fe.tenantId])return fe._tenantRecaptchaConfigs[fe.tenantId].siteKey}return new Promise(function(){var Ve=(0,h.Z)(function*(dt,bt){_t(fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tn=>{if(void 0!==tn.recaptchaKey){const ar=new rr(tn);return null==fe.tenantId?fe._agentRecaptchaConfig=ar:fe._tenantRecaptchaConfigs[fe.tenantId]=ar,dt(ar.siteKey)}bt(new Error("recaptcha Enterprise site key undefined"))}).catch(tn=>{bt(tn)})});return function(dt,bt){return Ve.apply(this,arguments)}}())}),F.apply(this,arguments)}function te(fe,Ve,dt){const bt=window.grecaptcha;Rn(bt)?bt.enterprise.ready(()=>{bt.enterprise.execute(fe,{action:g}).then(tn=>{Ve(tn)}).catch(()=>{Ve(Fu)})}):dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((fe,Ve)=>{(function P(fe){return F.apply(this,arguments)})(I.auth).then(dt=>{if(!_&&Rn(window.grecaptcha))te(dt,fe,Ve);else{if(typeof window>"u")return void Ve(new Error("RecaptchaVerifier is only supported in browser"));let bt=function Qn(){return br.recaptchaEnterpriseScript}();0!==bt.length&&(bt+=dt),Cr(bt).then(()=>{te(dt,fe,Ve)}).catch(tn=>{Ve(tn)})}}).catch(dt=>{Ve(dt)})})})()}}function rc(E,g,_){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(E,g,_,I=!1){const P=new Do(E);let F;try{F=yield P.verify(_)}catch{F=yield P.verify(_,!0)}const te=Object.assign({},g);return Object.assign(te,I?{captchaResp:F}:{captchaResponse:F}),Object.assign(te,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(te,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),te})).apply(this,arguments)}function Er(E,g,_,I){return la.apply(this,arguments)}function la(){return la=(0,h.Z)(function*(E,g,_,I){var P;if(null!==(P=E._getRecaptchaConfig())&&void 0!==P&&P.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const F=yield rc(E,g,_,"getOobCode"===_);return I(E,F)}return I(E,g).catch(function(){var F=(0,h.Z)(function*(te){if("auth/missing-recaptcha-token"===te.code){console.log(`${_} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const fe=yield rc(E,g,_,"getOobCode"===_);return I(E,fe)}return Promise.reject(te)});return function(te){return F.apply(this,arguments)}}())}),la.apply(this,arguments)}function Un(E,g,_){const I=pt(E);Q(I._canInitEmulator,I,"emulator-config-failed"),Q(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const P=!!_?.disableWarnings,F=is(g),{host:te,port:fe}=function Lu(E){const g=is(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",P=/^(\[[^\]]+\])(:|$)/.exec(I);if(P){const F=P[1];return{host:F,port:Vu(I.substr(F.length+1))}}{const[F,te]=I.split(":");return{host:F,port:Vu(te)}}}(g);I.config.emulator={url:`${F}//${te}${null===fe?"":`:${fe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:fe,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:P})}),P||function sc(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function is(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function Vu(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class ji{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Ce("not implemented")}_getIdTokenResponse(g){return Ce("not implemented")}_linkToIdToken(g,_){return Ce("not implemented")}_getReauthenticationResolver(g){return Ce("not implemented")}}function Ri(E,g){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:resetPassword",se(E,g))})).apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ss(E,g){return tl.apply(this,arguments)}function tl(){return(tl=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:signUp",g)})).apply(this,arguments)}function rl(){return(rl=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",se(E,g))})).apply(this,arguments)}function Pi(E,g){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPassword",se(E,g))})).apply(this,arguments)}function il(E,g){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:sendOobCode",se(E,g))})).apply(this,arguments)}function ju(){return(ju=(0,h.Z)(function*(E,g){return il(E,g)})).apply(this,arguments)}function u_(E,g){return oc.apply(this,arguments)}function oc(){return(oc=(0,h.Z)(function*(E,g){return il(E,g)})).apply(this,arguments)}function d_(E,g){return fh.apply(this,arguments)}function fh(){return(fh=(0,h.Z)(function*(E,g){return il(E,g)})).apply(this,arguments)}function Hu(){return(Hu=(0,h.Z)(function*(E,g){return il(E,g)})).apply(this,arguments)}function Fs(){return(Fs=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithEmailLink",se(E,g))})).apply(this,arguments)}function sl(){return(sl=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithEmailLink",se(E,g))})).apply(this,arguments)}class ol extends ji{constructor(g,_,I,P=null){super("password",I),this._email=g,this._password=_,this._tenantId=P}static _fromEmailAndPassword(g,_){return new ol(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new ol(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return Er(g,{returnSecureToken:!0,email:_._email,password:_._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Pi);case"emailLink":return function Ro(E,g){return Fs.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Fe(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,h.Z)(function*(){switch(I.signInMethod){case"password":return Er(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ss);case"emailLink":return function Lv(E,g){return sl.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Fe(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function os(E,g){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithIdp",se(E,g))})).apply(this,arguments)}class Ls extends ji{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ls(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Fe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:P}=_,F=(0,he._T)(_,["providerId","signInMethod"]);if(!I||!P)return null;const te=new Ls(I,P);return te.idToken=F.idToken||void 0,te.accessToken=F.accessToken||void 0,te.secret=F.secret,te.nonce=F.nonce,te.pendingToken=F.pendingToken||null,te}_getIdTokenResponse(g){return os(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,os(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,os(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,W.xO)(_)}return g}}function ao(){return(ao=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:sendVerificationCode",se(E,g))})).apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",se(E,g))})).apply(this,arguments)}function cc(){return(cc=(0,h.Z)(function*(E,g){const _=yield cn(E,"POST","/v1/accounts:signInWithPhoneNumber",se(E,g));if(_.temporaryProof)throw Gn(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const uc={USER_NOT_FOUND:"user-not-found"};function al(){return(al=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithPhoneNumber",se(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),uc)})).apply(this,arguments)}class lo extends ji{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new lo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new lo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function ca(E,g){return ua.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function lc(E,g){return cc.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function dc(E,g){return al.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:P}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:P}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:P,temporaryProof:F}=g;return I||_||P||F?new lo({verificationId:_,verificationCode:I,phoneNumber:P,temporaryProof:F}):null}}class ci{constructor(g){var _,I,P,F,te,fe;const Ve=(0,W.zd)((0,W.pd)(g)),dt=null!==(_=Ve.apiKey)&&void 0!==_?_:null,bt=null!==(I=Ve.oobCode)&&void 0!==I?I:null,tn=function hc(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(P=Ve.mode)&&void 0!==P?P:null);Q(dt&&bt&&tn,"argument-error"),this.apiKey=dt,this.operation=tn,this.code=bt,this.continueUrl=null!==(F=Ve.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(te=Ve.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(fe=Ve.tenantId)&&void 0!==fe?fe:null}static parseLink(g){const _=function ll(E){const g=(0,W.zd)((0,W.pd)(E)).link,_=g?(0,W.zd)((0,W.pd)(g)).deep_link_id:null,I=(0,W.zd)((0,W.pd)(E)).deep_link_id;return(I?(0,W.zd)((0,W.pd)(I)).link:null)||I||_||g||E}(g);try{return new ci(_)}catch{return null}}}let fc=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,I){return ol._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const P=ci.parseLink(I);return Q(P,"argument-error"),ol._fromEmailAndCode(_,P.code,P.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class xn{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Vs extends xn{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ws extends Vs{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Q("providerId"in _&&"signInMethod"in _,"argument-error"),Ls._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Q(g.idToken||g.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ws.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ws.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:P,pendingToken:F,nonce:te,providerId:fe}=g;if(!I&&!P&&!_&&!F||!fe)return null;try{return new ws(fe)._credential({idToken:_,accessToken:I,nonce:te,pendingToken:F})}catch{return null}}}let Vr=(()=>{class E extends Vs{constructor(){super("facebook.com")}static credential(_){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),$u=(()=>{class E extends Vs{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:P}=_;if(!I&&!P)return null;try{return E.credential(I,P)}catch{return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),pc=(()=>{class E extends Vs{constructor(){super("github.com")}static credential(_){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch{return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class sr extends ji{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return os(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,os(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,os(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:P,pendingToken:F}=_;return I&&P&&F&&I===P?new sr(I,F):null}static _create(g,_){return new sr(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Mo extends xn{constructor(g){Q(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Mo.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Mo.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=sr.fromJSON(g);return Q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return sr._create(I,_)}catch{return null}}}let Np=(()=>{class E extends Vs{constructor(){super("twitter.com")}static credential(_,I){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:P}=_;if(!I||!P)return null;try{return E.credential(I,P)}catch{return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Is(E,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signUp",se(E,g))})).apply(this,arguments)}class Zr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,P=!1){return(0,h.Z)(function*(){const F=yield N._fromIdTokenResponse(g,I,P),te=Gt(I);return new Zr({user:F,providerId:te,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,h.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const P=Gt(I);return new Zr({user:g,providerId:P,_tokenResponse:I,operationType:_})})()}}function Gt(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function gc(E){return mh.apply(this,arguments)}function mh(){return(mh=(0,h.Z)(function*(E){var g;const _=pt(E);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new Zr({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Is(_,{returnSecureToken:!0}),P=yield Zr._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(P.user),P})).apply(this,arguments)}class da extends W.ZR{constructor(g,_,I,P){var F;super(_.code,_.message),this.operationType=I,this.user=P,Object.setPrototypeOf(this,da.prototype),this.customData={appName:g.name,tenantId:null!==(F=g.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,P){return new da(g,_,I,P)}}function _h(E,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?da._fromErrorAndOperation(E,F,g,I):F})}function mc(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function yh(E,g){return Gu.apply(this,arguments)}function Gu(){return Gu=(0,h.Z)(function*(E,g){const _=(0,W.m9)(E);yield an(!0,_,g);const{providerUserInfo:I}=yield function vs(E,g){return dr.apply(this,arguments)}(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),P=mc(I||[]);return _.providerData=_.providerData.filter(F=>P.has(F.providerId)),P.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_}),Gu.apply(this,arguments)}function zu(E,g){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,h.Z)(function*(E,g,_=!1){const I=yield qr(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return Zr._forOperation(E,"link",I)})).apply(this,arguments)}function an(E,g,_){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,h.Z)(function*(E,g,_){yield qt(g);const P=!1===E?"provider-already-linked":"no-such-provider";Q(mc(g.providerData).has(_)===E,g.auth,P)})).apply(this,arguments)}function qu(E,g){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,h.Z)(function*(E,g,_=!1){const{auth:I}=E,P="reauthenticate";try{const F=yield qr(E,_h(I,P,g,E),_);Q(F.idToken,I,"internal-error");const te=Nr(F.idToken);Q(te,I,"internal-error");const{sub:fe}=te;return Q(E.uid===fe,I,"user-mismatch"),Zr._forOperation(E,P,F)}catch(F){throw"auth/user-not-found"===F?.code&&Fe(I,"user-mismatch"),F}})).apply(this,arguments)}function _c(E,g){return ha.apply(this,arguments)}function ha(){return(ha=(0,h.Z)(function*(E,g,_=!1){const I="signIn",P=yield _h(E,I,g),F=yield Zr._fromIdTokenResponse(E,I,P);return _||(yield E._updateCurrentUser(F.user)),F})).apply(this,arguments)}function _i(E,g){return fa.apply(this,arguments)}function fa(){return(fa=(0,h.Z)(function*(E,g){return _c(pt(E),g)})).apply(this,arguments)}function Ku(E,g){return yc.apply(this,arguments)}function yc(){return(yc=(0,h.Z)(function*(E,g){const _=(0,W.m9)(E);return yield an(!1,_,g.providerId),zu(_,g)})).apply(this,arguments)}function vh(E,g){return pa.apply(this,arguments)}function pa(){return(pa=(0,h.Z)(function*(E,g){return qu((0,W.m9)(E),g)})).apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(E,g){return cn(E,"POST","/v1/accounts:signInWithCustomToken",se(E,g))})).apply(this,arguments)}function ga(E,g){return Us.apply(this,arguments)}function Us(){return Us=(0,h.Z)(function*(E,g){const _=pt(E),I=yield function Yr(E,g){return ui.apply(this,arguments)}(_,{token:g,returnSecureToken:!0}),P=yield Zr._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(P.user),P}),Us.apply(this,arguments)}class Hi{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?vc._fromServerResponse(g,_):"totpInfo"in _?xo._fromServerResponse(g,_):Fe(g,"internal-error")}}class vc extends Hi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new vc(_)}}class xo extends Hi{constructor(g){super("totp",g)}static _fromServerResponse(g,_){return new xo(_)}}function Ec(E,g,_){var I;Q((null===(I=_.url)||void 0===I?void 0:I.length)>0,E,"invalid-continue-uri"),Q(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Q(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Q(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Zu(E){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(E){const g=pt(E);g._getPasswordPolicyInternal()&&(yield g._updatePasswordPolicy())})).apply(this,arguments)}function wc(E,g,_){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,h.Z)(function*(E,g,_){const I=pt(E),P={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};_&&Ec(I,P,_),yield Er(I,P,"getOobCode",u_)})).apply(this,arguments)}function Qu(E,g,_){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,h.Z)(function*(E,g,_){yield Ri((0,W.m9)(E),{oobCode:g,newPassword:_}).catch(function(){var I=(0,h.Z)(function*(P){throw"auth/password-does-not-meet-requirements"===P.code&&Zu(E),P});return function(P){return I.apply(this,arguments)}}())}),Ic.apply(this,arguments)}function kp(E,g){return ma.apply(this,arguments)}function ma(){return ma=(0,h.Z)(function*(E,g){yield function nl(E,g){return rl.apply(this,arguments)}((0,W.m9)(E),{oobCode:g})}),ma.apply(this,arguments)}function Eh(E,g){return wh.apply(this,arguments)}function wh(){return(wh=(0,h.Z)(function*(E,g){const _=(0,W.m9)(E),I=yield Ri(_,{oobCode:g}),P=I.requestType;switch(Q(P,_,"internal-error"),P){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Q(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Q(I.mfaInfo,_,"internal-error");default:Q(I.email,_,"internal-error")}let F=null;return I.mfaInfo&&(F=Hi._fromServerResponse(pt(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:F},operation:P}})).apply(this,arguments)}function f_(E,g){return dl.apply(this,arguments)}function dl(){return(dl=(0,h.Z)(function*(E,g){const{data:_}=yield Eh((0,W.m9)(E),g);return _.email})).apply(this,arguments)}function Op(E,g,_){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,h.Z)(function*(E,g,_){const I=pt(E),te=yield Er(I,{returnSecureToken:!0,email:g,password:_,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Is).catch(Ve=>{throw"auth/password-does-not-meet-requirements"===Ve.code&&Zu(E),Ve}),fe=yield Zr._fromIdTokenResponse(I,"signIn",te);return yield I._updateCurrentUser(fe.user),fe})).apply(this,arguments)}function Xu(E,g,_){return _i((0,W.m9)(E),fc.credential(g,_)).catch(function(){var I=(0,h.Z)(function*(P){throw"auth/password-does-not-meet-requirements"===P.code&&Zu(E),P});return function(P){return I.apply(this,arguments)}}())}function di(E,g,_){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,h.Z)(function*(E,g,_){const I=pt(E),P={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};(function F(te,fe){Q(fe.handleCodeInApp,I,"argument-error"),fe&&Ec(I,te,fe)})(P,_),yield Er(I,P,"getOobCode",d_)})).apply(this,arguments)}function Xn(E,g){return"EMAIL_SIGNIN"===ci.parseLink(g)?.operation}function Fp(E,g,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E),P=fc.credentialWithLink(g,_||Qe());return Q(P._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),_i(I,P)})).apply(this,arguments)}function Th(){return(Th=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:createAuthUri",se(E,g))})).apply(this,arguments)}function yi(E,g){return bh.apply(this,arguments)}function bh(){return bh=(0,h.Z)(function*(E,g){const I={identifier:g,continueUri:Mt()?Qe():"http://localhost"},{signinMethods:P}=yield function Dr(E,g){return Th.apply(this,arguments)}((0,W.m9)(E),I);return P||[]}),bh.apply(this,arguments)}function bc(E,g){return hl.apply(this,arguments)}function hl(){return hl=(0,h.Z)(function*(E,g){const _=(0,W.m9)(E),P={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Ec(_.auth,P,g);const{email:F}=yield function Mp(E,g){return ju.apply(this,arguments)}(_.auth,P);F!==E.email&&(yield E.reload())}),hl.apply(this,arguments)}function Ju(E,g,_){return fl.apply(this,arguments)}function fl(){return fl=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&Ec(I.auth,F,_);const{email:te}=yield function h_(E,g){return Hu.apply(this,arguments)}(I.auth,F);te!==E.email&&(yield E.reload())}),fl.apply(this,arguments)}function js(){return(js=(0,h.Z)(function*(E,g){return Se(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function _a(E,g){return $i.apply(this,arguments)}function $i(){return $i=(0,h.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,W.m9)(E),F={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield qr(I,function Cc(E,g){return js.apply(this,arguments)}(I.auth,F));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const fe=I.providerData.find(({providerId:Ve})=>"password"===Ve);fe&&(fe.displayName=I.displayName,fe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)}),$i.apply(this,arguments)}function Lp(E,g){return Ac((0,W.m9)(E),g,null)}function Vp(E,g){return Ac((0,W.m9)(E),null,g)}function Ac(E,g,_){return Ch.apply(this,arguments)}function Ch(){return Ch=(0,h.Z)(function*(E,g,_){const{auth:I}=E,F={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(F.email=g),_&&(F.password=_);const te=yield qr(E,function c_(E,g){return li.apply(this,arguments)}(I,F));yield E._updateTokensIfNecessary(te,!0)}),Ch.apply(this,arguments)}class ya{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class pl extends ya{constructor(g,_,I,P){super(g,_,I),this.username=P}}class ed extends ya{constructor(g,_){super(g,"facebook.com",_)}}class Dc extends pl{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class gl extends ya{constructor(g,_){super(g,"google.com",_)}}class va extends pl{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Hs(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Up(E){var g,_;if(!E)return null;const{providerId:I}=E,P=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},F=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!I&&E?.idToken){const te=null===(_=null===(g=Nr(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new ya(F,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new ed(F,P);case"github.com":return new Dc(F,P);case"google.com":return new gl(F,P);case"twitter.com":return new va(F,P,E.screenName||null);case"custom":case"anonymous":return new ya(F,null);default:return new ya(F,I,P)}}(_)}class Gi{constructor(g,_,I){this.type=g,this.credential=_,this.user=I}static _fromIdtoken(g,_){return new Gi("enroll",g,_)}static _fromMfaPendingCredential(g){return new Gi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Gi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return Gi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ea{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=pt(g),P=_.customData._serverResponse,F=(P.mfaInfo||[]).map(fe=>Hi._fromServerResponse(I,fe));Q(P.mfaPendingCredential,I,"internal-error");const te=Gi._fromMfaPendingCredential(P.mfaPendingCredential);return new Ea(te,F,function(){var fe=(0,h.Z)(function*(Ve){const dt=yield Ve._process(I,te);delete P.mfaInfo,delete P.mfaPendingCredential;const bt=Object.assign(Object.assign({},P),{idToken:dt.idToken,refreshToken:dt.refreshToken});switch(_.operationType){case"signIn":const tn=yield Zr._fromIdTokenResponse(I,_.operationType,bt);return yield I._updateCurrentUser(tn.user),tn;case"reauthenticate":return Q(_.user,I,"internal-error"),Zr._forOperation(_.user,_.operationType,bt);default:Fe(I,"internal-error")}});return function(Ve){return fe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,h.Z)(function*(){return _.signInResolver(g)})()}}function yl(E,g){var _;const I=(0,W.m9)(E),P=g;return Q(g.customData.operationType,I,"argument-error"),Q(null===(_=P.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Ea._fromError(I,P)}class Oc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Hi._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new Oc(g)}getSession(){var g=this;return(0,h.Z)(function*(){return Gi._fromIdtoken(yield g.user.getIdToken(),g.user)})()}enroll(g,_){var I=this;return(0,h.Z)(function*(){const P=g,F=yield I.getSession(),te=yield qr(I.user,P._process(I.user.auth,F,_));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(g){var _=this;return(0,h.Z)(function*(){const I="string"==typeof g?g:g.uid,P=yield _.user.getIdToken();try{const F=yield qr(_.user,function kc(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:withdraw",se(E,g))}(_.user.auth,{idToken:P,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==I),yield _.user._updateTokensIfNecessary(F),yield _.user.reload()}catch(F){throw F}})()}}const wa=new WeakMap;function $p(E){const g=(0,W.m9)(E);return wa.has(g)||wa.set(g,Oc._fromUser(g)),wa.get(g)}const as="__sak";class ko{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(as,"1"),this.storage.removeItem(as),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const sd=(()=>{class E extends ko{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function $s(){const E=(0,W.z$)();return zt(E)||aa(E)}()&&function Or(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=vr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const P=this.storage.getItem(I),F=this.localCache[I];P!==F&&_(I,F,P)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((fe,Ve,dt)=>{this.notifyListeners(fe,dt)});const P=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const fe=this.storage.getItem(P);if(_.newValue!==fe)null!==_.newValue?this.storage.setItem(P,_.newValue):this.storage.removeItem(P);else if(this.localCache[P]===_.newValue&&!I)return}const F=()=>{const fe=this.storage.getItem(P);!I&&this.localCache[P]===fe||this.notifyListeners(P,fe)},te=this.storage.getItem(P);!function In(){return(0,W.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,I){this.localCache[_]=I;const P=this.listeners[_];if(P)for(const F of Array.from(P))F(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:P}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var P=()=>super._set,F=this;return(0,h.Z)(function*(){yield P().call(F,_,I),F.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,P=this;return(0,h.Z)(function*(){const F=yield I().call(P,_);return P.localCache[_]=JSON.stringify(F),F})()}_remove(_){var I=()=>super._remove,P=this;return(0,h.Z)(function*(){yield I().call(P,_),delete P.localCache[_]})()}}return E.type="LOCAL",E})(),hi=(()=>{class E extends ko{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return E.type="SESSION",E})();let Sh=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(F=>F.isListeningto(_));if(I)return I;const P=new E(_);return this.receivers.push(P),P}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,h.Z)(function*(){const P=_,{eventId:F,eventType:te,data:fe}=P.data,Ve=I.handlersMap[te];if(!Ve?.size)return;P.ports[0].postMessage({status:"ack",eventId:F,eventType:te});const dt=Array.from(Ve).map(function(){var tn=(0,h.Z)(function*(ar){return ar(P.origin,fe)});return function(ar){return tn.apply(this,arguments)}}()),bt=yield function od(E){return Promise.all(E.map(function(){var g=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(dt);P.ports[0].postMessage({status:"done",eventId:F,eventType:te,response:bt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function uo(E="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return E+_}class Oo{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var P=this;return(0,h.Z)(function*(){const F=typeof MessageChannel<"u"?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let te,fe;return new Promise((Ve,dt)=>{const bt=uo("",20);F.port1.start();const tn=setTimeout(()=>{dt(new Error("unsupported_event"))},I);fe={messageChannel:F,onMessage(ar){const po=ar;if(po.data.eventId===bt)switch(po.data.status){case"ack":clearTimeout(tn),te=setTimeout(()=>{dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),Ve(po.data.response);break;default:clearTimeout(tn),clearTimeout(te),dt(new Error("invalid_response"))}}},P.handlers.add(fe),F.port1.addEventListener("message",fe.onMessage),P.target.postMessage({eventType:g,eventId:bt,data:_},[F.port2])}).finally(()=>{fe&&P.removeMessageHandler(fe)})})()}}function Bn(){return window}function Lc(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function Fo(){return(Fo=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const un="firebaseLocalStorageDb",Vv=1,Rh="firebaseLocalStorage",Ph="fbase_key";class El{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Gp(E,g){return E.transaction([Rh],g?"readwrite":"readonly").objectStore(Rh)}function Mh(){const E=indexedDB.open(un,Vv);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const I=E.result;try{I.createObjectStore(Rh,{keyPath:Ph})}catch(P){_(P)}}),E.addEventListener("success",(0,h.Z)(function*(){const I=E.result;I.objectStoreNames.contains(Rh)?g(I):(I.close(),yield function g_(){const E=indexedDB.deleteDatabase(un);return new El(E).toPromise()}(),g(yield Mh()))}))})}function Ia(E,g,_){return zp.apply(this,arguments)}function zp(){return(zp=(0,h.Z)(function*(E,g,_){const I=Gp(E,!0).put({[Ph]:g,value:_});return new El(I).toPromise()})).apply(this,arguments)}function hr(){return(hr=(0,h.Z)(function*(E,g){const _=Gp(E,!1).get(g),I=yield new El(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ad(E,g){const _=Gp(E,!0).delete(g);return new El(_).toPromise()}const Lo=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Mh()),_.db})()}_withRetries(_){var I=this;return(0,h.Z)(function*(){let P=0;for(;;)try{const F=yield I._openDb();return yield _(F)}catch(F){if(P++>3)throw F;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return Lc()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=Sh._getInstance(function Uc(){return Lc()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,h.Z)(function*(P,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(P,F){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,h.Z)(function*(P,F){return["keyChanged"]});return function(P,F){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var I,P;if(_.activeServiceWorker=yield function Vc(){return Fo.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Oo(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);F&&null!==(I=F[0])&&void 0!==I&&I.fulfilled&&null!==(P=F[0])&&void 0!==P&&P.value.includes("keyChanged")&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,h.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function p_(){var E;return(null===(E=navigator?.serviceWorker)||void 0===E?void 0:E.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Mh();return yield Ia(_,as,"1"),yield ad(_,as),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,h.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var P=this;return(0,h.Z)(function*(){return P._withPendingWrite((0,h.Z)(function*(){return yield P._withRetries(F=>Ia(F,_,I)),P.localCache[_]=I,P.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,h.Z)(function*(){const P=yield I._withRetries(F=>function Uv(E,g){return hr.apply(this,arguments)}(F,_));return I.localCache[_]=P,P})()}_remove(_){var I=this;return(0,h.Z)(function*(){return I._withPendingWrite((0,h.Z)(function*(){return yield I._withRetries(P=>ad(P,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const I=yield _._withRetries(te=>{const fe=Gp(te,!1).getAll();return new El(fe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const P=[],F=new Set;if(0!==I.length)for(const{fbase_key:te,value:fe}of I)F.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(fe)&&(_.notifyListeners(te,fe),P.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!F.has(te)&&(_.notifyListeners(te,null),P.push(te));return P})()}notifyListeners(_,I){this.localCache[_]=I;const P=this.listeners[_];if(P)for(const F of Array.from(P))F(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})(),Ta=1e12;class ud{constructor(g){this.auth=g,this.counter=Ta,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new Ei(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||Ta;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Ta))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,h.Z)(function*(){var I;return null===(I=_._widgets.get(g||Ta))||void 0===I||I.execute(),""})()}}class Ei{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const P="string"==typeof g?document.getElementById(g):g;Q(P,"argument-error",{appName:_}),this.container=P,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function dn(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<E;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Qr=ts("rcb"),vt=new Dn(3e4,6e4);class Sr{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Bn().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return Q(function ls(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(_),g,"argument-error"),this.shouldResolveImmediately(_)&&Zn(Bn().grecaptcha)?Promise.resolve(Bn().grecaptcha):new Promise((I,P)=>{const F=Bn().setTimeout(()=>{P(Re(g,"network-request-failed"))},vt.get());Bn()[Qr]=()=>{Bn().clearTimeout(F),delete Bn()[Qr];const fe=Bn().grecaptcha;if(!fe||!Zn(fe))return void P(Re(g,"internal-error"));const Ve=fe.render;fe.render=(dt,bt)=>{const tn=Ve(dt,bt);return this.counter++,tn},this.hostLanguage=_,I(fe)},Cr(`${function oo(){return br.recaptchaV2Script}()}?${(0,W.xO)({onload:Qr,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),P(Re(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=Bn().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wp{load(g){return(0,h.Z)(function*(){return new ud(g)})()}clearedOneInstance(){}}const wl="recaptcha",Rr={theme:"light",type:"image"};class kh{constructor(g,_,I=Object.assign({},Rr)){this.parameters=I,this.type=wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pt(g),this.isInvisible="invisible"===this.parameters.size,Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const P="string"==typeof _?document.getElementById(_):_;Q(P,this.auth,"argument-error"),this.container=P,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wp:new Sr,this.validateStartingState()}verify(){var g=this;return(0,h.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(F=>{const te=fe=>{fe&&(g.tokenChangeListeners.delete(te),F(fe))};g.tokenChangeListeners.add(te),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=Bn()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,h.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,h.Z)(function*(){Q(Mt()&&!Lc(),g.auth,"internal-error"),yield function qp(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function si(E){return Pn.apply(this,arguments)}(g.auth);Q(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Il{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=lo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function bs(E,g,_){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(E,g,_){const I=pt(E),P=yield Tl(I,g,(0,W.m9)(_));return new Il(P,F=>_i(I,F))})).apply(this,arguments)}function cs(E,g,_){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E);yield an(!1,I,"phone");const P=yield Tl(I.auth,g,(0,W.m9)(_));return new Il(P,F=>Ku(I,F))})).apply(this,arguments)}function gt(E,g,_){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E),P=yield Tl(I.auth,g,(0,W.m9)(_));return new Il(P,F=>vh(I,F))})).apply(this,arguments)}function Tl(E,g,_){return ho.apply(this,arguments)}function ho(){return ho=(0,h.Z)(function*(E,g,_){var I;const P=yield _.verify();try{let F;if(Q("string"==typeof P,E,"argument-error"),Q(_.type===wl,E,"argument-error"),F="string"==typeof g?{phoneNumber:g}:g,"session"in F){const te=F.session;if("phoneNumber"in F)return Q("enroll"===te.type,E,"internal-error"),(yield function nd(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:start",se(E,g))}(E,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:P}})).phoneSessionInfo.sessionInfo;{Q("signin"===te.type,E,"internal-error");const fe=(null===(I=F.multiFactorHint)||void 0===I?void 0:I.uid)||F.multiFactorUid;return Q(fe,E,"missing-multi-factor-info"),(yield function xh(E,g){return Se(E,"POST","/v2/accounts/mfaSignIn:start",se(E,g))}(E,{mfaPendingCredential:te.credential,mfaEnrollmentId:fe,phoneSignInInfo:{recaptchaToken:P}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield function xp(E,g){return ao.apply(this,arguments)}(E,{phoneNumber:F.phoneNumber,recaptchaToken:P});return te}}finally{_._reset()}}),ho.apply(this,arguments)}function $c(E,g){return b.apply(this,arguments)}function b(){return(b=(0,h.Z)(function*(E,g){yield zu((0,W.m9)(E),g)})).apply(this,arguments)}let S=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=pt(_)}verifyPhoneNumber(_,I){return Tl(this.auth,_,(0,W.m9)(I))}static credential(_,I){return lo._fromVerification(_,I)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:P}=_;return I&&P?lo._fromTokenResponse(I,P):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function x(E,g){return g?Ie(g):(Q(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class G extends ji{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return os(g,this._buildIdpRequest())}_linkToIdToken(g,_){return os(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return os(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function ne(E){return _c(E.auth,new G(E),E.bypassAuthState)}function ue(E){const{auth:g,user:_}=E;return Q(_,g,"internal-error"),qu(_,new G(E),E.bypassAuthState)}function He(E){return st.apply(this,arguments)}function st(){return(st=(0,h.Z)(function*(E){const{auth:g,user:_}=E;return Q(_,g,"internal-error"),zu(_,new G(E),E.bypassAuthState)})).apply(this,arguments)}class lt{constructor(g,_,I,P,F=!1){this.auth=g,this.resolver=I,this.user=P,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,h.Z)(function*(I,P){g.pendingPromise={resolve:I,reject:P};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(F){g.reject(F)}});return function(I,P){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,h.Z)(function*(){const{urlResponse:I,sessionId:P,postBody:F,tenantId:te,error:fe,type:Ve}=g;if(fe)return void _.reject(fe);const dt={auth:_.auth,requestUri:I,sessionId:P,tenantId:te||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ve)(dt))}catch(bt){_.reject(bt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return ne;case"linkViaPopup":case"linkViaRedirect":return He;case"reauthViaPopup":case"reauthViaRedirect":return ue;default:Fe(this.auth,"internal-error")}}resolve(g){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ye(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ct=new Dn(2e3,1e4);function nn(E,g,_){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,h.Z)(function*(E,g,_){const I=pt(E);Ke(E,g,xn);const P=x(I,_);return new Cs(I,"signInViaPopup",g,P).executeNotNull()})).apply(this,arguments)}function Xr(E,g,_){return bn.apply(this,arguments)}function bn(){return(bn=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E);Ke(I.auth,g,xn);const P=x(I.auth,_);return new Cs(I.auth,"reauthViaPopup",g,P,I).executeNotNull()})).apply(this,arguments)}function Ca(E,g,_){return qn.apply(this,arguments)}function qn(){return(qn=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E);Ke(I.auth,g,xn);const P=x(I.auth,_);return new Cs(I.auth,"linkViaPopup",g,P,I).executeNotNull()})).apply(this,arguments)}let Cs=(()=>{class E extends lt{constructor(_,I,P,F,te){super(_,I,F,te),this.provider=P,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const I=yield _.execute();return Q(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,h.Z)(function*(){Ye(1===_.filter.length,"Popup operations only handle one event");const I=uo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(P=>{_.reject(P)}),_.resolver._isIframeWebStorageSupported(_.auth,P=>{P||_.reject(Re(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Re(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,P;this.pollId=null!==(P=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==P&&P.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Re(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(_,Ct.get())};_()}}return E.currentPopupAction=null,E})();const us="pendingRedirect",hn=new Map;class Vo extends lt{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,h.Z)(function*(){let I=hn.get(_.auth._key());if(!I){try{const F=(yield function dd(E,g){return Mi.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(F)}catch(P){I=()=>Promise.reject(P)}hn.set(_.auth._key(),I)}return _.bypassAuthState||hn.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,h.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const P=yield I.auth._redirectUserForId(g.eventId);if(P)return I.user=P,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Mi(){return(Mi=(0,h.Z)(function*(E,g){const _=Aa(g),I=Uo(E);if(!(yield I._isAvailable()))return!1;const P="true"===(yield I._get(_));return yield I._remove(_),P})).apply(this,arguments)}function Ur(E,g){return hd.apply(this,arguments)}function hd(){return(hd=(0,h.Z)(function*(E,g){return Uo(E)._set(Aa(g),"true")})).apply(this,arguments)}function Bv(){hn.clear()}function Oh(E,g){hn.set(E._key(),g)}function Uo(E){return Ie(E._redirectPersistence)}function Aa(E){return kt(us,E.config.apiKey,E.name)}function xi(E,g,_){return function bl(E,g,_){return __.apply(this,arguments)}(E,g,_)}function __(){return(__=(0,h.Z)(function*(E,g,_){const I=pt(E);Ke(E,g,xn),yield I._initializationPromise;const P=x(I,_);return yield Ur(P,I),P._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function Cl(E,g,_){return function Fh(E,g,_){return Gc.apply(this,arguments)}(E,g,_)}function Gc(){return(Gc=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E);Ke(I.auth,g,xn),yield I.auth._initializationPromise;const P=x(I.auth,_);yield Ur(P,I.auth);const F=yield Zp(I);return P._openRedirect(I.auth,g,"reauthViaRedirect",F)})).apply(this,arguments)}function y_(E,g,_){return function v_(E,g,_){return zc.apply(this,arguments)}(E,g,_)}function zc(){return(zc=(0,h.Z)(function*(E,g,_){const I=(0,W.m9)(E);Ke(I.auth,g,xn),yield I.auth._initializationPromise;const P=x(I.auth,_);yield an(!1,I,g.providerId),yield Ur(P,I.auth);const F=yield Zp(I);return P._openRedirect(I.auth,g,"linkViaRedirect",F)})).apply(this,arguments)}function Ot(E,g){return Al.apply(this,arguments)}function Al(){return(Al=(0,h.Z)(function*(E,g){return yield pt(E)._initializationPromise,Kp(E,g,!1)})).apply(this,arguments)}function Kp(E,g){return Da.apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(E,g,_=!1){const I=pt(E),P=x(I,g),te=yield new Vo(I,P,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,g)),te})).apply(this,arguments)}function Zp(E){return fd.apply(this,arguments)}function fd(){return(fd=(0,h.Z)(function*(E){const g=uo(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class Yp{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function OI(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lh(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!Lh(g)){const P=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Re(this.auth,P))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qp(g))}saveEventToCache(g){this.cachedEventUids.add(Qp(g)),this.lastProcessedEventTime=Date.now()}}function Qp(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function Lh({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===g?.code}function Jr(E){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(E,g={}){return Se(E,"GET","/v1/projects",g)})).apply(this,arguments)}const Wc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E_=/^https?/;function Br(){return(Br=(0,h.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield Jr(E);for(const _ of g)try{if(pd(_))return}catch{}Fe(E,"unauthorized-domain")})).apply(this,arguments)}function pd(E){const g=Qe(),{protocol:_,hostname:I}=new URL(g);if(E.startsWith("chrome-extension://")){const te=new URL(E);return""===te.hostname&&""===I?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===I}if(!E_.test(_))return!1;if(Wc.test(E))return I===E;const P=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+P+"|"+P+")$","i").test(I)}const Xp=new Dn(3e4,6e4);function Jp(){const E=Bn().___jsl;if(E?.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let qc=null;const Bo=new Dn(5e3,15e3),sn="__/auth/iframe",Kc="emulator/auth/iframe",jv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Dl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eg(E){const g=E.config;Q(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?Wr(g,Kc):`https://${E.config.authDomain}/${sn}`,I={apiKey:g.apiKey,appName:E.name,v:L.SDK_VERSION},P=Dl.get(E.config.apiHost);P&&(I.eid=P);const F=E._getFrameworks();return F.length&&(I.fw=F.join(",")),`${_}?${(0,W.xO)(I).slice(1)}`}function gd(){return gd=(0,h.Z)(function*(E){const g=yield function Uh(E){return qc=qc||function w_(E){return new Promise((g,_)=>{var I,P,F;function te(){Jp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Jp(),_(Re(E,"network-request-failed"))},timeout:Xp.get()})}if(null!==(P=null===(I=Bn().gapi)||void 0===I?void 0:I.iframes)&&void 0!==P&&P.Iframe)g(gapi.iframes.getContext());else{if(null===(F=Bn().gapi)||void 0===F||!F.load){const fe=ts("iframefcb");return Bn()[fe]=()=>{gapi.load?te():_(Re(E,"network-request-failed"))},Cr(`${function nc(){return br.gapiScript}()}?onload=${fe}`).catch(Ve=>_(Ve))}te()}}).catch(g=>{throw qc=null,g})}(E),qc}(E),_=Bn().gapi;return Q(_,E,"internal-error"),g.open({where:document.body,url:eg(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jv,dontclear:!0},I=>new Promise(function(){var P=(0,h.Z)(function*(F,te){yield I.restyle({setHideOnLeave:!1});const fe=Re(E,"network-request-failed"),Ve=Bn().setTimeout(()=>{te(fe)},Bo.get());function dt(){Bn().clearTimeout(Ve),F(I)}I.ping(dt).then(dt,()=>{te(fe)})});return function(F,te){return P.apply(this,arguments)}}()))}),gd.apply(this,arguments)}const md={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Bh=500,_d=600,jh="_blank",Zc="http://localhost";class tg{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const ng="__/auth/handler",I_="emulator/auth/handler",rg=encodeURIComponent("fac");function ig(E,g,_,I,P,F){return sg.apply(this,arguments)}function sg(){return(sg=(0,h.Z)(function*(E,g,_,I,P,F){Q(E.config.authDomain,E,"auth-domain-config-required"),Q(E.config.apiKey,E,"invalid-api-key");const te={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:I,v:L.SDK_VERSION,eventId:P};if(g instanceof xn){g.setDefaultLanguage(E.languageCode),te.providerId=g.providerId||"",(0,W.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[bt,tn]of Object.entries(F||{}))te[bt]=tn}if(g instanceof Vs){const bt=g.getScopes().filter(tn=>""!==tn);bt.length>0&&(te.scopes=bt.join(","))}E.tenantId&&(te.tid=E.tenantId);const fe=te;for(const bt of Object.keys(fe))void 0===fe[bt]&&delete fe[bt];const Ve=yield E._getAppCheckToken(),dt=Ve?`#${rg}=${encodeURIComponent(Ve)}`:"";return`${function Hh({config:E}){return E.emulator?Wr(E,I_):`https://${E.authDomain}/${ng}`}(E)}?${(0,W.xO)(fe).slice(1)}${dt}`})).apply(this,arguments)}const og="webStorageSupport",T_=class Hv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hi,this._completeRedirectFn=Kp,this._overrideRedirectResult=Oh}_openPopup(g,_,I,P){var F=this;return(0,h.Z)(function*(){var te;Ye(null===(te=F.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const fe=yield ig(g,_,I,Qe(),P);return function Sa(E,g,_,I=Bh,P=_d){const F=Math.max((window.screen.availHeight-P)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let fe="";const Ve=Object.assign(Object.assign({},md),{width:I.toString(),height:P.toString(),top:F,left:te}),dt=(0,W.z$)().toLowerCase();_&&(fe=Si(dt)?jh:_),Yn(dt)&&(g=g||Zc,Ve.scrollbars="yes");const bt=Object.entries(Ve).reduce((ar,[po,zs])=>`${ar}${po}=${zs},`,"");if(function dh(E=(0,W.z$)()){var g;return aa(E)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(dt)&&"_self"!==fe)return function Yc(E,g){const _=document.createElement("a");_.href=E,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",fe),new tg(null);const tn=window.open(g||"",fe,bt);Q(tn,E,"popup-blocked");try{tn.focus()}catch{}return new tg(tn)}(g,fe,uo())})()}_openRedirect(g,_,I,P){var F=this;return(0,h.Z)(function*(){return yield F._originValidation(g),function vl(E){Bn().location.href=E}(yield ig(g,_,I,Qe(),P)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:P,promise:F}=this.eventManagers[_];return P?Promise.resolve(P):(Ye(F,"If manager is not set, promise should be"),F)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,h.Z)(function*(){const I=yield function Sl(E){return gd.apply(this,arguments)}(g),P=new Yp(g);return I.register("authEvent",F=>(Q(F?.authEvent,g,"invalid-auth-event"),{status:P.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:P},_.iframes[g._key()]=I,P})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(og,{type:og},P=>{var F;const te=null===(F=P?.[0])||void 0===F?void 0:F[og];void 0!==te&&_(!!te),Fe(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Vh(E){return Br.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return vr()||zt()||aa()}};class b_{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return Ce("unexpected MultiFactorSessionType")}}}class yd extends b_{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new yd(g)}_finalizeEnroll(g,_,I){return function No(E,g){return Se(E,"POST","/v2/accounts/mfaEnrollment:finalize",se(E,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function ld(E,g){return Se(E,"POST","/v2/accounts/mfaSignIn:finalize",se(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $h=(()=>{class E{constructor(){}static assertion(_){return yd._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var C_="@firebase/auth";class lg{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{g(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);_&&(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,W.Pz)("authIdTokenMaxAge"),function Ao(E){br=E}({loadJS:E=>new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",E),I.onload=g,I.onerror=P=>{const F=Re("internal-error");F.customData=P,_(F)},I.type="text/javascript",I.charset="UTF-8",function Pl(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(I)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ed(E){(0,L._registerComponent)(new le.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),P=g.getProvider("heartbeat"),F=g.getProvider("app-check-internal"),{apiKey:te,authDomain:fe}=I.options;Q(te&&!te.includes(":"),"invalid-api-key",{appName:I.name});const Ve={apiKey:te,authDomain:fe,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Os(E)},dt=new at(I,P,F,Ve);return function Pp(E,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(Ie);g?.errorMap&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(I,g?.popupRedirectResolver)}(dt,_),dt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new le.wA("auth-internal",g=>{const _=pt(g.getProvider("auth").getImmediate());return new lg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(C_,"1.6.0",function A_(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(E)),(0,L.registerVersion)(C_,"1.6.0","esm2017")}("Browser")},2090:(wt,Ne,j)=>{j.d(Ne,{$s:()=>Rt,BH:()=>Le,DV:()=>rr,Dv:()=>zn,G6:()=>Wr,GJ:()=>Zn,L:()=>ve,LL:()=>ze,Pz:()=>Re,Sg:()=>Ke,UG:()=>Ce,UI:()=>Pn,US:()=>le,Wj:()=>qr,Wl:()=>St,Yr:()=>Dn,ZB:()=>ie,ZR:()=>Se,aH:()=>Fe,b$:()=>Mt,cI:()=>cn,dS:()=>oi,eu:()=>_e,g5:()=>L,gK:()=>Nr,gQ:()=>En,h$:()=>ge,hl:()=>de,hu:()=>W,jU:()=>Ye,lb:()=>Wt,m9:()=>Hn,ne:()=>Mn,p$:()=>Y,pd:()=>dr,r3:()=>Rn,ru:()=>Qe,tV:()=>K,uI:()=>Q,ug:()=>Jt,vZ:()=>_t,w1:()=>Ln,w9:()=>Gn,xO:()=>Vn,xb:()=>si,z$:()=>Ge,zI:()=>me,zd:()=>vs});const h={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},W=function(q,z){if(!q)throw L(z)},L=function(q){return new Error("Firebase Database ("+h.SDK_VERSION+") INTERNAL ASSERT FAILED: "+q)},ae=function(q){const z=[];let V=0;for(let U=0;U<q.length;U++){let N=q.charCodeAt(U);N<128?z[V++]=N:N<2048?(z[V++]=N>>6|192,z[V++]=63&N|128):55296==(64512&N)&&U+1<q.length&&56320==(64512&q.charCodeAt(U+1))?(N=65536+((1023&N)<<10)+(1023&q.charCodeAt(++U)),z[V++]=N>>18|240,z[V++]=N>>12&63|128,z[V++]=N>>6&63|128,z[V++]=63&N|128):(z[V++]=N>>12|224,z[V++]=N>>6&63|128,z[V++]=63&N|128)}return z},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,z){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,U=[];for(let N=0;N<q.length;N+=3){const ee=q[N],Ie=N+1<q.length,ft=Ie?q[N+1]:0,xt=N+2<q.length,kt=xt?q[N+2]:0;let Yn=(15&ft)<<2|kt>>6,zt=63&kt;xt||(zt=64,Ie||(Yn=64)),U.push(V[ee>>2],V[(3&ee)<<4|ft>>4],V[Yn],V[zt])}return U.join("")},encodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(q):this.encodeByteArray(ae(q),z)},decodeString(q,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(q):function(q){const z=[];let V=0,U=0;for(;V<q.length;){const N=q[V++];if(N<128)z[U++]=String.fromCharCode(N);else if(N>191&&N<224){const ee=q[V++];z[U++]=String.fromCharCode((31&N)<<6|63&ee)}else if(N>239&&N<365){const xt=((7&N)<<18|(63&q[V++])<<12|(63&q[V++])<<6|63&q[V++])-65536;z[U++]=String.fromCharCode(55296+(xt>>10)),z[U++]=String.fromCharCode(56320+(1023&xt))}else{const ee=q[V++],Ie=q[V++];z[U++]=String.fromCharCode((15&N)<<12|(63&ee)<<6|63&Ie)}}return z.join("")}(this.decodeStringToByteArray(q,z))},decodeStringToByteArray(q,z){this.init_();const V=z?this.charToByteMapWebSafe_:this.charToByteMap_,U=[];for(let N=0;N<q.length;){const ee=V[q.charAt(N++)],ft=N<q.length?V[q.charAt(N)]:0;++N;const kt=N<q.length?V[q.charAt(N)]:64;++N;const Vt=N<q.length?V[q.charAt(N)]:64;if(++N,null==ee||null==ft||null==kt||null==Vt)throw new be;U.push(ee<<2|ft>>4),64!==kt&&(U.push(ft<<4&240|kt>>2),64!==Vt&&U.push(kt<<6&192|Vt))}return U},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}};class be extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ge=function(q){const z=ae(q);return le.encodeByteArray(z,!0)},ve=function(q){return ge(q).replace(/\./g,"")},K=function(q){try{return le.decodeString(q,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function Y(q){return ie(void 0,q)}function ie(q,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return z}for(const V in z)!z.hasOwnProperty(V)||!qe(V)||(q[V]=ie(q[V],z[V]));return q}function qe(q){return"__proto__"!==q}const Pe=()=>{try{return function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const z=q&&K(q[1]);return z&&JSON.parse(z)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},Fe=()=>{var q;return null===(q=Pe())||void 0===q?void 0:q.config},Re=q=>{var z;return null===(z=Pe())||void 0===z?void 0:z[`_${q}`]};class Le{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,V)=>{this.resolve=z,this.reject=V})}wrapCallback(z){return(V,U)=>{V?this.reject(V):this.resolve(U),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(V):z(V,U))}}}function Ke(q,z){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const U=z||"demo-project",N=q.iat||0,ee=q.sub||q.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ie=Object.assign({iss:`https://securetoken.google.com/${U}`,aud:U,iat:N,exp:N+3600,auth_time:N,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},q);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Ie)),""].join(".")}function Ge(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())}function Ce(){var q;const z=null===(q=Pe())||void 0===q?void 0:q.forceEnvironment;if("node"===z)return!0;if("browser"===z)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Ye(){return"object"==typeof self&&self.self===self}function Qe(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function Mt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ln(){const q=Ge();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Dn(){return!0===h.NODE_CLIENT||!0===h.NODE_ADMIN}function Wr(){return!Ce()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function de(){try{return"object"==typeof indexedDB}catch{return!1}}function _e(){return new Promise((q,z)=>{try{let V=!0;const U="validate-browser-context-for-indexeddb-analytics-module",N=self.indexedDB.open(U);N.onsuccess=()=>{N.result.close(),V||self.indexedDB.deleteDatabase(U),q(!0)},N.onupgradeneeded=()=>{V=!1},N.onerror=()=>{var ee;z((null===(ee=N.error)||void 0===ee?void 0:ee.message)||"")}}catch(V){z(V)}})}function me(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Se extends Error{constructor(z,V,U){super(V),this.code=z,this.customData=U,this.name="FirebaseError",Object.setPrototypeOf(this,Se.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ze.prototype.create)}}class ze{constructor(z,V,U){this.service=z,this.serviceName=V,this.errors=U}create(z,...V){const U=V[0]||{},N=`${this.service}/${z}`,ee=this.errors[z],Ie=ee?function mt(q,z){return q.replace(ut,(V,U)=>{const N=z[U];return null!=N?String(N):`<${U}?>`})}(ee,U):"Error";return new Se(N,`${this.serviceName}: ${Ie} (${N}).`,U)}}const ut=/\{\$([^}]+)}/g;function cn(q){return JSON.parse(q)}function St(q){return JSON.stringify(q)}const Qt=function(q){let z={},V={},U={},N="";try{const ee=q.split(".");z=cn(K(ee[0])||""),V=cn(K(ee[1])||""),N=ee[2],U=V.d||{},delete V.d}catch{}return{header:z,claims:V,data:U,signature:N}},Gn=function(q){const V=Qt(q).claims;return!!V&&"object"==typeof V&&V.hasOwnProperty("iat")},Zn=function(q){const z=Qt(q).claims;return"object"==typeof z&&!0===z.admin};function Rn(q,z){return Object.prototype.hasOwnProperty.call(q,z)}function rr(q,z){if(Object.prototype.hasOwnProperty.call(q,z))return q[z]}function si(q){for(const z in q)if(Object.prototype.hasOwnProperty.call(q,z))return!1;return!0}function Pn(q,z,V){const U={};for(const N in q)Object.prototype.hasOwnProperty.call(q,N)&&(U[N]=z.call(V,q[N],N,q));return U}function _t(q,z){if(q===z)return!0;const V=Object.keys(q),U=Object.keys(z);for(const N of V){if(!U.includes(N))return!1;const ee=q[N],Ie=z[N];if(On(ee)&&On(Ie)){if(!_t(ee,Ie))return!1}else if(ee!==Ie)return!1}for(const N of U)if(!V.includes(N))return!1;return!0}function On(q){return null!==q&&"object"==typeof q}function Vn(q){const z=[];for(const[V,U]of Object.entries(q))Array.isArray(U)?U.forEach(N=>{z.push(encodeURIComponent(V)+"="+encodeURIComponent(N))}):z.push(encodeURIComponent(V)+"="+encodeURIComponent(U));return z.length?"&"+z.join("&"):""}function vs(q){const z={};return q.replace(/^\?/,"").split("&").forEach(U=>{if(U){const[N,ee]=U.split("=");z[decodeURIComponent(N)]=decodeURIComponent(ee)}}),z}function dr(q){const z=q.indexOf("?");if(!z)return"";const V=q.indexOf("#",z);return q.substring(z,V>0?V:void 0)}class En{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,V){V||(V=0);const U=this.W_;if("string"==typeof z)for(let Vt=0;Vt<16;Vt++)U[Vt]=z.charCodeAt(V)<<24|z.charCodeAt(V+1)<<16|z.charCodeAt(V+2)<<8|z.charCodeAt(V+3),V+=4;else for(let Vt=0;Vt<16;Vt++)U[Vt]=z[V]<<24|z[V+1]<<16|z[V+2]<<8|z[V+3],V+=4;for(let Vt=16;Vt<80;Vt++){const Yn=U[Vt-3]^U[Vt-8]^U[Vt-14]^U[Vt-16];U[Vt]=4294967295&(Yn<<1|Yn>>>31)}let kt,Ht,N=this.chain_[0],ee=this.chain_[1],Ie=this.chain_[2],ft=this.chain_[3],xt=this.chain_[4];for(let Vt=0;Vt<80;Vt++){Vt<40?Vt<20?(kt=ft^ee&(Ie^ft),Ht=1518500249):(kt=ee^Ie^ft,Ht=1859775393):Vt<60?(kt=ee&Ie|ft&(ee|Ie),Ht=2400959708):(kt=ee^Ie^ft,Ht=3395469782);const Yn=(N<<5|N>>>27)+kt+xt+Ht+U[Vt]&4294967295;xt=ft,ft=Ie,Ie=4294967295&(ee<<30|ee>>>2),ee=N,N=Yn}this.chain_[0]=this.chain_[0]+N&4294967295,this.chain_[1]=this.chain_[1]+ee&4294967295,this.chain_[2]=this.chain_[2]+Ie&4294967295,this.chain_[3]=this.chain_[3]+ft&4294967295,this.chain_[4]=this.chain_[4]+xt&4294967295}update(z,V){if(null==z)return;void 0===V&&(V=z.length);const U=V-this.blockSize;let N=0;const ee=this.buf_;let Ie=this.inbuf_;for(;N<V;){if(0===Ie)for(;N<=U;)this.compress_(z,N),N+=this.blockSize;if("string"==typeof z){for(;N<V;)if(ee[Ie]=z.charCodeAt(N),++Ie,++N,Ie===this.blockSize){this.compress_(ee),Ie=0;break}}else for(;N<V;)if(ee[Ie]=z[N],++Ie,++N,Ie===this.blockSize){this.compress_(ee),Ie=0;break}}this.inbuf_=Ie,this.total_+=V}digest(){const z=[];let V=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let N=this.blockSize-1;N>=56;N--)this.buf_[N]=255&V,V/=256;this.compress_(this.buf_);let U=0;for(let N=0;N<5;N++)for(let ee=24;ee>=0;ee-=8)z[U]=this.chain_[N]>>ee&255,++U;return z}}function Mn(q,z){const V=new Et(q,z);return V.subscribe.bind(V)}class Et{constructor(z,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{z(this)}).catch(U=>{this.error(U)})}next(z){this.forEachObserver(V=>{V.next(z)})}error(z){this.forEachObserver(V=>{V.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,V,U){let N;if(void 0===z&&void 0===V&&void 0===U)throw new Error("Missing Observer.");N=function ir(q,z){if("object"!=typeof q||null===q)return!1;for(const V of z)if(V in q&&"function"==typeof q[V])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:V,complete:U},void 0===N.next&&(N.next=yr),void 0===N.error&&(N.error=yr),void 0===N.complete&&(N.complete=yr);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?N.error(this.finalError):N.complete()}catch{}}),this.observers.push(N),ee}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,z)}sendOne(z,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{V(this.observers[z])}catch(U){typeof console<"u"&&console.error&&console.error(U)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const zn=function(q,z,V,U){let N;if(U<z?N="at least "+z:U>V&&(N=0===V?"none":"no more than "+V),N)throw new Error(q+" failed: Was called with "+U+(1===U?" argument.":" arguments.")+" Expects "+N+".")};function Nr(q,z){return`${q} failed: ${z} argument `}function qr(q,z,V,U){if((!U||V)&&"function"!=typeof V)throw new Error(Nr(q,z)+"must be a valid function.")}function Wt(q,z,V,U){if((!U||V)&&("object"!=typeof V||null===V))throw new Error(Nr(q,z)+"must be a valid context object.")}const oi=function(q){const z=[];let V=0;for(let U=0;U<q.length;U++){let N=q.charCodeAt(U);if(N>=55296&&N<=56319){const ee=N-55296;U++,W(U<q.length,"Surrogate pair missing trail surrogate."),N=65536+(ee<<10)+(q.charCodeAt(U)-56320)}N<128?z[V++]=N:N<2048?(z[V++]=N>>6|192,z[V++]=63&N|128):N<65536?(z[V++]=N>>12|224,z[V++]=N>>6&63|128,z[V++]=63&N|128):(z[V++]=N>>18|240,z[V++]=N>>12&63|128,z[V++]=N>>6&63|128,z[V++]=63&N|128)}return z},Jt=function(q){let z=0;for(let V=0;V<q.length;V++){const U=q.charCodeAt(V);U<128?z++:U<2048?z+=2:U>=55296&&U<=56319?(z+=4,V++):z+=3}return z},qt=1e3,rt=2,Me=144e5,Je=.5;function Rt(q,z=qt,V=rt){const U=z*Math.pow(V,q),N=Math.round(Je*U*(Math.random()-.5)*2);return Math.min(Me,U+N)}function Hn(q){return q&&q._delegate?q._delegate:q}},1745:(wt,Ne,j)=>{var h=j(4650);let W=null;function L(){return W}class he{}const le=new h.OlP("DocumentToken");let be=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ge(){return(0,h.LFG)(K)}()},providedIn:"platform"}),n})();const ve=new h.OlP("Location Initialized");let K=(()=>{class n extends be{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){Y()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){Y()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ie(){return new K((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function qe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let ct=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Pe)},providedIn:"root"}),n})();const we=new h.OlP("appBaseHref");let Pe=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return qe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+Xe(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+Xe(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(be),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends ct{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=qe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+Xe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+Xe(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(be),h.LFG(we,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ke(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(ke(Le(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function Re(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Le(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=qe,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(h.LFG(ct))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Fe(){return new We((0,h.LFG)(ct))}()},providedIn:"root"}),n})();function Le(n){return n.replace(/\/index.html$/,"")}function el(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let ts=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new en,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class en{constructor(){this.$implicit=null,this.ngIf=null}}function Fu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let sl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const ol="browser",os="server";function xp(n){return n===os}let lc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new cc((0,h.LFG)(le),window)}),n})();class cc{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function dc(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=uc(this.window.history)||uc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function uc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class lo{}class fl extends he{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Cc extends fl{static makeCurrent(){!function ae(n){W||(W=n)}(new Cc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function _a(){return js=js||document.querySelector("base"),js?js.getAttribute("href"):null}();return null==t?null:function Lp(n){$i=$i||document.createElement("a"),$i.setAttribute("href",n);const e=$i.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){js=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return el(document.cookie,e)}}let $i,js=null;const Vp=new h.OlP("TRANSITION_ID"),Ch=[{provide:h.ip1,useFactory:function Ac(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Vp,le,h.zs3],multi:!0}];let ya=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const pl=new h.OlP("EventManagerPlugins");let ed=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(pl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Dc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gl=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),va=(()=>{class n extends gl{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Hs={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Sc=/%COMP%/g,xc=new h.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Nc(n,e){return e.flat(100).map(t=>t.replace(Sc,n))}function Hp(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vi=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new _l(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof rd?i.applyToHost(t):i instanceof No&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const l=this.eventManager,d=this.sharedStylesHost,p=this.removeStylesOnCompDestory;switch(r.encapsulation){case h.ifc.Emulated:s=new rd(l,d,r,this.appId,p);break;case h.ifc.ShadowDom:return new nd(l,d,t,r);default:s=new No(l,d,r,p)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ed),h.LFG(va),h.LFG(h.AFp),h.LFG(xc))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class _l{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Hs[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(yl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Hs[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Hs[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Hp(r)):this.eventManager.addEventListener(e,t,Hp(r))}}function yl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class nd extends _l{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Nc(i.id,i.styles);for(const l of s){const d=document.createElement("style");d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class No extends _l{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Nc(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class rd extends No{constructor(e,t,r,i,s){const l=i+"-"+r.id;super(e,t,r,s,l),this.contentAttr=function Bp(n){return"_ngcontent-%COMP%".replace(Sc,n)}(l),this.hostAttr=function jp(n){return"_nghost-%COMP%".replace(Sc,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let id=(()=>{class n extends Dc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const kc=["alt","control","meta","shift"],Oc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wa={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let $p=(()=>{class n extends Dc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),kc.forEach(y=>{const w=r.indexOf(y);w>-1&&(r.splice(w,1),l+=y+".")}),l+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=l,p}static matchEventFullKeyCode(t,r){let i=Oc[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),kc.forEach(l=>{l!==i&&(0,wa[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const od=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:ol},{provide:h.g9A,useValue:function co(){Cc.makeCurrent()},multi:!0},{provide:le,useFactory:function Dh(){return(0,h.RDi)(document),document},deps:[]}]),Sh=new h.OlP(""),uo=[{provide:h.rWj,useClass:class Up{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const d=function(p){l=l||p,s--,0==s&&r(l)};i.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Oo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function sd(){return new h.qLn},deps:[]},{provide:pl,useClass:id,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:pl,useClass:$p,multi:!0,deps:[le]},{provide:vi,useClass:vi,deps:[ed,va,h.AFp,xc]},{provide:h.FYo,useExisting:vi},{provide:gl,useExisting:va},{provide:va,useClass:va,deps:[le]},{provide:ed,useClass:ed,deps:[pl,h.R0b]},{provide:lo,useClass:ya,deps:[]},[]];let Bn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Vp,useExisting:h.AFp},Ch]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sh,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Oo,...uo],imports:[sl,h.hGG]}),n})(),p_=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Fo(){return new p_((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let cd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(ud),r},providedIn:"root"}),n})(),ud=(()=>{class n extends cd{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error(`unsafe value used in a resource URL context (see ${h.JZr})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${h.JZr})`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ta(n){return new ud(n.get(le))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var dn=j(8996),Qr=j(7669);function vt(...n){const e=(0,Qr.yG)(n);return(0,dn.D)(n,e)}var Sr=j(7579);class ls extends Sr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const wl=(0,j(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Rr=j(9751);const{isArray:kh}=Array,{getPrototypeOf:qp,prototype:Il,keys:bs}=Object;function ba(n){if(1===n.length){const e=n[0];if(kh(e))return{args:e,keys:null};if(function cs(n){return n&&"object"==typeof n&&qp(n)===Il}(e)){const t=bs(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Gs=j(4671),gt=j(4004);const{isArray:Hc}=Array;function ho(n){return(0,gt.U)(e=>function Tl(n,e){return Hc(e)?n(...e):n(e)}(n,e))}function $c(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var b=j(5403),S=j(9672);function x(...n){const e=(0,Qr.yG)(n),t=(0,Qr.jO)(n),{args:r,keys:i}=ba(n);if(0===r.length)return(0,dn.D)([],e);const s=new Rr.y(function G(n,e,t=Gs.y){return r=>{ne(e,()=>{const{length:i}=n,s=new Array(i);let l=i,d=i;for(let p=0;p<i;p++)ne(e,()=>{const y=(0,dn.D)(n[p],e);let w=!1;y.subscribe((0,b.x)(r,D=>{s[p]=D,w||(w=!0,d--),d||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>$c(i,l):Gs.y));return t?s.pipe(ho(t)):s}function ne(n,e,t){n?(0,S.f)(t,n,e):e()}var ue=j(8189);function st(...n){return function He(){return(0,ue.J)(1)}()((0,dn.D)(n,(0,Qr.yG)(n)))}var lt=j(8421);function Ct(n){return new Rr.y(e=>{(0,lt.Xf)(n()).subscribe(e)})}var nn=j(9635),Ft=j(576);function Xr(n,e){const t=(0,Ft.m)(n)?n:()=>n,r=i=>i.error(t());return new Rr.y(e?i=>e.schedule(r,0,i):r)}var bn=j(515),Ca=j(727),qn=j(4482);function Cs(){return(0,qn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,b.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class us extends Rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ca.w0;const t=this.getSubject();e.add(this.source.subscribe((0,b.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ca.w0.EMPTY)}return e}refCount(){return Cs()(this)}}function hn(n,e){return(0,qn.e)((t,r)=>{let i=null,s=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,b.x)(r,p=>{i?.unsubscribe();let y=0;const w=s++;(0,lt.Xf)(n(p,w)).subscribe(i=(0,b.x)(r,D=>r.next(e?e(p,D,w,y++):D),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function Vo(n){return n<=0?()=>bn.E:(0,qn.e)((e,t)=>{let r=0;e.subscribe((0,b.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function dd(...n){const e=(0,Qr.yG)(n);return(0,qn.e)((t,r)=>{(e?st(n,t,e):st(n,t)).subscribe(r)})}function Mi(n,e){return(0,qn.e)((t,r)=>{let i=0;t.subscribe((0,b.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Ur=j(5577);function hd(n){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,b.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Bv(n=Oh){return(0,qn.e)((e,t)=>{let r=!1;e.subscribe((0,b.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Oh(){return new wl}function Uo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((i,s)=>n(i,s,r)):Gs.y,Vo(1),t?hd(e):Bv(()=>new wl))}function Aa(n,e){return(0,Ft.m)(e)?(0,Ur.z)(n,e,1):(0,Ur.z)(n,1)}var xi=j(8505);function bl(n){return(0,qn.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,b.x)(t,void 0,void 0,l=>{s=(0,lt.Xf)(n(l,bl(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Cl(n,e){return(0,qn.e)(function __(n,e,t,r,i){return(s,l)=>{let d=t,p=e,y=0;s.subscribe((0,b.x)(l,w=>{const D=y++;p=d?n(p,w,D):(d=!0,w),r&&l.next(p)},i&&(()=>{d&&l.next(p),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Fh(n){return n<=0?()=>bn.E:(0,qn.e)((e,t)=>{let r=[];e.subscribe((0,b.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mi((i,s)=>n(i,s,r)):Gs.y,Fh(1),t?hd(e):Bv(()=>new wl))}function zc(n){return(0,qn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",Al=Symbol("RouteTitle");class Kp{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Da(n){return new Kp(n)}function Zp(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],d=n[s];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Yp(n[i],e[i]))return!1;return!0}function Yp(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Qp(n){return Array.prototype.concat.apply([],n)}function Lh(n){return n.length>0?n[n.length-1]:null}function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function or(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,dn.D)(Promise.resolve(n)):vt(n)}const Wc=!1,E_={exact:function Xp(n,e,t){if(!Dl(n.segments,e.segments)||!Uh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Xp(n.children[r],e.children[r],t))return!1;return!0},subset:w_},Vh={exact:function pd(n,e){return fo(n,e)},subset:function Jp(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Yp(n[t],e[t]))},ignored:()=>!0};function Br(n,e,t){return E_[t.paths](n.root,e.root,t.matrixParams)&&Vh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function w_(n,e,t){return qc(n,e,e.segments,t)}function qc(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Dl(i,t)||e.hasChildren()||!Uh(i,t,r))}if(n.segments.length===t.length){if(!Dl(n.segments,t)||!Uh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!w_(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Dl(n.segments,i)&&Uh(n.segments,i,r)&&n.children[Ot])&&qc(n.children[Ot],e,s,r)}}function Uh(n,e,t){return e.every((r,i)=>Vh[t](n[i].parameters,r.parameters))}class Bo{constructor(e=new sn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Da(this.queryParams)),this._queryParamMap}toString(){return md.serialize(this)}}class sn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Jr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bh(this)}}class Kc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Da(this.parameters)),this._parameterMap}toString(){return I_(this)}}function Dl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Sl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new gd},providedIn:"root"}),n})();class gd{parse(e){const t=new yd(e);return new Bo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${_d(e.root,!0)}`,r=function ig(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Zc(t)}=${Zc(i)}`).join("&"):`${Zc(t)}=${Zc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function tg(n){return encodeURI(n)}(e.fragment)}`:""}`}}const md=new gd;function Bh(n){return n.segments.map(e=>I_(e)).join("/")}function _d(n,e){if(!n.hasChildren())return Bh(n);if(e){const t=n.children[Ot]?_d(n.children[Ot],!1):"",r=[];return Jr(n.children,(i,s)=>{s!==Ot&&r.push(`${s}:${_d(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function eg(n,e){let t=[];return Jr(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),Jr(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[_d(n.children[Ot],!1)]:[`${i}:${_d(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${Bh(n)}/${t[0]}`:`${Bh(n)}/(${t.join("//")})`}}function jh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zc(n){return jh(n).replace(/%3B/gi,";")}function Sa(n){return jh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yc(n){return decodeURIComponent(n)}function ng(n){return Yc(n.replace(/\+/g,"%20"))}function I_(n){return`${Sa(n.path)}${function rg(n){return Object.keys(n).map(e=>`;${Sa(e)}=${Sa(n[e])}`).join("")}(n.parameters)}`}const sg=/^[^\/()?;=#]+/;function Hh(n){const e=n.match(sg);return e?e[0]:""}const og=/^[^=?&#]+/,T_=/^[^&#]+/;class yd{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new sn([],{}):new sn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new sn(e,t)),r}parseSegment(){const e=Hh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,Wc);return this.capture(e),new Kc(Yc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Hh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Hh(this.remaining);i&&(r=i,this.capture(r))}e[Yc(t)]=Yc(r)}parseQueryParam(e){const t=function Hv(n){const e=n.match(og);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function b_(n){const e=n.match(T_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=ng(t),s=ng(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Hh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,Wc);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ot);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[Ot]:new sn([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,Wc)}}function $h(n){return n.segments.length>0?new sn([],{[Ot]:n}):n}function vd(n){const e={};for(const r of Object.keys(n.children)){const s=vd(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function ag(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new sn(n.segments.concat(e.segments),e.children)}return n}(new sn(n.segments,e))}function Ra(n){return n instanceof Bo}const Rl=!1;function A_(n,e,t,r,i){if(0===t.length)return Ho(e.root,e.root,e.root,r,i);const s=function D_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ug(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Jr(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new ug(t,e,r)}(t);return s.toRoot()?Ho(e.root,e.root,new sn([],{}),r,i):function l(p){const y=function g(n,e,t,r){if(n.isAbsolute)return new Pl(e.root,!0,0);if(-1===r)return new Pl(t,t===e.root,0);return function _(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new h.vHH(4005,Rl&&"Invalid number of '../'");i=r.segments.length}return new Pl(r,!1,i-s)}(t,r+(Ed(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),w=y.processChildren?F(y.segmentGroup,y.index,s.commands):P(y.segmentGroup,y.index,s.commands);return Ho(e.root,y.segmentGroup,w,r,i)}(n.snapshot?._lastPathIndex)}function Ed(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Gh(n){return"object"==typeof n&&null!=n&&n.outlets}function Ho(n,e,t,r,i){let l,s={};r&&Jr(r,(p,y)=>{s[y]=Array.isArray(p)?p.map(w=>`${w}`):`${p}`}),l=n===e?t:cg(n,e,t);const d=$h(vd(l));return new Bo(d,s,i)}function cg(n,e,t){const r={};return Jr(n.children,(i,s)=>{r[s]=i===e?t:cg(i,e,t)}),new sn(n.segments,r)}class ug{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Ed(r[0]))throw new h.vHH(4003,Rl&&"Root segment cannot have matrix parameters");const i=r.find(Gh);if(i&&i!==Lh(r))throw new h.vHH(4004,Rl&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Pl{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function P(n,e,t){if(n||(n=new sn([],{})),0===n.segments.length&&n.hasChildren())return F(n,e,t);const r=function te(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],d=t[r];if(Gh(d))break;const p=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!bt(p,y,l))return s;r+=2}else{if(!bt(p,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new sn(n.segments.slice(0,r.pathIndex),{});return s.children[Ot]=new sn(n.segments.slice(r.pathIndex),n.children),F(s,0,i)}return r.match&&0===i.length?new sn(n.segments,{}):r.match&&!n.hasChildren()?fe(n,e,t):r.match?F(n,0,i):fe(n,e,t)}function F(n,e,t){if(0===t.length)return new sn(n.segments,{});{const r=function I(n){return Gh(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};if(!r[Ot]&&n.children[Ot]&&1===n.numberOfChildren&&0===n.children[Ot].segments.length){const s=F(n.children[Ot],e,t);return new sn(n.segments,s.children)}return Jr(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=P(n.children[l],e,s))}),Jr(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new sn(n.segments,i)}}function fe(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Gh(s)){const p=Ve(s.outlets);return new sn(r,p)}if(0===i&&Ed(t[0])){r.push(new Kc(n.segments[e].path,dt(t[0]))),i++;continue}const l=Gh(s)?s.outlets[Ot]:`${s}`,d=i<t.length-1?t[i+1]:null;l&&d&&Ed(d)?(r.push(new Kc(l,dt(d))),i+=2):(r.push(new Kc(l,{})),i++)}return new sn(r,{})}function Ve(n){const e={};return Jr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=fe(new sn([],{}),0,t))}),e}function dt(n){const e={};return Jr(n,(t,r)=>e[r]=`${t}`),e}function bt(n,e,t){return n==t.path&&fo(e,t.parameters)}const tn="imperative";class ar{constructor(e,t){this.id=e,this.url=t}}class po extends ar{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class zs extends ar{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qc extends ar{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $o extends ar{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Xc extends ar{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ml extends ar{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dg extends ar{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class S_ extends ar{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class $v extends ar{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hg extends ar{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zh{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gv{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Wh{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qh{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zv{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FI{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wv{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let GD=(()=>{class n{createUrlTree(t,r,i,s,l,d){return A_(t||r.root,i,s,l,d)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),WD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return GD.\u0275fac(e)},providedIn:"root"}),n})();class VI{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=qv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=qv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Go(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Go(e,this._root).map(t=>t.value)}}function qv(n,e){if(n===e.value)return e;for(const t of e.children){const r=qv(n,t);if(r)return r}return null}function Go(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Go(n,t);if(r.length)return r.unshift(e),r}return[]}class As{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Kh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class UI extends VI{constructor(e,t){super(e),this.snapshot=t,Kv(this,e)}toString(){return this.snapshot.toString()}}function BI(n,e){const t=function qD(n,e){const l=new R_([],{},{},"",{},Ot,e,null,n.root,-1,{});return new $I("",new As(l,[]))}(n,e),r=new ls([new Kc("",{})]),i=new ls({}),s=new ls({}),l=new ls({}),d=new ls(""),p=new Zh(r,i,l,d,s,Ot,e,t.root);return p.snapshot=t.root,new UI(new As(p,[]),t)}class Zh{constructor(e,t,r,i,s,l,d,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,gt.U)(y=>y[Al]))??vt(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>Da(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>Da(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function jI(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function HI(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class R_{get title(){return this.data?.[Al]}constructor(e,t,r,i,s,l,d,p,y,w,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=w,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Da(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Da(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $I extends VI{constructor(e,t){super(t),this.url=e,Kv(this,t)}toString(){return GI(this._root)}}function Kv(n,e){e.value._routerState=n,e.children.forEach(t=>Kv(n,t))}function GI(n){const e=n.children.length>0?` { ${n.children.map(GI).join(", ")} } `:"";return`${n.value}${e}`}function Yh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fo(e.params,t.params)||n.params.next(t.params),function fd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function zo(n,e){const t=fo(n.params,e.params)&&function jv(n,e){return Dl(n,e)&&n.every((t,r)=>fo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||zo(n.parent,e.parent))}function Qh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function zI(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Qh(n,r,i);return Qh(n,r)})}(n,e,t);return new As(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Qh(n,d)),l}}const r=function WI(n){return new Zh(new ls(n.url),new ls(n.params),new ls(n.queryParams),new ls(n.fragment),new ls(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Qh(n,s));return new As(r,i)}}const qI="ngNavigationCancelingError";function KD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ra(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ZD(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function ZD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qI]=!0,r.cancellationCode=e,t&&(r.url=t),r}function P_(n){return M_(n)&&Ra(n.url)}function M_(n){return n&&n[qI]}class Xk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new x_,this.attachRef=null}}let x_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Xk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const pg=!1;let Zv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.parentContexts=(0,h.f3M)(x_),this.location=(0,h.f3M)(h.s_b),this.changeDetector=(0,h.f3M)(h.sBO),this.environmentInjector=(0,h.f3M)(h.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,pg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,pg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,pg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,pg);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,p=new YD(t,d,i.injector);if(r&&function QD(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(l,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[h.TTD]}),n})();class YD{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Zh?this.route:e===x_?this.childContexts:this.parent.get(e,t)}}let Yv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[Zv],encapsulation:2}),n})();function Qv(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function N_(n){const e=n.children&&n.children.map(N_),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=Yv),t}function go(n){return n.outlet||Ot}function YI(n,e){const t=n.filter(r=>go(r)===e);return t.push(...n.filter(r=>go(r)!==e)),t}function gg(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class QI{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Yh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Kh(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),Jr(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Kh(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Kh(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Kh(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new FI(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qh(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Yh(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),Yh(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=gg(i.snapshot),p=d?.get(h._Vd)??null;l.attachRef=null,l.route=i,l.resolver=p,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class tS{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eE{constructor(e,t){this.component=e,this.route=t}}function mg(n,e,t){const r=n._root;return Xh(r,e?e._root:null,t,[r.value])}function Id(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Xh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Kh(e);return n.children.forEach(l=>{(function XI(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const p=function nS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dl(n.url,e.url)||!fo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!zo(n,e)||!fo(n.queryParams,e.queryParams);default:return!zo(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new tS(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Xh(n,e,s.component?d?d.children:null:t,r,i),p&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new eE(d.outlet.component,l))}else l&&_g(e,d,i),i.canActivateChecks.push(new tS(r)),Xh(n,null,s.component?d?d.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),Jr(s,(l,d)=>_g(l,t.getContext(d),i)),i}function _g(n,e,t){const r=Kh(n),i=n.value;Jr(r,(s,l)=>{_g(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new eE(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Jh(n){return"function"==typeof n}function xl(n){return n instanceof wl||"EmptyError"===n?.name}const k_=Symbol("INITIAL_VALUE");function Jc(){return hn(n=>x(n.map(e=>e.pipe(Vo(1),dd(k_)))).pipe((0,gt.U)(e=>{for(const t of e)if(!0!==t){if(t===k_)return k_;if(!1===t||t instanceof Bo)return t}return!0}),Mi(e=>e!==k_),Vo(1)))}function aE(n){return(0,nn.z)((0,xi.b)(e=>{if(Ra(e))throw KD(0,e)}),(0,gt.U)(e=>!0===e))}const lE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nT(n,e,t,r,i){const s=cE(n,e,t);return s.matched?function ef(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?vt(i.map(l=>{const d=Id(l,n);return or(function iE(n){return n&&Jh(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(Jc(),aE()):vt(!0)}(r=Qv(e,r),e,t).pipe((0,gt.U)(l=>!0===l?s:{...lE})):vt(s)}function cE(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...lE}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Zp)(t,n,e);if(!i)return{...lE};const s={};Jr(i.posParams,(d,p)=>{s[p]=d.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function tf(n,e,t,r){if(t.length>0&&function cS(n,e,t){return t.some(r=>uE(n,e,r)&&go(r)!==Ot)}(n,t,r)){const s=new sn(e,function rT(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&go(s)!==Ot){const l=new sn([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[go(s)]=l}return i}(n,e,r,new sn(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function iT(n,e,t){return t.some(r=>uE(n,e,r))}(n,t,r)){const s=new sn(n.segments,function lS(n,e,t,r,i){const s={};for(const l of r)if(uE(n,t,l)&&!i[go(l)]){const d=new sn([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,s[go(l)]=d}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new sn(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function uE(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sT(n,e,t,r){return!!(go(n)===r||r!==Ot&&uE(e,t,n))&&("**"===n.path||cE(e,n,t).matched)}function nf(n,e,t){return 0===e.length&&!n.children[t]}const L_=!1;class Nl{constructor(e){this.segmentGroup=e||null}}class rf{constructor(e){this.urlTree=e}}function yg(n){return Xr(new Nl(n))}function dE(n){return Xr(new rf(n))}class oT{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=tf(this.urlTree.root,[],[],this.config).segmentGroup,t=new sn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,gt.U)(s=>this.createUrlTree(vd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bl(s=>{if(s instanceof rf)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Nl?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,gt.U)(i=>this.createUrlTree(vd(i),e.queryParams,e.fragment))).pipe(bl(i=>{throw i instanceof Nl?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,L_)}createUrlTree(e,t,r){const i=$h(e);return new Bo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(s=>new sn([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,dn.D)(i).pipe(Aa(s=>{const l=r.children[s],d=YI(t,s);return this.expandSegmentGroup(e,d,l,s).pipe((0,gt.U)(p=>({segment:p,outlet:s})))}),Cl((s,l)=>(s[l.outlet]=l.segment,s),{}),Gc())}expandSegment(e,t,r,i,s,l){return(0,dn.D)(r).pipe(Aa(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,s,l).pipe(bl(y=>{if(y instanceof Nl)return vt(null);throw y}))),Uo(d=>!!d),bl((d,p)=>{if(xl(d))return nf(t,i,s)?vt(new sn([],{})):yg(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,s,l,d){return sT(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):yg(t):yg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dE(s):this.lineralizeSegments(r,s).pipe((0,Ur.z)(l=>{const d=new sn(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:w}=cE(t,i,s);if(!d)return yg(t);const D=this.applyRedirectCommands(p,i.redirectTo,w);return i.redirectTo.startsWith("/")?dE(D):this.lineralizeSegments(i,D).pipe((0,Ur.z)(M=>this.expandSegment(e,t,r,M.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Qv(r,e),r.loadChildren?(r._loadedRoutes?vt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,gt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new sn(i,{})))):vt(new sn(i,{}))):nT(t,r,i,e).pipe(hn(({matched:l,consumedSegments:d,remainingSegments:p})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Ur.z)(w=>{const D=w.injector??e,M=w.routes,{segmentGroup:O,slicedSegments:H}=tf(t,d,p,M),X=new sn(O.segments,O.children);if(0===H.length&&X.hasChildren())return this.expandChildren(D,M,X).pipe((0,gt.U)(Oe=>new sn(d,Oe)));if(0===M.length&&0===H.length)return vt(new sn(d,{}));const re=go(r)===s;return this.expandSegment(D,X,M,H,re?Ot:s,!0).pipe((0,gt.U)(je=>new sn(d.concat(je.segments),je.children)))})):yg(t)))}getChildConfig(e,t,r){return t.children?vt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?vt({routes:t._loadedRoutes,injector:t._loadedInjector}):function aS(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?vt(!0):vt(i.map(l=>{const d=Id(l,n);return or(function nE(n){return n&&Jh(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(Jc(),aE())}(e,t,r).pipe((0,Ur.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,xi.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function dS(n){return Xr(ZD(L_,3))}())):vt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return vt(r);if(i.numberOfChildren>1||!i.children[Ot])return e.redirectTo,Xr(new h.vHH(4e3,L_));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Bo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Jr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=t[d]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return Jr(t.children,(d,p)=>{l[p]=this.createSegmentGroup(e,d,r,i)}),new sn(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,L_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class hE{}class vg{constructor(e,t,r,i,s,l,d){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=d}recognize(){const e=tf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,gt.U)(t=>{if(null===t)return null;const r=new R_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new As(r,t),s=new $I(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=jI(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(Aa(i=>{const s=r.children[i],l=YI(t,i);return this.processSegmentGroup(e,l,s,i)}),Cl((i,s)=>i&&s?(i.push(...s),i):null),function y_(n,e=!1){return(0,qn.e)((t,r)=>{let i=0;t.subscribe((0,b.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),hd(null),Gc(),(0,gt.U)(i=>{if(null===i)return null;const s=lT(i);return function pS(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,dn.D)(t).pipe(Aa(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),Uo(l=>!!l),bl(l=>{if(xl(l))return nf(r,i,s)?vt([]):vt(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!sT(t,r,i,s))return vt(null);let l;if("**"===t.path){const d=i.length>0?Lh(i).parameters:{},p=uT(r)+i.length;l=vt({snapshot:new R_(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pa(t),go(t),t.component??t._loadedComponent??null,t,cT(r),p,dT(t)),consumedSegments:[],remainingSegments:[]})}else l=nT(r,t,i,e).pipe((0,gt.U)(({matched:d,consumedSegments:p,remainingSegments:y,parameters:w})=>{if(!d)return null;const D=uT(r)+p.length;return{snapshot:new R_(p,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pa(t),go(t),t.component??t._loadedComponent??null,t,cT(r),D,dT(t)),consumedSegments:p,remainingSegments:y}}));return l.pipe(hn(d=>{if(null===d)return vt(null);const{snapshot:p,consumedSegments:y,remainingSegments:w}=d;e=t._injector??e;const D=t._loadedInjector??e,M=function gS(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:O,slicedSegments:H}=tf(r,y,w,M.filter(re=>void 0===re.redirectTo));if(0===H.length&&O.hasChildren())return this.processChildren(D,M,O).pipe((0,gt.U)(re=>null===re?null:[new As(p,re)]));if(0===M.length&&0===H.length)return vt([new As(p,[])]);const X=go(t)===s;return this.processSegment(D,M,O,H,X?Ot:s).pipe((0,gt.U)(re=>null===re?null:[new As(p,re)]))}))}}function mS(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function lT(n){const e=[],t=new Set;for(const r of n){if(!mS(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=lT(r.children);e.push(new As(r.value,i))}return e.filter(r=>!t.has(r))}function cT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function uT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Pa(n){return n.data||{}}function dT(n){return n.resolve||{}}function pE(n){return"string"==typeof n.title||null===n.title}function gE(n){return hn(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,gt.U)(()=>e)):vt(e)})}const sf=new h.OlP("ROUTES");let _E=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,h.f3M)(h.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return vt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=or(t.loadComponent()).pipe((0,gt.U)(pT),(0,xi.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),zc(()=>{this.componentLoaders.delete(t)})),i=new us(r,()=>new Sr.x).pipe(Cs());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return vt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,gt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,w=!1;Array.isArray(d)?y=d:(p=d.create(t).injector,y=Qp(p.get(sf,[],h.XFs.Self|h.XFs.Optional)));return{routes:y.map(N_),injector:p}}),zc(()=>{this.childrenLoaders.delete(r)})),l=new us(s,()=>new Sr.x).pipe(Cs());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return or(t()).pipe((0,gt.U)(pT),(0,Ur.z)(r=>r instanceof h.YKP||Array.isArray(r)?vt(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pT(n){return function Wo(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let U_=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Sr.x,this.configLoader=(0,h.f3M)(_E),this.environmentInjector=(0,h.f3M)(h.lqb),this.urlSerializer=(0,h.f3M)(Sl),this.rootContexts=(0,h.f3M)(x_),this.navigationId=0,this.afterPreactivation=()=>vt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Gv(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new zh(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new ls({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:tn,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mi(r=>0!==r.id),(0,gt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),hn(r=>{let i=!1,s=!1;return vt(r).pipe((0,xi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),hn(l=>{const d=t.browserUrlTree.toString(),p=!t.navigated||l.extractedUrl.toString()!==d||d!==t.currentUrlTree.toString();if(!p&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const w="";return this.events.next(new $o(l.id,t.serializeUrl(r.rawUrl),w,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),bn.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return gT(l.source)&&(t.browserUrlTree=l.extractedUrl),vt(l).pipe(hn(w=>{const D=this.transitions?.getValue();return this.events.next(new po(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),D!==this.transitions?.getValue()?bn.E:Promise.resolve(w)}),function aT(n,e,t,r){return hn(i=>function hS(n,e,t,r,i){return new oT(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,xi.b)(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},r.urlAfterRedirects=w.urlAfterRedirects}),function yS(n,e,t,r,i){return(0,Ur.z)(s=>function fE(n,e,t,r,i,s,l="emptyOnly"){return new vg(n,e,t,r,i,l,s).recognize().pipe(hn(d=>null===d?function fS(n){return new Rr.y(e=>e.error(n))}(new hE):vt(d)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,gt.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,xi.b)(w=>{if(r.targetSnapshot=w.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=t.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);t.setBrowserUrl(M,w)}t.browserUrlTree=w.urlAfterRedirects}const D=new Ml(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(D)}));if(p&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:w,extractedUrl:D,source:M,restoredState:O,extras:H}=l,X=new po(w,this.urlSerializer.serialize(D),M,O);this.events.next(X);const re=BI(D,this.rootComponentType).snapshot;return vt(r={...l,targetSnapshot:re,urlAfterRedirects:D,extras:{...H,skipLocationChange:!1,replaceUrl:!1}})}{const w="";return this.events.next(new $o(l.id,t.serializeUrl(r.extractedUrl),w,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),bn.E}}),(0,xi.b)(l=>{const d=new dg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),(0,gt.U)(l=>r={...l,guards:mg(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function O_(n,e){return(0,Ur.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?vt({...t,guardsResult:!0}):function sS(n,e,t,r){return(0,dn.D)(n).pipe((0,Ur.z)(i=>function oS(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?vt(s.map(d=>{const p=gg(e)??i,y=Id(d,p);return or(function rS(n){return n&&Jh(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):p.runInContext(()=>y(n,e,t,r))).pipe(Uo())})).pipe(Jc()):vt(!0)}(i.component,i.route,t,e,r)),Uo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Ur.z)(d=>d&&function JI(n){return"boolean"==typeof n}(d)?function sE(n,e,t,r){return(0,dn.D)(e).pipe(Aa(i=>st(function Td(n,e){return null!==n&&e&&e(new Wh(n)),vt(!0)}(i.route.parent,r),function F_(n,e){return null!==n&&e&&e(new zv(n)),vt(!0)}(i.route,r),function oE(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function tE(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ct(()=>vt(l.guards.map(p=>{const y=gg(l.node)??t,w=Id(p,y);return or(function rE(n){return n&&Jh(n.canActivateChild)}(w)?w.canActivateChild(r,n):y.runInContext(()=>w(r,n))).pipe(Uo())})).pipe(Jc())));return vt(s).pipe(Jc())}(n,i.path,t),function tT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return vt(!0);const i=r.map(s=>Ct(()=>{const l=gg(e)??t,d=Id(s,l);return or(function eO(n){return n&&Jh(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(Uo())}));return vt(i).pipe(Jc())}(n,i.route,t))),Uo(i=>!0!==i,!0))}(r,s,n,e):vt(d)),(0,gt.U)(d=>({...t,guardsResult:d})))})}(this.environmentInjector,l=>this.events.next(l)),(0,xi.b)(l=>{if(r.guardsResult=l.guardsResult,Ra(l.guardsResult))throw KD(0,l.guardsResult);const d=new S_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Mi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),gE(l=>{if(l.guards.canActivateChecks.length)return vt(l).pipe((0,xi.b)(d=>{const p=new $v(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}),hn(d=>{let p=!1;return vt(d).pipe(function tO(n,e){return(0,Ur.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return vt(t);let s=0;return(0,dn.D)(i).pipe(Aa(l=>function nO(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!pE(i)&&(s[Al]=i.title),function hT(n,e,t,r){const i=function rO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return vt({});const s={};return(0,dn.D)(i).pipe((0,Ur.z)(l=>function fT(n,e,t,r){const i=gg(e)??r,s=Id(n,i);return or(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(Uo(),(0,xi.b)(d=>{s[l]=d}))),Fh(1),function v_(n){return(0,gt.U)(()=>n)}(s),bl(l=>xl(l)?bn.E:Xr(l)))}(s,n,e,r).pipe((0,gt.U)(l=>(n._resolvedData=l,n.data=jI(n,t).resolve,i&&pE(i)&&(n.data[Al]=i.title),null)))}(l.route,r,n,e)),(0,xi.b)(()=>s++),Fh(1),(0,Ur.z)(l=>s===i.length?vt(t):bn.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,xi.b)({next:()=>p=!0,complete:()=>{p||(t.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),(0,xi.b)(d=>{const p=new hg(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(p)}))}),gE(l=>{const d=p=>{const y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe((0,xi.b)(w=>{p.component=w}),(0,gt.U)(()=>{})));for(const w of p.children)y.push(...d(w));return y};return x(d(l.targetSnapshot.root)).pipe(hd(),Vo(1))}),gE(()=>this.afterPreactivation()),(0,gt.U)(l=>{const d=function fg(n,e,t){const r=Qh(n,e._root,t?t._root:void 0);return new UI(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:d}}),(0,xi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new QI(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Vo(1),(0,xi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new zs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),zc(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),bl(l=>{if(s=!0,M_(l)){P_(l)||(t.navigated=!0,t.restoreHistory(r,!0));const d=new Qc(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(d),P_(l)){const p=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||gT(r.source)};t.scheduleNavigation(p,tn,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const d=new Xc(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(d);try{r.resolve(t.errorHandler(l))}catch(p){r.reject(p)}}return bn.E}))}))}cancelNavigationTransition(t,r,i){const s=new Qc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gT(n){return n!==tn}let mT=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[Al]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(vS)},providedIn:"root"}),n})(),vS=(()=>{class n extends mT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(p_))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(wS)},providedIn:"root"}),n})();class ES{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let wS=(()=>{class n extends ES{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kt=new h.OlP("",{providedIn:"root",factory:()=>({})});let yT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(vT)},providedIn:"root"}),n})(),vT=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function TS(n){throw n}function bS(n,e,t){return e.parse("/")}const ET={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},CS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,h.f3M)(h.c2e),this.isNgZoneEnabled=!1,this.options=(0,h.f3M)(Kt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||TS,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||bS,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,h.f3M)(yT),this.routeReuseStrategy=(0,h.f3M)(_T),this.urlCreationStrategy=(0,h.f3M)(WD),this.titleStrategy=(0,h.f3M)(mT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Qp((0,h.f3M)(sf,{optional:!0})??[]),this.navigationTransitions=(0,h.f3M)(U_),this.urlSerializer=(0,h.f3M)(Sl),this.location=(0,h.f3M)(We),this.isNgZoneEnabled=(0,h.f3M)(h.R0b)instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=BI(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),tn,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const p={...i};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(t);this.scheduleNavigation(d,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(N_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:d,preserveFragment:p}=r,y=p?this.currentUrlTree.fragment:l;let w=null;switch(d){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,w,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ra(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,tn,null,r)}navigate(t,r={skipLocationChange:!1}){return function AS(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...ET}:!1===r?{...CS}:r,Ra(t))return Br(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Br(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let d,p,y,w;return l?(d=l.resolve,p=l.reject,y=l.promise):y=new Promise((D,M)=>{d=D,p=M}),w="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:d,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(D=>Promise.reject(D))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bd=(()=>{class n{constructor(t,r,i,s,l,d){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.locationStrategy=d,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Sr.x;const p=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===p||"area"===p,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof zs&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,h.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zi),h.Y36(Zh),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(ct))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&h.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&h.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class yE{}let vE=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Mi(t=>t instanceof zs),Aa(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,h.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,d=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return(0,dn.D)(i).pipe((0,ue.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):vt(null);const s=i.pipe((0,Ur.z)(l=>null===l?vt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,dn.D)([s,l]).pipe((0,ue.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(zi),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(yE),h.LFG(_E))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ig=new h.OlP("");let IT=(()=>{class n{constructor(t,r,i,s,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof po?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof zs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wv&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Wv(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();var mo=(()=>((mo=mo||{})[mo.COMPLETE=0]="COMPLETE",mo[mo.FAILED=1]="FAILED",mo[mo.REDIRECTING=2]="REDIRECTING",mo))();const Tg=!1;function Cd(n,e){return{\u0275kind:n,\u0275providers:e}}const wE=new h.OlP("",{providedIn:"root",factory:()=>!1});function bg(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(zi),i=n.get(TT);1===n.get(j_)&&r.initialNavigation(),n.get(bT,null,h.XFs.Optional)?.setUpPreloading(),n.get(Ig,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const TT=new h.OlP(Tg?"bootstrap done indicator":"",{factory:()=>new Sr.x}),j_=new h.OlP(Tg?"initial navigation":"",{providedIn:"root",factory:()=>1});function PS(){let n=[];return n=Tg?[{provide:h.Xts,multi:!0,useFactory:()=>{const e=(0,h.f3M)(zi);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function LI(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Cd(1,n)}const bT=new h.OlP(Tg?"router preloader":"");function MS(n){return Cd(0,[{provide:bT,useExisting:vE},{provide:yE,useExisting:n}])}const cf=!1,kS=new h.OlP(cf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),IE=[We,{provide:Sl,useClass:gd},zi,x_,{provide:Zh,useFactory:function EE(n){return n.routerState.root},deps:[zi]},_E,cf?{provide:wE,useValue:!0}:[]];function OS(){return new h.PXZ("Router",zi)}let FS=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[IE,cf&&r?.enableTracing?PS().\u0275providers:[],{provide:sf,multi:!0,useValue:t},{provide:kS,useFactory:DT,deps:[[zi,new h.FiY,new h.tp0]]},{provide:Kt,useValue:r||{}},r?.useHash?{provide:ct,useClass:xe}:{provide:ct,useClass:Pe},{provide:Ig,useFactory:()=>{const n=(0,h.f3M)(lc),e=(0,h.f3M)(h.R0b),t=(0,h.f3M)(Kt),r=(0,h.f3M)(U_),i=(0,h.f3M)(Sl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new IT(i,r,n,e,t)}},r?.preloadingStrategy?MS(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:OS},r?.initialNavigation?VS(r):[],[{provide:ST,useFactory:bg},{provide:h.tb,multi:!0,useExisting:ST}]]}}static forChild(t){return{ngModule:n,providers:[{provide:sf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(kS,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Yv]}),n})();function DT(n){if(cf&&n)throw new h.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function VS(n){return["disabled"===n.initialNavigation?Cd(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(zi);return()=>{e.setUpLocationChangeListener()}}},{provide:j_,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Cd(2,[{provide:j_,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(ve,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(zi),s=e.get(TT);(function oO(n,e){n.events.pipe(Mi(t=>t instanceof zs||t instanceof Qc||t instanceof Xc||t instanceof $o),(0,gt.U)(t=>t instanceof zs||t instanceof $o?mo.COMPLETE:t instanceof Qc&&(0===t.code||1===t.code)?mo.REDIRECTING:mo.FAILED),Mi(t=>t!==mo.REDIRECTING),Vo(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(U_).afterPreactivation=()=>(r(!0),s.closed?vt(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const ST=new h.OlP(cf?"Router Initializer":"");var TE=j(45),B=j(2090),Ni=j(9681),ki=j(1877),Ds=j(4859),Ag=j(4986),Tn=j(2122);function Dg(){return(0,qn.e)((n,e)=>{let t,r=!1;n.subscribe((0,b.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function $_(n,e=Gs.y){return n=n??bE,(0,qn.e)((t,r)=>{let i,s=!0;t.subscribe((0,b.x)(r,l=>{const d=e(l);(s||!n(i,d))&&(s=!1,i=d,r.next(l))}))})}function bE(n,e){return n===e}var ot,fi=j(2011),G_=(j(9568),j(3942)),Te=j(5861),RT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_o={},CE=CE||{},Pt=RT||self;function z_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Sg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Rg="closure_uid_"+(1e9*Math.random()>>>0),PT=0;function US(n,e,t){return n.call.apply(n.bind,arguments)}function BS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Wi(n,e,t){return(Wi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?US:BS).apply(null,arguments)}function Pg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function wi(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function eu(){this.s=this.s,this.o=this.o}eu.prototype.s=!1,eu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function dO(n){Object.prototype.hasOwnProperty.call(n,Rg)&&n[Rg]||(n[Rg]=++PT)}(this)},eu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const MT=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function DE(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xT(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(z_(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function qi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}qi.prototype.h=function(){this.defaultPrevented=!0};var jS=function(){if(!Pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};Pt.addEventListener("test",t,e),Pt.removeEventListener("test",t,e)}catch{}return n}();function Ss(n){return/^[\s\xa0]*$/.test(n)}function df(){var n=Pt.navigator;return n&&(n=n.userAgent)?n:""}function Ma(n){return-1!=df().indexOf(n)}function SE(n){return SE[" "](n),n}SE[" "]=function(){};var ff,n,HS=Ma("Opera"),hf=Ma("Trident")||Ma("MSIE"),kT=Ma("Edge"),Mg=kT||hf,OT=Ma("Gecko")&&!(-1!=df().toLowerCase().indexOf("webkit")&&!Ma("Edge"))&&!(Ma("Trident")||Ma("MSIE"))&&!Ma("Edge"),$S=-1!=df().toLowerCase().indexOf("webkit")&&!Ma("Edge");function xg(){var n=Pt.document;return n?n.documentMode:void 0}e:{var pf="",FT=(n=df(),OT?/rv:([^\);]+)(\)|;)/.exec(n):kT?/Edge\/([\d\.]+)/.exec(n):hf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$S?/WebKit\/(\S+)/.exec(n):HS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(FT&&(pf=FT?FT[1]:""),hf){var Ng=xg();if(null!=Ng&&Ng>parseFloat(pf)){ff=String(Ng);break e}}ff=pf}var VT=Pt.document&&hf&&(xg()||parseInt(ff,10))||void 0;function gf(n,e){if(qi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(OT){e:{try{SE(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:UT[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&gf.$.h.call(this)}}wi(gf,qi);var UT={2:"touch",3:"pen",4:"mouse"};gf.prototype.h=function(){gf.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ad="closure_listenable_"+(1e6*Math.random()|0),kl=0;function W_(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++kl,this.fa=this.ia=!1}function Dd(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Sd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function PE(n){const e={};for(const t in n)e[t]=n[t];return e}const ME="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function BT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<ME.length;s++)t=ME[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function q_(n){this.src=n,this.g={},this.h=0}function Rd(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=MT(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Dd(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function xE(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}q_.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=xE(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new W_(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var jT="closure_lm_"+(1e6*Math.random()|0),NE={};function HT(n,e,t,r,i){if(r&&r.once)return GT(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)HT(n,e[s],t,r,i);return null}return t=VE(t),n&&n[Ad]?n.O(e,t,Sg(r)?!!r.capture:!!r,i):$T(n,e,t,!1,r,i)}function $T(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=Sg(i)?!!i.capture:!!i,d=LE(n);if(d||(n[jT]=d=new q_(n)),(t=d.add(e,t,r,l,s)).proxy)return t;if(r=function zS(){const e=FE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)jS||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(OE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function GT(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)GT(n,e[s],t,r,i);return null}return t=VE(t),n&&n[Ad]?n.P(e,t,Sg(r)?!!r.capture:!!r,i):$T(n,e,t,!0,r,i)}function zT(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)zT(n,e[s],t,r,i);else r=Sg(r)?!!r.capture:!!r,t=VE(t),n&&n[Ad]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=xE(s=n.g[e],t,r,i))&&(Dd(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=LE(n))&&(e=n.g[e.toString()],n=-1,e&&(n=xE(e,t,r,i)),(t=-1<n?e[n]:null)&&kE(t))}function kE(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Ad])Rd(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(OE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=LE(e))?(Rd(t,n),0==t.h&&(t.src=null,e[jT]=null)):Dd(n)}}}function OE(n){return n in NE?NE[n]:NE[n]="on"+n}function FE(n,e){if(n.fa)n=!0;else{e=new gf(e,this);var t=n.listener,r=n.la||n.src;n.ia&&kE(n),n=t.call(r,e)}return n}function LE(n){return(n=n[jT])instanceof q_?n:null}var kg="__closure_events_fn_"+(1e9*Math.random()>>>0);function VE(n){return"function"==typeof n?n:(n[kg]||(n[kg]=function(e){return n.handleEvent(e)}),n[kg])}function Ii(){eu.call(this),this.i=new q_(this),this.S=this,this.J=null}function Oi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new qi(e,n);else if(e instanceof qi)e.target=e.target||n;else{var i=e;BT(e=new qi(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=K_(l,r,!0,e)&&i}if(i=K_(l=e.g=n,r,!0,e)&&i,i=K_(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=K_(l=e.g=t[s],r,!1,e)&&i}function K_(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.fa&&l.capture==t){var d=l.listener,p=l.la||l.src;l.ia&&Rd(n.i,l),i=!1!==d.call(p,r)&&i}}return i&&!r.defaultPrevented}wi(Ii,eu),Ii.prototype[Ad]=!0,Ii.prototype.removeEventListener=function(n,e,t,r){zT(this,n,e,t,r)},Ii.prototype.N=function(){if(Ii.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dd(t[r]);delete n.g[e],n.h--}}this.J=null},Ii.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ii.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var UE=Pt.JSON.stringify;function qS(){var n=jE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var BE=new class WS{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new KS,n=>n.reset());class KS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hO(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function qT(n){Pt.setTimeout(()=>{throw n},0)}let Z_,tu=!1,jE=new class WT{constructor(){this.h=this.g=null}add(e,t){const r=BE.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},KT=()=>{const n=Pt.Promise.resolve(void 0);Z_=()=>{n.then(HE)}};var HE=()=>{for(var n;n=qS();){try{n.h.call(n.g)}catch(t){qT(t)}var e=BE;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}tu=!1};function Y_(n,e){Ii.call(this),this.h=n||1,this.g=e||Pt,this.j=Wi(this.qb,this),this.l=Date.now()}function yo(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Pd(n,e,t){if("function"==typeof n)t&&(n=Wi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Wi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Pt.setTimeout(n,e||0)}function Fi(n){n.g=Pd(()=>{n.g=null,n.i&&(n.i=!1,Fi(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}wi(Y_,Ii),(ot=Y_.prototype).ga=!1,ot.T=null,ot.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Oi(this,"tick"),this.ga&&(yo(this),this.start()))}},ot.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.N=function(){Y_.$.N.call(this),yo(this),delete this.g};class Md extends eu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(Pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nu(n){eu.call(this),this.h=n,this.g={}}wi(nu,eu);var Ws=[];function Q_(n,e,t,r){Array.isArray(t)||(t&&(Ws[0]=t.toString()),t=Ws);for(var i=0;i<t.length;i++){var s=HT(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function xd(n){Sd(n.g,function(e,t){this.g.hasOwnProperty(t)&&kE(e)},n),n.g={}}function Ol(){this.g=!0}function qo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function vf(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return UE(t)}catch{return e}}(n,t)+(r?" "+r:"")})}nu.prototype.N=function(){nu.$.N.call(this),xd(this)},nu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ol.prototype.Ea=function(){this.g=!1},Ol.prototype.info=function(){};var vo={},Nd=null;function Og(){return Nd=Nd||new Ii}function $E(n){qi.call(this,vo.Ta,n)}function Ef(n){const e=Og();Oi(e,new $E(e))}function GE(n,e){qi.call(this,vo.STAT_EVENT,n),this.stat=e}function Ki(n){const e=Og();Oi(e,new GE(e,n))}function zE(n,e){qi.call(this,vo.Ua,n),this.size=e}function wf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Pt.setTimeout(function(){n()},e)}vo.Ta="serverreachability",wi($E,qi),vo.STAT_EVENT="statevent",wi(GE,qi),vo.Ua="timingevent",wi(zE,qi);var Fg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},WE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function qE(){}function KE(){}qE.prototype.h=null;var Ug,Lg={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function X_(){qi.call(this,"d")}function Vg(){qi.call(this,"c")}function J_(){}function ru(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new nu(this),this.P=ZE,this.V=new Y_(n=Mg?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Bg}function Bg(){this.i=null,this.g="",this.h=!1}wi(X_,qi),wi(Vg,qi),wi(J_,qE),J_.prototype.g=function(){return new XMLHttpRequest},J_.prototype.i=function(){return{}},Ug=new J_;var ZE=45e3,YT={},If={};function Tf(n,e,t){n.L=1,n.A=zg(Ko(e)),n.u=t,n.S=!0,YE(n,null)}function YE(n,e){n.G=Date.now(),bf(n),n.B=Ko(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),QS(t.i,"t",r),n.o=0,t=n.l.J,n.h=new Bg,n.g=pb(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Md(Wi(n.Pa,n,n.g),n.O)),Q_(n.U,n.g,"readystatechange",n.nb),e=n.I?PE(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Ef(),function mf(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var w=y[0];y=y[1];var D=w.split("_");l=2<=D.length&&"type"==D[1]?l+(w+"=")+y+"&":l+(w+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.v,n.B,n.m,n.W,n.u)}function QE(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function ey(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=QT(n,t),i==If){4==e&&(n.s=4,Ki(14),r=!1),qo(n.j,n.m,null,"[Incomplete Response]");break}if(i==YT){n.s=4,Ki(15),qo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}qo(n.j,n.m,i,null),ny(n,i)}QE(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),fy(e),e.M=!0,Ki(11))):(qo(n.j,n.m,t,"[Invalid Chunked Response]"),iu(n),Hg(n))}function QT(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?If:(t=Number(e.substring(t,r)),isNaN(t)?YT:(r+=1)+t>e.length?If:(e=e.slice(r,r+t),n.o=r+t,e))}function bf(n){n.Y=Date.now()+n.P,ty(n,n.P)}function ty(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=wf(Wi(n.lb,n),e)}function jg(n){n.C&&(Pt.clearTimeout(n.C),n.C=null)}function Hg(n){0==n.l.H||n.J||hw(n.l,n)}function iu(n){jg(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,yo(n.V),xd(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function ny(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||rw(t.i,n)))if(!n.K&&rw(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Jg(t),Yg(t)}hy(t),Ki(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=wf(Wi(t.ib,t),6e3));if(1>=nw(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ou(t,11)}else if((n.K||t.g==n)&&Jg(t),!Ss(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const w=y[3];null!=w&&(t.ra=w,t.l.info("VER="+t.ra));const D=y[4];null!=D&&(t.Ga=D,t.l.info("SVER="+t.Ga));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(t.L=r=1.5*M,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const H=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(H){var s=r.i;s.g||-1==H.indexOf("spdy")&&-1==H.indexOf("quic")&&-1==H.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(iw(s,s.h),s.h=null))}if(r.F){const X=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;X&&(r.Da=X,Jn(r.I,r.F,X))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=fb(r,r.J?r.pa:null,r.Y),l.K){sw(r.i,l);var d=l,p=r.L;p&&d.setTimeout(p),d.C&&(jg(d),bf(d)),r.g=l}else uw(r);0<t.j.length&&dy(t)}else"stop"!=y[0]&&"close"!=y[0]||ou(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?ou(t,7):uy(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}Ef()}catch{}}function eb(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(z_(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function JT(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(z_(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function XT(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(z_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ot=ru.prototype).setTimeout=function(n){this.P=n},ot.nb=function(n){n=n.target;const e=this.M;e&&3==Oa(n)?e.l():this.Pa(n)},ot.Pa=function(n){try{if(n==this.g)e:{const w=Oa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>w)&&(3!=w||Mg||this.g&&(this.h.h||this.g.ja()||ly(this.g)))){this.J||4!=w||7==e||Ef(),jg(this);var t=this.g.da();this.ca=t;t:if(QE(this)){var r=ly(this.g);n="";var i=r.length,s=4==Oa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){iu(this),Hg(this);var l="";break t}this.h.i=new Pt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function _f(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.v,this.B,this.m,this.W,w,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ss(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.s=3,Ki(12),iu(this),Hg(this);break e}qo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ny(this,t)}this.S?(ey(this,w,l),Mg&&this.i&&3==w&&(Q_(this.U,this.V,"tick",this.mb),this.V.start())):(qo(this.j,this.m,l,null),ny(this,l)),4==w&&iu(this),this.i&&!this.J&&(4==w?hw(this.l,this):(this.i=!1,bf(this)))}else(function Kg(n){const e={};n=(n.g&&2<=Oa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Ss(n[r]))continue;var t=hO(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function GS(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.s=3,Ki(12)):(this.s=0,Ki(13)),iu(this),Hg(this)}}}catch{}},ot.mb=function(){if(this.g){var n=Oa(this.g),e=this.g.ja();this.o<e.length&&(jg(this),ey(this,n,e),this.i&&4!=n&&bf(this))}},ot.cancel=function(){this.J=!0,iu(this)},ot.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function yf(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(Ef(),Ki(17)),iu(this),this.s=2,Hg(this)):ty(this,this.Y-n)};var XE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fl(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Fl){this.h=n.h,$g(this,n.j),this.s=n.s,this.g=n.g,Gg(this,n.m),this.l=n.l;var e=n.i,t=new Zo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),JE(this,t),this.o=n.o}else n&&(e=String(n).match(XE))?(this.h=!1,$g(this,e[1]||"",!0),this.s=Cf(e[2]||""),this.g=Cf(e[3]||"",!0),Gg(this,e[4]),this.l=Cf(e[5]||"",!0),JE(this,e[6]||"",!0),this.o=Cf(e[7]||"")):(this.h=!1,this.i=new Zo(null,this.h))}function Ko(n){return new Fl(n)}function $g(n,e,t){n.j=t?Cf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function JE(n,e,t){e instanceof Zo?(n.i=e,function XS(n,e){e&&!n.j&&(xa(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(rb(this,r),QS(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Af(e,YS)),n.i=new Zo(e,n.h))}function Jn(n,e,t){n.i.set(e,t)}function zg(n){return Jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Cf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Af(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,nb),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Fl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Af(e,Wg,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Af(e,Wg,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Af(t,"/"==t.charAt(0)?ZS:su,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Af(t,ew)),n.join("")};var Wg=/[#\/\?@]/g,su=/[#\?:]/g,ZS=/[#\?]/g,YS=/[#\?@]/g,ew=/#/g;function Zo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function xa(n){n.g||(n.g=new Map,n.h=0,n.i&&function tb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function rb(n,e){xa(n),e=qg(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function ry(n,e){return xa(n),e=qg(n,e),n.g.has(e)}function QS(n,e,t){rb(n,e),0<t.length&&(n.i=null,n.g.set(qg(n,e),DE(t)),n.h+=t.length)}function qg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function tw(n){this.l=n||eR,n=Pt.PerformanceNavigationTiming?0<(n=Pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Pt.g&&Pt.g.Ka&&Pt.g.Ka()&&Pt.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=Zo.prototype).add=function(n,e){xa(this),this.i=null,n=qg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){xa(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.ta=function(){xa(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ot.Z=function(n){xa(this);let e=[];if("string"==typeof n)ry(this,n)&&(e=e.concat(this.g.get(qg(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return xa(this),this.i=null,ry(this,n=qg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var eR=10;function ei(n){return!!n.h||!!n.g&&n.g.size>=n.j}function nw(n){return n.h?1:n.g?n.g.size:0}function rw(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function iw(n,e){n.g?n.g.add(e):n.h=e}function sw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ib(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return DE(n.i)}tw.prototype.cancel=function(){if(this.i=ib(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var sb=class{stringify(n){return Pt.JSON.stringify(n,void 0)}parse(n){return Pt.JSON.parse(n,void 0)}};function ob(){this.g=new sb}function Df(n,e,t){const r=t||"";try{eb(n,function(i,s){let l=i;Sg(i)&&(l=UE(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function iy(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Sf(n){this.l=n.ec||null,this.j=n.ob||!1}function sy(n,e){Ii.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=oy,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wi(Sf,qE),Sf.prototype.g=function(){return new sy(this.l,this.j)},Sf.prototype.i=function(n){return function(){return n}}({}),wi(sy,Ii);var oy=0;function nR(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function kd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Od(n)}function Od(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=sy.prototype).open=function(n,e){if(this.readyState!=oy)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Od(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Pt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kd(this)),this.readyState=oy},ot.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Od(this)),this.g&&(this.readyState=3,Od(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;nR(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ot.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?kd(this):Od(this),3==this.readyState&&nR(this)}},ot.Za=function(n){this.g&&(this.response=this.responseText=n,kd(this))},ot.Ya=function(n){this.g&&(this.response=n,kd(this))},ot.ka=function(){this.g&&kd(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(sy.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Na=Pt.JSON.parse;function Pr(n){Ii.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ow,this.L=this.M=!1}wi(Pr,Ii);var ow="",ka=/^https?$/i,Yo=["POST","PUT"];function aw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lw(n),ay(n)}function lw(n){n.F||(n.F=!0,Oi(n,"complete"),Oi(n,"error"))}function ab(n){if(n.h&&typeof CE<"u"&&(!n.C[1]||4!=Oa(n)||2!=n.da()))if(n.v&&4==Oa(n))Pd(n.La,0,n);else if(Oi(n,"readystatechange"),4==Oa(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(XE)[1]||null;!i&&Pt.self&&Pt.self.location&&(i=Pt.self.location.protocol.slice(0,-1)),r=!ka.test(i?i.toLowerCase():"")}t=r}if(t)Oi(n,"complete"),Oi(n,"success");else{n.m=6;try{var s=2<Oa(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",lw(n)}}finally{ay(n)}}}function ay(n,e){if(n.g){lb(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Oi(n,"ready");try{t.onreadystatechange=r}catch{}}}function lb(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Pt.clearTimeout(n.A),n.A=null)}function Oa(n){return n.g?n.g.readyState:0}function ly(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ow:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function cb(n){let e="";return Sd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function cy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jn(n,e,t))}function Zg(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function ub(n){this.Ga=0,this.j=[],this.l=new Ol,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zg("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zg("baseRetryDelayMs",5e3,n),this.hb=Zg("retryDelaySeedMs",1e4,n),this.eb=Zg("forwardChannelMaxRetries",2,n),this.xa=Zg("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new tw(n&&n.concurrentRequestLimit),this.Ja=new ob,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function uy(n){if(Qg(n),3==n.H){var e=n.W++,t=Ko(n.I);if(Jn(t,"SID",n.K),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),Fd(n,t),(e=new ru(n,n.l,e)).L=2,e.A=zg(Ko(t)),t=!1,Pt.navigator&&Pt.navigator.sendBeacon)try{t=Pt.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&Pt.Image&&((new Image).src=e.A,t=!0),t||(e.g=pb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),bf(e)}hb(n)}function Yg(n){n.g&&(fy(n),n.g.cancel(),n.g=null)}function Qg(n){Yg(n),n.u&&(Pt.clearTimeout(n.u),n.u=null),Jg(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Pt.clearTimeout(n.m),n.m=null)}function dy(n){if(!ei(n.i)&&!n.m){n.m=!0;var e=n.Na;Z_||KT(),tu||(Z_(),tu=!0),jE.add(e,n),n.C=0}}function cw(n,e){var t;t=e?e.m:n.W++;const r=Ko(n.I);Jn(r,"SID",n.K),Jn(r,"RID",t),Jn(r,"AID",n.V),Fd(n,r),n.o&&n.s&&cy(r,n.o,n.s),t=new ru(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Xg(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),iw(n.i,t),Tf(t,r,e)}function Fd(n,e){n.na&&Sd(n.na,function(t,r){Jn(e,r,t)}),n.h&&eb({},function(t,r){Jn(e,r,t)})}function Xg(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Wi(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let d=!0;for(let p=0;p<t;p++){let y=i[p].g;const w=i[p].map;if(y-=s,0>y)s=Math.max(0,i[p].g-100),d=!1;else try{Df(w,l,"req"+y+"_")}catch{r&&r(w)}}if(d){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function uw(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Z_||KT(),tu||(Z_(),tu=!0),jE.add(e,n),n.A=0}}function hy(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=wf(Wi(n.Ma,n),fw(n,n.A)),n.A++,0))}function fy(n){null!=n.B&&(Pt.clearTimeout(n.B),n.B=null)}function dw(n){n.g=new ru(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ko(n.wa);Jn(e,"RID","rpc"),Jn(e,"SID",n.K),Jn(e,"AID",n.V),Jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Jn(e,"TO",n.qa),Jn(e,"TYPE","xmlhttp"),Fd(n,e),n.o&&n.s&&cy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=zg(Ko(e)),t.u=null,t.S=!0,YE(t,n)}function Jg(n){null!=n.v&&(Pt.clearTimeout(n.v),n.v=null)}function hw(n,e){var t=null;if(n.g==e){Jg(n),fy(n),n.g=null;var r=2}else{if(!rw(n.i,e))return;t=e.F,sw(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;Oi(r=Og(),new zE(r,t)),dy(n)}else uw(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function db(n,e){return!(nw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=wf(Wi(n.Na,n,e),fw(n,n.C)),n.C++,0)))}(n,e)||2==r&&hy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ou(n,5);break;case 4:ou(n,10);break;case 3:ou(n,6);break;default:ou(n,2)}}function fw(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ou(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Wi(n.pb,n);t||(t=new Fl("//www.google.com/images/cleardot.gif"),Pt.location&&"http"==Pt.location.protocol||$g(t,"https"),zg(t)),function tR(n,e){const t=new Ol;if(Pt.Image){const r=new Image;r.onload=Pg(iy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Pg(iy,t,r,"TestLoadImage: error",!1,e),r.onabort=Pg(iy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pg(iy,t,r,"TestLoadImage: timeout",!1,e),Pt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.H=0,n.h&&n.h.za(e),hb(n),Qg(n)}function hb(n){if(n.H=0,n.ma=[],n.h){const e=ib(n.i);(0!=e.length||0!=n.j.length)&&(xT(n.ma,e),xT(n.ma,n.j),n.i.i.length=0,DE(n.j),n.j.length=0),n.h.ya()}}function fb(n,e,t){var r=t instanceof Fl?Ko(t):new Fl(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Gg(r,r.m);else{var i=Pt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Fl(null);r&&$g(s,r),e&&(s.g=e),i&&Gg(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Jn(r,t,e),Jn(r,"VER",n.ra),Fd(n,r),r}function pb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(n.Ha&&!n.va?new Sf({ob:t}):n.va)).Oa(n.J),e}function gb(){}function py(){if(hf&&!(10<=Number(VT)))throw Error("Environmental error: no available transport.")}function qs(n,e){Ii.call(this),this.g=new ub(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Ss(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ss(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Rf(this)}function mb(n){X_.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function _b(){Vg.call(this),this.status=1}function Rf(n){this.g=n}function Xo(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function pw(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],l=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;l=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(l<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(e=t+((l=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=s+((l=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function jn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ot=Pr.prototype).Oa=function(n){this.M=n},ot.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ug.g(),this.C=function ZT(n){return n.h||(n.h=n.i())}(this.u?this.u:Ug),this.g.onreadystatechange=Wi(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void aw(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Pt.FormData&&n instanceof Pt.FormData,!(0<=MT(Yo,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{lb(this),0<this.B&&((this.L=function Qo(n){return hf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Wi(this.ua,this)):this.A=Pd(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){aw(this,s)}},ot.ua=function(){typeof CE<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Oi(this,"complete"),Oi(this,"abort"),ay(this))},ot.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ay(this,!0)),Pr.$.N.call(this)},ot.La=function(){this.s||(this.G||this.v||this.l?ab(this):this.kb())},ot.kb=function(){ab(this)},ot.isActive=function(){return!!this.g},ot.da=function(){try{return 2<Oa(this)?this.g.status:-1}catch{return-1}},ot.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Na(e)}},ot.Ia=function(){return this.m},ot.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=ub.prototype).ra=8,ot.H=1,ot.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new ru(this,this.l,n);let s=this.s;if(this.U&&(s?(s=PE(s),BT(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Xg(this,i,e),Jn(t=Ko(this.I),"RID",n),Jn(t,"CVER",22),this.F&&Jn(t,"X-HTTP-Session-Id",this.F),Fd(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(cb(s)))+"&"+e:this.o&&cy(t,this.o,s)),iw(this.i,i),this.bb&&Jn(t,"TYPE","init"),this.P?(Jn(t,"$req",e),Jn(t,"SID","null"),i.aa=!0,Tf(i,t,null)):Tf(i,t,e),this.H=2}}else 3==this.H&&(n?cw(this,n):0==this.j.length||ei(this.i)||cw(this))},ot.Ma=function(){if(this.u=null,dw(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=wf(Wi(this.jb,this),n)}},ot.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ki(10),Yg(this),dw(this))},ot.ib=function(){null!=this.v&&(this.v=null,Yg(this),hy(this),Ki(19))},ot.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ki(2)):(this.l.info("Failed to ping google.com"),Ki(1))},ot.isActive=function(){return!!this.h&&this.h.isActive(this)},(ot=gb.prototype).Ba=function(){},ot.Aa=function(){},ot.za=function(){},ot.ya=function(){},ot.isActive=function(){return!0},ot.Va=function(){},py.prototype.g=function(n,e){return new qs(n,e)},wi(qs,Ii),qs.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=fb(n,null,n.Y),dy(n)},qs.prototype.close=function(){uy(this.g)},qs.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=UE(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&dy(e)},qs.prototype.N=function(){this.g.h=null,delete this.j,uy(this.g),delete this.g,qs.$.N.call(this)},wi(mb,X_),wi(_b,Vg),wi(Rf,gb),Rf.prototype.Ba=function(){Oi(this.g,"a")},Rf.prototype.Aa=function(n){Oi(this.g,new mb(n))},Rf.prototype.za=function(n){Oi(this.g,new _b)},Rf.prototype.ya=function(){Oi(this.g,"b")},wi(Xo,function rR(){this.blockSize=-1}),Xo.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Xo.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)pw(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){pw(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){pw(this,r),i=0;break}}this.h=i,this.i+=e},Xo.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var iR={};function gw(n){return-128<=n&&128>n?function NT(n,e){var t=iR;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new jn([0|e],0>e?-1:0)}):new jn([0|n],0>n?-1:0)}function Fa(n){if(isNaN(n)||!isFinite(n))return Ld;if(0>n)return Ti(Fa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=mw;return new jn(e,0)}var mw=4294967296,Ld=gw(0),gy=gw(1),_w=gw(16777216);function La(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Ks(n){return-1==n.h}function Ti(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new jn(t,~n.h).add(gy)}function em(n,e){return n.add(Ti(e))}function tm(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Pf(n,e){this.g=n,this.h=e}function Mf(n,e){if(La(e))throw Error("division by zero");if(La(n))return new Pf(Ld,Ld);if(Ks(n))return e=Mf(Ti(n),e),new Pf(Ti(e.g),Ti(e.h));if(Ks(e))return e=Mf(n,Ti(e)),new Pf(Ti(e.g),e.h);if(30<n.g.length){if(Ks(n)||Ks(e))throw Error("slowDivide_ only works with positive integers.");for(var t=gy,r=e;0>=r.X(n);)t=my(t),r=my(r);var i=Eo(t,1),s=Eo(r,1);for(r=Eo(r,2),t=Eo(t,2);!La(r);){var l=s.add(r);0>=l.X(n)&&(i=i.add(t),s=l),r=Eo(r,1),t=Eo(t,1)}return e=em(n,i.R(e)),new Pf(i,e)}for(i=Ld;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(s=Fa(t)).R(e);Ks(l)||0<l.X(n);)l=(s=Fa(t-=r)).R(e);La(s)&&(s=gy),i=i.add(s),n=em(n,l)}return new Pf(i,n)}function my(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new jn(t,n.h)}function Eo(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new jn(i,n.h)}(ot=jn.prototype).ea=function(){if(Ks(this))return-Ti(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:mw+r)*e,e*=mw}return n},ot.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(La(this))return"0";if(Ks(this))return"-"+Ti(this).toString(n);for(var e=Fa(Math.pow(n,6)),t=this,r="";;){var i=Mf(t,e).g,s=((0<(t=em(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(La(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ot.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ot.X=function(n){return Ks(n=em(this,n))?-1:La(n)?0:1},ot.abs=function(){return Ks(this)?Ti(this):this},ot.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),l=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(s&=65535)}return new jn(t,-2147483648&t[t.length-1]?-1:0)},ot.R=function(n){if(La(this)||La(n))return Ld;if(Ks(this))return Ks(n)?Ti(this).R(Ti(n)):Ti(Ti(this).R(n));if(Ks(n))return Ti(this.R(Ti(n)));if(0>this.X(_w)&&0>n.X(_w))return Fa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,l=65535&this.D(r),d=n.D(i)>>>16,p=65535&n.D(i);t[2*r+2*i]+=l*p,tm(t,2*r+2*i),t[2*r+2*i+1]+=s*p,tm(t,2*r+2*i+1),t[2*r+2*i+1]+=l*d,tm(t,2*r+2*i+1),t[2*r+2*i+2]+=s*d,tm(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new jn(t,0)},ot.gb=function(n){return Mf(this,n).h},ot.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new jn(t,this.h&n.h)},ot.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new jn(t,this.h|n.h)},ot.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new jn(t,this.h^n.h)},py.prototype.createWebChannel=py.prototype.g,qs.prototype.send=qs.prototype.u,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,Fg.NO_ERROR=0,Fg.TIMEOUT=8,Fg.HTTP_ERROR=6,WE.COMPLETE="complete",KE.EventType=Lg,Lg.OPEN="a",Lg.CLOSE="b",Lg.ERROR="c",Lg.MESSAGE="d",Ii.prototype.listen=Ii.prototype.O,Pr.prototype.listenOnce=Pr.prototype.P,Pr.prototype.getLastError=Pr.prototype.Sa,Pr.prototype.getLastErrorCode=Pr.prototype.Ia,Pr.prototype.getStatus=Pr.prototype.da,Pr.prototype.getResponseJson=Pr.prototype.Wa,Pr.prototype.getResponseText=Pr.prototype.ja,Pr.prototype.send=Pr.prototype.ha,Pr.prototype.setWithCredentials=Pr.prototype.Oa,Xo.prototype.digest=Xo.prototype.l,Xo.prototype.reset=Xo.prototype.reset,Xo.prototype.update=Xo.prototype.j,jn.prototype.add=jn.prototype.add,jn.prototype.multiply=jn.prototype.R,jn.prototype.modulo=jn.prototype.gb,jn.prototype.compare=jn.prototype.X,jn.prototype.toNumber=jn.prototype.ea,jn.prototype.toString=jn.prototype.toString,jn.prototype.getBits=jn.prototype.D,jn.fromNumber=Fa,jn.fromString=function yb(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ti(yb(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Fa(Math.pow(e,8)),r=Ld,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+s),e);8>s?(s=Fa(Math.pow(e,s)),r=r.R(s).add(Fa(l))):r=(r=r.R(t)).add(Fa(l))}return r};var sR=_o.createWebChannelTransport=function(){return new py},oR=_o.getStatEventTarget=function(){return Og()},au=_o.ErrorCode=Fg,fO=_o.EventType=WE,yw=_o.Event=vo,aR=_o.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},nm=(_o.FetchXmlHttpFactory=Sf,_o.WebChannel=KE),pO=_o.XhrIo=Pr,Lt=_o.Md5=Xo,xf=_o.Integer=jn;const vb="@firebase/firestore";class bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bi.UNAUTHENTICATED=new bi(null),bi.GOOGLE_CREDENTIALS=new bi("google-credentials-uid"),bi.FIRST_PARTY=new bi("first-party-uid"),bi.MOCK_USER=new bi("mock-user");let Jo="10.8.0";const lu=new ki.Yd("@firebase/firestore");function Ll(){return lu.logLevel}function De(n,...e){if(lu.logLevel<=ki.in.DEBUG){const t=e.map(yy);lu.debug(`Firestore (${Jo}): ${n}`,...t)}}function ti(n,...e){if(lu.logLevel<=ki.in.ERROR){const t=e.map(yy);lu.error(`Firestore (${Jo}): ${n}`,...t)}}function ds(n,...e){if(lu.logLevel<=ki.in.WARN){const t=e.map(yy);lu.warn(`Firestore (${Jo}): ${n}`,...t)}}function yy(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+n;throw ti(e),new Error(e)}function It(n,e){n||ht()}function et(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends B.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class pi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bi.UNAUTHENTICATED))}shutdown(){}}class cR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class uR{constructor(e){this.t=e,this.currentUser=bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new pi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new pi,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=l;e.enqueueRetryable((0,Te.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{De("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(De("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new pi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(De("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new wb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new bi(e)}}class dR{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vy{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ib{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&De("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.R;return this.R=s.token,De("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{De("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):De("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.R=t.token,new vw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function fR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function kf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Tb(n){return n+"\0"}class fr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fr.fromMillis(Date.now())}static fromDate(e){return fr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new fr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new fr(0,0))}static max(){return new At(new fr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Of{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Of.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Of?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class fn extends Of{construct(e,t,r){return new fn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new fn(t)}static emptyPath(){return new fn([])}}const pR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Of{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return pR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ue(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Ue(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ue(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(s(),i++)}if(s(),l)throw new Ue(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(fn.fromString(e))}static fromName(e){return new tt(fn.fromString(e).popFirst(5))}static empty(){return new tt(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===fn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return fn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new fn(e.slice()))}}class Ff{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function bb(n){return n.fields.find(e=>2===e.kind)}function Lf(n){return n.fields.filter(e=>2!==e.kind)}Ff.UNKNOWN_ID=-1;class Vf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vl(0,Rs.min())}}function Ab(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new fr(t+1,0):new fr(t,r));return new Rs(i,tt.empty(),e)}function Db(n){return new Rs(n.readTime,n.key,-1)}class Rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Rs(At.min(),tt.empty(),-1)}static max(){return new Rs(At.max(),tt.empty(),-1)}}function Vd(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const Sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Rb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function cu(n){return Ew.apply(this,arguments)}function Ew(){return Ew=(0,Te.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==Sb)throw n;De("LocalStore","Unexpectedly lost primary lease")}),Ew.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++s,l&&s===i&&t()},p=>r(p))}),l=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,l=new Array(s);let d=0;for(let p=0;p<s;p++){const y=p;t(e[y]).next(w=>{l[y]=w,++d,d===s&&r(l)},w=>i(w))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class Ey{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new pi,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new im(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=wy(r.target.error);this.V.reject(new im(e,i))}}static open(e,t,r,i){try{return new Ey(t,e.transaction(i,r))}catch(s){throw new im(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(De("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mR(t)}}class Zs{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===Zs.S((0,B.z$)())&&ti("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return De("SimpleDb","Removing database:",e),uu(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,B.hl)())return!1;if(Zs.C())return!0;const e=(0,B.z$)(),t=Zs.S(e),r=0<t&&t<10,i=Zs.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,Te.Z)(function*(){return t.db||(De("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new im(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Ue(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new im(e,d))},s.onupgradeneeded=l=>{De("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.p.N(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{De("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,Te.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.O(e);const p=Ey.open(s.db,e,l?"readonly":"readwrite",r),y=i(p).next(w=>(p.g(),w)).catch(w=>(p.abort(w),ce.reject(w))).toPromise();return y.catch(()=>{}),yield p.m,y}catch(p){const y=p,w="FirebaseError"!==y.name&&d<3;if(De("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gR{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return uu(this.k.delete())}}class im extends Ue{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function wo(n){return"IndexedDbTransactionError"===n.name}class mR{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(De("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(De("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),uu(r)}add(e){return De("SimpleDb","ADD",this.store.name,e,e),uu(this.store.add(e))}get(e){return uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),De("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return De("SimpleDb","DELETE",this.store.name,e),uu(this.store.delete(e))}count(){return De("SimpleDb","COUNT",this.store.name),uu(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new ce((l,d)=>{s.onerror=p=>{d(p.target.error)},s.onsuccess=p=>{l(p.target.result)}})}{const s=this.cursor(r),l=[];return this.G(s,(d,p)=>{l.push(p)}).next(()=>l)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}H(e,t){De("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,l,d)=>d.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const l=wy(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}G(e,t){const r=[];return new ce((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const p=new gR(d),y=t(d.primaryKey,d.value,p);if(y instanceof ce){const w=y.catch(D=>(p.done(),ce.reject(D)));r.push(w)}p.isDone?i():null===p.$?d.continue():d.continue(p.$)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function uu(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wy(r.target.error);t(i)}})}let Pb=!1;function wy(n){const e=Zs.S((0,B.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Pb||(Pb=!0,setTimeout(()=>{throw r},0)),r}}return n}class _R{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;De("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){t.task=null;try{De("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){wo(r)?De("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield cu(r)}yield t.ee(6e4)}))}}class Mb{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,Te.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return De("IndexBackfiller",`Processing collection: ${l}`),this.re(e,l,i).next(d=>{i-=d,r.add(l)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ie(i,s)).next(d=>(De("IndexBackfiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=Db(s);Vd(l,r)>0&&(r=l)}),new Rs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ys=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Ud(n){return null==n}function sm(n){return 0===n&&1/n==-1/0}function ww(n){return"number"==typeof n&&Number.isInteger(n)&&!sm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xb(e)),e=yR(n.get(t),e);return xb(e)}function yR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function xb(n){return n+"\x01\x01"}function Va(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&ht(),n.charAt(l+1)){case"\x01":const d=n.substring(s,l);let p;0===i.length?p=d:(i+=d,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:ht()}s=l+2}return new fn(r)}const Iy=["userId","batchId"];function Ty(n,e){return[n,Li(e)]}function Iw(n,e,t){return[n,Li(e),t]}const vR={},ER=["prefixPath","collectionGroup","readTime","documentId"],wR=["prefixPath","collectionGroup","documentId"],IR=["collectionGroup","readTime","prefixPath","documentId"],TR=["canonicalId","targetId"],bR=["targetId","path"],CR=["path","targetId"],AR=["collectionId","parent"],Nb=["indexId","uid"],kb=["uid","sequenceNumber"],DR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],SR=["indexId","uid","orderedDocumentKey"],Ob=["userId","collectionPath","documentId"],RR=["userId","collectionPath","largestBatchId"],PR=["userId","collectionGroup","largestBatchId"],Fb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tw=[...Fb,"documentOverlays"],by=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bw=by,Cw=[...bw,"indexConfiguration","indexState","indexEntries"];class Aw extends Rb{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Ci(n,e){const t=et(n);return Zs.M(t.ae,e)}function Cy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function du(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Nn{constructor(e,t){this.comparator=e,this.root=t||Vi.EMPTY}insert(e,t){return new Nn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vi.BLACK,null,null))}remove(e){return new Nn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new om(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new om(this.root,e,this.comparator,!1)}getReverseIterator(){return new om(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new om(this.root,e,this.comparator,!0)}}class om{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Vi.RED,this.left=i??Vi.EMPTY,this.right=s??Vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Vi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Vi.EMPTY=null,Vi.RED=!0,Vi.BLACK=!1,Vi.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Vi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kn{constructor(e){this.comparator=e,this.data=new Nn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sw(this.data.getIterator())}getIteratorFrom(e){return new Sw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Kn(this.comparator);return t.data=e,t}}class Sw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hu(n){return n.hasNext()?n.getNext():void 0}class Ps{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new Ps([])}unionWith(e){let t=new Kn(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ay extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ay("Invalid base64 string: "+s):s}}(e);return new ni(t)}static fromUint8Array(e){const t=function(i){let s="";for(let l=0;l<i.length;++l)s+=String.fromCharCode(i[l]);return s}(e);return new ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ni.EMPTY_BYTE_STRING=new ni("");const Rw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ul(n){if(It(!!n),"string"==typeof n){let e=0;const t=Rw.exec(n);if(It(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ir(n.seconds),nanos:Ir(n.nanos)}}function Ir(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ua(n){return"string"==typeof n?ni.fromBase64String(n):ni.fromUint8Array(n)}function am(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Dy(n){const e=n.mapValue.fields.__previous_value__;return am(e)?Dy(e):e}function lm(n){const e=Ul(n.mapValue.fields.__local_write_time__.timestampValue);return new fr(e.seconds,e.nanos)}class xR{constructor(e,t,r,i,s,l,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new fu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}const Bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pw={nullValue:"NULL_VALUE"};function jl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?am(n)?4:Bb(n)?9007199254740991:10:ht()}function Ba(n,e){if(n===e)return!0;const t=jl(n);if(t!==jl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lm(n).isEqual(lm(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const l=Ul(i.timestampValue),d=Ul(s.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ua(n.bytesValue).isEqual(Ua(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ir(i.geoPointValue.latitude)===Ir(s.geoPointValue.latitude)&&Ir(i.geoPointValue.longitude)===Ir(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ir(i.integerValue)===Ir(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const l=Ir(i.doubleValue),d=Ir(s.doubleValue);return l===d?sm(l)===sm(d):isNaN(l)&&isNaN(d)}return!1}(n,e);case 9:return kf(n.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:return function(i,s){const l=i.mapValue.fields||{},d=s.mapValue.fields||{};if(Cy(l)!==Cy(d))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(void 0===d[p]||!Ba(l[p],d[p])))return!1;return!0}(n,e);default:return ht()}var s}function cm(n,e){return void 0!==(n.values||[]).find(t=>Ba(t,e))}function Bd(n,e){if(n===e)return 0;const t=jl(n),r=jl(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(s,l){const d=Ir(s.integerValue||s.doubleValue),p=Ir(l.integerValue||l.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return Lb(n.timestampValue,e.timestampValue);case 4:return Lb(lm(n),lm(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(s,l){const d=Ua(s),p=Ua(l);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,l){const d=s.split("/"),p=l.split("/");for(let y=0;y<d.length&&y<p.length;y++){const w=$t(d[y],p[y]);if(0!==w)return w}return $t(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,l){const d=$t(Ir(s.latitude),Ir(l.latitude));return 0!==d?d:$t(Ir(s.longitude),Ir(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,l){const d=s.values||[],p=l.values||[];for(let y=0;y<d.length&&y<p.length;++y){const w=Bd(d[y],p[y]);if(w)return w}return $t(d.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,l){if(s===Bl.mapValue&&l===Bl.mapValue)return 0;if(s===Bl.mapValue)return 1;if(l===Bl.mapValue)return-1;const d=s.fields||{},p=Object.keys(d),y=l.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let D=0;D<p.length&&D<w.length;++D){const M=$t(p[D],w[D]);if(0!==M)return M;const O=Bd(d[p[D]],y[w[D]]);if(0!==O)return O}return $t(p.length,w.length)}(n.mapValue,e.mapValue);default:throw ht()}}function Lb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=Ul(n),r=Ul(e),i=$t(t.seconds,r.seconds);return 0!==i?i:$t(t.nanos,r.nanos)}function Uf(n){return Mw(n)}function Mw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ul(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ua(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Mw(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const l of r)s?s=!1:i+=",",i+=`${l}:${Mw(t.fields[l])}`;return i+"}"}(n.mapValue):ht()}function jd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xw(n){return!!n&&"integerValue"in n}function um(n){return!!n&&"arrayValue"in n}function Vb(n){return!!n&&"nullValue"in n}function Ub(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ry(n){return!!n&&"mapValue"in n}function dm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return du(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Bb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hm(n){return"nullValue"in n?Pw:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jd(fu.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function jb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jd(fu.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Bl:ht()}function Nw(n,e){const t=Bd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kw(n,e){const t=Bd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ry(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=dm(l):i.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());Ry(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ry(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){du(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ai(dm(this.value))}}function Ow(n){const e=[];return du(n.fields,(t,r)=>{const i=new er([t]);if(Ry(r)){const s=Ow(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new Ps(e)}class lr{constructor(e,t,r,i,s,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=d}static newInvalidDocument(e){return new lr(e,0,At.min(),At.min(),At.min(),Ai.empty(),0)}static newFoundDocument(e,t,r,i){return new lr(e,1,t,At.min(),r,i,0)}static newNoDocument(e,t){return new lr(e,2,t,At.min(),At.min(),Ai.empty(),0)}static newUnknownDocument(e,t){return new lr(e,3,t,At.min(),At.min(),Ai.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(At.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof lr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new lr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class pu{constructor(e,t){this.position=e,this.inclusive=t}}function NR(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?tt.comparator(tt.fromName(l.referenceValue),t.key):Bd(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Hb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ba(n.position[t],e.position[t]))return!1;return!0}class fm{constructor(e,t="asc"){this.field=e,this.dir=t}}function kR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class $b{}class _n extends $b{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new OR(e,t,r):"array-contains"===t?new FR(e,r):"in"===t?new Fw(e,r):"not-in"===t?new Kb(e,r):"array-contains-any"===t?new Lw(e,r):new _n(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Py(e,r):new My(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Bd(t,this.value)):null!==t&&jl(this.value)===jl(t)&&this.matchesComparison(Bd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends $b{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Cn(e,t)}matches(e){return Bf(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Bf(n){return"and"===n.op}function pm(n){return"or"===n.op}function Io(n){return Gb(n)&&Bf(n)}function Gb(n){for(const e of n.filters)if(e instanceof Cn)return!1;return!0}function gm(n){if(n instanceof _n)return n.field.canonicalString()+n.op.toString()+Uf(n.value);if(Io(n))return n.filters.map(e=>gm(e)).join(",");{const e=n.filters.map(t=>gm(t)).join(",");return`${n.op}(${e})`}}function jf(n,e){return n instanceof _n?(r=n,(i=e)instanceof _n&&r.op===i.op&&r.field.isEqual(i.field)&&Ba(r.value,i.value)):n instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,l,d)=>s&&jf(l,i.filters[d]),!0)}(n,e):void ht();var r,i}function zb(n,e){const t=n.filters.concat(e);return Cn.create(t,n.op)}function Wb(n){return n instanceof _n?`${(t=n).field.canonicalString()} ${t.op} ${Uf(t.value)}`:n instanceof Cn?function(t){return t.op.toString()+" {"+t.getFilters().map(Wb).join(" ,")+"}"}(n):"Filter";var t}class OR extends _n{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.matchesComparison(t)}}class Py extends _n{constructor(e,t){super(e,"in",t),this.keys=qb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class My extends _n{constructor(e,t){super(e,"not-in",t),this.keys=qb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function qb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class FR extends _n{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return um(t)&&cm(t.arrayValue,this.value)}}class Fw extends _n{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cm(this.value.arrayValue,t)}}class Kb extends _n{constructor(e,t){super(e,"not-in",t)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cm(this.value.arrayValue,t)}}class Lw extends _n{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!um(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cm(this.value.arrayValue,r))}}class Zb{constructor(e,t=null,r=[],i=[],s=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=d,this.ce=null}}function mm(n,e=null,t=[],r=[],i=null,s=null,l=null){return new Zb(n,e,t,r,i,s,l)}function Hl(n){const e=et(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Ud(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Uf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Uf(r)).join(",")),e.ce=t}return e.ce}function Hf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Hb(n.startAt,e.startAt)&&Hb(n.endAt,e.endAt)}function $f(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Gf(n,e){return n.filters.filter(t=>t instanceof _n&&t.field.isEqual(e))}function Yb(n,e,t){let r=Pw,i=!0;for(const s of Gf(n,e)){let l=Pw,d=!0;switch(s.op){case"<":case"<=":l=hm(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,d=!1;break;case"!=":case"not-in":l=Pw}Nw({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];Nw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function Qb(n,e,t){let r=Bl,i=!0;for(const s of Gf(n,e)){let l=Bl,d=!0;switch(s.op){case">=":case">":l=jb(s.value),d=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,d=!1;break;case"!=":case"not-in":l=Bl}kw({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];kw({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class $l{constructor(e,t=null,r=[],i=[],s=null,l="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=d,this.endAt=p,this.le=null,this.he=null,this.Pe=null}}function Xb(n,e,t,r,i,s,l,d){return new $l(n,e,t,r,i,s,l,d)}function Hd(n){return new $l(n)}function xy(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Ny(n){return null!==n.collectionGroup}function $d(n){const e=et(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new Kn(er.comparator);return l.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new fm(s,r))}),t.has(er.keyField().canonicalString())||e.le.push(new fm(er.keyField(),r))}return e.le}function Zi(n){const e=et(n);return e.he||(e.he=function Vw(n,e){if("F"===n.limitType)return mm(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new fm(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new pu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new pu(n.startAt.position,n.startAt.inclusive):null;return mm(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,$d(n))),e.he}function Uw(n,e){const t=n.filters.concat([e]);return new $l(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _m(n,e,t){return new $l(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return Hf(Zi(n),Zi(e))&&n.limitType===e.limitType}function Jb(n){return`${Hl(Zi(n))}|lt:${n.limitType}`}function Gd(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Wb(i)).join(", ")}]`),Ud(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(l=i).field.canonicalString()} (${l.dir})`;var l}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Uf(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Uf(i)).join(",")),`Target(${r})`}(Zi(n))}; limitType=${n.limitType})`}function ym(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):tt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of $d(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(l,d,p){const y=NR(l,d,p);return l.inclusive?y<=0:y<0}(r.startAt,$d(r),i)||r.endAt&&!function(l,d,p){const y=NR(l,d,p);return l.inclusive?y>=0:y>0}(r.endAt,$d(r),i)));var r,i}function Yi(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zd(n){return(e,t)=>{let r=!1;for(const i of $d(n)){const s=LR(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function LR(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(s,l,d){const p=l.data.field(s),y=d.data.field(s);return null!==p&&null!==y?Bd(p,y):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}class Gl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){du(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dw(this.inner)}size(){return this.innerSize}}const mO=new Nn(tt.comparator);function Qs(){return mO}const Bw=new Nn(tt.comparator);function Wd(...n){let e=Bw;for(const t of n)e=e.insert(t.key,t);return e}function Wf(n){let e=Bw;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ja(){return vm()}function ky(){return vm()}function vm(){return new Gl(n=>n.toString(),(n,e)=>n.isEqual(e))}const eC=new Nn(tt.comparator),VR=new Kn(tt.comparator);function rn(...n){let e=VR;for(const t of n)e=e.add(t);return e}const UR=new Kn($t);function Em(){return UR}function jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sm(e)?"-0":e}}function Hw(n){return{integerValue:""+n}}function wm(n,e){return ww(e)?Hw(e):jw(n,e)}class qf{constructor(){this._=void 0}}function _O(n,e,t){return n instanceof qd?function(i,s){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&am(s)&&(s=Dy(s)),s&&(l.fields.__previous_value__=s),{mapValue:l}}(t,e):n instanceof To?rC(n,e):n instanceof gu?Oy(n,e):function(i,s){const l=nC(i,s),d=iC(l)+iC(i.Ie);return xw(l)&&xw(i.Ie)?Hw(d):jw(i.serializer,d)}(n,e)}function tC(n,e,t){return n instanceof To?rC(n,e):n instanceof gu?Oy(n,e):t}function nC(n,e){return n instanceof Im?xw(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class qd extends qf{}class To extends qf{constructor(e){super(),this.elements=e}}function rC(n,e){const t=BR(e);for(const r of n.elements)t.some(i=>Ba(i,r))||t.push(r);return{arrayValue:{values:t}}}class gu extends qf{constructor(e){super(),this.elements=e}}function Oy(n,e){let t=BR(e);for(const r of n.elements)t=t.filter(i=>!Ba(i,r));return{arrayValue:{values:t}}}class Im extends qf{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function iC(n){return Ir(n.integerValue||n.doubleValue)}function BR(n){return um(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Tm{constructor(e,t){this.field=e,this.transform=t}}class HR{constructor(e,t){this.version=e,this.transformResults=t}}class cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Fy{}function $w(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zf(n.key,cr.none()):new Kf(n.key,n.data,cr.none());{const t=n.data,r=Ai.empty();let i=new Kn(er.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new Ha(n.key,r,new Ps(i.toArray()),cr.none())}}function sC(n,e,t){n instanceof Kf?function(i,s,l){const d=i.value.clone(),p=Ww(i.fieldTransforms,s,l.transformResults);d.setAll(p),s.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ha?function(i,s,l){if(!bm(i.precondition,s))return void s.convertToUnknownDocument(l.version);const d=Ww(i.fieldTransforms,s,l.transformResults),p=s.data;p.setAll(zw(i)),p.setAll(d),s.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Cm(n,e,t,r){return n instanceof Kf?function(s,l,d,p){if(!bm(s.precondition,l))return d;const y=s.value.clone(),w=qw(s.fieldTransforms,p,l);return y.setAll(w),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ha?function(s,l,d,p){if(!bm(s.precondition,l))return d;const y=qw(s.fieldTransforms,p,l),w=l.data;return w.setAll(zw(s)),w.setAll(y),l.convertToFoundDocument(l.version,w).setHasLocalMutations(),null===d?null:d.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(D=>D.field))}(n,e,t,r):(d=t,bm(n.precondition,l=e)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d);var l,d}function $R(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=nC(r.transform,i||null);null!=s&&(null===t&&(t=Ai.empty()),t.set(r.field,s))}return t||null}function Gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&kf(r,i,(s,l)=>function jR(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof To&&i instanceof To||r instanceof gu&&i instanceof gu?kf(r.elements,i.elements,Ba):r instanceof Im&&i instanceof Im?Ba(r.Ie,i.Ie):r instanceof qd&&i instanceof qd);var r,i}(s,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Kf extends Fy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ha extends Fy{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ww(n,e,t){const r=new Map;It(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,d=e.data.field(s.field);r.set(s.field,tC(l,d,t[i]))}return r}function qw(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,_O(s,l,e))}return r}class Zf extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kw extends Fy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class oC{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sC(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=ky();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let d=this.applyToLocalView(l,s.mutatedFields);d=t.has(i.key)?null:d;const p=$w(l,d);null!==p&&r.set(i.key,p),l.isValidDocument()||l.convertToNoDocument(At.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),rn())}isEqual(e){return this.batchId===e.batchId&&kf(this.mutations,e.mutations,(t,r)=>Gw(t,r))&&kf(this.baseMutations,e.baseMutations,(t,r)=>Gw(t,r))}}class Ly{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){It(e.mutations.length===r.length);let i=eC;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new Ly(e,t,r,i)}}class aC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class vO{constructor(e,t){this.count=e,this.unchangedNames=t}}var gi,An;function GR(n){switch(n){default:return ht();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function zR(n){if(void 0===n)return ti("GRPC error has no .code"),pe.UNKNOWN;switch(n){case gi.OK:return pe.OK;case gi.CANCELLED:return pe.CANCELLED;case gi.UNKNOWN:return pe.UNKNOWN;case gi.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case gi.INTERNAL:return pe.INTERNAL;case gi.UNAVAILABLE:return pe.UNAVAILABLE;case gi.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case gi.NOT_FOUND:return pe.NOT_FOUND;case gi.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case gi.ABORTED:return pe.ABORTED;case gi.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case gi.DATA_LOSS:return pe.DATA_LOSS;default:return ht()}}(An=gi||(gi={}))[An.OK=0]="OK",An[An.CANCELLED=1]="CANCELLED",An[An.UNKNOWN=2]="UNKNOWN",An[An.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",An[An.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",An[An.NOT_FOUND=5]="NOT_FOUND",An[An.ALREADY_EXISTS=6]="ALREADY_EXISTS",An[An.PERMISSION_DENIED=7]="PERMISSION_DENIED",An[An.UNAUTHENTICATED=16]="UNAUTHENTICATED",An[An.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",An[An.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",An[An.ABORTED=10]="ABORTED",An[An.OUT_OF_RANGE=11]="OUT_OF_RANGE",An[An.UNIMPLEMENTED=12]="UNIMPLEMENTED",An[An.INTERNAL=13]="INTERNAL",An[An.UNAVAILABLE=14]="UNAVAILABLE",An[An.DATA_LOSS=15]="DATA_LOSS";function Am(){return new TextEncoder}const EO=new xf([4294967295,4294967295],0);function Yw(n){const e=Am().encode(n),t=new Lt;return t.update(e),new Uint8Array(t.digest())}function Dm(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xf([t,r],0),new xf([i,s],0)]}class Vy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yf(`Invalid padding: ${t}`);if(r<0)throw new Yf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Yf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Yf(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=xf.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(xf.fromNumber(r)));return 1===i.compare(EO)&&(i=new xf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Yw(e),[r,i]=Dm(t);for(let s=0;s<this.hashCount;s++){const l=this.de(r,i,s);if(!this.Ae(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new Vy(s,i,t);return r.forEach(d=>l.insert(d)),l}insert(e){if(0===this.Te)return;const t=Yw(e),[r,i]=Dm(t);for(let s=0;s<this.hashCount;s++){const l=this.de(r,i,s);this.Re(l)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Yf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Uy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Kd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Uy(At.min(),i,new Nn($t),Qs(),rn())}}class Kd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Kd(r,t,rn(),rn(),rn())}}class Sm{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class lC{constructor(e,t){this.targetId=e,this.fe=t}}class WR{constructor(e,t,r=ni.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cC{constructor(){this.ge=0,this.pe=Rm(),this.ye=ni.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=rn(),t=rn(),r=rn();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new Kd(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=Rm()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,It(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class qR{constructor(e){this.Le=e,this.ke=new Map,this.qe=Qs(),this.Qe=uC(),this.Ke=new Nn($t)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if($f(s))if(0===r){const l=new tt(s.path);this.We(t,l,lr.newNoDocument(l,At.min()))}else It(1===r);else{const l=this.Ze(t);if(l!==r){const d=this.Xe(e),p=d?this.et(d,e,l):1;0!==p&&(this.He(t),this.Ke=this.Ke.insert(t,2===p?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let l,d;try{l=Ua(r).toUint8Array()}catch(p){if(p instanceof Ay)return ds("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new Vy(l,i,s)}catch(p){return ds(p instanceof Yf?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return 0===d.Te?null:d}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const l=this.Le.nt(),d=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;e.mightContain(d)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,l)=>{const d=this.Ye(l);if(d){if(s.current&&$f(d.target)){const p=new tt(d.target.path);null!==this.qe.get(p)||this.st(l,p)||this.We(l,p,lr.newNoDocument(p,e))}s.De&&(t.set(l,s.ve()),s.Fe())}});let r=rn();this.Qe.forEach((s,l)=>{let d=!0;l.forEachWhile(p=>{const y=this.Ye(p);return!y||"TargetPurposeLimboResolution"===y.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.qe.forEach((s,l)=>l.setReadTime(e));const i=new Uy(e,t,this.Ke,this.qe,r);return this.qe=Qs(),this.Qe=uC(),this.Ke=new Nn($t),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new cC,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Kn($t),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||De("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new cC),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function uC(){return new Nn(tt.comparator)}function Rm(){return new Nn(tt.comparator)}const KR={asc:"ASCENDING",desc:"DESCENDING"},wO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IO={and:"AND",or:"OR"};class TO{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qw(n,e){return n.useProto3Json||Ud(e)?e:{value:e}}function Qf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function bO(n,e){return Qf(n,e.toTimestamp())}function jr(n){return It(!!n),At.fromTimestamp(function(t){const r=Ul(t);return new fr(r.seconds,r.nanos)}(n))}function By(n,e){return jy(n,e).canonicalString()}function jy(n,e){const t=(i=n,new fn(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function ZR(n){const e=fn.fromString(n);return It(yC(e)),e}function hs(n,e){return By(n.databaseId,e.path)}function $a(n,e){const t=ZR(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(Xs(t))}function Hy(n,e){return By(n.databaseId,e)}function hC(n){const e=ZR(n);return 4===e.length?fn.emptyPath():Xs(e)}function fC(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Xs(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pC(n,e,t){return{name:hs(n,e),fields:t.value.mapValue.fields}}function $y(n,e,t){const r=$a(n,e.name),i=jr(e.updateTime),s=e.createTime?jr(e.createTime):At.min(),l=new Ai({mapValue:{fields:e.fields}}),d=lr.newFoundDocument(r,i,s,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Zd(n,e){let t;if(e instanceof Kf)t={update:pC(n,e.key,e.value)};else if(e instanceof Zf)t={delete:hs(n,e.key)};else if(e instanceof Ha)t={update:pC(n,e.key,e.data),updateMask:_C(e.fieldMask)};else{if(!(e instanceof Kw))return ht();t={verify:hs(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,l){const d=l.transform;if(d instanceof qd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof To)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof gu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Im)return{fieldPath:l.field.canonicalString(),increment:d.Ie};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:bO(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:ht()),t;var s}function Gy(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?cr.updateTime(jr(s.updateTime)):void 0!==s.exists?cr.exists(s.exists):cr.none():cr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(l,d){let p=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),p=new qd):"appendMissingElements"in d?p=new To(d.appendMissingElements.values||[]):"removeAllFromArray"in d?p=new gu(d.removeAllFromArray.values||[]):"increment"in d?p=new Im(l,d.increment):ht();const y=er.fromServerFormat(d.fieldPath);return new Tm(y,p)}(n,i)):[];var s;if(e.update){const i=$a(n,e.update.name),s=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ps((e.updateMask.fieldPaths||[]).map(w=>er.fromServerFormat(w)));return new Ha(i,s,l,t,r)}return new Kf(i,s,t,r)}if(e.delete){const i=$a(n,e.delete);return new Zf(i,t)}if(e.verify){const i=$a(n,e.verify);return new Kw(i,t)}return ht()}function mC(n,e){return{documents:[Hy(n,e.path)]}}function zy(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Hy(n,i);const s=function(y){if(0!==y.length)return Wy(Cn.create(y,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const l=function(y){if(0!==y.length)return y.map(w=>{return{field:fs((M=w).field),direction:JR(M.dir)};var M})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=Qw(n,e.limit);return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ut:t,parent:i};var y}function Xw(n){let e=hC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){It(1===r);const w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(D){const M=Jw(D);return M instanceof Cn&&Io(M)?M.getFilters():[M]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(M=>{return new fm(Yd((H=M).field),function(re){switch(re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(H.direction));var H}));let d=null;t.limit&&(d=function(D){let M;return M="object"==typeof D?D.value:D,Ud(M)?null:M}(t.limit));let p=null;var D;t.startAt&&(p=new pu((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new pu(D.values||[],!D.before)}(t.endAt)),Xb(e,i,l,s,d,"F",p,y)}function Jw(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yd(t.unaryFilter.field);return _n.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Yd(t.unaryFilter.field);return _n.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Yd(t.unaryFilter.field);return _n.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yd(t.unaryFilter.field);return _n.create(l,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}(n):void 0!==n.fieldFilter?_n.create(Yd((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Cn.create(t.compositeFilter.filters.map(r=>Jw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ht()}}(t.compositeFilter.op))}(n):ht();var t}function JR(n){return KR[n]}function e0(n){return wO[n]}function zl(n){return IO[n]}function fs(n){return{fieldPath:n.canonicalString()}}function Yd(n){return er.fromServerFormat(n.fieldPath)}function Wy(n){return n instanceof _n?function(t){if("=="===t.op){if(Ub(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NAN"}};if(Vb(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ub(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NOT_NAN"}};if(Vb(t.value))return{unaryFilter:{field:fs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(t.field),op:e0(t.op),value:t.value}}}(n):n instanceof Cn?function(t){const r=t.getFilters().map(i=>Wy(i));return 1===r.length?r[0]:{compositeFilter:{op:zl(t.op),filters:r}}}(n):ht()}function _C(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yC(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class mu{constructor(e,t,r,i,s=At.min(),l=At.min(),d=ni.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class vC{constructor(e){this.ct=e}}function EC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:hs(s=n.ct,(l=e).key),fields:l.data.value.mapValue.fields,updateTime:Qf(s,l.version.toTimestamp()),createTime:Qf(s,l.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_u(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:_u(e.version)}}var s,l;return r}function qy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _u(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xf(n){const e=new fr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function yu(n,e){const t=(e.baseMutations||[]).map(s=>Gy(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>Gy(n.ct,s)),i=fr.fromMillis(e.localWriteTimeMs);return new oC(e.batchId,i,t,r)}function Pm(n){const e=Xf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xf(n.lastLimboFreeSnapshotVersion):At.min();let r;return r=void 0!==n.query.documents?(It(1===(s=n.query).documents.length),Zi(Hd(hC(s.documents[0])))):function(s){return Zi(Xw(s))}(n.query),new mu(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ni.fromBase64String(n.resumeToken));var s}function t0(n,e){const t=_u(e.snapshotVersion),r=_u(e.lastLimboFreeSnapshotVersion);let i;i=$f(e.target)?mC(n.ct,e.target):zy(n.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Hl(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function wC(n){const e=Xw({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?_m(e,e.limit,"L"):e}function Mm(n,e){return new aC(e.largestBatchId,Gy(n.ct,e.overlayMutation))}function n0(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function r0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:_u(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}class IC{getBundleMetadata(e,t){return s0(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Xf(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return s0(e).put({bundleId:(i=t).id,createTime:_u(jr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return o0(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:wC(s.bundledQuery),readTime:Xf(s.readTime)};var s})}saveNamedQuery(e,t){return o0(e).put({name:(i=t).name,readTime:_u(jr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function s0(n){return Ci(n,"bundles")}function o0(n){return Ci(n,"namedQueries")}class Qd{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new Qd(e,t.uid||"")}getOverlay(e,t){return vu(e).get(n0(this.userId,t)).next(r=>r?Mm(this.serializer,r):null)}getOverlays(e,t){const r=ja();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const d=new aC(t,l);i.push(this.ht(e,d))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Li(l.getCollectionPath())));const s=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(vu(e).H("collectionPathOverlayIndex",d))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ja(),s=Li(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return vu(e).W("collectionPathOverlayIndex",l).next(d=>{for(const p of d){const y=Mm(this.serializer,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ja();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return vu(e).Y({index:"collectionGroupOverlayIndex",range:d},(p,y,w)=>{const D=Mm(this.serializer,y);s.size()<i||D.largestBatchId===l?(s.set(D.getKey(),D),l=D.largestBatchId):w.done()}).next(()=>s)}ht(e,t){return vu(e).put(function(i,s,l){const[d,p,y]=n0(s,l.mutation.key);return{userId:s,collectionPath:p,documentId:y,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Zd(i.ct,l.mutation)}}(this.serializer,this.userId,t))}}function vu(n){return Ci(n,"documentOverlays")}class Eu{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Ir(e.integerValue));else if("doubleValue"in e){const r=Ir(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),sm(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ua(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?Bb(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):ht()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),tt.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function tP(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function TC(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const l=tP(255&r[s]);if(i+=l,8!==l)break}return i}(n);return Math.ceil(e/8)}Eu.bt=new Eu;class CO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const t=this.Lt(e),r=TC(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Lt(e),r=TC(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(s){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,s,!1),new Uint8Array(l.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class AO{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class DO{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Jf{constructor(){this.Gt=new CO,this.zt=new AO(this.Gt),this.jt=new DO(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Xd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xd(this.indexId,this.documentKey,this.arrayValue,r)}}function wu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=bC(n.arrayValue,e.arrayValue),0!==t?t:(t=bC(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function bC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class nP{constructor(e){this.Yt=new Kn((t,r)=>er.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(It(e.collectionGroup===this.collectionId),this.en)return!1;const t=bb(e);if(void 0!==t&&!this.nn(t))return!1;const r=Lf(e);let i=new Set,s=0,l=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const d=this.Yt.getIterator().getNext();if(!i.has(d.field.canonicalString())){const p=r[s];if(!this.rn(d,p)||!this.sn(this.Zt[l++],p))return!1}++s}for(;s<r.length;++s)if(l>=this.Zt.length||!this.sn(this.Zt[l++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new Kn(er.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Vf(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Vf(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Vf(r.field,"asc"===r.dir?0:1)));return new Ff(Ff.UNKNOWN_ID,this.collectionId,t,Vl.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function rP(n){var e,t;if(It(n instanceof _n||n instanceof Cn),n instanceof _n){if(n instanceof Fw){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>_n.create(n.field,"==",s)))||[];return Cn.create(i,"or")}return n}const r=n.filters.map(i=>rP(i));return Cn.create(r,n.op)}function SO(n){if(0===n.getFilters().length)return[];const e=ep(rP(n));return It(DC(e)),CC(e)||AC(e)?[e]:e.getFilters()}function CC(n){return n instanceof _n}function AC(n){return n instanceof Cn&&Io(n)}function DC(n){return CC(n)||AC(n)||function(t){if(t instanceof Cn&&pm(t)){for(const r of t.getFilters())if(!CC(r)&&!AC(r))return!1;return!0}return!1}(n)}function ep(n){if(It(n instanceof _n||n instanceof Cn),n instanceof _n)return n;if(1===n.filters.length)return ep(n.filters[0]);const e=n.filters.map(r=>ep(r));let t=Cn.create(e,n.op);return t=xm(t),DC(t)?t:(It(t instanceof Cn),It(Bf(t)),It(t.filters.length>1),t.filters.reduce((r,i)=>a0(r,i)))}function a0(n,e){let t;return It(n instanceof _n||n instanceof Cn),It(e instanceof _n||e instanceof Cn),t=n instanceof _n?e instanceof _n?Cn.create([n,e],"and"):SC(n,e):e instanceof _n?SC(e,n):function(i,s){if(It(i.filters.length>0&&s.filters.length>0),Bf(i)&&Bf(s))return zb(i,s.getFilters());const l=pm(i)?i:s,d=pm(i)?s:i,p=l.filters.map(y=>a0(y,d));return Cn.create(p,"or")}(n,e),xm(t)}function SC(n,e){if(Bf(e))return zb(e,n.getFilters());{const t=e.filters.map(r=>a0(n,r));return Cn.create(t,"or")}}function xm(n){if(It(n instanceof _n||n instanceof Cn),n instanceof _n)return n;const e=n.getFilters();if(1===e.length)return xm(e[0]);if(Gb(n))return n;const t=e.map(i=>xm(i)),r=[];return t.forEach(i=>{i instanceof _n?r.push(i):i instanceof Cn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Cn.create(r,n.op)}class Jd{constructor(){this._n=new Ky}addToCollectionParentIndex(e,t){return this._n.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Rs.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Rs.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class Ky{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Kn(fn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kn(fn.comparator)).toArray()}}const tp=new Uint8Array(0);class l0{constructor(e,t){this.databaseId=t,this.an=new Ky,this.un=new Gl(r=>Hl(r),(r,i)=>Hf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Li(i)};return RC(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Tb(t),""],!1,!0);return RC(e).W(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Va(l.parent))}return r})}addFieldIndex(e,t){const r=eh(e),i={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var d;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Wl(e);return s.next(d=>{l.put(r0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=eh(e),i=Wl(e),s=Iu(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=eh(e),r=Iu(e),i=Wl(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return ce.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new nP(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=Iu(e);let i=!0;const s=new Map;return ce.forEach(this.cn(t),l=>this.ln(e,l).next(d=>{i&&(i=!!d),s.set(l,d)})).next(()=>{if(i){let l=rn();const d=[];return ce.forEach(s,(p,y)=>{var Oe;De("IndexedDbIndexManager",`Using index ${Oe=p,`id=${Oe.indexId}|cg=${Oe.collectionGroup}|f=${Oe.fields.map(Be=>`${Be.fieldPath}:${Be.kind}`).join(",")}`} to execute ${Hl(t)}`);const w=function(Oe,Be){const Tt=bb(Be);if(void 0===Tt)return null;for(const Nt of Gf(Oe,Tt.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(y,p),D=function(Oe,Be){const Tt=new Map;for(const Nt of Lf(Be))for(const ln of Gf(Oe,Nt.fieldPath))switch(ln.op){case"==":case"in":Tt.set(Nt.fieldPath.canonicalString(),ln.value);break;case"not-in":case"!=":return Tt.set(Nt.fieldPath.canonicalString(),ln.value),Array.from(Tt.values())}return null}(y,p),M=function(Oe,Be){const Tt=[];let Nt=!0;for(const ln of Lf(Be)){const nr=0===ln.kind?Yb(Oe,ln.fieldPath,Oe.startAt):Qb(Oe,ln.fieldPath,Oe.startAt);Tt.push(nr.value),Nt&&(Nt=nr.inclusive)}return new pu(Tt,Nt)}(y,p),O=function(Oe,Be){const Tt=[];let Nt=!0;for(const ln of Lf(Be)){const nr=0===ln.kind?Qb(Oe,ln.fieldPath,Oe.endAt):Yb(Oe,ln.fieldPath,Oe.endAt);Tt.push(nr.value),Nt&&(Nt=nr.inclusive)}return new pu(Tt,Nt)}(y,p),H=this.hn(p,y,M),X=this.hn(p,y,O),re=this.Pn(p,y,D),ye=this.In(p.indexId,w,H,M.inclusive,X,O.inclusive,re);return ce.forEach(ye,je=>r.j(je,t.limit).next(Oe=>{Oe.forEach(Be=>{const Tt=tt.fromSegments(Be.documentKey);l.has(Tt)||(l=l.add(Tt),d.push(Tt))})}))}).next(()=>d)}return ce.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:SO(Cn.create(e.filters,"and")).map(r=>mm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,l,d){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),y=p/(null!=t?t.length:1),w=[];for(let D=0;D<p;++D){const M=t?this.Tn(t[D/y]):tp,O=this.En(e,M,r[D%y],i),H=this.dn(e,M,s[D%y],l),X=d.map(re=>this.En(e,M,re,!0));w.push(...this.createRange(O,H,X))}return w}En(e,t,r,i){const s=new Xd(e,tt.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new Xd(e,tt.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new nP(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const d of s)r.tn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ce.forEach(i,s=>this.ln(e,s).next(l=>{l?0!==r&&l.fields.length<function(p){let y=new Kn(er.comparator),w=!1;for(const D of p.filters)for(const M of D.getFlattenedFilters())M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?w=!0:y=y.add(M.field));for(const D of p.orderBy)D.field.isKeyField()||(y=y.add(D.field));return y.size+(w?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Jf;for(const i of Lf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.Ht(i.kind);Eu.bt.Pt(s,l)}return r.Wt()}Tn(e){const t=new Jf;return Eu.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Jf;return Eu.bt.Pt(jd(this.databaseId,t),r.Ht(function(s){const l=Lf(s);return 0===l.length?0:l[l.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Jf);let s=0;for(const l of Lf(e)){const d=r[s++];for(const p of i)if(this.Vn(t,l.fieldPath)&&um(d))i=this.mn(i,l,d);else{const y=p.Ht(l.kind);Eu.bt.Pt(d,y)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const d of i){const p=new Jf;p.seed(d.Wt()),Eu.bt.Pt(l,p.Ht(t.kind)),s.push(p)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof _n&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=eh(e),i=Wl(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const l=[];return ce.forEach(s,d=>i.get([d.indexId,this.uid]).next(p=>{l.push(function(w,D){const M=D?new Vl(D.sequenceNumber,new Rs(Xf(D.readTime),new tt(Va(D.documentKey)),D.largestBatchId)):Vl.empty(),O=w.fields.map(([H,X])=>new Vf(er.fromServerFormat(H),X));return new Ff(w.indexId,w.collectionGroup,O,M)}(d,p))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:$t(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=eh(e),s=Wl(e);return this.gn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ce.forEach(d,p=>s.put(r0(p.indexId,this.uid,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),ce.forEach(d,p=>this.pn(e,i,p).next(y=>{const w=this.yn(s,p);return y.isEqual(w)?ce.resolve():this.wn(e,s,p,y,w)}))))})}Sn(e,t,r,i){return Iu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return Iu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=Iu(e);let s=new Kn(wu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(l,d)=>{s=s.add(new Xd(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}yn(e,t){let r=new Kn(wu);const i=this.An(t,e);if(null==i)return r;const s=bb(t);if(null!=s){const l=e.data.field(s.fieldPath);if(um(l))for(const d of l.arrayValue.values||[])r=r.add(new Xd(t.indexId,e.key,this.Tn(d),i))}else r=r.add(new Xd(t.indexId,e.key,tp,i));return r}wn(e,t,r,i,s){De("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,y,w,D,M){const O=p.getIterator(),H=y.getIterator();let X=hu(O),re=hu(H);for(;X||re;){let ye=!1,je=!1;if(X&&re){const Oe=w(X,re);Oe<0?je=!0:Oe>0&&(ye=!0)}else null!=X?je=!0:ye=!0;ye?(D(re),re=hu(H)):je?(M(X),X=hu(O)):(X=hu(O),re=hu(H))}}(i,s,wu,d=>{l.push(this.Sn(e,t,r,d))},d=>{l.push(this.bn(e,t,r,d))}),ce.waitFor(l)}gn(e){let t=1;return Wl(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>wu(l,d)).filter((l,d,p)=>!d||0!==wu(l,p[d-1]));const i=[];i.push(e);for(const l of r){const d=wu(l,e),p=wu(l,t);if(0===d)i[0]=e.Jt();else if(d>0&&p<0)i.push(l),i.push(l.Jt());else if(p>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.Dn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,tp,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,tp,[]]))}return s}Dn(e,t){return wu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(iP)}getMinOffset(e,t){return ce.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||ht())).next(iP)}}function RC(n){return Ci(n,"collectionParents")}function Iu(n){return Ci(n,"indexEntries")}function eh(n){return Ci(n,"indexConfiguration")}function Wl(n){return Ci(n,"indexState")}function iP(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Vd(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Rs(e.readTime,e.documentKey,t)}const sP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ps{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ps(e,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function oP(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let d=0;const p=r.Y({range:l},(w,D,M)=>(d++,M.delete()));s.push(p.next(()=>{It(1===d)}));const y=[];for(const w of t.mutations){const D=Iw(e,w.key.path,t.batchId);s.push(i.delete(D)),y.push(w.key)}return ce.waitFor(s).next(()=>y)}function Nm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}ps.DEFAULT_COLLECTION_PERCENTILE=10,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ps.DEFAULT=new ps(41943040,ps.DEFAULT_COLLECTION_PERCENTILE,ps.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ps.DISABLED=new ps(-1,0,0);class Zy{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){It(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Zy(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).Y({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=np(e),l=Tu(e);return l.add({}).next(d=>{It("number"==typeof d);const p=new oC(d,t,r,i),y=function(O,H,X){const re=X.baseMutations.map(je=>Zd(O.ct,je)),ye=X.mutations.map(je=>Zd(O.ct,je));return{userId:H,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:re,mutations:ye}}(this.serializer,this.userId,p),w=[];let D=new Kn((M,O)=>$t(M.canonicalString(),O.canonicalString()));for(const M of i){const O=Iw(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),w.push(l.put(y)),w.push(s.put(O,vR))}return D.forEach(M=>{w.push(this.indexManager.addToCollectionParentIndex(e,M))}),e.addOnCommittedListener(()=>{this.Cn[d]=p.keys()}),ce.waitFor(w).next(()=>p)})}lookupMutationBatch(e,t){return Tu(e).get(t).next(r=>r?(It(r.userId===this.userId),yu(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?ce.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Tu(e).Y({index:"userMutationsIndex",range:i},(l,d,p)=>{d.userId===this.userId&&(It(d.batchId>=r),s=yu(this.serializer,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Tu(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).W("userMutationsIndex",t).next(r=>r.map(i=>yu(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ty(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return np(e).Y({range:i},(l,d,p)=>{const[y,w,D]=l,M=Va(w);if(y===this.userId&&t.path.isEqual(M))return Tu(e).get(D).next(O=>{if(!O)throw ht();It(O.userId===this.userId),s.push(yu(this.serializer,O))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn($t);const i=[];return t.forEach(s=>{const l=Ty(this.userId,s.path),d=IDBKeyRange.lowerBound(l),p=np(e).Y({range:d},(y,w,D)=>{const[M,O,H]=y,X=Va(O);M===this.userId&&s.path.isEqual(X)?r=r.add(H):D.done()});i.push(p)}),ce.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=Ty(this.userId,r),l=IDBKeyRange.lowerBound(s);let d=new Kn($t);return np(e).Y({range:l},(p,y,w)=>{const[D,M,O]=p,H=Va(M);D===this.userId&&r.isPrefixOf(H)?H.length===i&&(d=d.add(O)):w.done()}).next(()=>this.Fn(e,d))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Tu(e).get(s).next(l=>{if(null===l)throw ht();It(l.userId===this.userId),r.push(yu(this.serializer,l))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return oP(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return np(e).Y({range:r},(s,l,d)=>{if(s[0]===this.userId){const p=Va(s[1]);i.push(p)}else d.done()}).next(()=>{It(0===i.length)})})}containsKey(e,t){return PC(e,this.userId,t)}xn(e){return c0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function PC(n,e,t){const r=Ty(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return np(n).Y({range:s,J:!0},(d,p,y)=>{const[w,D,M]=d;w===e&&D===i&&(l=!0),y.done()}).next(()=>l)}function Tu(n){return Ci(n,"mutations")}function np(n){return Ci(n,"documentMutations")}function c0(n){return Ci(n,"mutationQueues")}class bu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new bu(0)}static Bn(){return new bu(-1)}}class MC{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const r=new bu(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>At.fromTimestamp(new fr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rp(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return rp(e).Y((l,d)=>{const p=Pm(d);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return rp(e).Y((r,i)=>{const s=Pm(i);t(s)})}Ln(e){return xC(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}kn(e,t){return xC(e).put("targetGlobalKey",t)}qn(e,t){return rp(e).put(t0(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Hl(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return rp(e).Y({range:i,index:"queryTargetsIndex"},(l,d,p)=>{const y=Pm(d);Hf(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=ql(e);return t.forEach(l=>{const d=Li(l.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=ql(e);return ce.forEach(t,s=>{const l=Li(s.path);return ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=ql(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ql(e);let s=rn();return i.Y({range:r,J:!0},(l,d,p)=>{const y=Va(l[1]),w=new tt(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[Tb(r)],!1,!0);let s=0;return ql(e).Y({index:"documentTargetsIndex",J:!0,range:i},([l,d],p,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}_t(e,t){return rp(e).get(t).next(r=>r?Pm(r):null)}}function rp(n){return Ci(n,"targets")}function xC(n){return Ci(n,"targetGlobal")}function ql(n){return Ci(n,"targetDocuments")}function Yy([n,e],[t,r]){const i=$t(n,t);return 0===i?$t(e,r):i}class RO{constructor(e){this.Kn=e,this.buffer=new Kn(Yy),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Yy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class u0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;De("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){wo(r)?De("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield cu(r)}yield t.zn(3e5)}))}}class d0{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Ys._e);const r=new RO(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(sP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(De("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sP):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,l,d,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(De("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,l=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),Ll()<=ki.in.DEBUG&&De("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-w}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-w}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class aP{constructor(e,t){this.db=e,this.garbageCollector=function NC(n,e){return new d0(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return h0(e,r)}removeReference(e,t,r){return h0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return h0(e,t)}er(e,t){return function(i,s){let l=!1;return c0(i).Z(d=>PC(i,d,s).next(p=>(p&&(l=!0),ce.resolve(!p)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(l,d)=>{if(d<=t){const p=this.er(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,At.min()),ql(e).delete([0,Li(l.path)])))});i.push(p)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return h0(e,t)}Xn(e,t){const r=ql(e);let i,s=Ys._e;return r.Y({index:"documentTargetsIndex"},([l,d],{path:p,sequenceNumber:y})=>{0===l?(s!==Ys._e&&t(new tt(Va(i)),s),s=y,i=p):s=Ys._e}).next(()=>{s!==Ys._e&&t(new tt(Va(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function h0(n,e){return ql(n).put((i=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:i}));var i}class lP{constructor(){this.changes=new Gl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,lr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cP{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ip(e).put(r)}removeEntry(e,t,r){return ip(e).delete(function(s,l){const d=s.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],qy(l),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=lr.newInvalidDocument(t);return ip(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:lr.newInvalidDocument(t)};return ip(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qy(t))},(i,s)=>{r={document:this.nr(t,s),size:Nm(s)}}).next(()=>r)}getEntries(e,t){let r=Qs();return this.ir(e,t,(i,s)=>{const l=this.nr(i,s);r=r.insert(i,l)}).next(()=>r)}sr(e,t){let r=Qs(),i=new Nn(tt.comparator);return this.ir(e,t,(s,l)=>{const d=this.nr(s,l);r=r.insert(s,d),i=i.insert(s,Nm(l))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Kn(OC);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(Qy(i.first()),Qy(i.last())),l=i.getIterator();let d=l.getNext();return ip(e).Y({index:"documentKeyIndex",range:s},(p,y,w)=>{const D=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&OC(d,D)<0;)r(d,null),d=l.getNext();d&&d.isEqual(D)&&(r(d,y),d=l.hasNext()?l.getNext():null),d?w.U(Qy(d)):w.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const l=t.path,d=[l.popLast().toArray(),l.lastSegment(),qy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ip(e).W(IDBKeyRange.bound(d,p,!0)).next(y=>{s?.incrementDocumentReadCount(y.length);let w=Qs();for(const D of y){const M=this.nr(tt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);M.isFoundDocument()&&(ym(t,M)||i.has(M.key))&&(w=w.insert(M.key,M))}return w})}getAllFromCollectionGroup(e,t,r,i){let s=Qs();const l=hP(t,r),d=hP(t,Rs.max());return ip(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(p,y,w)=>{const D=this.nr(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===i&&w.done()}).next(()=>s)}newChangeBuffer(e){return new uP(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dP(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}tr(e,t){return dP(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function eP(n,e){let t;if(e.document)t=$y(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Xf(e.noDocument.readTime);t=lr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=tt.fromSegments(e.unknownDocument.path),i=Xf(e.unknownDocument.version);t=lr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new fr(i[0],i[1]);return At.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return lr.newInvalidDocument(e)}}function kC(n){return new cP(n)}class uP extends lP{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Gl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Kn((s,l)=>$t(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const d=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,d.readTime)),l.isValidDocument()){const p=EC(this.ar.serializer,l);i=i.add(s.path.popLast());const y=Nm(p);r+=y-d.size,t.push(this.ar.addEntry(e,s,p))}else if(r-=d.size,this.trackRemovals){const p=EC(this.ar.serializer,l.convertToNoDocument(At.min()));t.push(this.ar.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,l)=>{this.ur.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function dP(n){return Ci(n,"remoteDocumentGlobal")}function ip(n){return Ci(n,"remoteDocumentsV14")}function Qy(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hP(n,e){const t=e.documentKey.path.toArray();return[n,qy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OC(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=$t(t[s],r[s]),i)return i;return i=$t(t.length,r.length),i||(i=$t(t[t.length-2],r[r.length-2]),i||$t(t[t.length-1],r[r.length-1]))}class PO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Cm(r.mutation,i,Ps.empty(),fr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,rn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=rn()){const i=ja();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=Wd();return s.forEach((d,p)=>{l=l.insert(d,p.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,rn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let s=Qs();const l=vm(),d=vm();return t.forEach((p,y)=>{const w=r.get(y.key);i.has(y.key)&&(void 0===w||w.mutation instanceof Ha)?s=s.insert(y.key,y):void 0!==w?(l.set(y.key,w.mutation.getFieldMask()),Cm(w.mutation,y,w.mutation.getFieldMask(),fr.now())):l.set(y.key,Ps.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((y,w)=>l.set(y,w)),t.forEach((y,w)=>{var D;return d.set(y,new PO(w,null!==(D=l.get(y))&&void 0!==D?D:null))}),d))}recalculateAndSaveOverlays(e,t){const r=vm();let i=new Nn((l,d)=>l-d),s=rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let w=r.get(p)||Ps.empty();w=d.applyToLocalView(y,w),r.set(p,w);const D=(i.get(d.batchId)||rn()).add(p);i=i.insert(d.batchId,D)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,w=p.value,D=ky();w.forEach(M=>{if(!s.has(M)){const O=$w(t.get(M),r.get(M));null!==O&&D.set(M,O),s=s.add(M)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,D))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return tt.isDocumentKey((l=t).path)&&null===l.collectionGroup&&0===l.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var l}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(ja());let d=-1,p=s;return l.next(y=>ce.forEach(y,(w,D)=>(d<D.largestBatchId&&(d=D.largestBatchId),s.get(w)?ce.resolve():this.remoteDocumentCache.getEntry(e,w).next(M=>{p=p.insert(w,M)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,p,y,rn())).next(w=>({batchId:d,changes:Wf(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Wd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let l=Wd();return this.indexManager.getCollectionParents(e,s).next(d=>ce.forEach(d,p=>{const y=(D=t,M=p.child(s),new $l(M,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,M;return this.getDocumentsMatchingCollectionQuery(e,y,r,i).next(w=>{w.forEach((D,M)=>{l=l.insert(D,M)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(l=>(s=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(l=>{s.forEach((p,y)=>{const w=y.getKey();null===l.get(w)&&(l=l.insert(w,lr.newInvalidDocument(w)))});let d=Wd();return l.forEach((p,y)=>{const w=s.get(p);void 0!==w&&Cm(w.mutation,y,Ps.empty(),fr.now()),ym(t,y)&&(d=d.insert(p,y))}),d})}}class MO{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ce.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:jr(i.createTime)}),ce.resolve();var i}getNamedQuery(e,t){return ce.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:wC(i.bundledQuery),readTime:jr(i.readTime)}),ce.resolve();var i}}class xO{constructor(){this.overlays=new Nn(tt.comparator),this.hr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ja();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=ja(),s=t.length+1,l=new tt(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Nn((y,w)=>y-w);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let w=s.get(y.largestBatchId);null===w&&(w=ja(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=ja(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=i)););return ce.resolve(d)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new aC(t,r));let s=this.hr.get(t);void 0===s&&(s=rn(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class FC{constructor(){this.Pr=new Kn(Ui.Ir),this.Tr=new Kn(Ui.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Ui(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new tt(new fn([])),r=new Ui(t,e),i=new Ui(t,e+1),s=[];return this.Tr.forEachInRange([r,i],l=>{this.Ar(l),s.push(l.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new tt(new fn([])),r=new Ui(t,e),i=new Ui(t,e+1);let s=rn();return this.Tr.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new Ui(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return tt.comparator(e.key,t.key)||$t(e.pr,t.pr)}static Er(e,t){return $t(e.pr,t.pr)||tt.comparator(e.key,t.key)}}class o{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Kn(Ui.Ir)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const l=new oC(s,t,r,i);this.mutationQueue.push(l);for(const d of i)this.wr=this.wr.add(new Ui(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],l=>{const d=this.Sr(l.pr);s.push(d)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kn($t);return t.forEach(i=>{const s=new Ui(i,0),l=new Ui(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,l],d=>{r=r.add(d.pr)})}),ce.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;tt.isDocumentKey(s)||(s=s.child(""));const l=new Ui(new tt(s),0);let d=new Kn($t);return this.wr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(p.pr)),!0)},l),ce.resolve(this.Dr(d))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){It(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return ce.forEach(t.mutations,i=>{const s=new Ui(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Ui(t,0),i=this.wr.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class a{constructor(e){this.vr=e,this.docs=new Nn(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():lr.newInvalidDocument(t))}getEntries(e,t){let r=Qs();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():lr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qs();const l=t.path,d=new tt(l.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||Vd(Db(w),r)<=0||(i.has(w.key)||ym(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ht()}Fr(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new c(this)}getSize(e){return ce.resolve(this.size)}}class c extends lP{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class u{constructor(e){this.persistence=e,this.Mr=new Gl(t=>Hl(t),Hf),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Or=0,this.Nr=new FC,this.targetCount=0,this.Br=bu.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),ce.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new bu(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.qn(t),ce.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Mr.delete(l),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.Nr.containsKey(t))}}class f{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ys(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new u(this),this.indexManager=new Jd,this.remoteDocumentCache=new a(r=>this.referenceDelegate.Kr(r)),this.serializer=new vC(t),this.$r=new MO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new o(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){De("MemoryPersistence","Starting transaction:",e);const i=new m(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return ce.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class m extends Rb{constructor(e){super(),this.currentSequenceNumber=e}}class v{constructor(e){this.persistence=e,this.zr=new FC,this.jr=null}static Hr(e){return new v(e)}get Jr(){if(this.jr)return this.jr;throw ht()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ce.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Jr,r=>{const i=tt.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,At.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return ce.or([()=>ce.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class C{constructor(e){this.serializer=e}N(e,t,r,i){const s=new Ey("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0}),p.createObjectStore("documentMutations"),R(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),R(e)),l=l.next(()=>function(p){const y=p.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return y.put("targetGlobalKey",w)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(p,y){return y.store("mutations").W().next(w=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Iy,{unique:!0});const D=y.store("mutations"),M=w.map(O=>D.put(O));return ce.waitFor(M)})}(e,s))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Xr(s))),r<6&&i>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(l=l.next(()=>this.ti(s))),r<8&&i>=8&&(l=l.next(()=>this.ni(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ri(s))),r<11&&i>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(p){const y=p.createObjectStore("documentOverlays",{keyPath:Ob});y.createIndex("collectionPathOverlayIndex",RR,{unique:!1}),y.createIndex("collectionGroupOverlayIndex",PR,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(p){const y=p.createObjectStore("remoteDocumentsV14",{keyPath:ER});y.createIndex("documentKeyIndex",wR),y.createIndex("collectionGroupIndex",IR)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,s))),r<15&&i>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:Nb}).createIndex("sequenceNumberIndex",kb,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:DR}).createIndex("documentKeyIndex",SR,{unique:!1})}(e))),l}ei(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=Nm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>ce.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(d=>ce.forEach(d,p=>{It(p.userId===s.userId);const y=yu(this.serializer,p);return oP(e,s.userId,y).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((l,d)=>{const p=new fn(l),y=[0,Li(p)];s.push(t.get(y).next(w=>w?ce.resolve():t.put({targetId:0,path:Li(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:AR});const r=t.store("collectionParents"),i=new Ky,s=l=>{if(i.add(l)){const d=l.lastSegment(),p=l.popLast();return r.put({collectionId:d,parent:Li(p)})}};return t.store("remoteDocuments").Y({J:!0},(l,d)=>{const p=new fn(l);return s(p.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([l,d,p],y)=>{const w=Va(d);return s(w.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,i)=>{const s=Pm(i),l=t0(this.serializer,s);return t.put(l)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,l)=>{const d=t.store("remoteDocumentsV14"),p=(D=l,D.document?new tt(fn.fromString(D.document.name).popFirst(5)):D.noDocument?tt.fromSegments(D.noDocument.path):D.unknownDocument?tt.fromSegments(D.unknownDocument.path):ht()).path.toArray(),y={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};var D;i.push(d.put(y))}).next(()=>ce.waitFor(i))}si(e,t){const r=t.store("mutations"),i=kC(this.serializer),s=new f(v.Hr,this.serializer.ct);return r.W().next(l=>{const d=new Map;return l.forEach(p=>{var y;let w=null!==(y=d.get(p.userId))&&void 0!==y?y:rn();yu(this.serializer,p).keys().forEach(D=>w=w.add(D)),d.set(p.userId,w)}),ce.forEach(d,(p,y)=>{const w=new bi(y),D=Qd.lt(this.serializer,w),M=s.getIndexManager(w),O=Zy.lt(w,this.serializer,M,s.referenceDelegate);return new fP(i,O,D,M).recalculateAndSaveOverlaysForDocumentKeys(new Aw(t,Ys._e),p).next()})})}}function R(n){n.createObjectStore("targetDocuments",{keyPath:bR}).createIndex("documentTargetsIndex",CR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",TR,{unique:!0}),n.createObjectStore("targetGlobal")}const k="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ${constructor(e,t,r,i,s,l,d,p,y,w,D=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=l,this.document=d,this._i=y,this.ai=w,this.ui=D,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=M=>Promise.resolve(),!$.D())throw new Ue(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aP(this,i),this.Ti=t+"main",this.serializer=new vC(p),this.Ei=new Zs(this.Ti,this.ui,new C(this.serializer)),this.Qr=new MC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=kC(this.serializer),this.$r=new IC,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===w&&ti("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(pe.FAILED_PRECONDITION,k);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ys(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,Te.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,Te.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oe(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(wo(e))return De("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return De("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return J(e).get("owner").next(t=>ce.resolve(this.Si(t)))}bi(e){return oe(e).delete(this.clientId)}Di(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ci(r,"clientMetadata");return i.W().next(s=>{const l=e.vi(s,18e5),d=s.filter(p=>-1===l.indexOf(p));return ce.forEach(d,p=>i.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?ce.resolve(!0):J(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Ue(pe.FAILED_PRECONDITION,k);return!1}}return!(!this.networkEnabled||!this.inForeground)||oe(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&De("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Aw(t,Ys._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>oe(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return Zy.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new l0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qd.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){De("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(p=this.ui)?Cw:14===p?bw:13===p?by:12===p?Tw:11===p?Fb:void ht();var p;let l;return this.Ei.runTransaction(e,i,s,d=>(l=new Aw(d,this.kr?this.kr.next():Ys._e),"readwrite-primary"===t?this.gi(l).next(p=>!!p||this.pi(l)).next(p=>{if(!p)throw ti(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new Ue(pe.FAILED_PRECONDITION,Sb);return r(l)}).next(p=>this.wi(l).next(()=>p)):this.ki(l).next(()=>r(l)))).then(d=>(l.raiseOnCommittedEvent(),d))}ki(e){return J(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(pe.FAILED_PRECONDITION,k)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return J(e).put("owner",t)}static D(){return Zs.D()}yi(e){const t=J(e);return t.get("owner").next(r=>this.Si(r)?(De("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(ti(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,B.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return De("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ti("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ti("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function J(n){return Ci(n,"owner")}function oe(n){return Ci(n,"clientMetadata")}function Ae(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ze{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=rn(),i=rn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ze(e,t.fromCache,r,i)}}class it{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class yt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,B.G6)()?8:Zs.v((0,B.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(l=>{s.result=l}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(l=>{s.result=l})}).next(()=>{if(s.result)return;const l=new it;return this.Ji(e,t,l).next(d=>{if(s.result=d,this.Ui)return this.Yi(e,t,l,d.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Ll()<=ki.in.DEBUG&&De("QueryEngine","SDK will not create cache indexes for query:",Gd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ce.resolve()):(Ll()<=ki.in.DEBUG&&De("QueryEngine","Query:",Gd(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Ll()<=ki.in.DEBUG&&De("QueryEngine","The SDK decides to create cache indexes for query:",Gd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zi(t))):ce.resolve())}ji(e,t){if(xy(t))return ce.resolve(null);let r=Zi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=_m(t,null,"F"),r=Zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=rn(...s);return this.zi.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.Zi(t,d);return this.Xi(t,y,l,p.readTime)?this.ji(e,_m(t,null,"F")):this.es(e,y,t,p)}))})))}Hi(e,t,r,i){return xy(t)||i.isEqual(At.min())?ce.resolve(null):this.zi.getDocuments(e,r).next(s=>{const l=this.Zi(t,s);return this.Xi(t,l,r,i)?ce.resolve(null):(Ll()<=ki.in.DEBUG&&De("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gd(t)),this.es(e,l,t,Ab(i,-1)).next(d=>d))})}Zi(e,t){let r=new Kn(zd(e));return t.forEach((i,s)=>{ym(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Ll()<=ki.in.DEBUG&&De("QueryEngine","Using full collection scan to execute query:",Gd(t)),this.zi.getDocumentsMatchingQuery(e,t,Rs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class Ut{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new Nn($t),this.rs=new Gl(s=>Hl(s),Hf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fP(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function $e(n,e,t,r){return new Ut(n,e,t,r)}function Yt(n,e){return tr.apply(this,arguments)}function tr(){return tr=(0,Te.Z)(function*(n,e){const t=et(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],d=[];let p=rn();for(const y of i){l.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(y=>({us:y,removedBatchIds:l,addedBatchIds:d}))})})}),tr.apply(this,arguments)}function pP(n){const e=et(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function NO(n,e,t){let r=rn(),i=rn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Qs();return t.forEach((d,p)=>{const y=s.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(d)),p.isNoDocument()&&p.version.isEqual(At.min())?(e.removeEntry(d,p.readTime),l=l.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),l=l.insert(d,p)):De("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{cs:l,ls:i}})}function Tj(n,e){const t=et(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xy(n,e){const t=et(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Qr.allocateTargetId(r).next(l=>(i=new mu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function Jy(n,e,t){return gP.apply(this,arguments)}function gP(){return gP=(0,Te.Z)(function*(n,e,t){const r=et(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!wo(l))throw l;De("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),gP.apply(this,arguments)}function LC(n,e,t){const r=et(n);let i=At.min(),s=rn();return r.persistence.runTransaction("Execute query","readwrite",l=>function(p,y,w){const D=et(p),M=D.rs.get(w);return void 0!==M?ce.resolve(D.ns.get(M)):D.Qr.getTargetData(y,w)}(r,l,Zi(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(l,d.targetId).next(p=>{s=p})}).next(()=>r.ts.getDocumentsMatchingQuery(l,e,t?i:At.min(),t?s:rn())).next(d=>(FO(r,Yi(e),d),{documents:d,hs:s})))}function kO(n,e){const t=et(n),r=et(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(l=>l?l.target:null))}function OO(n,e){const t=et(n),r=t.ss.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,Ab(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(FO(t,e,i),i))}function FO(n,e,t){let r=n.ss.get(e)||At.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function mP(){return mP=(0,Te.Z)(function*(n,e,t,r){const i=et(n);let s=rn(),l=Qs();for(const y of t){const w=e.Ps(y.metadata.name);y.document&&(s=s.add(w));const D=e.Is(y);D.setReadTime(e.Ts(y.metadata.readTime)),l=l.insert(w,D)}const d=i.os.newChangeBuffer({trackRemovals:!0}),p=yield Xy(i,(w=r,Zi(Hd(fn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>NO(y,d,l).next(w=>(d.apply(y),w)).next(w=>i.Qr.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Qr.addMatchingKeys(y,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,w.cs,w.ls)).next(()=>w.cs)))}),mP.apply(this,arguments)}function Cj(n,e){return _P.apply(this,arguments)}function _P(){return _P=(0,Te.Z)(function*(n,e,t=rn()){const r=yield Xy(n,Zi(wC(e.bundledQuery))),i=et(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=jr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.$r.saveNamedQuery(s,e);const d=r.withResumeToken(ni.EMPTY_BYTE_STRING,l);return i.ns=i.ns.insert(d.targetId,d),i.Qr.updateTargetData(s,d).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),_P.apply(this,arguments)}function LO(n,e){return`firestore_clients_${n}_${e}`}function VO(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function yP(n,e){return`firestore_targets_${n}_${e}`}class VC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new Ue(i.error.code,i.error.message))),l?new VC(e,t,i.state,s):(ti("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class f0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ue(r.error.code,r.error.message))),s?new f0(e,r.state,i):(ti("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class UC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=Em();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=ww(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new UC(e,s):(ti("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class vP{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vP(t.clientId,t.onlineState):(ti("SharedClientState",`Failed to parse online state: ${e}`),null)}}class EP{constructor(){this.activeTargetIds=Em()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wP{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Nn($t),this.started=!1,this.ys=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=LO(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new EP),this.bs=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const t=yield e.syncEngine.Li();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(LO(e.persistenceKey,i));if(s){const l=UC.Es(i,s);l&&(e.ps=e.ps.insert(l.clientId,l))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,r){this.Bs(e,t,r),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(yP(this.persistenceKey,e));if(r){const i=f0.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(yP(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return De("SharedClientState","READ",e,t),t}setItem(e,t){De("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){De("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(De("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ti("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,Te.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(l){let d=Ys._e;if(null!=l)try{const p=JSON.parse(l);It("number"==typeof p),d=p}catch(p){ti("SharedClientState","Failed to read sequence number from WebStorage",p)}return d}(r.newValue);i!==Ys._e&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,r){const i=new VC(this.currentUser,e,t,r),s=VO(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const t=VO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=yP(this.persistenceKey,e),s=new f0(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return UC.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return VC.Es(new bi(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return f0.Es(i,t)}xs(e){return vP.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,Te.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);De("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),l=[],d=[];return s.forEach(p=>{i.has(p)||l.push(p)}),i.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.eo(l,d).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Em();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UO{constructor(){this.no=new EP,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new EP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Aj{io(e){}shutdown(){}}class BO{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){De("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){De("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let BC=null;function IP(){return null===BC?BC=268435456+Math.round(2147483648*Math.random()):BC++,"0x"+BC.toString(16)}const Dj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Sj{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ms="WebChannelConnection";class Rj extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,l){const d=IP(),p=this.bo(t,r.toUriEncodedString());De("RestConnection",`Sending RPC '${t}' ${d}:`,p,i);const y={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(y,s,l),this.Co(t,p,y,i).then(w=>(De("RestConnection",`Received RPC '${t}' ${d}: `,w),w),w=>{throw ds("RestConnection",`RPC '${t}' ${d} failed with error: `,w,"url: ",p,"request:",i),w})}vo(t,r,i,s,l,d){return this.So(t,r,i,s,l)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Jo,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,l)=>t[l]=s),i&&i.headers.forEach((s,l)=>t[l]=s)}bo(t,r){return`${this.fo}/v1/${r}:${Dj[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=IP();return new Promise((l,d)=>{const p=new pO;p.setWithCredentials(!0),p.listenOnce(fO.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case au.NO_ERROR:const w=p.getResponseJson();De(Ms,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),l(w);break;case au.TIMEOUT:De(Ms,`RPC '${e}' ${s} timed out`),d(new Ue(pe.DEADLINE_EXCEEDED,"Request time out"));break;case au.HTTP_ERROR:const D=p.getStatus();if(De(Ms,`RPC '${e}' ${s} failed with status:`,D,"response text:",p.getResponseText()),D>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const O=M?.error;if(O&&O.status&&O.message){const H=function(re){const ye=re.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(ye)>=0?ye:pe.UNKNOWN}(O.status);d(new Ue(H,O.message))}else d(new Ue(pe.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new Ue(pe.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{De(Ms,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);De(Ms,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",y,r,15)})}Fo(e,t,r){const i=IP(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=sR(),d=oR(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const w=s.join("");De(Ms,`Creating RPC '${e}' stream ${i}: ${w}`,p);const D=l.createWebChannel(w,p);let M=!1,O=!1;const H=new Sj({lo:re=>{O?De(Ms,`Not sending because RPC '${e}' stream ${i} is closed:`,re):(M||(De(Ms,`Opening RPC '${e}' stream ${i} transport.`),D.open(),M=!0),De(Ms,`RPC '${e}' stream ${i} sending:`,re),D.send(re))},ho:()=>D.close()}),X=(re,ye,je)=>{re.listen(ye,Oe=>{try{je(Oe)}catch(Be){setTimeout(()=>{throw Be},0)}})};return X(D,nm.EventType.OPEN,()=>{O||De(Ms,`RPC '${e}' stream ${i} transport opened.`)}),X(D,nm.EventType.CLOSE,()=>{O||(O=!0,De(Ms,`RPC '${e}' stream ${i} transport closed`),H.Vo())}),X(D,nm.EventType.ERROR,re=>{O||(O=!0,ds(Ms,`RPC '${e}' stream ${i} transport errored:`,re),H.Vo(new Ue(pe.UNAVAILABLE,"The operation could not be completed")))}),X(D,nm.EventType.MESSAGE,re=>{var ye;if(!O){const je=re.data[0];It(!!je);const Be=je.error||(null===(ye=je[0])||void 0===ye?void 0:ye.error);if(Be){De(Ms,`RPC '${e}' stream ${i} received error:`,Be);const Tt=Be.status;let Nt=function(so){const Qa=gi[so];if(void 0!==Qa)return zR(Qa)}(Tt),ln=Be.message;void 0===Nt&&(Nt=pe.INTERNAL,ln="Unknown error status: "+Tt+" with message "+Be.message),O=!0,H.Vo(new Ue(Nt,ln)),D.close()}else De(Ms,`RPC '${e}' stream ${i} received:`,je),H.mo(je)}}),X(d,yw.STAT_EVENT,re=>{re.stat===aR.PROXY?De(Ms,`RPC '${e}' stream ${i} detected buffering proxy`):re.stat===aR.NOPROXY&&De(Ms,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{H.Ro()},0),H}}function jO(){return typeof window<"u"?window:null}function jC(){return typeof document<"u"?document:null}function p0(n){return new TO(n,!0)}class TP{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&De("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class HO{constructor(e,t,r,i,s,l,d,p){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new TP(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,Te.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,Te.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,Te.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(ti(t.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new Ue(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,Te.Z)(function*(){e.state=0,e.start()}))}__(e){return De("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(De("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Pj extends HO{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function QR(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(y=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===y?1:"REMOVE"===y?2:"CURRENT"===y?3:"RESET"===y?4:ht(),i=e.targetChange.targetIds||[],s=function(y,w){return y.useProto3Json?(It(void 0===w||"string"==typeof w),ni.fromBase64String(w||"")):(It(void 0===w||w instanceof Uint8Array),ni.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(y){const w=void 0===y.code?pe.UNKNOWN:zR(y.code);return new Ue(w,y.message||"")}(l);t=new WR(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=$a(n,r.document.name),s=jr(r.document.updateTime),l=r.document.createTime?jr(r.document.createTime):At.min(),d=new Ai({mapValue:{fields:r.document.fields}}),p=lr.newFoundDocument(i,s,l,d);t=new Sm(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=$a(n,r.document),s=r.readTime?jr(r.readTime):At.min(),l=lr.newNoDocument(i,s);t=new Sm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=$a(n,r.document);t=new Sm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,{count:i=0,unchangedNames:s}=r,l=new vO(i,s);t=new lC(r.targetId,l)}}var y;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return At.min();const l=s.targetChange;return l.targetIds&&l.targetIds.length?At.min():l.readTime?jr(l.readTime):At.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=fC(this.serializer),t.addTarget=function(s,l){let d;const p=l.target;if(d=$f(p)?{documents:mC(s,p)}:{query:zy(s,p).ut},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=dC(s,l.resumeToken);const y=Qw(s,l.expectedCount);null!==y&&(d.expectedCount=y)}else if(l.snapshotVersion.compareTo(At.min())>0){d.readTime=Qf(s,l.snapshotVersion.toTimestamp());const y=Qw(s,l.expectedCount);null!==y&&(d.expectedCount=y)}return d}(this.serializer,e);const r=function XR(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ht()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=fC(this.serializer),t.removeTarget=e,this.t_(t)}}class Mj extends HO{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function gC(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(i,s){let l=jr(i.updateTime?i.updateTime:s);return l.isEqual(At.min())&&(l=jr(s)),new HR(l,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.T_(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=fC(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Zd(this.serializer,r))};this.t_(t)}}class xj extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new Ue(pe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.So(e,jy(t,r),i,s,l)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(pe.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,d])=>this.connection.vo(e,jy(t,r),i,l,d,s)).catch(l=>{throw"FirebaseError"===l.name?(l.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ue(pe.UNKNOWN,l.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class kj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ti(t),this.g_=!1):De("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Oj{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var p;sp(l)&&(De("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Te.Z)(function*(w){const D=et(w);D.v_.add(4),yield ev(D),D.x_.set("Unknown"),D.v_.delete(4),yield g0(D)}),function y(w){return p.apply(this,arguments)})(l))}))}),this.x_=new kj(r,i)}}function g0(n){return CP.apply(this,arguments)}function CP(){return CP=(0,Te.Z)(function*(n){if(sp(n))for(const e of n.F_)yield e(!0)}),CP.apply(this,arguments)}function ev(n){return AP.apply(this,arguments)}function AP(){return AP=(0,Te.Z)(function*(n){for(const e of n.F_)yield e(!1)}),AP.apply(this,arguments)}function HC(n,e){const t=et(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),RP(t)?SP(t):nv(t).Jo()&&DP(t,e))}function m0(n,e){const t=et(n),r=nv(t);t.C_.delete(e),r.Jo()&&$O(t,e),0===t.C_.size&&(r.Jo()?r.Xo():sp(t)&&t.x_.set("Unknown"))}function DP(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(At.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nv(n).c_(e)}function $O(n,e){n.O_.Oe(e),nv(n).l_(e)}function SP(n){n.O_=new qR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),nv(n).start(),n.x_.p_()}function RP(n){return sp(n)&&!nv(n).Ho()&&n.C_.size>0}function sp(n){return 0===et(n).v_.size}function GO(n){n.O_=void 0}function Fj(n){return PP.apply(this,arguments)}function PP(){return PP=(0,Te.Z)(function*(n){n.C_.forEach((e,t)=>{DP(n,e)})}),PP.apply(this,arguments)}function Lj(n,e){return MP.apply(this,arguments)}function MP(){return MP=(0,Te.Z)(function*(n,e){GO(n),RP(n)?(n.x_.S_(e),SP(n)):n.x_.set("Unknown")}),MP.apply(this,arguments)}function Vj(n,e,t){return xP.apply(this,arguments)}function xP(){return xP=(0,Te.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof WR&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(s,l){const d=l.cause;for(const p of l.targetIds)s.C_.has(p)&&(yield s.remoteSyncer.rejectListen(p,d),s.C_.delete(p),s.O_.removeTarget(p))}),function i(s,l){return r.apply(this,arguments)})(n,e)}catch(r){De("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $C(n,r)}else if(e instanceof Sm?n.O_.$e(e):e instanceof lC?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(At.min()))try{const r=yield pP(n.localStore);t.compareTo(r)>=0&&(yield function(s,l){const d=s.O_.it(l);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=s.C_.get(y);w&&s.C_.set(y,w.withResumeToken(p.resumeToken,l))}}),d.targetMismatches.forEach((p,y)=>{const w=s.C_.get(p);if(!w)return;s.C_.set(p,w.withResumeToken(ni.EMPTY_BYTE_STRING,w.snapshotVersion)),$O(s,p);const D=new mu(w.target,p,y,w.sequenceNumber);DP(s,D)}),s.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){De("RemoteStore","Failed to raise snapshot:",r),yield $C(n,r)}var r}),xP.apply(this,arguments)}function $C(n,e,t){return NP.apply(this,arguments)}function NP(){return NP=(0,Te.Z)(function*(n,e,t){if(!wo(e))throw e;n.v_.add(1),yield ev(n),n.x_.set("Offline"),t||(t=()=>pP(n.localStore)),n.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){De("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield g0(n)}))}),NP.apply(this,arguments)}function zO(n,e){return e().catch(t=>$C(n,t,e))}function tv(n){return kP.apply(this,arguments)}function kP(){return kP=(0,Te.Z)(function*(n){const e=et(n),t=op(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Uj(e);)try{const i=yield Tj(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,Bj(e,i)}catch(i){yield $C(e,i)}WO(e)&&qO(e)}),kP.apply(this,arguments)}function Uj(n){return sp(n)&&n.D_.length<10}function Bj(n,e){n.D_.push(e);const t=op(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function WO(n){return sp(n)&&!op(n).Ho()&&n.D_.length>0}function qO(n){op(n).start()}function jj(n){return OP.apply(this,arguments)}function OP(){return OP=(0,Te.Z)(function*(n){op(n).d_()}),OP.apply(this,arguments)}function Hj(n){return FP.apply(this,arguments)}function FP(){return FP=(0,Te.Z)(function*(n){const e=op(n);for(const t of n.D_)e.I_(t.mutations)}),FP.apply(this,arguments)}function $j(n,e,t){return LP.apply(this,arguments)}function LP(){return LP=(0,Te.Z)(function*(n,e,t){const r=n.D_.shift(),i=Ly.from(r,e,t);yield zO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield tv(n)}),LP.apply(this,arguments)}function Gj(n,e){return VP.apply(this,arguments)}function VP(){return VP=(0,Te.Z)(function*(n,e){var t;e&&op(n).P_&&(yield(t=(0,Te.Z)(function*(i,s){if(GR(d=s.code)&&d!==pe.ABORTED){const l=i.D_.shift();op(i).Zo(),yield zO(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield tv(i)}var d}),function r(i,s){return t.apply(this,arguments)})(n,e)),WO(n)&&qO(n)}),VP.apply(this,arguments)}function KO(n,e){return UP.apply(this,arguments)}function UP(){return UP=(0,Te.Z)(function*(n,e){const t=et(n);t.asyncQueue.verifyOperationInProgress(),De("RemoteStore","RemoteStore received new credentials");const r=sp(t);t.v_.add(3),yield ev(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield g0(t)}),UP.apply(this,arguments)}function BP(n,e){return jP.apply(this,arguments)}function jP(){return jP=(0,Te.Z)(function*(n,e){const t=et(n);e?(t.v_.delete(2),yield g0(t)):e||(t.v_.add(2),yield ev(t),t.x_.set("Unknown"))}),jP.apply(this,arguments)}function nv(n){return n.N_||(n.N_=function(t,r,i){const s=et(t);return s.R_(),new Pj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Fj.bind(null,n),To:Lj.bind(null,n),u_:Vj.bind(null,n)}),n.F_.push(function(){var e=(0,Te.Z)(function*(t){t?(n.N_.Zo(),RP(n)?SP(n):n.x_.set("Unknown")):(yield n.N_.stop(),GO(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function op(n){return n.B_||(n.B_=function(t,r,i){const s=et(t);return s.R_(),new Mj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:jj.bind(null,n),To:Gj.bind(null,n),E_:Hj.bind(null,n),T_:$j.bind(null,n)}),n.F_.push(function(){var e=(0,Te.Z)(function*(t){t?(n.B_.Zo(),yield tv(n)):(yield n.B_.stop(),n.D_.length>0&&(De("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class HP{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,d=new HP(e,t,l,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rv(n,e){if(ti("AsyncQueue",`${e}: ${n}`),wo(n))return new Ue(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class iv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Wd(),this.sortedSet=new Nn(this.comparator)}static emptySet(e){return new iv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof iv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new iv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class ZO{constructor(){this.L_=new Nn(tt.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):ht():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class sv{constructor(e,t,r,i,s,l,d,p,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new sv(e,t,iv.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class zj{constructor(){this.q_=void 0,this.Q_=[]}}class Wj{constructor(){this.queries=new Gl(e=>Jb(e),zf),this.onlineState="Unknown",this.K_=new Set}}function $P(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,Te.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new zj),i)try{s.q_=yield t.onListen(r)}catch(l){const d=rv(l,`Initialization of query '${Gd(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&qP(t)}),GP.apply(this,arguments)}function zP(n,e){return WP.apply(this,arguments)}function WP(){return WP=(0,Te.Z)(function*(n,e){const t=et(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.Q_.indexOf(e);l>=0&&(s.Q_.splice(l,1),i=0===s.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),WP.apply(this,arguments)}function qj(n,e){const t=et(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.Q_)d.W_(i)&&(r=!0);l.q_=i}}r&&qP(t)}function Kj(n,e,t){const r=et(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function qP(n){n.K_.forEach(e=>{e.next()})}class KP{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new sv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=sv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Zj{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class YO{constructor(e){this.serializer=e}Ps(e){return $a(this.serializer,e)}Is(e){return e.metadata.exists?$y(this.serializer,e.document,!1):lr.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return jr(e)}}class Yj{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=QO(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=fn.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new YO(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||rn()).add(s);t.set(l,d)}}return t}complete(){var e=this;return(0,Te.Z)(function*(){const t=yield function bj(n,e,t,r){return mP.apply(this,arguments)}(e.localStore,new YO(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield Cj(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function QO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class XO{constructor(e){this.key=e}}class JO{constructor(e){this.key=e}}class e1{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=rn(),this.mutatedKeys=rn(),this.ua=zd(e),this.ca=new iv(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new ZO,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,D)=>{const M=i.get(w),O=ym(this.query,D)?D:null,H=!!M&&this.mutatedKeys.has(M.key),X=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let re=!1;M&&O?M.data.isEqual(O.data)?H!==X&&(r.track({type:3,doc:O}),re=!0):this.Ia(M,O)||(r.track({type:2,doc:O}),re=!0,(p&&this.ua(O,p)>0||y&&this.ua(O,y)<0)&&(d=!0)):!M&&O?(r.track({type:0,doc:O}),re=!0):M&&!O&&(r.track({type:1,doc:M}),re=!0,(p||y)&&(d=!0)),re&&(O?(l=l.add(O),s=X?s.add(w):s.delete(w)):(l=l.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const w="F"===this.query.limitType?l.last():l.first();l=l.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{ca:l,Pa:r,Xi:d,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const l=e.Pa.k_();l.sort((w,D)=>function(O,H){const X=re=>{switch(re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return X(O)-X(H)}(w.type,D.type)||this.ua(w.doc,D.doc)),this.Ta(r),i=null!=i&&i;const d=t&&!i?this.Ea():[],p=0===this.aa.size&&this.current&&!i?1:0,y=p!==this._a;return this._a=p,0!==l.length||y?{snapshot:new sv(this.query,e.ca,s,l,e.mutatedKeys,0===p,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:d}:{da:d}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ZO,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=rn(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new JO(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new XO(r))}),t}Ra(e){this.oa=e.hs,this.aa=rn();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return sv.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Qj{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Xj{constructor(e){this.key=e,this.ma=!1}}class Jj{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.fa={},this.ga=new Gl(d=>Jb(d),zf),this.pa=new Map,this.ya=new Set,this.wa=new Nn(tt.comparator),this.Sa=new Map,this.ba=new FC,this.Da={},this.Ca=new Map,this.va=bu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function eH(n,e){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,Te.Z)(function*(n,e){const t=yM(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const l=yield Xy(t.localStore,Zi(e)),d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield YP(t,e,r,"current"===d,l.resumeToken),t.isPrimaryClient&&HC(t.remoteStore,l)}return i}),ZP.apply(this,arguments)}function YP(n,e,t,r,i){return QP.apply(this,arguments)}function QP(){return QP=(0,Te.Z)(function*(n,e,t,r,i){n.Ma=(D,M,O)=>{return(H=(0,Te.Z)(function*(re,ye,je,Oe){let Be=ye.view.ha(je);Be.Xi&&(Be=yield LC(re.localStore,ye.query,!1).then(({documents:nr})=>ye.view.ha(nr,Be)));const Tt=Oe&&Oe.targetChanges.get(ye.targetId),Nt=Oe&&null!=Oe.targetMismatches.get(ye.targetId),ln=ye.view.applyChanges(Be,re.isPrimaryClient,Tt,Nt);return aM(re,ye.targetId,ln.da),ln.snapshot}),function X(re,ye,je,Oe){return H.apply(this,arguments)})(n,D,M,O);var H};const s=yield LC(n.localStore,e,!0),l=new e1(e,s.hs),d=l.ha(s.documents),p=Kd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(d,n.isPrimaryClient,p);aM(n,t,y.da);const w=new Qj(e,t,l);return n.ga.set(e,w),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),y.snapshot}),QP.apply(this,arguments)}function tH(n,e){return XP.apply(this,arguments)}function XP(){return XP=(0,Te.Z)(function*(n,e){const t=et(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!zf(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),m0(t.remoteStore,r.targetId),ov(t,r.targetId)}).catch(cu))):(ov(t,r.targetId),yield Jy(t.localStore,r.targetId,!0))}),XP.apply(this,arguments)}function JP(){return JP=(0,Te.Z)(function*(n,e,t){const r=vM(n);try{const i=yield function(l,d){const p=et(l),y=fr.now(),w=d.reduce((O,H)=>O.add(H.key),rn());let D,M;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let H=Qs(),X=rn();return p.os.getEntries(O,w).next(re=>{H=re,H.forEach((ye,je)=>{je.isValidDocument()||(X=X.add(ye))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,H)).next(re=>{D=re;const ye=[];for(const je of d){const Oe=$R(je,D.get(je.key).overlayedDocument);null!=Oe&&ye.push(new Ha(je.key,Oe,Ow(Oe.value.mapValue),cr.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,ye,d)}).next(re=>{M=re;const ye=re.applyToLocalDocumentSet(D,X);return p.documentOverlayCache.saveOverlays(O,re.batchId,ye)})}).then(()=>({batchId:M.batchId,changes:Wf(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,d,p){let y=l.Da[l.currentUser.toKey()];y||(y=new Nn($t)),y=y.insert(d,p),l.Da[l.currentUser.toKey()]=y}(r,i.batchId,t),yield th(r,i.changes),yield tv(r.remoteStore)}catch(i){const s=rv(i,"Failed to persist write");t.reject(s)}}),JP.apply(this,arguments)}function t1(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,Te.Z)(function*(n,e){const t=et(n);try{const r=yield function Ij(n,e){const t=et(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const d=[];e.targetChanges.forEach((w,D)=>{const M=i.get(D);if(!M)return;d.push(t.Qr.removeMatchingKeys(s,w.removedDocuments,D).next(()=>t.Qr.addMatchingKeys(s,w.addedDocuments,D)));let O=M.withSequenceNumber(s.currentSequenceNumber);var X,re,ye;null!==e.targetMismatches.get(D)?O=O.withResumeToken(ni.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,r)),i=i.insert(D,O),re=O,ye=w,(0===(X=M).resumeToken.approximateByteSize()||re.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&d.push(t.Qr.updateTargetData(s,O))});let p=Qs(),y=rn();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(NO(s,l,e.documentUpdates).next(w=>{p=w.cs,y=w.ls})),!r.isEqual(At.min())){const w=t.Qr.getLastRemoteSnapshotVersion(s).next(D=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(w)}return ce.waitFor(d).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,y)).next(()=>p)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.Sa.get(s);l&&(It(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ma=!0:i.modifiedDocuments.size>0?It(l.ma):i.removedDocuments.size>0&&(It(l.ma),l.ma=!1))}),yield th(t,r,e)}catch(r){yield cu(r)}}),eM.apply(this,arguments)}function n1(n,e,t){const r=et(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,l)=>{const d=l.view.U_(e);d.snapshot&&i.push(d.snapshot)}),function(l,d){const p=et(l);p.onlineState=d;let y=!1;p.queries.forEach((w,D)=>{for(const M of D.Q_)M.U_(d)&&(y=!0)}),y&&qP(p)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rH(n,e,t){return tM.apply(this,arguments)}function tM(){return tM=(0,Te.Z)(function*(n,e,t){const r=et(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let l=new Nn(tt.comparator);l=l.insert(s,lr.newNoDocument(s,At.min()));const d=rn().add(s),p=new Uy(At.min(),new Map,new Nn($t),l,d);yield t1(r,p),r.wa=r.wa.remove(s),r.Sa.delete(e),lM(r)}else yield Jy(r.localStore,e,!1).then(()=>ov(r,e,t)).catch(cu)}),tM.apply(this,arguments)}function iH(n,e){return nM.apply(this,arguments)}function nM(){return nM=(0,Te.Z)(function*(n,e){const t=et(n),r=e.batch.batchId;try{const i=yield function Hr(n,e){const t=et(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(d,p,y,w){const D=y.batch,M=D.keys();let O=ce.resolve();return M.forEach(H=>{O=O.next(()=>w.getEntry(p,H)).next(X=>{const re=y.docVersions.get(H);It(null!==re),X.version.compareTo(re)<0&&(D.applyToRemoteDocument(X,y),X.isValidDocument()&&(X.setReadTime(y.commitVersion),w.addEntry(X)))})}),O.next(()=>d.mutationQueue.removeMutationBatch(p,D))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let p=rn();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);oM(t,r,null),sM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield th(t,i)}catch(i){yield cu(i)}}),nM.apply(this,arguments)}function sH(n,e,t){return rM.apply(this,arguments)}function rM(){return rM=(0,Te.Z)(function*(n,e,t){const r=et(n);try{const i=yield function(l,d){const p=et(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,d).next(D=>(It(null!==D),w=D.keys(),p.mutationQueue.removeMutationBatch(y,D))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(r.localStore,e);oM(r,e,t),sM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield th(r,i)}catch(i){yield cu(i)}}),rM.apply(this,arguments)}function iM(){return iM=(0,Te.Z)(function*(n,e){const t=et(n);sp(t.remoteStore)||De("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const d=et(l);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>d.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ca.get(r)||[];i.push(e),t.Ca.set(r,i)}catch(r){const i=rv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),iM.apply(this,arguments)}function sM(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function oM(n,e,t){const r=et(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function ov(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||r1(n,r)})}function r1(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(m0(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),lM(n))}function aM(n,e,t){for(const r of t)r instanceof XO?(n.ba.addReference(r.key,e),aH(n,r)):r instanceof JO?(De("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||r1(n,r.key)):ht()}function aH(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(De("SyncEngine","New document in limbo: "+t),n.ya.add(r),lM(n))}function lM(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new tt(fn.fromString(e)),r=n.va.next();n.Sa.set(r,new Xj(t)),n.wa=n.wa.insert(t,r),HC(n.remoteStore,new mu(Zi(Hd(t.path)),r,"TargetPurposeLimboResolution",Ys._e))}}function th(n,e,t){return cM.apply(this,arguments)}function cM(){return cM=(0,Te.Z)(function*(n,e,t){const r=et(n),i=[],s=[],l=[];var d;r.ga.isEmpty()||(r.ga.forEach((d,p)=>{l.push(r.Ma(p,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const w=Ze.Ki(p.targetId,y);s.push(w)}}))}),yield Promise.all(l),r.fa.u_(i),yield(d=(0,Te.Z)(function*(y,w){const D=et(y);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>ce.forEach(w,O=>ce.forEach(O.qi,H=>D.persistence.referenceDelegate.addReference(M,O.targetId,H)).next(()=>ce.forEach(O.Qi,H=>D.persistence.referenceDelegate.removeReference(M,O.targetId,H)))))}catch(M){if(!wo(M))throw M;De("LocalStore","Failed to update sequence numbers: "+M)}for(const M of w){const O=M.targetId;if(!M.fromCache){const H=D.ns.get(O),re=H.withLastLimboFreeSnapshotVersion(H.snapshotVersion);D.ns=D.ns.insert(O,re)}}}),function p(y,w){return d.apply(this,arguments)})(r.localStore,s))}),cM.apply(this,arguments)}function lH(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,Te.Z)(function*(n,e){const t=et(n);if(!t.currentUser.isEqual(e)){De("SyncEngine","User change. New user:",e.toKey());const r=yield Yt(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(d=>{d.forEach(p=>{p.reject(new Ue(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield th(t,r.us)}var s}),uM.apply(this,arguments)}function cH(n,e){const t=et(n),r=t.Sa.get(e);if(r&&r.ma)return rn().add(r.key);{let i=rn();const s=t.pa.get(e);if(!s)return i;for(const l of s){const d=t.ga.get(l);i=i.unionWith(d.view.la)}return i}}function uH(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,Te.Z)(function*(n,e){const t=et(n),r=yield LC(t.localStore,e.query,!0),i=e.view.Ra(r);return t.isPrimaryClient&&aM(t,e.targetId,i.da),i}),dM.apply(this,arguments)}function dH(n,e){return hM.apply(this,arguments)}function hM(){return hM=(0,Te.Z)(function*(n,e){const t=et(n);return OO(t.localStore,e).then(r=>th(t,r))}),hM.apply(this,arguments)}function hH(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,Te.Z)(function*(n,e,t,r){const i=et(n),s=yield function(d,p){const y=et(d),w=et(y.mutationQueue);return y.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.vn(D,p).next(M=>M?y.localDocuments.getDocuments(D,M):ce.resolve(null)))}(i.localStore,e);var p;null!==s?("pending"===t?yield tv(i.remoteStore):"acknowledged"===t||"rejected"===t?(oM(i,e,r||null),sM(i,e),p=e,et(et(i.localStore).mutationQueue).Mn(p)):ht(),yield th(i,s)):De("SyncEngine","Cannot apply mutation batch with id: "+e)}),fM.apply(this,arguments)}function pM(){return pM=(0,Te.Z)(function*(n,e){const t=et(n);if(yM(t),vM(t),!0===e&&!0!==t.Fa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield s1(t,r.toArray());t.Fa=!0,yield BP(t.remoteStore,!0);for(const s of i)HC(t.remoteStore,s)}else if(!1===e&&!1!==t.Fa){const r=[];let i=Promise.resolve();t.pa.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(ov(t,l),Jy(t.localStore,l,!0))),m0(t.remoteStore,l)}),yield i,yield s1(t,r),function(l){const d=et(l);d.Sa.forEach((p,y)=>{m0(d.remoteStore,y)}),d.ba.mr(),d.Sa=new Map,d.wa=new Nn(tt.comparator)}(t),t.Fa=!1,yield BP(t.remoteStore,!1)}}),pM.apply(this,arguments)}function s1(n,e,t){return gM.apply(this,arguments)}function gM(){return gM=(0,Te.Z)(function*(n,e,t){const r=et(n),i=[],s=[];for(const l of e){let d;const p=r.pa.get(l);if(p&&0!==p.length){d=yield Xy(r.localStore,Zi(p[0]));for(const y of p){const w=r.ga.get(y),D=yield uH(r,w);D.snapshot&&s.push(D.snapshot)}}else{const y=yield kO(r.localStore,l);d=yield Xy(r.localStore,y),yield YP(r,o1(y),l,!1,d.resumeToken)}i.push(d)}return r.fa.u_(s),i}),gM.apply(this,arguments)}function o1(n){return Xb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pH(n){return t=et(n).localStore,et(et(t).persistence).Li();var t}function gH(n,e,t,r){return mM.apply(this,arguments)}function mM(){return mM=(0,Te.Z)(function*(n,e,t,r){const i=et(n);if(i.Fa)return void De("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield OO(i.localStore,Yi(s[0])),d=Uy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ni.EMPTY_BYTE_STRING);yield th(i,l,d);break}case"rejected":yield Jy(i.localStore,e,!0),ov(i,e,r);break;default:ht()}}),mM.apply(this,arguments)}function mH(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,Te.Z)(function*(n,e,t){const r=yM(n);if(r.Fa){for(const i of e){if(r.pa.has(i)){De("SyncEngine","Adding an already active target "+i);continue}const s=yield kO(r.localStore,i),l=yield Xy(r.localStore,s);yield YP(r,o1(s),l.targetId,!1,l.resumeToken),HC(r.remoteStore,l)}for(const i of t)r.pa.has(i)&&(yield Jy(r.localStore,i,!1).then(()=>{m0(r.remoteStore,i),ov(r,i)}).catch(cu))}}),_M.apply(this,arguments)}function yM(n){const e=et(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=t1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rH.bind(null,e),e.fa.u_=qj.bind(null,e.eventManager),e.fa.xa=Kj.bind(null,e.eventManager),e}function vM(n){const e=et(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sH.bind(null,e),e}class _0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Te.Z)(function*(){t.serializer=p0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return $e(this.persistence,new yt,e.initialUser,this.serializer)}createPersistence(e){return new f(v.Hr,this.serializer)}createSharedClientState(e){return new UO}terminate(){var e=this;return(0,Te.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class EM extends _0{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield vM(r.Na.syncEngine),yield tv(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return $e(this.persistence,new yt,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new u0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Mb(t,this.persistence);return new _R(e.asyncQueue,r)}createPersistence(e){const t=Ae(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ps.withCacheSize(this.cacheSizeBytes):ps.DEFAULT;return new $(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jO(),jC(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new UO}}class a1 extends EM{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield t().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof wP&&(r.sharedClientState.syncEngine={Zs:hH.bind(null,i),Xs:gH.bind(null,i),eo:mH.bind(null,i),Li:pH.bind(null,i),Ys:dH.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,Te.Z)(function*(l){yield function fH(n,e){return pM.apply(this,arguments)}(r.Na.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=jO();if(!wP.D(t))throw new Ue(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ae(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class av{initialize(e,t){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>n1(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lH.bind(null,r.syncEngine),yield BP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Wj}createDatastore(e){const t=p0(e.databaseInfo.databaseId),r=new Rj(e.databaseInfo);return new xj(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,l=t=>n1(this.syncEngine,t,0),d=BO.D()?new BO:new Aj,new Oj(r,i,s,l,d);var r,i,s,l,d}createSyncEngine(e,t){return function(i,s,l,d,p,y,w){const D=new Jj(i,s,l,d,p,y);return w&&(D.Fa=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,Te.Z)(function*(){var t,r;yield(r=(0,Te.Z)(function*(s){const l=et(s);De("RemoteStore","RemoteStore shutting down."),l.v_.add(5),yield ev(l),l.M_.shutdown(),l.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function l1(n,e=10240){let t=0;return{read:()=>(0,Te.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class GC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vH{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new pi,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,Te.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new Zj(JSON.parse(s),t.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,Te.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,Te.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,Te.Z)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class EH{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Te.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Ue(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,Te.Z)(function*(l,d){const p=et(l),y={documents:d.map(O=>hs(p.serializer,O))},w=yield p.vo("BatchGetDocuments",p.serializer.databaseId,fn.emptyPath(),y,d.length),D=new Map;w.forEach(O=>{const H=function YR(n,e){return"found"in e?function(r,i){It(!!i.found);const s=$a(r,i.found.name),l=jr(i.found.updateTime),d=i.found.createTime?jr(i.found.createTime):At.min(),p=new Ai({mapValue:{fields:i.found.fields}});return lr.newFoundDocument(s,l,d,p)}(n,e):"missing"in e?function(r,i){It(!!i.missing),It(!!i.readTime);const s=$a(r,i.missing),l=jr(i.readTime);return lr.newNoDocument(s,l)}(n,e):ht()}(p.serializer,O);D.set(H.key.toString(),H)});const M=[];return d.forEach(O=>{const H=D.get(O.toString());It(!!H),M.push(H)}),M}),function s(l,d){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=tt.fromPath(i);e.mutations.push(new Kw(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(s,l){const d=et(s),p={writes:l.map(y=>Zd(d.serializer,y))};yield d.So("Commit",d.serializer.databaseId,fn.emptyPath(),p)}),function i(s,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(At.min())?cr.exists(!1):cr.updateTime(t):cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Ue(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cr.updateTime(t)}return cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wH{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new TP(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,Te.Z)(function*(){const t=new EH(e.datastore),r=e.Ja(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const t=this.updateFunction(e);return!Ud(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!GR(t)}return!1}}class IH{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bi.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Te.Z)(function*(d){De("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(De("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new pi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=rv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function zC(n,e){return wM.apply(this,arguments)}function wM(){return wM=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),De("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield Yt(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),wM.apply(this,arguments)}function IM(n,e){return TM.apply(this,arguments)}function TM(){return TM=(0,Te.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield bM(n);De("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>KO(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>KO(e.remoteStore,i)),n._onlineComponents=e}),TM.apply(this,arguments)}function c1(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function bM(n){return CM.apply(this,arguments)}function CM(){return CM=(0,Te.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){De("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!c1(t))throw t;ds("Error using user provided cache. Falling back to memory cache: "+t),yield zC(n,new _0)}}else De("FirestoreClient","Using default OfflineComponentProvider"),yield zC(n,new _0);return n._offlineComponents}),CM.apply(this,arguments)}function WC(n){return AM.apply(this,arguments)}function AM(){return AM=(0,Te.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(De("FirestoreClient","Using user provided OnlineComponentProvider"),yield IM(n,n._uninitializedComponentsProvider._online)):(De("FirestoreClient","Using default OnlineComponentProvider"),yield IM(n,new av))),n._onlineComponents}),AM.apply(this,arguments)}function u1(n){return bM(n).then(e=>e.persistence)}function lv(n){return bM(n).then(e=>e.localStore)}function d1(n){return WC(n).then(e=>e.remoteStore)}function DM(n){return WC(n).then(e=>e.syncEngine)}function cv(n){return SM.apply(this,arguments)}function SM(){return SM=(0,Te.Z)(function*(n){const e=yield WC(n),t=e.eventManager;return t.onListen=eH.bind(null,e.syncEngine),t.onUnlisten=tH.bind(null,e.syncEngine),t}),SM.apply(this,arguments)}function f1(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(s,l,d,p,y){const w=new GC({next:M=>{l.enqueueAndForget(()=>zP(s,D));const O=M.docs.has(d);!O&&M.fromCache?y.reject(new Ue(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):O&&M.fromCache&&p&&"server"===p.source?y.reject(new Ue(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(M)},error:M=>y.reject(M)}),D=new KP(Hd(d.path),w,{includeMetadataChanges:!0,Z_:!0});return $P(s,D)}(yield cv(n),n.asyncQueue,e,t,r)})),r.promise}function p1(n,e,t={}){const r=new pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(s,l,d,p,y){const w=new GC({next:M=>{l.enqueueAndForget(()=>zP(s,D)),M.fromCache&&"server"===p.source?y.reject(new Ue(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(M)},error:M=>y.reject(M)}),D=new KP(d,w,{includeMetadataChanges:!0,Z_:!0});return $P(s,D)}(yield cv(n),n.asyncQueue,e,t,r)})),r.promise}function g1(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const m1=new Map;function RM(n,e,t){if(!t)throw new Ue(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _1(n,e,t,r){if(!0===e&&!0===r)throw new Ue(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function y1(n){if(!tt.isDocumentKey(n))throw new Ue(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function v1(n){if(tt.isDocumentKey(n))throw new Ue(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":ht()}function wn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qC(n);throw new Ue(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function E1(n,e){if(e<=0)throw new Ue(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class w1{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=g1(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ue(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class y0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w1({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w1(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new rm;switch(r.type){case"firstParty":return new vy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ue(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=m1.get(t);r&&(De("ComponentProvider","Removing Datastore"),m1.delete(t),r.terminate())}(this),Promise.resolve()}}class gs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Tr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tr(this.firestore,e,this._key)}}class Cu extends gs{constructor(e,t,r){super(e,t,Hd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tr(this.firestore,null,new tt(e))}withConverter(e){return new Cu(this.firestore,e,this._path)}}function T1(n,e,...t){if(n=(0,B.m9)(n),RM("collection","path",e),n instanceof y0){const r=fn.fromString(e,...t);return v1(r),new Cu(n,null,r)}{if(!(n instanceof Tr||n instanceof Cu))throw new Ue(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return v1(r),new Cu(n.firestore,null,r)}}function KC(n,e,...t){if(n=(0,B.m9)(n),1===arguments.length&&(e=Nf.newId()),RM("doc","path",e),n instanceof y0){const r=fn.fromString(e,...t);return y1(r),new Tr(n,null,new tt(r))}{if(!(n instanceof Tr||n instanceof Cu))throw new Ue(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(fn.fromString(e,...t));return y1(r),new Tr(n.firestore,n instanceof Cu?n.converter:null,new tt(r))}}function b1(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),(n instanceof Tr||n instanceof Cu)&&(e instanceof Tr||e instanceof Cu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function PM(n,e){return n=(0,B.m9)(n),e=(0,B.m9)(e),n instanceof gs&&e instanceof gs&&n.firestore===e.firestore&&zf(n._query,e._query)&&n.converter===e.converter}class kH{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new TP(this,"async_queue_retry"),this._u=()=>{const t=jC();t&&De("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=jC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=jC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new pi;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,Te.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!wo(t))throw t;De("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,ti("INTERNAL UNHANDLED ERROR: ",function(l){let d=l.message||"";return l.stack&&(d=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),d}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=HP.createAndSchedule(this,e,t,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&ht()}verifyOperationInProgress(){}hu(){var e=this;return(0,Te.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function MM(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class OH{constructor(){this._progressObserver={},this._taskCompletionResolver=new pi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends y0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kH,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||C1(this),this._firestoreClient.terminate()}}function ri(n){return n._firestoreClient||C1(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function C1(n){var e,t,r;const i=n._freezeSettings(),s=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new xR(n._databaseId,p,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,g1(w.experimentalLongPollingOptions),w.useFetchStreams));var p,w;n._firestoreClient=new IH(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function A1(n,e,t){const r=new pi;return n.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield zC(n,t),yield IM(n,e),r.resolve()}catch(i){const s=i;if(!c1(s))throw s;ds("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function D1(n){if(n._initialized||n._terminated)throw new Ue(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Au(ni.fromBase64String(e))}catch(t){throw new Ue(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Au(ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class nh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class km{constructor(e){this._methodName=e}}class ZC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const WH=/^__.*__$/;class qH{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kf(e,this.data,t,this.fieldTransforms)}}class S1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function R1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class YC{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new YC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return JC(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(R1(this.du)&&WH.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class KH{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||p0(e)}Su(e,t,r,i=!1){return new YC({du:e,methodName:t,wu:r,path:er.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Om(n){const e=n._freezeSettings(),t=p0(n._databaseId);return new KH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QC(n,e,t,r,i,s={}){const l=n.Su(s.merge||s.mergeFields?2:0,e,t,i);VM("Data must be an object, but it was:",l,r);const d=x1(r,l);let p,y;if(s.merge)p=new Ps(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const w=[];for(const D of s.mergeFields){const M=w0(e,D,t);if(!l.contains(M))throw new Ue(pe.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);k1(w,M)||w.push(M)}p=new Ps(w),y=l.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=l.fieldTransforms;return new qH(new Ai(d),p,y)}class E0 extends km{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof E0}}function P1(n,e,t){return new YC({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class xM extends km{_toFieldTransform(e){return new Tm(e.path,new qd)}isEqual(e){return e instanceof xM}}class NM extends km{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=P1(this,e,!0),r=this.bu.map(s=>Fm(s,t)),i=new To(r);return new Tm(e.path,i)}isEqual(e){return e instanceof NM&&(0,B.vZ)(this.bu,e.bu)}}class kM extends km{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=P1(this,e,!0),r=this.bu.map(s=>Fm(s,t)),i=new gu(r);return new Tm(e.path,i)}isEqual(e){return e instanceof kM&&(0,B.vZ)(this.bu,e.bu)}}class OM extends km{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Im(e.serializer,wm(e.serializer,this.Du));return new Tm(e.path,t)}isEqual(e){return e instanceof OM&&this.Du===e.Du}}function FM(n,e,t,r){const i=n.Su(1,e,t);VM("Data must be an object, but it was:",i,r);const s=[],l=Ai.empty();du(r,(p,y)=>{const w=XC(e,p,t);y=(0,B.m9)(y);const D=i.fu(w);if(y instanceof E0)s.push(w);else{const M=Fm(y,D);null!=M&&(s.push(w),l.set(w,M))}});const d=new Ps(s);return new S1(l,d,i.fieldTransforms)}function LM(n,e,t,r,i,s){const l=n.Su(1,e,t),d=[w0(e,r,t)],p=[i];if(s.length%2!=0)throw new Ue(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(w0(e,s[M])),p.push(s[M+1]);const y=[],w=Ai.empty();for(let M=d.length-1;M>=0;--M)if(!k1(y,d[M])){const O=d[M];let H=p[M];H=(0,B.m9)(H);const X=l.fu(O);if(H instanceof E0)y.push(O);else{const re=Fm(H,X);null!=re&&(y.push(O),w.set(O,re))}}const D=new Ps(y);return new S1(w,D,l.fieldTransforms)}function M1(n,e,t,r=!1){return Fm(t,n.Su(r?4:3,e))}function Fm(n,e){if(N1(n=(0,B.m9)(n)))return VM("Unsupported field value:",e,n),x1(n,e);if(n instanceof km)return function(r,i){if(!R1(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let l=0;for(const d of r){let p=Fm(d,i.gu(l));null==p&&(p={nullValue:"NULL_VALUE"}),s.push(p),l++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,B.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return wm(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=fr.fromDate(r);return{timestampValue:Qf(i.serializer,s)}}if(r instanceof fr){const s=new fr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qf(i.serializer,s)}}if(r instanceof ZC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Au)return{bytesValue:dC(i.serializer,r._byteString)};if(r instanceof Tr){const s=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(s))throw i.pu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:By(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${qC(r)}`)}(n,e)}function x1(n,e){const t={};return Dw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(n,(r,i)=>{const s=Fm(i,e.Ru(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function N1(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof fr||n instanceof ZC||n instanceof Au||n instanceof Tr||n instanceof km)}function VM(n,e,t){if(!N1(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=qC(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function w0(n,e,t){if((e=(0,B.m9)(e))instanceof nh)return e._internalPath;if("string"==typeof e)return XC(n,e);throw JC("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZH=new RegExp("[~\\*/\\[\\]]");function XC(n,e,t){if(e.search(ZH)>=0)throw JC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nh(...e.split("."))._internalPath}catch{throw JC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JC(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||l)&&(p+=" (found",s&&(p+=` in field ${r}`),l&&(p+=` in document ${i}`),p+=")"),new Ue(pe.INVALID_ARGUMENT,d+n+p)}function k1(n,e){return n.some(t=>t.isEqual(e))}class I0{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new YH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eA("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class YH extends I0{data(){return super.data()}}function eA(n,e){return"string"==typeof e?XC(n,e):e instanceof nh?e._internalPath:e._delegate._internalPath}function O1(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UM{}class T0 extends UM{}function ap(n,e,...t){let r=[];e instanceof UM&&r.push(e),r=r.concat(t),function(s){const l=s.filter(p=>p instanceof uv).length,d=s.filter(p=>p instanceof b0).length;if(l>1||l>0&&d>0)throw new Ue(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class b0 extends T0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new b0(e,t,r)}_apply(e){const t=this._parse(e);return U1(e._query,t),new gs(e.firestore,e.converter,Uw(e._query,t))}_parse(e){const t=Om(e.firestore);return function(s,l,d,p,y,w,D){let M;if(y.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Ue(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){V1(D,w);const O=[];for(const H of D)O.push(L1(p,s,H));M={arrayValue:{values:O}}}else M=L1(p,s,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||V1(D,w),M=M1(d,"where",D,"in"===w||"not-in"===w);return _n.create(y,w,M)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class uv extends UM{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Cn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let l=i;const d=s.getFlattenedFilters();for(const p of d)U1(l,p),l=Uw(l,p)}(e._query,t),new gs(e.firestore,e.converter,Uw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class BM extends T0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new BM(e,t)}_apply(e){const t=function(i,s,l){if(null!==i.startAt)throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fm(s,l)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(i,s){const l=i.explicitOrderBy.concat([s]);return new $l(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class tA extends T0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new tA(e,t,r)}_apply(e){return new gs(e.firestore,e.converter,_m(e._query,this._limit,this._limitType))}}class nA extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new nA(e,t,r)}_apply(e){const t=F1(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(s=t,new $l((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class rA extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rA(e,t,r)}_apply(e){const t=F1(e,this.type,this._docOrFields,this._inclusive);return new gs(e.firestore,e.converter,(s=t,new $l((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function F1(n,e,t,r){if(t[0]=(0,B.m9)(t[0]),t[0]instanceof I0)return function(s,l,d,p,y){if(!p)throw new Ue(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const w=[];for(const D of $d(s))if(D.field.isKeyField())w.push(jd(l,p.key));else{const M=p.data.field(D.field);if(am(M))throw new Ue(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const O=D.field.canonicalString();throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${O}' (used as the orderBy) does not exist.`)}w.push(M)}return new pu(w,y)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Om(n.firestore);return function(l,d,p,y,w,D){const M=l.explicitOrderBy;if(w.length>M.length)throw new Ue(pe.INVALID_ARGUMENT,`Too many arguments provided to ${y}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const O=[];for(let H=0;H<w.length;H++){const X=w[H];if(M[H].field.isKeyField()){if("string"!=typeof X)throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${y}(), but got a ${typeof X}`);if(!Ny(l)&&-1!==X.indexOf("/"))throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${y}() must be a plain document ID, but '${X}' contains a slash.`);const re=l.path.child(fn.fromString(X));if(!tt.isDocumentKey(re))throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${y}() must result in a valid document path, but '${re}' is not because it contains an odd number of segments.`);const ye=new tt(re);O.push(jd(d,ye))}else{const re=M1(p,y,X);O.push(re)}}return new pu(O,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function L1(n,e,t){if("string"==typeof(t=(0,B.m9)(t))){if(""===t)throw new Ue(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ny(e)&&-1!==t.indexOf("/"))throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(fn.fromString(t));if(!tt.isDocumentKey(r))throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jd(n,new tt(r))}if(t instanceof Tr)return jd(n,t._key);throw new Ue(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qC(t)}.`)}function V1(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U1(n,e){const t=function(i,s){for(const l of i)for(const d of l.getFlattenedFilters())if(s.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ue(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jM{convertValue(e,t="none"){switch(jl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ir(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return du(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ZC(Ir(e.latitude),Ir(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Dy(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lm(e));default:return null}}convertTimestamp(e){const t=Ul(e);return new fr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=fn.fromString(e);It(yC(r));const i=new fu(r.get(1),r.get(3)),s=new tt(r.popFirst(5));return i.isEqual(t)||ti(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function iA(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class s$ extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}class Lm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rh extends I0{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new C0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eA("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class C0 extends rh{data(e={}){return super.data(e)}}class lp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Lm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new C0(this._firestore,this._userDataWriter,r.key,r,new Lm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(d=>({type:"added",doc:new C0(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Lm(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:l++}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(d=>s||3!==d.type).map(d=>{const p=new C0(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Lm(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let y=-1,w=-1;return 0!==d.type&&(y=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),1!==d.type&&(l=l.add(d.doc),w=l.indexOf(d.doc.key)),{type:a$(d.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function a$(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function j1(n,e){return n instanceof rh&&e instanceof rh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lp&&e instanceof lp&&n._firestore===e._firestore&&PM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cp extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tr(this.firestore,null,t)}}function H1(n,e,t){n=wn(n,Tr);const r=wn(n.firestore,pr),i=iA(n.converter,e,t);return dv(r,[QC(Om(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,cr.none())])}function $1(n,e,t,...r){n=wn(n,Tr);const i=wn(n.firestore,pr),s=Om(i);let l;return l="string"==typeof(e=(0,B.m9)(e))||e instanceof nh?LM(s,"updateDoc",n._key,e,t,r):FM(s,"updateDoc",n._key,e),dv(i,[l.toMutation(n._key,cr.exists(!0))])}function G1(n,...e){var t,r,i;n=(0,B.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||MM(e[l])||(s=e[l],l++);const d={includeMetadataChanges:s.includeMetadataChanges};if(MM(e[l])){const D=e[l];e[l]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[l+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[l+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,w;if(n instanceof Tr)y=wn(n.firestore,pr),w=Hd(n._key.path),p={next:D=>{e[l]&&e[l](HM(y,n,D))},error:e[l+1],complete:e[l+2]};else{const D=wn(n,gs);y=wn(D.firestore,pr),w=D._query;const M=new cp(y);p={next:O=>{e[l]&&e[l](new lp(y,M,D,O))},error:e[l+1],complete:e[l+2]},O1(n._query)}return function(M,O,H,X){const re=new GC(X),ye=new KP(O,re,H);return M.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return $P(yield cv(M),ye)})),()=>{re.La(),M.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return zP(yield cv(M),ye)}))}}(ri(y),w,d,p)}function dv(n,e){return function(r,i){const s=new pi;return r.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function nH(n,e,t){return JP.apply(this,arguments)}(yield DM(r),i,s)})),s.promise}(ri(n),e)}function HM(n,e,t){const r=t.docs.get(e._key),i=new cp(n);return new rh(n,i,e._key,r,new Lm(t.hasPendingWrites,t.fromCache),e.converter)}const C$={maxAttempts:5};class z1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Om(e)}set(e,t,r){this._verifyNotCommitted();const i=up(e,this._firestore),s=iA(i.converter,t,r),l=QC(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,cr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=up(e,this._firestore);let l;return l="string"==typeof(t=(0,B.m9)(t))||t instanceof nh?LM(this._dataReader,"WriteBatch.update",s._key,t,r,i):FM(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,cr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=up(e,this._firestore);return this._mutations=this._mutations.concat(new Zf(t._key,cr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function up(n,e){if((n=(0,B.m9)(n)).firestore!==e)throw new Ue(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class A$ extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Om(t)}get(t){const r=up(t,this._firestore),i=new s$(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return ht();const l=s[0];if(l.isFoundDocument())return new I0(this._firestore,i,l.key,l,r.converter);if(l.isNoDocument())return new I0(this._firestore,i,r._key,null,r.converter);throw ht()})}set(t,r,i){const s=up(t,this._firestore),l=iA(s.converter,r,i),d=QC(this._dataReader,"Transaction.set",s._key,l,null!==s.converter,i);return this._transaction.set(s._key,d),this}update(t,r,i,...s){const l=up(t,this._firestore);let d;return d="string"==typeof(r=(0,B.m9)(r))||r instanceof nh?LM(this._dataReader,"Transaction.update",l._key,r,i,s):FM(this._dataReader,"Transaction.update",l._key,r),this._transaction.update(l._key,d),this}delete(t){const r=up(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=up(e,this._firestore),r=new cp(this._firestore);return super.get(e).then(i=>new rh(this._firestore,r,t._key,i._document,new Lm(!1,!1),t.converter))}}!function(e,t=!0){Jo=Ni.SDK_VERSION,(0,Ni._registerComponent)(new Ds.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const l=r.getProvider("app").getImmediate(),d=new pr(new uR(r.getProvider("auth-internal")),new Ib(r.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ue(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(y.options.projectId,w)}(l,i),l);return s=Object.assign({useFetchStreams:t},s),d._setSettings(s),d},"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(vb,"4.4.2",e),(0,Ni.registerVersion)(vb,"4.4.2","esm2017")}();function GM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Z1(){if(typeof Uint8Array>"u")throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function Y1(){if(!function MR(){return typeof atob<"u"}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}class A0{constructor(e){this._delegate=e}static fromBase64String(e){return Y1(),new A0(Au.fromBase64String(e))}static fromUint8Array(e){return Z1(),new A0(Au.fromUint8Array(e))}toBase64(){return Y1(),this._delegate.toBase64()}toUint8Array(){return Z1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function zM(n){return function F$(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class L${enableIndexedDbPersistence(e,t){return function LH(n,e){D1(n=wn(n,pr));const t=ri(n);if(t._uninitializedComponentsProvider)throw new Ue(pe.FAILED_PRECONDITION,"SDK cache is already specified.");ds("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new av;return A1(t,i,new EM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VH(n){D1(n=wn(n,pr));const e=ri(n);if(e._uninitializedComponentsProvider)throw new Ue(pe.FAILED_PRECONDITION,"SDK cache is already specified.");ds("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new av;return A1(e,r,new a1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UH(n){if(n._initialized&&!n._terminated)throw new Ue(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(t=(0,Te.Z)(function*(i){if(!Zs.D())return Promise.resolve();const s=i+"main";yield Zs.delete(s)}),function r(i){return t.apply(this,arguments)})(Ae(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Q1{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof fu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ds("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function I1(n,e,t,r={}){var i;const s=(n=wn(n,y0))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==l&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:l,ssl:!1})),r.mockUserToken){let d,p;if("string"==typeof r.mockUserToken)d=r.mockUserToken,p=bi.MOCK_USER;else{d=(0,B.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ue(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new bi(y)}n._authCredentials=new cR(new wb(d,p))}}(this._delegate,e,t,r)}enableNetwork(){return function jH(n){return function TH(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield u1(n),t=yield d1(n);return e.setNetworkEnabled(!0),function(i){const s=et(i);return s.v_.delete(0),g0(s)}(t)}))}(ri(n=wn(n,pr)))}(this._delegate)}disableNetwork(){return function HH(n){return function bH(n){return n.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield u1(n),t=yield d1(n);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(s){const l=et(s);l.v_.add(0),yield ev(l),l.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(ri(n=wn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,_1("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BH(n){return function(t){const r=new pi;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function oH(n,e){return iM.apply(this,arguments)}(yield DM(t),r)})),r.promise}(ri(n=wn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function m$(n,e){return function DH(n,e){const t=new GC(e);return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return i=yield cv(n),s=t,et(i).K_.add(s),void s.next();var i,s})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return i=yield cv(n),s=t,void et(i).K_.delete(s);var i,s}))}}(ri(n=wn(n,pr)),MM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hv(this,T1(this._delegate,e))}catch(t){throw Js(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ga(this,KC(this._delegate,e))}catch(t){throw Js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function NH(n,e){if(n=wn(n,y0),RM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gs(n,null,(r=e,new $l(fn.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function D$(n,e,t){n=wn(n,pr);const r=Object.assign(Object.assign({},C$),t);return function(s){if(s.maxAttempts<1)throw new Ue(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,l,d){const p=new pi;return s.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const y=yield function h1(n){return WC(n).then(e=>e.datastore)}(s);new wH(s.asyncQueue,y,d,l,p).ja()})),p.promise}(ri(n),i=>e(new A$(n,i)),r)}(this._delegate,t=>e(new X1(this,t)))}batch(){return ri(this._delegate),new J1(new z1(this._delegate,e=>dv(this._delegate,e)))}loadBundle(e){return function $H(n,e){const t=ri(n=wn(n,pr)),r=new OH;return function SH(n,e,t,r){const i=function(l,d){let p;return p="string"==typeof l?Am().encode(l):l,w=function(w,D){if(w instanceof Uint8Array)return l1(w,D);if(w instanceof ArrayBuffer)return l1(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new vH(w,d);var w}(t,p0(e));n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function _H(n,e,t){const r=et(n);var i;(i=(0,Te.Z)(function*(l,d,p){try{const y=yield d.getMetadata();if(yield function(H,X){const re=et(H),ye=jr(X.createTime);return re.persistence.runTransaction("hasNewerBundle","readonly",je=>re.$r.getBundleMetadata(je,X.id)).then(je=>!!je&&je.createTime.compareTo(ye)>=0)}(l.localStore,y))return yield d.close(),p._completeWith({taskState:"Success",documentsLoaded:(H=y).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);p._updateProgress(QO(y));const w=new Yj(y,l.localStore,d.serializer);let D=yield d.Oa();for(;D;){const O=yield w.na(D);O&&p._updateProgress(O),D=yield d.Oa()}const M=yield w.complete();return yield th(l,M.sa,void 0),yield function(H,X){const re=et(H);return re.persistence.runTransaction("Save bundle","readwrite",ye=>re.$r.saveBundleMetadata(ye,X))}(l.localStore,y),p._completeWith(M.progress),Promise.resolve(M.ia)}catch(y){return ds("SyncEngine",`Loading bundle failed with ${y}`),p._failWith(y),Promise.resolve(new Set)}var H}),function s(l,d,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield DM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GH(n,e){return function RH(n,e){return n.asyncQueue.enqueue((0,Te.Z)(function*(){return function(r,i){const s=et(r);return s.persistence.runTransaction("Get named query","readonly",l=>s.$r.getNamedQuery(l,i))}(yield lv(n),e)}))}(ri(n=wn(n,pr)),e).then(t=>t?new gs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class oA extends jM{constructor(e){super(),this.firestore=e}convertBytes(e){return new A0(new Au(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class X1{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new oA(e)}get(e){const t=Um(e);return this._delegate.get(t).then(r=>new D0(this._firestore,new rh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Um(e);return r?(GM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Um(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Um(e);return this._delegate.delete(t),this}}class J1{constructor(e){this._delegate=e}set(e,t,r){const i=Um(e);return r?(GM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Um(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Um(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Vm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new C0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new S0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Vm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Vm(e,new oA(e),t),i.set(t,s)),s}}Vm.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oA(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new Tr(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Ga(t,new Tr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hv(this.firestore,T1(this._delegate,e))}catch(t){throw Js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,B.m9)(e))instanceof Tr&&b1(this._delegate,e)}set(e,t){t=GM("DocumentReference.set",t);try{return t?H1(this._delegate,e,t):H1(this._delegate,e)}catch(r){throw Js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?$1(this._delegate,e):$1(this._delegate,e,t,...r)}catch(i){throw Js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function p$(n){return dv(wn(n.firestore,pr),[new Zf(n._key,cr.none())])}(this._delegate)}onSnapshot(...e){const t=eF(e),r=tF(e,i=>new D0(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return G1(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function c$(n){n=wn(n,Tr);const e=wn(n.firestore,pr),t=ri(e),r=new cp(e);return function CH(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(s,l,d){try{const p=yield function(w,D){const M=et(w);return M.persistence.runTransaction("read document","readonly",O=>M.localDocuments.getDocument(O,D))}(s,l);p.isFoundDocument()?d.resolve(p):p.isNoDocument()?d.resolve(null):d.reject(new Ue(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const y=rv(p,`Failed to get document '${l} from cache`);d.reject(y)}}),function i(s,l,d){return r.apply(this,arguments)})(yield lv(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rh(e,r,n._key,i,new Lm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function u$(n){n=wn(n,Tr);const e=wn(n.firestore,pr);return f1(ri(e),n._key,{source:"server"}).then(t=>HM(e,n,t))}(this._delegate):function l$(n){n=wn(n,Tr);const e=wn(n.firestore,pr);return f1(ri(e),n._key).then(t=>HM(e,n,t))}(this._delegate),t.then(r=>new D0(this.firestore,new rh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?Vm.getInstance(this.firestore,e):null))}}function Js(n,e,t){return n.message=n.message.replace(e,t),n}function eF(n){for(const e of n)if("object"==typeof e&&!zM(e))return e;return{}}function tF(n,e){var t,r;let i;return i=zM(n[0])?n[0]:zM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class D0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return j1(this._delegate,e._delegate)}}class S0 extends D0{data(e){const t=this._delegate.data(e);return this._delegate._converter||function Eb(n,e){n||ht()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new oA(e)}where(e,t,r){try{return new eo(this.firestore,ap(this._delegate,function QH(n,e,t){const r=e,i=eA("where",n);return b0._create(i,r,t)}(e,t,r)))}catch(i){throw Js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,ap(this._delegate,function XH(n,e="asc"){const t=e,r=eA("orderBy",n);return BM._create(r,t)}(e,t)))}catch(r){throw Js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,ap(this._delegate,function JH(n){return E1("limit",n),tA._create("limit",n,"F")}(e)))}catch(t){throw Js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,ap(this._delegate,function e$(n){return E1("limitToLast",n),tA._create("limitToLast",n,"L")}(e)))}catch(t){throw Js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,ap(this._delegate,function t$(...n){return nA._create("startAt",n,!0)}(...e)))}catch(t){throw Js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,ap(this._delegate,function n$(...n){return nA._create("startAfter",n,!1)}(...e)))}catch(t){throw Js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,ap(this._delegate,function r$(...n){return rA._create("endBefore",n,!1)}(...e)))}catch(t){throw Js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,ap(this._delegate,function i$(...n){return rA._create("endAt",n,!0)}(...e)))}catch(t){throw Js(t,"endAt()","Query.endAt()")}}isEqual(e){return PM(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function h$(n){n=wn(n,gs);const e=wn(n.firestore,pr),t=ri(e),r=new cp(e);return function AH(n,e){const t=new pi;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(s,l,d){try{const p=yield LC(s,l,!0),y=new e1(l,p.hs),w=y.ha(p.documents),D=y.applyChanges(w,!1);d.resolve(D.snapshot)}catch(p){const y=rv(p,`Failed to execute query '${l} against cache`);d.reject(y)}}),function i(s,l,d){return r.apply(this,arguments)})(yield lv(n),e,t);var r})),t.promise}(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate):"server"===e?.source?function f$(n){n=wn(n,gs);const e=wn(n.firestore,pr),t=ri(e),r=new cp(e);return p1(t,n._query,{source:"server"}).then(i=>new lp(e,r,n,i))}(this._delegate):function d$(n){n=wn(n,gs);const e=wn(n.firestore,pr),t=ri(e),r=new cp(e);return O1(n._query),p1(t,n._query).then(i=>new lp(e,r,n,i))}(this._delegate),t.then(r=>new WM(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eF(e),r=tF(e,i=>new WM(this.firestore,new lp(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return G1(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?Vm.getInstance(this.firestore,e):null))}}class U${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new S0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class WM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new S0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new U$(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new S0(this._firestore,r))})}isEqual(e){return j1(this._delegate,e._delegate)}}class hv extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?KC(this._delegate):KC(this._delegate,e))}catch(t){throw Js(t,"doc()","CollectionReference.doc()")}}add(e){return function g$(n,e){const t=wn(n.firestore,pr),r=KC(n),i=iA(n.converter,e);return dv(t,[QC(Om(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return b1(this._delegate,e._delegate)}withConverter(e){return new hv(this.firestore,this._delegate.withConverter(e?Vm.getInstance(this.firestore,e):null))}}function Um(n){return wn(n,Tr)}class qM{constructor(...e){this._delegate=new nh(...e)}static documentId(){return new qM(er.keyField().canonicalString())}isEqual(e){return(e=(0,B.m9)(e))instanceof nh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function R$(){return new xM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bm(e)}static delete(){const e=function S$(){return new E0("deleteField")}();return e._methodName="FieldValue.delete",new Bm(e)}static arrayUnion(...e){const t=function P$(...n){return new NM("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bm(t)}static arrayRemove(...e){const t=function M$(...n){return new kM("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bm(t)}static increment(e){const t=function x$(n){return new OM("increment",n)}(e);return t._methodName="FieldValue.increment",new Bm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const B$={Firestore:Q1,GeoPoint:ZC,Timestamp:fr,Blob:A0,Transaction:X1,WriteBatch:J1,DocumentReference:Ga,DocumentSnapshot:D0,Query:eo,QueryDocumentSnapshot:S0,QuerySnapshot:WM,CollectionReference:hv,FieldPath:qM,FieldValue:Bm,setLogLevel:function V$(n){!function _y(n){lu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function H$(n){(function j$(n,e){n.INTERNAL.registerComponent(new Ds.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},B$)))})(n,(e,t)=>new Q1(e,t,new L$)),n.registerVersion("@firebase/firestore-compat","0.3.25")}(G_.Z);var KM=j(6451),aA=j(5363),$$=j(6063);class G$ extends Sr.x{constructor(e=1/0,t=1/0,r=$$.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let d=0;for(let p=1;p<r.length&&r[p]<=l;p+=2)d=p;d&&r.splice(0,d+1)}}}var nF=j(3099);function rF(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,nF.B)({connector:()=>new G$(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function iF(n,e){return(0,Ft.m)(e)?hn(()=>n,e):hn(()=>n)}var ZM=j(9468);j(259);const QM=new Map,oF={activated:!1,tokenObservers:[]},Z$={initialized:!1,enabled:!1};function ii(n){return QM.get(n)||Object.assign({},oF)}function cA(){return Z$}const XM="https://content-firebaseappcheck.googleapis.com/v1",J$="exchangeDebugToken",aF={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class tG{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Te.Z)(function*(){t.stop();try{t.pending=new B.BH,t.pending.promise.catch(r=>{}),yield function nG(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new B.BH,t.pending.promise.catch(r=>{}),yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ms=new B.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function JM(n){if(!ii(n).activated)throw ms.create("use-before-activation",{appName:n.name})}function hA(n,e){return tx.apply(this,arguments)}function tx(){return tx=(0,Te.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,s)}catch(D){throw ms.create("fetch-network-error",{originalErrorMessage:D?.message})}if(200!==l.status)throw ms.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(D){throw ms.create("fetch-parse-error",{originalErrorMessage:D?.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),w=Date.now();return{token:d.token,expireTimeMillis:w+y,issuedAtTimeMillis:w}}),tx.apply(this,arguments)}function lF(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${XM}/projects/${t}/apps/${r}:${J$}?key=${i}`,body:{debug_token:e}}}const oG="firebase-app-check-database",aG=1,R0="firebase-app-check-store";let fA=null;function nx(){return nx=(0,Te.Z)(function*(n,e){const r=(yield function uF(){return fA||(fA=new Promise((n,e)=>{try{const t=indexedDB.open(oG,aG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ms.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(R0,{keyPath:"compositeKey"})}}catch(t){e(ms.create("storage-open",{originalErrorMessage:t?.message}))}}),fA)}()).transaction(R0,"readwrite"),s=r.objectStore(R0).put({compositeKey:n,value:e});return new Promise((l,d)=>{s.onsuccess=p=>{l()},r.onerror=p=>{var y;d(ms.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),nx.apply(this,arguments)}const P0=new ki.Yd("@firebase/app-check");function sx(n,e){return(0,B.hl)()?function cG(n,e){return function dF(n,e){return nx.apply(this,arguments)}(function fF(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{P0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ax(){return cA().enabled}function lx(){return cx.apply(this,arguments)}function cx(){return cx=(0,Te.Z)(function*(){const n=cA();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),cx.apply(this,arguments)}const gG={error:"UNKNOWN_ERROR"};function mG(n){return B.US.encodeString(JSON.stringify(n),!1)}function pA(n){return ux.apply(this,arguments)}function ux(){return ux=(0,Te.Z)(function*(n,e=!1){const t=n.app;JM(t);const r=ii(t);let s,i=r.token;if(i&&!fv(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(fv(p)?i=p:yield sx(t,void 0))}if(!e&&i&&fv(i))return{token:i.token};let d,l=!1;if(ax()){r.exchangeTokenPromise||(r.exchangeTokenPromise=hA(lF(t,yield lx()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const p=yield r.exchangeTokenPromise;return yield sx(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield ii(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?P0.warn(p.message):P0.error(p),s=p}return i?s?d=fv(i)?{token:i.token,internalError:s}:_F(s):(d={token:i.token},r.token=i,yield sx(t,i)):d=_F(s),l&&function mF(n,e){const t=ii(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,d),d}),ux.apply(this,arguments)}function dx(){return dx=(0,Te.Z)(function*(n){const e=n.app;JM(e);const{provider:t}=ii(e);if(ax()){const r=yield lx(),{token:i}=yield hA(lF(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),dx.apply(this,arguments)}function fx(n,e){const t=ii(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gF(n){const{app:e}=n,t=ii(e);let r=t.tokenRefresher;r||(r=function _G(n){const{app:e}=n;return new tG((0,Te.Z)(function*(){let r;if(r=ii(e).token?yield pA(n,!0):yield pA(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=ii(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},aF.RETRIAL_MIN_WAIT,aF.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function fv(n){return n.expireTimeMillis-Date.now()>0}function _F(n){return{token:mG(gG),error:n}}class yG{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=ii(this.app);for(const t of e)fx(this.app,t.next);return Promise.resolve()}}const CF="app-check-internal";!function xG(){(0,Ni._registerComponent)(new Ds.wA("app-check",n=>function vG(n,e){return new yG(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(CF).initialize()})),(0,Ni._registerComponent)(new Ds.wA(CF,n=>function EG(n){return{getToken:e=>pA(n,e),getLimitedUseToken:()=>function pF(n){return dx.apply(this,arguments)}(n),addTokenListener:e=>function hx(n,e,t,r){const{app:i}=n,s=ii(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&fv(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),gF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>gF(n))}(n,"INTERNAL",e),removeTokenListener:e=>fx(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ni.registerVersion)("@firebase/app-check","0.8.2")}();class M0{constructor(){return(0,Tn.vb)("app-check")}}typeof window<"u"&&window;var mA=j(9260);const yx=new h.OlP("angularfire2.auth.use-emulator"),vx=new h.OlP("angularfire2.auth.settings"),Ex=new h.OlP("angularfire2.auth.tenant-id"),wx=new h.OlP("angularfire2.auth.langugage-code"),Ix=new h.OlP("angularfire2.auth.use-device-language"),Tx=new h.OlP("angularfire.auth.persistence"),bx=(n,e,t,r,i,s,l,d)=>(0,fi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),l)for(const[y,w]of Object.entries(l))p.settings[y]=w;return d&&p.setPersistence(d),p},[t,r,i,s,l,d]);let x0=(()=>{class n{constructor(t,r,i,s,l,d,p,y,w,D,M,O){const H=new Sr.x,X=vt(void 0).pipe((0,aA.Q)(l.outsideAngular),hn(()=>s.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,9568)))),(0,gt.U)(()=>(0,fi.on)(t,s,r)),(0,gt.U)(re=>bx(re,s,d,y,w,D,p,M)),rF({bufferSize:1,refCount:!1}));if(xp(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=vt(null);else{X.pipe(Uo()).subscribe();const ye=X.pipe(hn(Be=>Be.getRedirectResult().then(Tt=>Tt,()=>null)),Tn.iC,rF({bufferSize:1,refCount:!1})),je=X.pipe(hn(Be=>new Rr.y(Tt=>({unsubscribe:s.runOutsideAngular(()=>Be.onAuthStateChanged(Nt=>Tt.next(Nt),Nt=>Tt.error(Nt),()=>Tt.complete()))})))),Oe=X.pipe(hn(Be=>new Rr.y(Tt=>({unsubscribe:s.runOutsideAngular(()=>Be.onIdTokenChanged(Nt=>Tt.next(Nt),Nt=>Tt.error(Nt),()=>Tt.complete()))}))));this.authState=ye.pipe(iF(je),(0,ZM.R)(l.outsideAngular),(0,aA.Q)(l.insideAngular)),this.user=ye.pipe(iF(Oe),(0,ZM.R)(l.outsideAngular),(0,aA.Q)(l.insideAngular)),this.idToken=this.user.pipe(hn(Be=>Be?(0,dn.D)(Be.getIdToken()):vt(null))),this.idTokenResult=this.user.pipe(hn(Be=>Be?(0,dn.D)(Be.getIdTokenResult()):vt(null))),this.credential=(0,KM.T)(ye,H,this.authState.pipe(Mi(Be=>!Be))).pipe((0,gt.U)(Be=>Be?.user?Be:null),(0,ZM.R)(l.outsideAngular),(0,aA.Q)(l.insideAngular))}return(0,fi.pX)(this,X,s,{spy:{apply:(re,ye,je)=>{(re.startsWith("signIn")||re.startsWith("createUser"))&&je.then(Oe=>H.next(Oe))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fi.Dh),h.LFG(fi.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(yx,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wx,8),h.LFG(Ix,8),h.LFG(Tx,8),h.LFG(M0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VG=(()=>{class n{constructor(){mA.Z.registerVersion("angularfire",Tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[x0]}),n})();function DF(n,e){return function UG(n,e=Ag.z){return new Rr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Cx(n,e){return DF(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function _A(n,e){return Cx(n,e).pipe(dd(void 0),Dg(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const p=i.find(w=>w.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(w=>w.ref.isEqual(l.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(l.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),s}))}function SF(n,e,t){return _A(n,t).pipe(Cl((r,i)=>function jG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ax(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ax(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ax(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),$_(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ax(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class PF{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_A(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(dd(void 0),Dg(),Mi(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Tn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Tn.iC)}add(e){return this.ref.add(e)}doc(e){return new MF(this.ref.doc(e),this.afs)}}class MF{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=kF(r,t);return new PF(i,s,this.afs)}snapshotChanges(){return function BG(n,e){return DF(n,e).pipe(dd(void 0),Dg(),(0,gt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(Tn.iC)}}class $G{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_A(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Mi(t=>t.length>0),Tn.iC):_A(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Cl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RF(e);return SF(this.query,t,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(e={}){return Cx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Tn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(Tn.iC)}}const xF=new h.OlP("angularfire2.enableFirestorePersistence"),NF=new h.OlP("angularfire2.firestore.persistenceSettings"),GG=new h.OlP("angularfire2.firestore.settings"),zG=new h.OlP("angularfire2.firestore.use-emulator");function kF(n,e=(t=>t)){return{query:e(n),ref:n}}let OF=(()=>{class n{constructor(t,r,i,s,l,d,p,y,w,D,M,O,H,X,re,ye,je){this.schedulers=p;const Oe=(0,fi.on)(t,d,r),Be=w;D&&bx(Oe,d,M,H,X,re,O,ye),[this.firestore,this.persistenceEnabled$]=(0,fi.cc)(`${Oe.name}.firestore`,"AngularFirestore",Oe.name,()=>{const Tt=d.runOutsideAngular(()=>Oe.firestore());if(s&&Tt.settings(s),Be&&Tt.useEmulator(...Be),i&&!xp(l)){const Nt=()=>{try{return(0,dn.D)(Tt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ln){return typeof console<"u"&&console.warn(ln),vt(!1)}};return[Tt,d.runOutsideAngular(Nt)]}return[Tt,vt(!1)]},[s,Be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=kF(i,r),d=this.schedulers.ngZone.run(()=>s);return new PF(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new $G(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new MF(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fi.Dh),h.LFG(fi.xv,8),h.LFG(xF,8),h.LFG(GG,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(NF,8),h.LFG(zG,8),h.LFG(x0,8),h.LFG(yx,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wx,8),h.LFG(Ix,8),h.LFG(Tx,8),h.LFG(M0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),WG=(()=>{class n{constructor(){mA.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:xF,useValue:!0},{provide:NF,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[OF]}),n})();class FF{}class qG{}const ih="*";function KG(n,e){return{type:7,name:n,definitions:e,options:{}}}function LF(n,e=null){return{type:4,styles:e,timings:n}}function VF(n,e=null){return{type:2,steps:n,options:e}}function N0(n){return{type:6,styles:n,offset:null}}function Dx(n,e,t){return{type:0,name:n,styles:e,options:t}}function UF(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function BF(n){Promise.resolve().then(n)}class k0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){BF(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class jF{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?BF(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++r==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,d)=>Math.max(l,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Sx="!",HF=["toast-component",""];function ZG(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.remove())}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function YG(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function QG(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,YG,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function XG(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function JG(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function ez(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class az{_attachedHost;component;viewContainerRef;injector;constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class lz{_attachedPortal;_disposeFn;attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}class cz{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Sr.x;_activate=new Sr.x;_manualClose=new Sr.x;_resetTimeout=new Sr.x;_countDuplicate=new Sr.x;constructor(e){this._overlayRef=e}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class yA{toastId;config;message;title;toastType;toastRef;_onTap=new Sr.x;_onAction=new Sr.x;constructor(e,t,r,i,s,l){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=s,this.toastRef=l,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const GF=new h.OlP("ToastConfig");class uz extends lz{_hostDomElement;_componentFactoryResolver;_appRef;constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let dz=(()=>{class n{_document=(0,h.f3M)(le);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class hz{_portalHost;constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let fz=(()=>{class n{_overlayContainer=(0,h.f3M)(dz);_componentFactoryResolver=(0,h.f3M)(h._Vd);_appRef=(0,h.f3M)(h.z2F);_document=(0,h.f3M)(le);_paneElements=new Map;create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new uz(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new hz(this._createPortalHost(t))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vA=(()=>{class n{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(t,r,i,s,l){this.overlay=r,this._injector=i,this.sanitizer=s,this.ngZone=l,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},s=""){return this._preBuildNotification(s,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,s){const{includeTitleDuplicates:l}=this.toastrConfig;for(const d of this.toasts)if((!l||l&&d.title===t)&&d.message===r)return d.toastRef.onDuplicate(i,s),d;return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,s)):this._buildNotification(t,r,i,s)}_buildNotification(t,r,i,s){if(!s.toastComponent)throw new Error("toastComponent required");const l=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==l)return l;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const p=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&s.enableHtml&&(y=this.sanitizer.sanitize(h.q3G.HTML,r));const w=new cz(p),D=new yA(this.index,s,y,i,t,w),O=h.zs3.create({providers:[{provide:yA,useValue:D}],parent:this._injector}),H=new az(s.toastComponent,O),X=p.attach(H,s.newestOnTop);w.componentInstance=X.instance;const re={toastId:this.index,title:i||"",message:r||"",toastRef:w,onShown:w.afterActivate(),onHidden:w.afterClosed(),onTap:D.onTap(),onAction:D.onAction(),portal:X};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{re.toastRef.activate()})),this.toasts.push(re),re}static \u0275fac=function(r){return new(r||n)(h.LFG(GF),h.LFG(fz),h.LFG(h.zs3),h.LFG(cd),h.LFG(h.R0b))};static \u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const pz={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",toastComponent:(()=>{class n{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=-1;toastClasses="";state;get displayStyle(){if("inactive"===this.state.value)return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}}}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&"extendedTimeOut"!==this.options.disableTimeOut&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}static \u0275fac=function(r){return new(r||n)(h.Y36(vA),h.Y36(yA),h.Y36(h.R0b))};static \u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(r,i){1&r&&h.NdJ("click",function(){return i.tapToast()})("mouseenter",function(){return i.stickAround()})("mouseleave",function(){return i.delayedHideToast()}),2&r&&(h.d8E("@flyInOut",i.state),h.Tol(i.toastClasses),h.Udp("display",i.displayStyle))},standalone:!0,features:[h.jDz],attrs:HF,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(r,i){1&r&&(h.YNc(0,ZG,3,0,"button",0),h.YNc(1,QG,3,5,"div",1),h.YNc(2,XG,1,3,"div",2),h.YNc(3,JG,2,4,"div",3),h.YNc(4,ez,2,2,"div",4)),2&r&&(h.Q6J("ngIf",i.options.closeButton),h.xp6(1),h.Q6J("ngIf",i.title),h.xp6(1),h.Q6J("ngIf",i.message&&i.options.enableHtml),h.xp6(1),h.Q6J("ngIf",i.message&&!i.options.enableHtml),h.xp6(1),h.Q6J("ngIf",i.options.progressBar))},dependencies:[ts],encapsulation:2,data:{animation:[KG("flyInOut",[Dx("inactive",N0({opacity:0})),Dx("active",N0({opacity:1})),Dx("removed",N0({opacity:0})),UF("inactive => active",LF("{{ easeTime }}ms {{ easing }}")),UF("active => removed",LF("{{ easeTime }}ms {{ easing }}"))])]}})}return n})()},gz=(n={})=>(0,h.MR2)([{provide:GF,useValue:{default:pz,config:n}}]);let mz=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[gz(t)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=h.oAB({type:n});static \u0275inj=h.cJS({})}return n})();class EA{}class Rx{}class sh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(l):this.headers.set(s,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let i;if(i="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(s=>s.toString()),i.length>0){const s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof sh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new sh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof sh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let l=this.headers.get(t);if(!l)return;l=l.filter(d=>-1===s.indexOf(d)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class _z{encodeKey(e){return zF(e)}encodeValue(e){return zF(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vz=/%(\d[a-f0-9])/gi,Ez={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zF(n){return encodeURIComponent(n).replace(vz,(e,t)=>Ez[t]??e)}function wA(n){return`${n}`}class dp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new _z,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yz(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[l,d]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(l)||[];p.push(d),t.set(l,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(wA):[wA(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new dp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(wA(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(wA(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class wz{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function WF(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function qF(n){return typeof Blob<"u"&&n instanceof Blob}function KF(n){return typeof FormData<"u"&&n instanceof FormData}class O0{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Iz(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new sh),this.context||(this.context=new wz),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+l}}else this.params=new dp,this.urlWithParams=t}serializeBody(){return null===this.body?null:WF(this.body)||qF(this.body)||KF(this.body)||function Tz(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KF(this.body)?null:qF(this.body)?this.body.type||null:WF(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const w=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((D,M)=>D.set(M,e.setHeaders[M]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((D,M)=>D.set(M,e.setParams[M]),y)),new O0(t,r,s,{params:y,headers:p,context:w,reportProgress:d,responseType:i,withCredentials:l})}}var Di=(()=>((Di=Di||{})[Di.Sent=0]="Sent",Di[Di.UploadProgress=1]="UploadProgress",Di[Di.ResponseHeader=2]="ResponseHeader",Di[Di.DownloadProgress=3]="DownloadProgress",Di[Di.Response=4]="Response",Di[Di.User=5]="User",Di))();class Px{constructor(e,t=200,r="OK"){this.headers=e.headers||new sh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Mx extends Px{constructor(e={}){super(e),this.type=Di.ResponseHeader}clone(e={}){return new Mx({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class IA extends Px{constructor(e={}){super(e),this.type=Di.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new IA({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ZF extends Px{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function xx(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let YF=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof O0)s=t;else{let p,y;p=i.headers instanceof sh?i.headers:new sh(i.headers),i.params&&(y=i.params instanceof dp?i.params:new dp({fromObject:i.params})),s=new O0(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=vt(s).pipe(Aa(p=>this.handler.handle(p)));if(t instanceof O0||"events"===i.observe)return l;const d=l.pipe(Mi(p=>p instanceof IA));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,gt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,gt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,gt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,gt.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new dp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,xx(i,r))}post(t,r,i={}){return this.request("POST",t,xx(i,r))}put(t,r,i={}){return this.request("PUT",t,xx(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(EA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function QF(n,e){return e(n)}function bz(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const Az=new h.OlP("HTTP_INTERCEPTORS"),F0=new h.OlP("HTTP_INTERCEPTOR_FNS");function Dz(){let n=null;return(e,t)=>(null===n&&(n=((0,h.f3M)(Az,{optional:!0})??[]).reduceRight(bz,QF)),n(e,t))}let XF=(()=>{class n extends EA{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(F0)));this.chain=r.reduceRight((i,s)=>function Cz(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(i,s,this.injector),QF)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rx),h.LFG(h.lqb))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Mz=/^\)\]\}',?\n/;let eL=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Rr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,H)=>i.setRequestHeader(O,H.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const s=t.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const O=i.statusText||"OK",H=new sh(i.getAllResponseHeaders()),X=function xz(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Mx({headers:H,status:i.status,statusText:O,url:X}),l},p=()=>{let{headers:O,status:H,statusText:X,url:re}=d(),ye=null;204!==H&&(ye=typeof i.response>"u"?i.responseText:i.response),0===H&&(H=ye?200:0);let je=H>=200&&H<300;if("json"===t.responseType&&"string"==typeof ye){const Oe=ye;ye=ye.replace(Mz,"");try{ye=""!==ye?JSON.parse(ye):null}catch(Be){ye=Oe,je&&(je=!1,ye={error:Be,text:ye})}}je?(r.next(new IA({body:ye,headers:O,status:H,statusText:X,url:re||void 0})),r.complete()):r.error(new ZF({error:ye,headers:O,status:H,statusText:X,url:re||void 0}))},y=O=>{const{url:H}=d(),X=new ZF({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:H||void 0});r.error(X)};let w=!1;const D=O=>{w||(r.next(d()),w=!0);let H={type:Di.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(H.total=O.total),"text"===t.responseType&&i.responseText&&(H.partialText=i.responseText),r.next(H)},M=O=>{let H={type:Di.UploadProgress,loaded:O.loaded};O.lengthComputable&&(H.total=O.total),r.next(H)};return i.addEventListener("load",p),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",D),null!==s&&i.upload&&i.upload.addEventListener("progress",M)),i.send(s),r.next({type:Di.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",p),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",D),null!==s&&i.upload&&i.upload.removeEventListener("progress",M)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(lo))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Nx=new h.OlP("XSRF_ENABLED"),tL=new h.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),nL=new h.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class rL{}let Oz=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=el(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(h.Lbi),h.LFG(tL))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Fz(n,e){const t=n.url.toLowerCase();if(!(0,h.f3M)(Nx)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,h.f3M)(rL).getToken(),i=(0,h.f3M)(nL);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var mi=(()=>((mi=mi||{})[mi.Interceptors=0]="Interceptors",mi[mi.LegacyInterceptors=1]="LegacyInterceptors",mi[mi.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",mi[mi.NoXsrfProtection=3]="NoXsrfProtection",mi[mi.JsonpSupport=4]="JsonpSupport",mi[mi.RequestsMadeViaParent=5]="RequestsMadeViaParent",mi))();function pv(n,e){return{\u0275kind:n,\u0275providers:e}}function Lz(...n){const e=[YF,eL,XF,{provide:EA,useExisting:XF},{provide:Rx,useExisting:eL},{provide:F0,useValue:Fz,multi:!0},{provide:Nx,useValue:!0},{provide:rL,useClass:Oz}];for(const t of n)e.push(...t.\u0275providers);return(0,h.MR2)(e)}const iL=new h.OlP("LEGACY_INTERCEPTOR_FN");let Uz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Lz(pv(mi.LegacyInterceptors,[{provide:iL,useFactory:Dz},{provide:F0,useExisting:iL,multi:!0}]))]}),n})(),gv=(()=>{class n{constructor(t,r,i,s,l,d){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.toastr=l,this.http=d,this.afAuth.authState.subscribe(p=>{p?(this.userData=p,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"]),console.log(i),window.alert("logged in successfully")}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user),window.alert("Registeration Successfully")}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new TE.X).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,roles:t.roles,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(OF),h.LFG(x0),h.LFG(zi),h.LFG(h.R0b),h.LFG(vA),h.LFG(YF))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),jm=(()=>{class n extends sL{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const Kl=new h.OlP("NgValueAccessor"),Hz={provide:Kl,useExisting:(0,h.Gpc)(()=>L0),multi:!0},Gz=new h.OlP("CompositionEventMode");let L0=(()=>{class n extends sL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $z(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Gz,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[h._Bn([Hz]),h.qOj]}),n})();const zz=!1;function hp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const _s=new h.OlP("NgValidators"),fp=new h.OlP("NgAsyncValidators"),Wz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function uL(n){return hp(n.value)?{required:!0}:null}function hL(n){return hp(n.value)||Wz.test(n.value)?null:{email:!0}}function TA(n){return null}function mL(n){return null!=n}function _L(n){const e=(0,h.QGY)(n)?(0,dn.D)(n):n;if(zz&&!(0,h.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new h.vHH(-1101,t)}return e}function yL(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function vL(n,e){return e.map(t=>t(n))}function EL(n){return n.map(e=>function qz(n){return!n.validate}(e)?e:t=>e.validate(t))}function kx(n){return null!=n?function wL(n){if(!n)return null;const e=n.filter(mL);return 0==e.length?null:function(t){return yL(vL(t,e))}}(EL(n)):null}function Ox(n){return null!=n?function IL(n){if(!n)return null;const e=n.filter(mL);return 0==e.length?null:function(t){return function Bz(...n){const e=(0,Qr.jO)(n),{args:t,keys:r}=ba(n),i=new Rr.y(s=>{const{length:l}=t;if(!l)return void s.complete();const d=new Array(l);let p=l,y=l;for(let w=0;w<l;w++){let D=!1;(0,lt.Xf)(t[w]).subscribe((0,b.x)(s,M=>{D||(D=!0,y--),d[w]=M},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?$c(r,d):d),s.complete())}))}});return e?i.pipe(ho(e)):i}(vL(t,e).map(_L)).pipe((0,gt.U)(yL))}}(EL(n)):null}function TL(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Fx(n){return n?Array.isArray(n)?n:[n]:[]}function bA(n,e){return Array.isArray(n)?n.includes(e):n===e}function AL(n,e){const t=Fx(e);return Fx(n).forEach(i=>{bA(t,i)||t.push(i)}),t}function DL(n,e){return Fx(e).filter(t=>!bA(n,t))}class SL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=kx(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ox(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class to extends SL{get formDirective(){return null}get path(){return null}}class pp extends SL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class RL{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Lx=(()=>{class n extends RL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(pp,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),V0=(()=>{class n extends RL{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(to,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();function PL(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Bx=!1,U0="VALID",AA="INVALID",mv="PENDING",B0="DISABLED";function jx(n){return(DA(n)?n.validators:n)||null}function Hx(n,e){return(DA(e)?e.asyncValidators:n)||null}function DA(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class NL{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===U0}get invalid(){return this.status===AA}get pending(){return this.status==mv}get disabled(){return this.status===B0}get enabled(){return this.status!==B0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(DL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(DL(e,this._rawAsyncValidators))}hasValidator(e){return bA(this._rawValidators,e)}hasAsyncValidator(e){return bA(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=B0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=U0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===U0||this.status===mv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?B0:U0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mv,this._hasOwnPendingAsyncValidator=!0;const t=_L(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?B0:this.errors?AA:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mv)?mv:this._anyControlsHaveStatus(AA)?AA:U0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){DA(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function e3(n){return Array.isArray(n)?kx(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function t3(n){return Array.isArray(n)?Ox(n):n||null}(this._rawAsyncValidators)}}class $x extends NL{constructor(e,t,r){super(jx(t),Hx(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function xL(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,Bx?function Jz(n,e){return`Must supply a value for form control ${PL(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function ML(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,Bx?function Qz(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new h.vHH(1001,Bx?function Xz(n,e){return`Cannot find form control ${PL(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Hm=new h.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>j0}),j0="always";function H0(n,e,t=j0){Gx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function s3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&kL(n,e)})}(n,e),function a3(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function o3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&kL(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function r3(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function PA(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Gx(n,e){const t=function bL(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(TL(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function CL(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(TL(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();PA(e._rawValidators,i),PA(e._rawAsyncValidators,i)}function kL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const h3={provide:to,useExisting:(0,h.Gpc)(()=>$m)},$0=(()=>Promise.resolve())();let $m=(()=>{class n extends to{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new $x({},kx(t),Ox(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){$0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),H0(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){$0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){$0.then(()=>{const r=this._findContainer(t.path),i=new $x({});(function OL(n,e){Gx(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){$0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){$0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function FL(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(_s,10),h.Y36(fp,10),h.Y36(Hm,8))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([h3]),h.qOj]}),n})();function LL(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function VL(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const UL=class extends NL{constructor(e=null,t,r){super(jx(t),Hx(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),DA(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=VL(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){LL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){LL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){VL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},g3={provide:pp,useExisting:(0,h.Gpc)(()=>xA)},HL=(()=>Promise.resolve())();let xA=(()=>{class n extends pp{constructor(t,r,i,s,l,d){super(),this._changeDetectorRef=l,this.callSetDisabledState=d,this.control=new UL,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function qx(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===L0?t=s:function u3(n){return Object.getPrototypeOf(n.constructor)===jm}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Wx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){H0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){HL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,h.D6c)(r);HL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function SA(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(to,9),h.Y36(_s,10),h.Y36(fp,10),h.Y36(Kl,10),h.Y36(h.sBO,8),h.Y36(Hm,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([g3]),h.qOj,h.TTD]}),n})(),G0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),GL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const Kx=new h.OlP("NgModelWithFormControlWarning");let Gm=(()=>{class n{constructor(){this._validator=TA}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):TA,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const N3={provide:_s,useExisting:(0,h.Gpc)(()=>z0),multi:!0};let z0=(()=>{class n extends Gm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>uL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([N3]),h.qOj]}),n})();const O3={provide:_s,useExisting:(0,h.Gpc)(()=>NA),multi:!0};let NA=(()=>{class n extends Gm{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=h.D6c,this.createValidator=t=>hL}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[h._Bn([O3]),h.qOj]}),n})(),sV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[GL]}),n})(),B3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Hm,useValue:t.callSetDisabledState??j0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[sV]}),n})(),j3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Kx,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Hm,useValue:t.callSetDisabledState??j0}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[sV]}),n})(),oV=(()=>{class n{constructor(t,r){this.authService=t,this.toastr=r}onSignin(t){console.log(t.value),this.authService.SignIn(t.value.email,t.value.password),console.log(this.authService.isLoggedIn)}signWithGoogle(){this.authService.GoogleAuth()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(gv),h.Y36(vA))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:31,vars:0,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],[1,"mt-4","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white","text-center"],[1,"space-y-4","md:space-y-6",3,"ngSubmit"],["f","ngForm"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","email","name","email","id","email","ngModel","","email","","required","","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","name","password","id","password","ngModel","","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"flex","items-center","justify-between"],[1,"flex","items-start"],["routerLink","/forgot-password",1,"text-sm","font-medium","text-primary-600","hover:underline","dark:text-primary-500"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/register",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"],[1,"flex","spac-x-6",2,"background-color","#fff",";box-shadow","2px","cursor","pointer",3,"click"],["src","assets/img/google.png",2,"width","30px","height","30px"]],template:function(r,i){if(1&r){const s=h.EpF();h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5," Sign in to your account "),h.qZA(),h.TgZ(6,"form",5,6),h.NdJ("ngSubmit",function(){h.CHM(s);const d=h.MAs(7);return h.KtG(i.onSignin(d))}),h.TgZ(8,"div")(9,"label",7),h._uU(10,"Your email"),h.qZA(),h._UZ(11,"input",8),h.qZA(),h.TgZ(12,"div")(13,"label",9),h._uU(14,"Password"),h.qZA(),h._UZ(15,"input",10),h.qZA(),h.TgZ(16,"div",11),h._UZ(17,"div",12),h.TgZ(18,"a",13),h._uU(19,"Forgot password?"),h.qZA()(),h.TgZ(20,"button",14),h._uU(21,"Sign in"),h.qZA(),h.TgZ(22,"p",15),h._uU(23," Don\u2019t have an account yet? "),h.TgZ(24,"a",16),h._uU(25,"Sign up"),h.qZA()(),h.TgZ(26,"div",17),h.NdJ("click",function(){return i.signWithGoogle()}),h._uU(27," sign in with "),h._UZ(28,"img",18),h.TgZ(29,"span"),h._uU(30,"Google"),h.qZA()()()()()()()}},dependencies:[bd,G0,L0,Lx,V0,z0,NA,xA,$m]})}return n})();function H3(n,e){if(1&n&&(h.TgZ(0,"div",1)(1,"div",15)(2,"div",16),h._UZ(3,"img",17),h.TgZ(4,"div",18)(5,"h1"),h._uU(6,"Hello: "),h.TgZ(7,"strong"),h._uU(8),h.qZA()(),h.TgZ(9,"p"),h._uU(10,"User ID: "),h.TgZ(11,"strong"),h._uU(12),h.qZA()(),h.TgZ(13,"p"),h._uU(14,"Email: "),h.TgZ(15,"strong"),h._uU(16),h.qZA()(),h.TgZ(17,"p"),h._uU(18,"Email Verified: "),h.TgZ(19,"strong"),h._uU(20),h.qZA()()()()()()),2&n){const t=e.ngIf;h.xp6(3),h.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",h.LSH),h.s9C("alt",t.displayName),h.xp6(5),h.Oqu(t.displayName?t.displayName:"User"),h.xp6(4),h.Oqu(t.uid),h.xp6(4),h.Oqu(t.email),h.xp6(4),h.Oqu(t.emailVerified)}}let $3=(()=>{class n{constructor(t){this.authService=t}openSidebar(){document.querySelector(".sidebar").classList.toggle("hidden")}dropdown(){document.querySelector("#submenu").classList.toggle("hidden"),document.querySelector("#arrow").classList.toggle("rotate-0")}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(gv))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-dashboard"]],decls:19,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"pt-4","col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(r,i){1&r&&(h.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),h._UZ(7,"i",7),h._uU(8,"User Profile "),h.qZA()(),h.TgZ(9,"li",5)(10,"a",8),h.NdJ("click",function(){return i.authService.SignOut()}),h._UZ(11,"i",9),h._uU(12,"Log out "),h.qZA()()()()(),h.TgZ(13,"main",10)(14,"div",11)(15,"div",12)(16,"h1",13),h._uU(17,"User Profile"),h.qZA()(),h.YNc(18,H3,21,6,"div",14),h.qZA()()()()),2&r&&(h.xp6(18),h.Q6J("ngIf",i.authService.userData))},dependencies:[ts]})}return n})(),G3=(()=>{class n{constructor(t){this.authService=t}onSignUp(t){console.log(t.value),this.authService.SignUp(t.value.email,t.value.password)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(gv))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:28,vars:0,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],[1,"mt-4","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white","text-center"],[1,"space-y-4","md:space-y-6",3,"ngSubmit"],["f","ngForm"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","text","name","name","id","name","ngModel","","email","","required","","placeholder","your name","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","email","name","email","id","email","ngModel","","email","","required","","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["for","password",1,"block","mb-2","text-sm","font-medium","text-gray-900","dark:text-white"],["type","password","name","password","id","password","ngModel","","required","","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],[1,"flex","items-center","justify-between"],[1,"flex","items-start"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/login",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"]],template:function(r,i){if(1&r){const s=h.EpF();h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5," Create your account "),h.qZA(),h.TgZ(6,"form",5,6),h.NdJ("ngSubmit",function(){h.CHM(s);const d=h.MAs(7);return h.KtG(i.onSignUp(d))}),h.TgZ(8,"div")(9,"label",7),h._uU(10,"Your Name"),h.qZA(),h._UZ(11,"input",8),h.qZA(),h.TgZ(12,"div")(13,"label",9),h._uU(14,"Your email"),h.qZA(),h._UZ(15,"input",10),h.qZA(),h.TgZ(16,"div")(17,"label",11),h._uU(18,"Password"),h.qZA(),h._UZ(19,"input",12),h.qZA(),h.TgZ(20,"div",13),h._UZ(21,"div",14),h.qZA(),h.TgZ(22,"button",15),h._uU(23,"Sign in"),h.qZA(),h.TgZ(24,"p",16),h._uU(25," Already Have Account? "),h.TgZ(26,"a",17),h._uU(27,"Sign in"),h.qZA()()()()()()()}},dependencies:[bd,G0,L0,Lx,V0,z0,NA,xA,$m]})}return n})(),z3=(()=>{class n{constructor(t){this.authServive=t}ForgotPassword(t){this.authServive.ForgotPassword(t)}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(gv))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-forgot-password"]],decls:18,vars:0,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],[1,"mt-4","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white","text-center"],[1,"space-y-4","md:space-y-6"],[1,"text-center"],["type","email","name","email","id","email","required","","placeholder","name@company.com","required","",1,"bg-gray-50","border","border-gray-300","text-gray-900","sm:text-sm","rounded-lg","focus:ring-primary-600","focus:border-primary-600","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["passwordResetEmail",""],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/login",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"]],template:function(r,i){if(1&r){const s=h.EpF();h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5," Reset Password "),h.qZA(),h.TgZ(6,"form",5)(7,"p",6),h._uU(8,"Please enter your email address to request a password reset."),h.qZA(),h.TgZ(9,"div"),h._UZ(10,"input",7,8),h.qZA(),h.TgZ(12,"button",9),h.NdJ("click",function(){h.CHM(s);const d=h.MAs(11);return h.KtG(i.ForgotPassword(d.value))}),h._uU(13,"Reset Password"),h.qZA(),h.TgZ(14,"p",10),h._uU(15," Go back to ? "),h.TgZ(16,"a",11),h._uU(17,"Sign in"),h.qZA()()()()()()()}},dependencies:[bd,G0,V0,$m]})}return n})();function W3(n,e){if(1&n&&(h.TgZ(0,"div",10)(1,"p",11),h._uU(2,"We have sent a confirmation email to "),h.TgZ(3,"strong"),h._uU(4),h.qZA(),h._uU(5,"."),h.qZA(),h.TgZ(6,"p",11),h._uU(7,"Please check your email and click on the link to verfiy your email address."),h.qZA()()),2&n){const t=e.ngIf;h.xp6(4),h.Oqu(t.email)}}const q3=[{path:"login",component:oV},{path:"register",component:G3},{path:"forgot-password",component:z3},{path:"verify-email",component:(()=>{class n{constructor(t){this.authService=t}SendVerificationMail(){this.authService.SendVerificationMail()}static#e=this.\u0275fac=function(r){return new(r||n)(h.Y36(gv))};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-verify-email"]],decls:14,vars:1,consts:[[1,"bg-gray-50","dark:bg-gray-900"],[1,"flex","flex-col","items-center","justify-center","px-6","py-8","mx-auto","md:h-screen","lg:py-0"],[1,"mt-4","bg-white","rounded-lg","shadow","dark:border","md:mt-0","sm:max-w-md","xl:p-0","dark:bg-gray-800","dark:border-gray-700"],[1,"p-6","space-y-4","md:space-y-6","sm:p-8"],[1,"text-xl","font-bold","leading-tight","tracking-tight","text-gray-900","md:text-2xl","dark:text-white","text-center"],[1,"space-y-4","md:space-y-6"],["class","formGroup",4,"ngIf"],["type","submit",1,"w-full","text-white","bg-blue-700","hover:bg-blue-800","focus:ring-4","focus:ring-blue-300","font-medium","rounded-lg","text-sm","px-5","py-2.5","me-2","mb-2","dark:bg-blue-600","dark:hover:bg-blue-700","focus:outline-none","dark:focus:ring-blue-800",3,"click"],[1,"text-sm","font-light","text-gray-500","dark:text-gray-400"],["routerLink","/login",1,"font-medium","text-primary-600","hover:underline","dark:text-primary-500"],[1,"formGroup"],[1,"text-center"]],template:function(r,i){1&r&&(h.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),h._uU(5," Thank You for Registering "),h.qZA(),h.TgZ(6,"form",5),h.YNc(7,W3,8,1,"div",6),h.TgZ(8,"button",7),h.NdJ("click",function(){return i.SendVerificationMail()}),h._uU(9," Resend Verification Email"),h.qZA(),h.TgZ(10,"p",8),h._uU(11," Go back to ? "),h.TgZ(12,"a",9),h._uU(13,"Sign in"),h.qZA()()()()()()()),2&r&&(h.xp6(7),h.Q6J("ngIf",i.authService.userData))},dependencies:[ts,bd,G0,V0,$m]})}return n})()},{path:"dashboard",component:$3,canActivate:[(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["login"]),!0}static#e=this.\u0275fac=function(r){return new(r||n)(h.LFG(gv),h.LFG(zi))};static#t=this.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})()]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",component:oV}];let K3=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n});static#n=this.\u0275inj=h.cJS({imports:[FS.forRoot(q3),FS]})}return n})(),Z3=(()=>{class n{constructor(){this.title="my-app"}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&h._UZ(0,"router-outlet")},dependencies:[Zv]})}return n})();function aV(n){return new h.vHH(3e3,!1)}function P4(){return typeof window<"u"&&typeof window.document<"u"}function tN(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function gp(n){switch(n.length){case 0:return new k0;case 1:return n[0];default:return new jF(n)}}function lV(n,e,t,r,i=new Map,s=new Map){const l=[],d=[];let p=-1,y=null;if(r.forEach(w=>{const D=w.get("offset"),M=D==p,O=M&&y||new Map;w.forEach((H,X)=>{let re=X,ye=H;if("offset"!==X)switch(re=e.normalizePropertyName(re,l),ye){case Sx:ye=i.get(X);break;case ih:ye=s.get(X);break;default:ye=e.normalizeStyleValue(X,re,ye,l)}O.set(re,ye)}),M||d.push(O),y=O,p=D}),l.length)throw function y4(n){return new h.vHH(3502,!1)}();return d}function nN(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&rN(t,"start",n)));break;case"done":n.onDone(()=>r(t&&rN(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&rN(t,"destroy",n)))}}function rN(n,e,t){const s=iN(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),l=n._data;return null!=l&&(s._data=l),s}function iN(n,e,t,r,i="",s=0,l){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!l}}function ea(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function cV(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let sN=(n,e)=>!1,uV=(n,e,t)=>[],dV=null;function oN(n){const e=n.parentNode||n.host;return e===dV?null:e}(tN()||typeof Element<"u")&&(P4()?(dV=(()=>document.documentElement)(),sN=(n,e)=>{for(;e;){if(e===n)return!0;e=oN(e)}return!1}):sN=(n,e)=>n.contains(e),uV=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let zm=null,hV=!1;const fV=sN,pV=uV;let gV=(()=>{class n{validateStyleProperty(t){return function x4(n){zm||(zm=function N4(){return typeof document<"u"?document.body:null}()||{},hV=!!zm.style&&"WebkitAppearance"in zm.style);let e=!0;return zm.style&&!function M4(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in zm.style,!e&&hV&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in zm.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return fV(t,r)}getParentElement(t){return oN(t)}query(t,r,i){return pV(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,l,d=[],p){return new k0(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),aN=(()=>{class n{}return n.NOOP=new gV,n})();const k4=1e3,lN="ng-enter",kA="ng-leave",OA="ng-trigger",FA=".ng-trigger",_V="ng-animating",cN=".ng-animating";function oh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uN(parseFloat(e[1]),e[2])}function uN(n,e){return"s"===e?n*k4:n}function LA(n,e,t){return n.hasOwnProperty("duration")?n:function F4(n,e,t){let i,s=0,l="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(aV()),{duration:0,delay:0,easing:""};i=uN(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=uN(parseFloat(p),d[4]));const y=d[5];y&&(l=y)}else i=n;if(!t){let d=!1,p=e.length;i<0&&(e.push(function Y3(){return new h.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function Q3(){return new h.vHH(3101,!1)}()),d=!0),d&&e.splice(p,0,aV())}return{duration:i,delay:s,easing:l}}(n,e,t)}function W0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function yV(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function mp(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function EV(n,e,t){return t?e+":"+t+";":""}function wV(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=EV(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=EV(0,B4(t),n.style[t]));n.setAttribute("style",e)}function Du(n,e,t){n.style&&(e.forEach((r,i)=>{const s=hN(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),tN()&&wV(n))}function Wm(n,e){n.style&&(e.forEach((t,r)=>{const i=hN(r);n.style[i]=""}),tN()&&wV(n))}function q0(n){return Array.isArray(n)?1==n.length?n[0]:VF(n):n}const dN=new RegExp("{{\\s*(.+?)\\s*}}","g");function IV(n){let e=[];if("string"==typeof n){let t;for(;t=dN.exec(n);)e.push(t[1]);dN.lastIndex=0}return e}function K0(n,e,t){const r=n.toString(),i=r.replace(dN,(s,l)=>{let d=e[l];return null==d&&(t.push(function J3(n){return new h.vHH(3003,!1)}()),d=""),d.toString()});return i==r?n:i}function VA(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const U4=/-+([a-z0-9])/g;function hN(n){return n.replace(U4,(...e)=>e[1].toUpperCase())}function B4(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ta(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function e4(n){return new h.vHH(3004,!1)}()}}function TV(n,e){return window.getComputedStyle(n)[e]}const jA="*";function W4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function q4(n,e,t){if(":"==n[0]){const p=function K4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function p4(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function f4(n){return new h.vHH(3015,!1)}()),e;const i=r[1],s=r[2],l=r[3];e.push(bV(i,l));"<"==s[0]&&!(i==jA&&l==jA)&&e.push(bV(l,i))}(r,t,e)):t.push(n),t}const HA=new Set(["true","1"]),$A=new Set(["false","0"]);function bV(n,e){const t=HA.has(n)||$A.has(n),r=HA.has(e)||$A.has(e);return(i,s)=>{let l=n==jA||n==i,d=e==jA||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?HA.has(n):$A.has(n)),!d&&r&&"boolean"==typeof s&&(d=s?HA.has(e):$A.has(e)),l&&d}}const Z4=new RegExp("s*:selfs*,?","g");function fN(n,e,t,r){return new Y4(n).build(e,t,r)}class Y4{constructor(e){this._driver=e}build(e,t,r){const i=new J4(t);return this._resetContextStyleTimingState(i),ta(this,q0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push(function n4(){return new h.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(w=>{p.name=w,s.push(this.visitState(p,t))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,t);r+=p.queryCount,i+=p.depCount,l.push(p)}else t.errors.push(function r4(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:l,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,l=i||{};r.styles.forEach(d=>{d instanceof Map&&d.forEach(p=>{IV(p).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}),s.size&&(VA(s.values()),t.errors.push(function i4(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ta(this,q0(e.animation),t);return{type:1,matchers:W4(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:qm(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ta(this,r,t)),options:qm(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=r;const d=ta(this,l,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:s,options:qm(e.options)}}visitAnimate(e,t){const r=function t6(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return pN(LA(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=pN(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=LA(t,e);return pN(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:N0({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,d=!1;if(!l){d=!0;const y={};r.easing&&(y.easing=r.easing),l=N0(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(l,t);p.isEmptyStep=d,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of i)"string"==typeof d?d===ih?r.push(d):t.errors.push(new h.vHH(3002,!1)):r.push(yV(d));let s=!1,l=null;return r.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(l=d.get("easing"),d.delete("easing")),!s))for(let p of d.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:l,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(l=>{"string"!=typeof l&&l.forEach((d,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),w=y.get(p);let D=!0;w&&(s!=i&&s>=w.startTime&&i<=w.endTime&&(t.errors.push(function o4(n,e,t,r,i){return new h.vHH(3010,!1)}()),D=!1),s=w.startTime),D&&y.set(p,{startTime:s,endTime:i}),t.options&&function V4(n,e,t){const r=e.params||{},i=IV(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function X3(n){return new h.vHH(3001,!1)}())})}(d,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function a4(){return new h.vHH(3011,!1)}()),r;let s=0;const l=[];let d=!1,p=!1,y=0;const w=e.steps.map(ye=>{const je=this._makeStyleAst(ye,t);let Oe=null!=je.offset?je.offset:function e6(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(je.styles),Be=0;return null!=Oe&&(s++,Be=je.offset=Oe),p=p||Be<0||Be>1,d=d||Be<y,y=Be,l.push(Be),je});p&&t.errors.push(function l4(){return new h.vHH(3012,!1)}()),d&&t.errors.push(function c4(){return new h.vHH(3200,!1)}());const D=e.steps.length;let M=0;s>0&&s<D?t.errors.push(function u4(){return new h.vHH(3202,!1)}()):0==s&&(M=1/(D-1));const O=D-1,H=t.currentTime,X=t.currentAnimateTimings,re=X.duration;return w.forEach((ye,je)=>{const Oe=M>0?je==O?1:M*je:l[je],Be=Oe*re;t.currentTime=H+X.delay+Be,X.duration=Be,this._validateStyleAst(ye,t),ye.offset=Oe,r.styles.push(ye)}),r}visitReference(e,t){return{type:8,animation:ta(this,q0(e.animation),t),options:qm(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:qm(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:qm(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function Q4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Z4,"")),n=n.replace(/@\*/g,FA).replace(/@\w+/g,t=>FA+"-"+t.slice(1)).replace(/:animating/g,cN),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ea(t.collectedStyles,t.currentQuerySelector,new Map);const d=ta(this,q0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:d,originalSelector:e.selector,options:qm(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function d4(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:LA(e.timings,t.errors,!0);return{type:12,animation:ta(this,q0(e.animation),t),timings:r,options:null}}}class J4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function qm(n){return n?(n=W0(n)).params&&(n.params=function X4(n){return n?W0(n):null}(n.params)):n={},n}function pN(n,e,t){return{duration:n,delay:e,easing:t}}function gN(n,e,t,r,i,s,l=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:d}}class GA{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const i6=new RegExp(":enter","g"),o6=new RegExp(":leave","g");function mN(n,e,t,r,i,s=new Map,l=new Map,d,p,y=[]){return(new a6).buildKeyframes(n,e,t,r,i,s,l,d,p,y)}class a6{buildKeyframes(e,t,r,i,s,l,d,p,y,w=[]){y=y||new GA;const D=new _N(e,t,y,i,s,w,[]);D.options=p;const M=p.delay?oh(p.delay):0;D.currentTimeline.delayNextStep(M),D.currentTimeline.setStyles([l],null,D.errors,p),ta(this,r,D);const O=D.timelines.filter(H=>H.containsAnimation());if(O.length&&d.size){let H;for(let X=O.length-1;X>=0;X--){const re=O[X];if(re.element===t){H=re;break}}H&&!H.allowOnlyTimelineStyles()&&H.setStyles([d],null,D.errors,p)}return O.length?O.map(H=>H.buildKeyframes()):[gN(t,[],[],[],0,M,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(r,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const l="number"==typeof s?s:oh(K0(s,i?.params??{},t.errors));r.delayNextStep(l)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const l=null!=r.duration?oh(r.duration):null,d=null!=r.delay?oh(r.delay):null;return 0!==l&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,l,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),ta(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=zA);const l=oh(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>ta(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?oh(e.options.delay):0;e.steps.forEach(l=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),ta(this,l,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return LA(t.params?K0(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?oh(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=zA);let l=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let p=null;d.forEach((y,w)=>{t.currentQueryIndex=w;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),ta(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),d=l*(t.currentQueryTotal-1);let p=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=r.currentStaggerTime}const w=t.currentTimeline;p&&w.delayNextStep(p);const D=w.currentTime;ta(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const zA={};class _N{constructor(e,t,r,i,s,l,d,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=zA,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new WA(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=oh(r.duration)),null!=r.delay&&(i.delay=oh(r.delay));const s=r.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!l.hasOwnProperty(d))&&(l[d]=K0(s[d],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new _N(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=zA,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new l6(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,l){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(i6,"."+this._enterClassName)).replace(o6,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!s&&0==d.length&&l.push(function h4(n){return new h.vHH(3014,!1)}()),d}}class WA{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new WA(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ih),this._currentKeyframe.set(t,ih);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},l=function c6(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ih)}else mp(i,t)}),t}(e,this._globalTimelineStyles);for(let[d,p]of l){const y=K0(p,s,r);this._pendingStyles.set(d,y),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??ih),this._updateStyle(d,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,p)=>{const y=mp(d,new Map,this._backFill);y.forEach((w,D)=>{w===Sx?e.add(D):w===ih&&t.add(D)}),r||y.set("offset",p/this.duration),i.push(y)});const s=e.size?VA(e.values()):[],l=t.size?VA(t.values()):[];if(r){const d=i[0],p=new Map(d);d.set("offset",0),p.set("offset",1),i=[d,p]}return gN(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class l6 extends WA{constructor(e,t,r,i,s,l,d=!1){super(e,t,l.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=r+t,d=t/l,p=mp(e[0]);p.set("offset",0),s.push(p);const y=mp(e[0]);y.set("offset",DV(d)),s.push(y);const w=e.length-1;for(let D=1;D<=w;D++){let M=mp(e[D]);const O=M.get("offset");M.set("offset",DV((t+O*r)/l)),s.push(M)}r=l,t=0,i="",e=s}return gN(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function DV(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class yN{}const u6=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class d6 extends yN{normalizePropertyName(e,t){return hN(e)}normalizeStyleValue(e,t,r,i){let s="";const l=r.toString().trim();if(u6.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function t4(n,e){return new h.vHH(3005,!1)}())}return l+s}}function SV(n,e,t,r,i,s,l,d,p,y,w,D,M){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:l,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:w,totalTime:D,errors:M}}const vN={};class RV{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function h6(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,l,d,p,y,w){const D=[],M=this.ast.options&&this.ast.options.params||vN,H=this.buildStyles(r,d&&d.params||vN,D),X=p&&p.params||vN,re=this.buildStyles(i,X,D),ye=new Set,je=new Map,Oe=new Map,Be="void"===i,Tt={params:f6(X,M),delay:this.ast.options?.delay},Nt=w?[]:mN(e,t,this.ast.animation,s,l,H,re,Tt,y,D);let ln=0;if(Nt.forEach(so=>{ln=Math.max(so.duration+so.delay,ln)}),D.length)return SV(t,this._triggerName,r,i,Be,H,re,[],[],je,Oe,ln,D);Nt.forEach(so=>{const Qa=so.element,yj=ea(je,Qa,new Set);so.preStyleProps.forEach(a_=>yj.add(a_));const kI=ea(Oe,Qa,new Set);so.postStyleProps.forEach(a_=>kI.add(a_)),Qa!==t&&ye.add(Qa)});const nr=VA(ye.values());return SV(t,this._triggerName,r,i,Be,H,re,Nt,nr,je,Oe,ln)}}function f6(n,e){const t=W0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class p6{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=W0(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!==l&&(i[s]=l)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((l,d)=>{l&&(l=K0(l,i,t));const p=this.normalizer.normalizePropertyName(d,t);l=this.normalizer.normalizeStyleValue(d,p,l,t),r.set(d,l)})}),r}}class m6{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new p6(i.style,i.options&&i.options.params||{},r))}),PV(this.states,"true","1"),PV(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new RV(e,i,this.states))}),this.fallbackTransition=function _6(n,e,t){return new RV(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(l=>l.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function PV(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const y6=new GA;class v6{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],i=[],s=fN(this._driver,t,r,i);if(r.length)throw function v4(n){return new h.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=lV(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let l;const d=new Map;if(s?(l=mN(this._driver,t,s,lN,kA,new Map,new Map,r,y6,i),l.forEach(w=>{const D=ea(d,w.element,new Map);w.postStyleProps.forEach(M=>D.set(M,null))})):(i.push(function E4(){return new h.vHH(3300,!1)}()),l=[]),i.length)throw function w4(n){return new h.vHH(3504,!1)}();d.forEach((w,D)=>{w.forEach((M,O)=>{w.set(O,this._driver.computeStyle(D,O,ih))})});const y=gp(l.map(w=>{const D=d.get(w.element);return this._buildPlayer(w,new Map,D)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function I4(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=iN(t,"","","");return nN(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const MV="ng-animate-queued",EN="ng-animate-disabled",b6=[],xV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},C6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},za="__ng_removed";class wN{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function R6(n){return n??null}(r?e.value:e),r){const s=W0(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Z0="void",IN=new wN(Z0);class A6{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function T4(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function b4(n){return new h.vHH(3303,!1)}();if(!function P6(n){return"start"==n||"done"==n}(r))throw function C4(n,e){return new h.vHH(3400,!1)}();const s=ea(this._elementListeners,e,[]),l={name:t,phase:r,callback:i};s.push(l);const d=ea(this._engine.statesByElement,e,new Map);return d.has(t)||(Wa(e,OA),Wa(e,OA+"-"+t),d.set(t,IN)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(l);p>=0&&s.splice(p,1),this._triggers.has(t)||d.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function A4(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),l=new TN(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Wa(e,OA),Wa(e,OA+"-"+t),this._engine.statesByElement.set(e,d=new Map));let p=d.get(t);const y=new wN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d.set(t,y),p||(p=IN),y.value!==Z0&&p.value===y.value){if(!function N6(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const X=[],re=s.matchStyles(p.value,p.params,X),ye=s.matchStyles(y.value,y.params,X);X.length?this._engine.reportError(X):this._engine.afterFlush(()=>{Wm(e,re),Du(e,ye)})}return}const M=ea(this._engine.playersByElement,e,[]);M.forEach(X=>{X.namespaceId==this.id&&X.triggerName==t&&X.queued&&X.destroy()});let O=s.matchTransition(p.value,y.value,e,y.params),H=!1;if(!O){if(!i)return;O=s.fallbackTransition,H=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:p,toState:y,player:l,isFallbackTransition:H}),H||(Wa(e,MV),l.onStart(()=>{_v(e,MV)})),l.onDone(()=>{let X=this.players.indexOf(l);X>=0&&this.players.splice(X,1);const re=this._engine.playersByElement.get(e);if(re){let ye=re.indexOf(l);ye>=0&&re.splice(ye,1)}}),this.players.push(l),M.push(l),l}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,FA,!0);r.forEach(i=>{if(i[za])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),l=new Map;if(s){const d=[];if(s.forEach((p,y)=>{if(l.set(y,p.value),this._triggers.has(y)){const w=this.trigger(e,y,Z0,i);w&&d.push(w)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,l),r&&gp(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const p=this._triggers.get(l).fallbackTransition,y=r.get(l)||IN,w=new wN(Z0),D=new TN(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:p,fromState:y,toState:w,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(r.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[za];(!s||s===xV)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,l=this._elementListeners.get(s);l&&l.forEach(d=>{if(d.name==r.triggerName){const p=iN(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,nN(r.player,d.phase,p,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class D6{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new A6(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let l=!1,d=this.driver.getParentElement(t);for(;d;){const p=i.get(d);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),l=!0;break}d=this.driver.getParentElement(d)}l||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(qA(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!qA(t))return;const s=t[za];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wa(e,EN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_v(e,EN))}removeNode(e,t,r,i){if(qA(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[za]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return qA(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,FA,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,cN,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return gp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[za];if(t&&t.setForRemoval){if(e[za]=xV,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(EN)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Wa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?gp(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function D4(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new GA,i=[],s=new Map,l=[],d=new Map,p=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(Dt=>{w.add(Dt);const Bt=this.driver.query(Dt,".ng-animate-queued",!0);for(let Zt=0;Zt<Bt.length;Zt++)w.add(Bt[Zt])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),O=OV(M,this.collectedEnterElements),H=new Map;let X=0;O.forEach((Dt,Bt)=>{const Zt=lN+X++;H.set(Bt,Zt),Dt.forEach(kn=>Wa(kn,Zt))});const re=[],ye=new Set,je=new Set;for(let Dt=0;Dt<this.collectedLeaveElements.length;Dt++){const Bt=this.collectedLeaveElements[Dt],Zt=Bt[za];Zt&&Zt.setForRemoval&&(re.push(Bt),ye.add(Bt),Zt.hasAnimation?this.driver.query(Bt,".ng-star-inserted",!0).forEach(kn=>ye.add(kn)):je.add(Bt))}const Oe=new Map,Be=OV(M,Array.from(ye));Be.forEach((Dt,Bt)=>{const Zt=kA+X++;Oe.set(Bt,Zt),Dt.forEach(kn=>Wa(kn,Zt))}),e.push(()=>{O.forEach((Dt,Bt)=>{const Zt=H.get(Bt);Dt.forEach(kn=>_v(kn,Zt))}),Be.forEach((Dt,Bt)=>{const Zt=Oe.get(Bt);Dt.forEach(kn=>_v(kn,Zt))}),re.forEach(Dt=>{this.processLeaveNode(Dt)})});const Tt=[],Nt=[];for(let Dt=this._namespaceList.length-1;Dt>=0;Dt--)this._namespaceList[Dt].drainQueuedTransitions(t).forEach(Zt=>{const kn=Zt.player,Ji=Zt.element;if(Tt.push(kn),this.collectedEnterElements.length){const ks=Ji[za];if(ks&&ks.setForMove){if(ks.previousTriggersValues&&ks.previousTriggersValues.has(Zt.triggerName)){const l_=ks.previousTriggersValues.get(Zt.triggerName),Xa=this.statesByElement.get(Zt.element);if(Xa&&Xa.has(Zt.triggerName)){const $D=Xa.get(Zt.triggerName);$D.value=l_,Xa.set(Zt.triggerName,$D)}}return void kn.destroy()}}const ku=!D||!this.driver.containsElement(D,Ji),sa=Oe.get(Ji),Rp=H.get(Ji),zr=this._buildInstruction(Zt,r,Rp,sa,ku);if(zr.errors&&zr.errors.length)return void Nt.push(zr);if(ku)return kn.onStart(()=>Wm(Ji,zr.fromStyles)),kn.onDestroy(()=>Du(Ji,zr.toStyles)),void i.push(kn);if(Zt.isFallbackTransition)return kn.onStart(()=>Wm(Ji,zr.fromStyles)),kn.onDestroy(()=>Du(Ji,zr.toStyles)),void i.push(kn);const wj=[];zr.timelines.forEach(ks=>{ks.stretchStartingKeyframe=!0,this.disabledNodes.has(ks.element)||wj.push(ks)}),zr.timelines=wj,r.append(Ji,zr.timelines),l.push({instruction:zr,player:kn,element:Ji}),zr.queriedElements.forEach(ks=>ea(d,ks,[]).push(kn)),zr.preStyleProps.forEach((ks,l_)=>{if(ks.size){let Xa=p.get(l_);Xa||p.set(l_,Xa=new Set),ks.forEach(($D,Qk)=>Xa.add(Qk))}}),zr.postStyleProps.forEach((ks,l_)=>{let Xa=y.get(l_);Xa||y.set(l_,Xa=new Set),ks.forEach(($D,Qk)=>Xa.add(Qk))})});if(Nt.length){const Dt=[];Nt.forEach(Bt=>{Dt.push(function S4(n,e){return new h.vHH(3505,!1)}())}),Tt.forEach(Bt=>Bt.destroy()),this.reportError(Dt)}const ln=new Map,nr=new Map;l.forEach(Dt=>{const Bt=Dt.element;r.has(Bt)&&(nr.set(Bt,Bt),this._beforeAnimationBuild(Dt.player.namespaceId,Dt.instruction,ln))}),i.forEach(Dt=>{const Bt=Dt.element;this._getPreviousPlayers(Bt,!1,Dt.namespaceId,Dt.triggerName,null).forEach(kn=>{ea(ln,Bt,[]).push(kn),kn.destroy()})});const so=re.filter(Dt=>LV(Dt,p,y)),Qa=new Map;kV(Qa,this.driver,je,y,ih).forEach(Dt=>{LV(Dt,p,y)&&so.push(Dt)});const kI=new Map;O.forEach((Dt,Bt)=>{kV(kI,this.driver,new Set(Dt),p,Sx)}),so.forEach(Dt=>{const Bt=Qa.get(Dt),Zt=kI.get(Dt);Qa.set(Dt,new Map([...Array.from(Bt?.entries()??[]),...Array.from(Zt?.entries()??[])]))});const a_=[],vj=[],Ej={};l.forEach(Dt=>{const{element:Bt,player:Zt,instruction:kn}=Dt;if(r.has(Bt)){if(w.has(Bt))return Zt.onDestroy(()=>Du(Bt,kn.toStyles)),Zt.disabled=!0,Zt.overrideTotalTime(kn.totalTime),void i.push(Zt);let Ji=Ej;if(nr.size>1){let sa=Bt;const Rp=[];for(;sa=sa.parentNode;){const zr=nr.get(sa);if(zr){Ji=zr;break}Rp.push(sa)}Rp.forEach(zr=>nr.set(zr,Ji))}const ku=this._buildAnimation(Zt.namespaceId,kn,ln,s,kI,Qa);if(Zt.setRealPlayer(ku),Ji===Ej)a_.push(Zt);else{const sa=this.playersByElement.get(Ji);sa&&sa.length&&(Zt.parentPlayer=gp(sa)),i.push(Zt)}}else Wm(Bt,kn.fromStyles),Zt.onDestroy(()=>Du(Bt,kn.toStyles)),vj.push(Zt),w.has(Bt)&&i.push(Zt)}),vj.forEach(Dt=>{const Bt=s.get(Dt.element);if(Bt&&Bt.length){const Zt=gp(Bt);Dt.setRealPlayer(Zt)}}),i.forEach(Dt=>{Dt.parentPlayer?Dt.syncPlayerEvents(Dt.parentPlayer):Dt.destroy()});for(let Dt=0;Dt<re.length;Dt++){const Bt=re[Dt],Zt=Bt[za];if(_v(Bt,kA),Zt&&Zt.hasAnimation)continue;let kn=[];if(d.size){let ku=d.get(Bt);ku&&ku.length&&kn.push(...ku);let sa=this.driver.query(Bt,cN,!0);for(let Rp=0;Rp<sa.length;Rp++){let zr=d.get(sa[Rp]);zr&&zr.length&&kn.push(...zr)}}const Ji=kn.filter(ku=>!ku.destroyed);Ji.length?M6(this,Bt,Ji):this.processLeaveNode(Bt)}return re.length=0,a_.forEach(Dt=>{this.players.push(Dt),Dt.onDone(()=>{Dt.destroy();const Bt=this.players.indexOf(Dt);this.players.splice(Bt,1)}),Dt.play()}),a_}elementContainsData(e,t){let r=!1;const i=t[za];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let l=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(l=d)}else{const d=this.playersByElement.get(e);if(d){const p=!s||s==Z0;d.forEach(y=>{y.queued||!p&&y.triggerName!=i||l.push(y)})}}return(r||i)&&(l=l.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),l}_beforeAnimationBuild(e,t,r){const s=t.element,l=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,w=y!==s,D=ea(r,y,[]);this._getPreviousPlayers(y,w,l,d,t.toState).forEach(O=>{const H=O.getRealPlayer();H.beforeDestroy&&H.beforeDestroy(),O.destroy(),D.push(O)})}Wm(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,l){const d=t.triggerName,p=t.element,y=[],w=new Set,D=new Set,M=t.timelines.map(H=>{const X=H.element;w.add(X);const re=X[za];if(re&&re.removedBeforeQueried)return new k0(H.duration,H.delay);const ye=X!==p,je=function x6(n){const e=[];return FV(n,e),e}((r.get(X)||b6).map(ln=>ln.getRealPlayer())).filter(ln=>!!ln.element&&ln.element===X),Oe=s.get(X),Be=l.get(X),Tt=lV(0,this._normalizer,0,H.keyframes,Oe,Be),Nt=this._buildPlayer(H,Tt,je);if(H.subTimeline&&i&&D.add(X),ye){const ln=new TN(e,d,X);ln.setRealPlayer(Nt),y.push(ln)}return Nt});y.forEach(H=>{ea(this.playersByQueriedElement,H.element,[]).push(H),H.onDone(()=>function S6(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,H.element,H))}),w.forEach(H=>Wa(H,_V));const O=gp(M);return O.onDestroy(()=>{w.forEach(H=>_v(H,_V)),Du(p,t.toStyles)}),D.forEach(H=>{ea(i,H,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new k0(e.duration,e.delay)}}class TN{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new k0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>nN(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ea(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function qA(n){return n&&1===n.nodeType}function NV(n,e){const t=n.style.display;return n.style.display=e??"none",t}function kV(n,e,t,r,i){const s=[];t.forEach(p=>s.push(NV(p)));const l=[];r.forEach((p,y)=>{const w=new Map;p.forEach(D=>{const M=e.computeStyle(y,D,i);w.set(D,M),(!M||0==M.length)&&(y[za]=C6,l.push(y))}),n.set(y,w)});let d=0;return t.forEach(p=>NV(p,s[d++])),l}function OV(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=1,i=new Set(e),s=new Map;function l(d){if(!d)return r;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=t.has(y)?y:i.has(y)?r:l(y),s.set(d,p),p}return e.forEach(d=>{const p=l(d);p!==r&&t.get(p).push(d)}),t}function Wa(n,e){n.classList?.add(e)}function _v(n,e){n.classList?.remove(e)}function M6(n,e,t){gp(t).onDone(()=>n.processLeaveNode(e))}function FV(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof jF?FV(r.players,e):e.push(r)}}function LV(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class KA{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new D6(e,t,r),this._timelineEngine=new v6(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const l=e+"-"+i;let d=this._triggerCache[l];if(!d){const p=[],y=[],w=fN(this._driver,s,p,y);if(p.length)throw function _4(n,e){return new h.vHH(3404,!1)}();d=function g6(n,e,t){return new m6(n,e,t)}(i,w,this._normalizer),this._triggerCache[l]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,l]=cV(r);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[l,d]=cV(r);return this._timelineEngine.listen(l,t,d,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let O6=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Du(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Du(this._element,this._initialStyles),this._endStyles&&(Du(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Wm(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Wm(this._element,this._endStyles),this._endStyles=null),Du(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function bN(n){let e=null;return n.forEach((t,r)=>{(function F6(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class VV{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:TV(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class L6{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return fV(e,t)}getParentElement(e){return oN(e)}query(e,t,r){return pV(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,l=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const y=new Map,w=l.filter(O=>O instanceof VV);(function j4(n,e){return 0===n||0===e})(r,i)&&w.forEach(O=>{O.currentSnapshot.forEach((H,X)=>y.set(X,H))});let D=function L4(n){return n.length?n[0]instanceof Map?n:n.map(e=>yV(e)):[]}(t).map(O=>mp(O));D=function H4(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,l)=>{r.has(l)||i.push(l),r.set(l,s)}),i.length)for(let s=1;s<e.length;s++){let l=e[s];i.forEach(d=>l.set(d,TV(n,d)))}}return e}(e,D,y);const M=function k6(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=bN(e[0]),e.length>1&&(r=bN(e[e.length-1]))):e instanceof Map&&(t=bN(e)),t||r?new O6(n,t,r):null}(e,D);return new VV(e,D,p,M)}}let V6=(()=>{class n extends FF{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?VF(t):t;return UV(this._renderer,null,r,"register",[i]),new U6(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class U6 extends qG{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new B6(this._id,e,t||{},this._renderer)}}class B6{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return UV(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function UV(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const BV="@.disabled";let j6=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,l)=>{const d=l?.parentNode(s);d&&l.removeChild(d,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(s);return w||(w=new jV("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,w)),w}const l=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const p=w=>{Array.isArray(w)?w.forEach(p):this.engine.registerTrigger(l,d,t,w.name,w)};return r.data.animation.forEach(p),new H6(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,d]=s;l(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(KA),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class jV{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==BV?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class H6 extends jV{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==BV?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function $6(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),l="";return"@"!=s.charAt(0)&&([s,l]=function G6(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let z6=(()=>{class n extends KA{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(aN),h.LFG(yN),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const HV=[{provide:FF,useClass:V6},{provide:yN,useFactory:function W6(){return new d6}},{provide:KA,useClass:z6},{provide:h.FYo,useFactory:function q6(n,e,t){return new j6(n,e,t)},deps:[vi,KA,h.R0b]}],CN=[{provide:aN,useFactory:()=>new L6},{provide:h.QbO,useValue:"BrowserAnimations"},...HV],$V=[{provide:aN,useClass:gV},{provide:h.QbO,useValue:"NoopAnimations"},...HV];let AN,K6=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?$V:CN}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:CN,imports:[Bn]}),n})();try{AN=typeof Intl<"u"&&Intl.v8BreakIterator}catch{AN=!1}let Q0,Y0=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ls(n){return n===ol}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!AN)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YA(n){return function Z6(){if(null==Q0&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Q0=!0}))}finally{Q0=Q0||!1}return Q0}()?n:!!n.capture}var WV=j(5032);function qV(n){return(0,qn.e)((e,t)=>{(0,lt.Xf)(n).subscribe((0,b.x)(t,()=>t.complete(),WV.Z)),!t.closed&&e.subscribe(t)})}function KV(n){return Array.isArray(n)?n:[n]}function X0(n){return n instanceof h.SBq?n.nativeElement:n}function ZV(n,e=Ag.z){return(0,qn.e)((t,r)=>{let i=null,s=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=l+n,w=e.now();if(w<y)return i=this.schedule(void 0,y-w),void r.add(i);d()}t.subscribe((0,b.x)(r,y=>{s=y,l=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{s=i=null}))})}const YV=new Set;let Ev,oW=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):lW}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function aW(n){if(!YV.has(n))try{Ev||(Ev=document.createElement("style"),Ev.setAttribute("type","text/css"),document.head.appendChild(Ev)),Ev.sheet&&(Ev.sheet.insertRule(`@media ${n} {body{ }}`,0),YV.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Y0))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lW(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let cW=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Sr.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return QV(KV(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=x(QV(KV(t)).map(l=>this._registerQuery(l).observable));return s=st(s.pipe(Vo(1)),s.pipe(function zV(n){return Mi((e,t)=>n<=t)}(1),ZV(0))),s.pipe((0,gt.U)(l=>{const d={matches:!1,breakpoints:{}};return l.forEach(({matches:p,query:y})=>{d.matches=d.matches||p,d.breakpoints[y]=p}),d}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new Rr.y(l=>{const d=p=>this._zone.run(()=>l.next(p));return r.addListener(d),()=>{r.removeListener(d)}}).pipe(dd(r),(0,gt.U)(({matches:l})=>({query:t,matches:l})),qV(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(oW),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function QV(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}const i2="cdk-high-contrast-black-on-white",s2="cdk-high-contrast-white-on-black",SN="cdk-high-contrast-active";let TW=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,h.f3M)(cW).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(SN,i2,s2),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(SN,i2):2===r&&t.add(SN,s2)}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Y0),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),o2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const DW=new h.OlP("mat-sanity-checks",{providedIn:"root",factory:function AW(){return!0}});let eD=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function X6(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(TW),h.LFG(DW,8),h.LFG(le))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[o2,o2]}),n})();class NW{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const c2=YA({passive:!0,capture:!0});class kW{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=function vv(n){return n.composedPath?n.composedPath()[0]:n.target}(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const l=s.get(r);l?l.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,c2)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,c2)))}}const u2={enterDuration:225,exitDuration:150},d2=YA({passive:!0,capture:!0}),h2=["mousedown","touchstart"],f2=["mouseup","mouseleave","touchend","touchcancel"];class eI{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=X0(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...u2,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const l=r.radius||function FW(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),d=e-i.left,p=t-i.top,y=s.enterDuration,w=document.createElement("div");w.classList.add("mat-ripple-element"),w.style.left=d-l+"px",w.style.top=p-l+"px",w.style.height=2*l+"px",w.style.width=2*l+"px",null!=r.color&&(w.style.backgroundColor=r.color),w.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(w);const D=window.getComputedStyle(w),O=D.transitionDuration,H="none"===D.transitionProperty||"0s"===O||"0s, 0s"===O||0===i.width&&0===i.height,X=new NW(this,w,r,H);w.style.transform="scale3d(1, 1, 1)",X.state=0,r.persistent||(this._mostRecentTransientRipple=X);let re=null;return!H&&(y||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const ye=()=>this._finishRippleTransition(X),je=()=>this._destroyRipple(X);w.addEventListener("transitionend",ye),w.addEventListener("transitioncancel",je),re={onTransitionEnd:ye,onTransitionCancel:je}}),this._activeRipples.set(X,re),(H||!y)&&this._finishRippleTransition(X),X}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...u2,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=X0(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,h2.forEach(r=>{eI._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{f2.forEach(t=>{this._triggerElement.addEventListener(t,this,d2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=function t2(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!function n2(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(h2.forEach(t=>eI._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&f2.forEach(t=>e.removeEventListener(t,this,d2)))}}eI._eventManager=new kW;let UW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[eD,eD]}),n})(),g2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),YW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[g2,eD,UW,sl,g2,eD]}),n})();const m2="firebasestorage.googleapis.com",_2="storageBucket";class $r extends B.ZR{constructor(e,t,r=0){super(RN(e),`Firebase Storage: ${t} (${RN(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$r.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return RN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var gr=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(gr||(gr={})),gr))();function RN(n){return"storage/"+n}function PN(){return new $r(gr.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function y2(){return new $r(gr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v2(){return new $r(gr.CANCELED,"User canceled the upload/download.")}function E2(){return new $r(gr.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Iv(n){return new $r(gr.INVALID_ARGUMENT,n)}function w2(){return new $r(gr.APP_DELETED,"The Firebase app was deleted.")}function I2(n){return new $r(gr.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function tI(n,e){return new $r(gr.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function nI(n){throw new $r(gr.INTERNAL_ERROR,"Internal error: "+n)}class xs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xs.makeFromUrl(e,t)}catch{return new xs(e,"")}if(""===r.path)return r;throw function oq(n){return new $r(gr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Be){Be.path_=decodeURIComponent(Be.path)}const D=t.replace(/[.]/g,"\\."),Oe=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Be){"/"===Be.path.charAt(Be.path.length-1)&&(Be.path_=Be.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===m2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Be=0;Be<Oe.length;Be++){const Tt=Oe[Be],Nt=Tt.regex.exec(e);if(Nt){let nr=Nt[Tt.indices.path];nr||(nr=""),r=new xs(Nt[Tt.indices.bucket],nr),Tt.postModify(r);break}}if(null==r)throw function sq(n){return new $r(gr.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class dq{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function tD(n){return"string"==typeof n||n instanceof String}function T2(n){return MN()&&n instanceof Blob}function MN(){return typeof Blob<"u"}function xN(n,e,t,r){if(r<e)throw Iv(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Iv(`Invalid value for '${n}'. Expected ${t} or less.`)}function ah(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function b2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var _p=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(_p||(_p={})),_p))();function C2(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class _q{constructor(e,t,r,i,s,l,d,p,y,w,D,M=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=D,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,H)=>{this.resolve_=O,this.reject_=H,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function pq(n){return void 0!==n}(p)?s():s(p)}catch(p){l(p)}else if(null!==d){const p=PN();p.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,p):p)}else l(i.canceled?this.appDelete_?w2():v2():y2())};this.canceled_?t(0,new nD(!1,null,!0)):this.backoffId_=function hq(n,e,t){let r=1,i=null,s=null,l=!1,d=0;function p(){return 2===d}let y=!1;function w(...re){y||(y=!0,e.apply(null,re))}function D(re){i=setTimeout(()=>{i=null,n(O,p())},re)}function M(){s&&clearTimeout(s)}function O(re,...ye){if(y)return void M();if(re)return M(),void w.call(null,re,...ye);if(p()||l)return M(),void w.call(null,re,...ye);let Oe;r<64&&(r*=2),1===d?(d=2,Oe=0):Oe=1e3*(r+Math.random()),D(Oe)}let H=!1;function X(re){H||(H=!0,M(),!y&&(null!==i?(re||(d=2),clearTimeout(i),D(0)):re||(d=1)))}return D(0),s=setTimeout(()=>{l=!0,X(!0)},t),X}((r,i)=>{if(i)return void r(!1,new nD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(l),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(l),this.pendingConnection_=null;const d=s.getErrorCode()===_p.NO_ERROR,p=s.getStatus();if(!d||C2(p,this.additionalRetryCodes_)&&this.retry){const w=s.getErrorCode()===_p.ABORT;return void r(!1,new nD(!1,null,w))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new nD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function fq(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function bq(...n){const e=function Tq(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(MN())return new Blob(n);throw new $r(gr.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const na={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class NN{constructor(e,t){this.data=e,this.contentType=t||null}}function kN(n,e){switch(n){case na.RAW:return new NN(A2(e));case na.BASE64:case na.BASE64URL:return new NN(D2(n,e));case na.DATA_URL:return new NN(function Sq(n){const e=new S2(n);return e.base64?D2(na.BASE64,e.rest):function Dq(n){let e;try{e=decodeURIComponent(n)}catch{throw tI(na.DATA_URL,"Malformed data URL.")}return A2(e)}(e.rest)}(e),function Rq(n){return new S2(n).contentType}(e))}throw PN()}function A2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function D2(n,e){switch(n){case na.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw tI(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case na.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw tI(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Aq(n){if(typeof atob>"u")throw function uq(n){return new $r(gr.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:tI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class S2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw tI(na.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Pq(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Su{constructor(e,t){let r=0,i="";T2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(T2(this.data_)){const i=function Cq(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Su(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Su(r,!0)}}static getBlob(...e){if(MN()){const t=e.map(r=>r instanceof Su?r.data_:r);return new Su(bq.apply(null,t))}{const t=e.map(l=>tD(l)?kN(na.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[s++]=l[d]}),new Su(i,!0)}}uploadData(){return this.data_}}function ON(n){let e;try{e=JSON.parse(n)}catch{return null}return function mq(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function R2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Nq(n,e){return e}class no{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Nq}}let rD=null;function rI(){if(rD)return rD;const n=[];n.push(new no("bucket")),n.push(new no("generation")),n.push(new no("metageneration")),n.push(new no("name","fullPath",!0));const t=new no("name");t.xform=function e(s,l){return function kq(n){return!tD(n)||n.length<2?n:R2(n)}(l)},n.push(t);const i=new no("size");return i.xform=function r(s,l){return void 0!==l?Number(l):l},n.push(i),n.push(new no("timeCreated")),n.push(new no("updated")),n.push(new no("md5Hash",null,!0)),n.push(new no("cacheControl",null,!0)),n.push(new no("contentDisposition",null,!0)),n.push(new no("contentEncoding",null,!0)),n.push(new no("contentLanguage",null,!0)),n.push(new no("contentType",null,!0)),n.push(new no("metadata","customMetadata",!0)),rD=n,rD}function P2(n,e,t){const r=ON(e);return null===r?null:function Fq(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const l=t[s];r[l.local]=l.xform(r,e[l.server])}return function Oq(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new xs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function FN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const M2="prefixes",x2="items";class Ru{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Pu(n){if(!n)throw PN()}function iD(n,e){return function t(r,i){const s=P2(n,i,e);return Pu(null!==s),s}}function Tv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function rq(){return new $r(gr.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function nq(){return new $r(gr.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function tq(n){return new $r(gr.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function iq(n){return new $r(gr.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function iI(n){const e=Tv(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function eq(n){return new $r(gr.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function N2(n,e,t){const i=ah(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Ru(i,"GET",iD(n,t),l);return d.errorHandler=iI(e),d}function Hq(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const d=ah(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new Ru(d,"GET",function Bq(n,e){return function t(r,i){const s=function Uq(n,e,t){const r=ON(t);return null===r?null:function Vq(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[M2])for(const i of t[M2]){const s=i.replace(/\/$/,""),l=n._makeStorageReference(new xs(e,s));r.prefixes.push(l)}if(t[x2])for(const i of t[x2]){const s=n._makeStorageReference(new xs(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Pu(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=Tv(e),w}function O2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Wq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class sD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function LN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Pu(!1)}return Pu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const Yq={STATE_CHANGED:"state_changed"},ro={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function VN(n){switch(n){case"running":case"pausing":case"canceling":return ro.RUNNING;case"paused":return ro.PAUSED;case"success":return ro.SUCCESS;case"canceled":return ro.CANCELED;default:return ro.ERROR}}class Qq{constructor(e,t,r){if(function gq(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function bv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let V2=null;class Xq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_p.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_p.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_p.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw nI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Jq extends Xq{initXhr(){this.xhr_.responseType="text"}}function Zl(){return V2?V2():new Jq}class U2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=rI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(gr.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(C2(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=y2()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(gr.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function qq(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l=O2(e,r,i),d={name:l.fullPath},p=ah(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},D=FN(l,t),H=new Ru(p,"POST",function O(X){let re;LN(X);try{re=X.getResponseHeader("X-Goog-Upload-URL")}catch{Pu(!1)}return Pu(tD(re)),re},n.maxUploadRetryTime);return H.urlParams=d,H.headers=w,H.body=D,H.errorHandler=Tv(e),H}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Kq(n,e,t,r){const p=new Ru(t,"POST",function s(y){const w=LN(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Pu(!1)}D||Pu(!1);const M=Number(D);return Pu(!isNaN(M)),new sD(M,r.size(),"final"===w)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Tv(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,Zl,t,r);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new sD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let l;try{l=function Zq(n,e,t,r,i,s,l,d){const p=new sD(0,0);if(l?(p.current=l.current,p.total=l.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function lq(){return new $r(gr.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let w=y;i>0&&(w=Math.min(w,i));const D=p.current;let O="";O=0===w?"finalize":y===w?"upload, finalize":"upload";const H={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${p.current}`},X=r.slice(D,D+w);if(null===X)throw E2();const Oe=new Ru(t,"POST",function re(Be,Tt){const Nt=LN(Be,["active","final"]),ln=p.current+w,nr=r.size();let so;return so="final"===Nt?iD(e,s)(Be,Tt):null,new sD(ln,nr,"final"===Nt,so)},e.maxUploadRetryTime);return Oe.headers=H,Oe.body=X.uploadData(),Oe.progressCallback=d||null,Oe.errorHandler=Tv(n),Oe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Zl,i,s,!1);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=N2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function F2(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Oe="";for(let Be=0;Be<2;Be++)Oe+=Math.random().toString().slice(2);return Oe}();l["Content-Type"]="multipart/related; boundary="+p;const y=O2(e,r,i),w=FN(y,t),O=Su.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===O)throw E2();const H={name:y.fullPath},X=ah(s,n.host,n._protocol),ye=n.maxUploadRetryTime,je=new Ru(X,"POST",iD(n,t),ye);return je.urlParams=H,je.headers=l,je.body=O.uploadData(),je.errorHandler=Tv(e),je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=v2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=VN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new Qq(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(VN(this._state)){case ro.SUCCESS:bv(this._resolve.bind(null,this.snapshot))();break;case ro.CANCELED:case ro.ERROR:bv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(VN(this._state)){case ro.RUNNING:case ro.PAUSED:e.next&&bv(e.next.bind(e,this.snapshot))();break;case ro.SUCCESS:e.complete&&bv(e.complete.bind(e))();break;default:e.error&&bv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Zm{constructor(e,t){this._service=e,this._location=t instanceof xs?t:xs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zm(e,t)}get root(){const e=new xs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R2(this._location.path)}get storage(){return this._service}get parent(){const e=function Mq(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new xs(this._location.bucket,e);return new Zm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw I2(e)}}function j2(n,e,t){return UN.apply(this,arguments)}function UN(){return UN=(0,Te.Z)(function*(n,e,t){const i=yield H2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield j2(n,e,i.nextPageToken))}),UN.apply(this,arguments)}function H2(n,e){null!=e&&"number"==typeof e.maxResults&&xN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Hq(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zl)}function d9(n){n._throwIfRoot("getDownloadURL");const e=function $q(n,e,t){const i=ah(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new Ru(i,"GET",function jq(n,e){return function t(r,i){const s=P2(n,i,e);return Pu(null!==s),function Lq(n,e,t,r){const i=ON(e);if(null===i||!tD(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const l=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return ah("/b/"+l(n.bucket)+"/o/"+l(D),t,r)+b2({alt:"media",token:y})})[0]}(s,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=iI(e),d}(n.storage,n._location,rI());return n.storage.makeRequestWithTokens(e,Zl).then(t=>{if(null===t)throw function cq(){return new $r(gr.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $2(n,e){const t=function xq(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new xs(n._location.bucket,t);return new Zm(n.storage,r)}function G2(n,e){if(n instanceof BN){const t=n;if(null==t._bucket)throw function aq(){return new $r(gr.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_2+"' property when initializing the app?")}();const r=new Zm(t,t._bucket);return null!=e?G2(r,e):r}return void 0!==e?$2(n,e):n}function g9(n,e){if(e&&function f9(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof BN)return function p9(n,e){return new Zm(n,e)}(n,e);throw Iv("To use ref(service, url), the first argument must be a Storage instance.")}return G2(n,e)}function z2(n,e){const t=e?.[_2];return null==t?null:xs.makeFromBucketSpec(t,n)}class BN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=m2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?xs.makeFromBucketSpec(i,this._host):z2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?xs.makeFromBucketSpec(this._url,e):z2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Te.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Te.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zm(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new dq(w2());{const l=function Iq(n,e,t,r,i,s,l=!0){const d=b2(n.urlParams),p=n.url+d,y=Object.assign({},n.headers);return function Eq(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function yq(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function vq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(y,s),function wq(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,r),new _q(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,Te.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const W2="@firebase/storage";function Z2(n,e){return g9(n=(0,B.m9)(n),e)}function C9(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new BN(t,r,i,e,Ni.SDK_VERSION)}!function A9(){(0,Ni._registerComponent)(new Ds.wA("storage",C9,"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(W2,"0.12.1",""),(0,Ni.registerVersion)(W2,"0.12.1","esm2017")}();class oD{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Q2{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new oD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new oD(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?l=>t(new oD(l,this,this._ref)):{next:t.next?l=>t.next(new oD(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class X2{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new lh(e,this._service))}get items(){return this._delegate.items.map(e=>new lh(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class lh{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function b9(n,e){return $2(n,e)}(this._delegate,e);return new lh(t,this.storage)}get root(){return new lh(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new lh(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Q2(function _9(n,e,t){return function o9(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new U2(n,new Su(e),t)}(n=(0,B.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=na.RAW,r){this._throwIfRoot("putString");const i=kN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new Q2(new U2(this._delegate,new Su(i.data,!0),s),this)}listAll(){return function w9(n){return function l9(n){const e={prefixes:[],items:[]};return j2(n,e).then(()=>e)}(n=(0,B.m9)(n))}(this._delegate).then(e=>new X2(e,this.storage))}list(e){return function E9(n,e){return H2(n=(0,B.m9)(n),e)}(this._delegate,e||void 0).then(t=>new X2(t,this.storage))}getMetadata(){return function y9(n){return function c9(n){n._throwIfRoot("getMetadata");const e=N2(n.storage,n._location,rI());return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,B.m9)(n))}(this._delegate)}updateMetadata(e){return function v9(n,e){return function u9(n,e){n._throwIfRoot("updateMetadata");const t=function Gq(n,e,t,r){const s=ah(e.fullServerUrl(),n.host,n._protocol),d=FN(t,r),y=n.maxOperationRetryTime,w=new Ru(s,"PATCH",iD(n,r),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=iI(e),w}(n.storage,n._location,e,rI());return n.storage.makeRequestWithTokens(t,Zl)}(n=(0,B.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function I9(n){return d9(n=(0,B.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function T9(n){return function h9(n){n._throwIfRoot("deleteObject");const e=function zq(n,e){const r=ah(e.fullServerUrl(),n.host,n._protocol),d=new Ru(r,"DELETE",function l(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=iI(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,B.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw I2(e)}}class J2{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eU(e))throw Iv("ref() expected a child path but got a URL, use refFromURL instead.");return new lh(Z2(this._delegate,e),this)}refFromURL(e){if(!eU(e))throw Iv("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xs.makeFromUrl(e,this._delegate.host)}catch{throw Iv("refFromUrl() expected a valid full URL but got an invalid one.")}return new lh(Z2(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Y2(n,e,t,r={}){!function m9(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,B.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function eU(n){return/^[A-Za-z]+:\/\//.test(n)}function P9(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new J2(t,r)}function tU(n){const e=function x9(n){return new Rr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const s=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){s()}}).pipe(ZV(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function aD(n){return{getDownloadURL:()=>vt(void 0).pipe(Tn.fc,hn(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>vt(void 0).pipe(Tn.fc,hn(()=>n.getMetadata()),Tn.iC),delete:()=>(0,dn.D)(n.delete()),child:e=>aD(n.child(e)),updateMetadata:e=>(0,dn.D)(n.updateMetadata(e)),put:(e,t)=>tU(n.put(e,t)),putString:(e,t,r)=>tU(n.putString(e,t,r)),list:e=>(0,dn.D)(n.list(e)),listAll:()=>(0,dn.D)(n.listAll())}}!function M9(n){const e={TaskState:ro,TaskEvent:Yq,StringFormat:na,Storage:J2,Reference:lh};n.INTERNAL.registerComponent(new Ds.wA("storage-compat",P9,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.4")}(G_.Z);const N9=new h.OlP("angularfire2.storageBucket"),k9=new h.OlP("angularfire2.storage.maxUploadRetryTime"),O9=new h.OlP("angularfire2.storage.maxOperationRetryTime"),F9=new h.OlP("angularfire2.storage.use-emulator");let L9=(()=>{class n{constructor(t,r,i,s,l,d,p,y,w,D){const M=(0,fi.on)(t,l,r);this.storage=(0,fi.cc)(`${M.name}.storage.${i}`,"AngularFireStorage",M.name,()=>{const O=l.runOutsideAngular(()=>M.storage(i||void 0)),H=w;return H&&O.useEmulator(...H),p&&O.setMaxUploadRetryTime(p),y&&O.setMaxOperationRetryTime(y),O},[p,y])}ref(t){return aD(this.storage.ref(t))}refFromURL(t){return aD(this.storage.refFromURL(t))}upload(t,r,i){return aD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fi.Dh),h.LFG(fi.xv,8),h.LFG(N9,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(k9,8),h.LFG(O9,8),h.LFG(F9,8),h.LFG(M0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),V9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),U9=(()=>{class n{constructor(){mA.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[L9],imports:[V9]}),n})();const nU="@firebase/database";let jN="";function HN(n){jN=n}class H9{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,B.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,B.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class $9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,B.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const iU=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new H9(e)}}catch{}return new $9},Ym=iU("localStorage"),$N=iU("sessionStorage"),Cv=new ki.Yd("@firebase/database"),sU=function(){let n=1;return function(){return n++}}(),oU=function(n){const e=(0,B.dS)(n),t=new B.gQ;t.update(e);const r=t.digest();return B.US.encodeByteArray(r)},sI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=sI.apply(null,r):e+="object"==typeof r?(0,B.Wl)(r):r,e+=" "}return e};let Qm=null,aU=!0;const lU=function(n,e){(0,B.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cv.logLevel=ki.in.VERBOSE,Qm=Cv.log.bind(Cv),e&&$N.set("logging_enabled",!0)):"function"==typeof n?Qm=n:(Qm=null,$N.remove("logging_enabled"))},Qi=function(...n){if(!0===aU&&(aU=!1,null===Qm&&!0===$N.get("logging_enabled")&&lU(!0)),Qm){const e=sI.apply(null,n);Qm(e)}},oI=function(n){return function(...e){Qi(n,...e)}},GN=function(...n){const e="FIREBASE INTERNAL ERROR: "+sI(...n);Cv.error(e)},Mu=function(...n){const e=`FIREBASE FATAL ERROR: ${sI(...n)}`;throw Cv.error(e),new Error(e)},Ns=function(...n){const e="FIREBASE WARNING: "+sI(...n);Cv.warn(e)},lD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},yp="[MIN_NAME]",ch="[MAX_NAME]",Xm=function(n,e){if(n===e)return 0;if(n===yp||e===ch)return-1;if(e===yp||n===ch)return 1;{const t=dU(n),r=dU(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},W9=function(n,e){return n===e?0:n<e?-1:1},aI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,B.Wl)(e))},zN=function(n){if("object"!=typeof n||null===n)return(0,B.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,B.Wl)(e[r]),t+=":",t+=zN(n[e[r]]);return t+="}",t},cU=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uU=function(n){(0,B.hu)(!lD(n),"Invalid JSON number");const r=1023;let i,s,l,d,p;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const w=y.join("");let D="";for(p=0;p<64;p+=8){let M=parseInt(w.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},Y9=new RegExp("^-?(0*)\\d{1,10}$"),dU=function(n){if(Y9.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Av=function(n){try{n()}catch(e){setTimeout(()=>{throw Ns("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},J9=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},lI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class e5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ns(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class t5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Qi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ns(e)}}let cI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vU="websocket",EU="long_polling";class qN{constructor(e,t,r,i,s=!1,l="",d=!1,p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ym.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ym.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function wU(n,e,t){let r;if((0,B.hu)("string"==typeof e,"typeof type must == string"),(0,B.hu)("object"==typeof t,"typeof params must == object"),e===vU)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==EU)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function n5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Xi(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class r5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,B.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,B.p$)(this.counters_)}}const KN={},ZN={};function YN(n){const e=n.toString();return KN[e]||(KN[e]=new r5),KN[e]}class s5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Av(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class vp{constructor(e,t,r,i,s,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=oI(e),this.stats_=YN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),wU(t,EU,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new s5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,B.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new QN((...s)=>{const[l,d,p,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=p;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&mU.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){vp.forceAllow_=!0}static forceDisallow(){vp.forceDisallow_=!0}static isAvailable(){return!((0,B.Yr)()||!vp.forceAllow_&&(vp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,B.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,B.h$)(t),i=cU(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,B.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,B.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class QN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,B.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=QN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Qi("frame writing exception"),d.stack&&Qi(d.stack),Qi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Qi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,B.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let uD=null;typeof MozWebSocket<"u"?uD=MozWebSocket:typeof WebSocket<"u"&&(uD=WebSocket);let Dv=(()=>{class n{constructor(t,r,i,s,l,d,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=oI(this.connId),this.stats_=YN(r),this.connURL=n.connectionURL_(r,d,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const d={v:"5"};return!(0,B.Yr)()&&typeof location<"u"&&location.hostname&&mU.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),s&&(d.ac=s),l&&(d.p=l),wU(t,vU,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ym.set("previous_websocket_failure",!0);try{let i;if((0,B.Yr)()){i={headers:{"User-Agent":`Firebase/5/${jN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new uD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==uD&&!n.forceDisallow_}static previouslyFailed(){return Ym.isInMemoryStorage||!0===Ym.get("previous_websocket_failure")}markConnectionHealthy(){Ym.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,B.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,B.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,B.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cU(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),SU=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vp,Dv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Dv&&Dv.isAvailable();let i=r&&!Dv.previouslyFailed();if(t.webSocketOnly&&(r||Ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dv];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class OU{constructor(e,t,r,i,s,l,d,p,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=oI("c:"+this.id+":"),this.transportManager_=new SU(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=lI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=aI("t",e),r=aI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=aI("t",e),r=aI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=aI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?GN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):GN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ns("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),lI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):lI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ym.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class FU{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class LU{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,B.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,B.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class dD extends LU{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,B.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dD}getInitialEvent(e){return(0,B.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const VU=32,UU=768;class $n{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Fn(){return new $n("")}function pn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ep(n){return n.pieces_.length-n.pieceNum_}function ur(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new $n(n.pieces_,e)}function JN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function uI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function BU(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new $n(e,0)}function Mr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof $n)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new $n(t,0)}function gn(n){return n.pieceNum_>=n.pieces_.length}function io(n,e){const t=pn(n),r=pn(e);if(null===t)return e;if(t===r)return io(ur(n),ur(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function D5(n,e){const t=uI(n,0),r=uI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Xm(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function ek(n,e){if(Ep(n)!==Ep(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function qa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ep(n)>Ep(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class S5{constructor(e,t){this.errorPrefix_=t,this.parts_=uI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,B.ug)(this.parts_[r]);jU(this)}}function jU(n){if(n.byteLength_>UU)throw new Error(n.errorPrefix_+"has a key path longer than "+UU+" bytes ("+n.byteLength_+").");if(n.parts_.length>VU)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+VU+") or object contains a cycle "+Jm(n))}function Jm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class tk extends LU{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new tk}getInitialEvent(e){return(0,B.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const dI=1e3;let fD,e_=(()=>{class n extends FU{constructor(t,r,i,s,l,d,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=oI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,B.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");tk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&dD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,B.Wl)(l)),(0,B.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new B.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:d=>{const p=d.d;"ok"===d.s?r.resolve(p):r.reject(p)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,B.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,p=>{const y=p.d,w=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==w&&this.removeListen_(i,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,B.r3)(t,"w")){const i=(0,B.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Ns(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,B.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,B.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,d=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,B.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,B.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):GN("Unrecognized action received from server: "+(0,B.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,B.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=dI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Te.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let p=!1,y=null;const w=function(){y?y.close():(p=!0,s())};t.realtime_={close:w,sendRequest:function(O){(0,B.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const M=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,H]=yield Promise.all([t.authTokenProvider_.getToken(M),t.appCheckTokenProvider_.getToken(M)]);p?Qi("getToken() completed but was canceled"):(Qi("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=H&&H.token,y=new OU(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,X=>{Ns(X+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Ns(O),w())}}})()}interrupt(t){Qi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,B.xb)(this.interruptReasons_)&&(this.reconnectDelay_=dI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>zN(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new $n(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Qi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,B.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+jN.replace(/\./g,"-")]=1,(0,B.uI)()?t["framework.cordova"]=1:(0,B.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=dD.getInstance().currentlyOnline();return(0,B.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class yn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new yn(e,t)}}class hD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new yn(yp,e),i=new yn(yp,t);return 0!==this.compare(r,i)}minPost(){return yn.MIN}}class GU extends hD{static get __EMPTY_NODE(){return fD}static set __EMPTY_NODE(e){fD=e}compare(e,t){return Xm(e.name,t.name)}isDefinedOn(e){throw(0,B.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return yn.MIN}maxPost(){return new yn(ch,fD)}makePost(e,t){return(0,B.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new yn(e,fD)}toString(){return".key"}}const xu=new GU;class pD{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let rk,Yl=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??bo.EMPTY_NODE,this.right=l??bo.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return bo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bo{constructor(e,t=bo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Yl.BLACK,null,null))}remove(e){return new bo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new pD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new pD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new pD(this.root_,null,this.comparator_,!0,e)}}function F5(n,e){return Xm(n.name,e.name)}function nk(n,e){return Xm(n,e)}bo.EMPTY_NODE=new class O5{copy(e,t,r,i,s){return this}insert(e,t,r){return new Yl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zU=function(n){return"number"==typeof n?"number:"+uU(n):"string:"+n},WU=function(n){if(n.isLeafNode()){const e=n.val();(0,B.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,B.r3)(e,".sv"),"Priority must be a string or number.")}else(0,B.hu)(n===rk||n.isEmpty(),"priority of unexpected type.");(0,B.hu)(n===rk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qU,KU,ZU,Sv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,B.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),WU(this.priorityNode_)}static set __childrenNodeConstructor(t){qU=t}static get __childrenNodeConstructor(){return qU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return gn(t)?this:".priority"===pn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=pn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,B.hu)(".priority"!==i||1===Ep(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ur(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+zU(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uU(this.value_):this.value_,this.lazyHash_=oU(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,B.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,B.hu)(s>=0,"Unknown leaf type: "+r),(0,B.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const mr=new class B5 extends hD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Xm(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return yn.MIN}maxPost(){return new yn(ch,new Sv("[PRIORITY-POST]",ZU))}makePost(e,t){const r=KU(e);return new yn(t,new Sv("[PRIORITY-POST]",r))}toString(){return".priority"}},j5=Math.log(2);class H5{constructor(e){this.count=parseInt(Math.log(e+1)/j5,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const gD=function(n,e,t,r){n.sort(e);const i=function(p,y){const w=y-p;let D,M;if(0===w)return null;if(1===w)return D=n[p],M=t?t(D):D,new Yl(M,D.node,Yl.BLACK,null,null);{const O=parseInt(w/2,10)+p,H=i(p,O),X=i(O+1,y);return D=n[O],M=t?t(D):D,new Yl(M,D.node,Yl.BLACK,H,X)}},d=function(p){let y=null,w=null,D=n.length;const M=function(H,X){const re=D-H,ye=D;D-=H;const je=i(re+1,ye),Oe=n[re],Be=t?t(Oe):Oe;O(new Yl(Be,Oe.node,X,null,je))},O=function(H){y?(y.left=H,y=H):(w=H,y=H)};for(let H=0;H<p.count;++H){const X=p.nextBitIsOne(),re=Math.pow(2,p.count-(H+1));X?M(re,Yl.BLACK):(M(re,Yl.BLACK),M(re,Yl.RED))}return w}(new H5(n.length));return new bo(r||e,d)};let ik;const Rv={};class uh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,B.hu)(Rv&&mr,"ChildrenNode.ts has not been loaded"),ik=ik||new uh({".priority":Rv},{".priority":mr}),ik}get(e){const t=(0,B.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bo?t:null}hasIndex(e){return(0,B.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,B.hu)(e!==xu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(yn.Wrap);let d,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();d=i?gD(r,e.getCompare()):Rv;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const w=Object.assign({},this.indexes_);return w[p]=d,new uh(w,y)}addToIndexes(e,t){const r=(0,B.UI)(this.indexes_,(i,s)=>{const l=(0,B.DV)(this.indexSet_,s);if((0,B.hu)(l,"Missing index implementation for "+s),i===Rv){if(l.isDefinedOn(e.node)){const d=[],p=t.getIterator(yn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&d.push(y),y=p.getNext();return d.push(e),gD(d,l.getCompare())}return Rv}{const d=t.get(e.name);let p=i;return d&&(p=p.remove(new yn(e.name,d))),p.insert(e,e.node)}});return new uh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,B.UI)(this.indexes_,i=>{if(i===Rv)return i;{const s=t.get(e.name);return s?i.remove(new yn(e.name,s)):i}});return new uh(r,this.indexSet_)}}let hI,on=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WU(this.priorityNode_),this.children_.isEmpty()&&(0,B.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return hI||(hI=new n(new bo(nk),null,uh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||hI}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?hI:r}}getChild(t){const r=pn(t);return null===r?this:this.getImmediateChild(r).getChild(ur(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,B.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new yn(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=s.isEmpty()?hI:this.priorityNode_;return new n(s,d,l)}}updateChild(t,r){const i=pn(t);if(null===i)return r;{(0,B.hu)(".priority"!==pn(t)||1===Ep(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ur(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(mr,(d,p)=>{r[d]=p.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):l=!1}),!t&&l&&s<2*i){const d=[];for(const p in r)d[p]=r[p];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+zU(this.getPriority().val())+":"),this.forEachChild(mr,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":oU(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new yn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new yn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new yn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,yn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,yn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===fI?-1:0}withIndex(t){if(t===xu||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===xu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(mr),s=r.getIterator(mr);let l=i.getNext(),d=s.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=s.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===xu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const fI=new class $5 extends on{constructor(){super(new bo(nk),on.EMPTY_NODE,uh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return on.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(yn,{MIN:{value:new yn(yp,on.EMPTY_NODE)},MAX:{value:new yn(ch,fI)}}),GU.__EMPTY_NODE=on.EMPTY_NODE,Sv.__childrenNodeConstructor=on,function L5(n){rk=n}(fI),function U5(n){ZU=n}(fI);const G5=!0;function Gr(n,e=null){if(null===n)return on.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,B.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Sv(n,Gr(e));if(n instanceof Array||!G5){let t=on.EMPTY_NODE;return Xi(n,(r,i)=>{if((0,B.r3)(n,r)&&"."!==r.substring(0,1)){const s=Gr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Gr(e))}{const t=[];let r=!1;if(Xi(n,(l,d)=>{if("."!==l.substring(0,1)){const p=Gr(d);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new yn(l,p)))}}),0===t.length)return on.EMPTY_NODE;const s=gD(t,F5,l=>l.name,nk);if(r){const l=gD(t,mr.getCompare());return new on(s,Gr(e),new uh({".priority":l},{".priority":mr}))}return new on(s,Gr(e),uh.Default)}}!function V5(n){KU=n}(Gr);class sk extends hD{constructor(e){super(),this.indexPath_=e,(0,B.hu)(!gn(e)&&".priority"!==pn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Xm(e.name,t.name):s}makePost(e,t){const r=Gr(e),i=on.EMPTY_NODE.updateChild(this.indexPath_,r);return new yn(t,i)}maxPost(){const e=on.EMPTY_NODE.updateChild(this.indexPath_,fI);return new yn(ch,e)}toString(){return uI(this.indexPath_,0).join("/")}}const ok=new class z5 extends hD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Xm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return yn.MIN}maxPost(){return yn.MAX}makePost(e,t){const r=Gr(e);return new yn(t,r)}toString(){return".value"}};function YU(n){return{type:"value",snapshotNode:n}}function Pv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function pI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class ak{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,B.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(pI(t,d)):(0,B.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Pv(t,r)):l.trackChildChange(gI(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(mr,(i,s)=>{t.hasChild(i)||r.trackChildChange(pI(i,s))}),t.isLeafNode()||t.forEachChild(mr,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(gI(i,s,l))}else r.trackChildChange(Pv(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?on.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class mI{constructor(e){this.indexedFilter_=new ak(e.getIndex()),this.index_=e.getIndex(),this.startPost_=mI.getStartPost_(e),this.endPost_=mI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,l){return this.matches(new yn(t,r))||(r=on.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=on.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(on.EMPTY_NODE);const s=this;return t.forEachChild(mr,(l,d)=>{s.matches(new yn(l,d))||(i=i.updateImmediateChild(l,on.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class q5{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new mI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new yn(t,r))||(r=on.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=on.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=on.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;i=i.updateImmediateChild(d.name,d.node),l++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(on.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;s.hasNext();){const d=s.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:i=i.updateImmediateChild(d.name,on.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const D=this.index_.getCompare();l=(M,O)=>D(O,M)}else l=this.index_.getCompare();const d=e;(0,B.hu)(d.numChildren()===this.limit_,"");const p=new yn(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(p);if(d.hasChild(t)){const D=d.getImmediateChild(t);let M=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===t||d.hasChild(M.name));)M=i.getChildAfterChild(this.index_,M,this.reverse_);const O=null==M?1:l(M,p);if(w&&!r.isEmpty()&&O>=0)return s?.trackChildChange(gI(t,r,D)),d.updateImmediateChild(t,r);{s?.trackChildChange(pI(t,D));const X=d.updateImmediateChild(t,on.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(s?.trackChildChange(Pv(M.name,M.node)),X.updateImmediateChild(M.name,M.node)):X}}return r.isEmpty()?e:w&&l(y,p)>=0?(null!=s&&(s.trackChildChange(pI(y.name,y.node)),s.trackChildChange(Pv(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,on.EMPTY_NODE)):e}}class mD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=mr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,B.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:yp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,B.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ch}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,B.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===mr}copy(){const e=new mD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function ck(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function _D(n,e){const t=n.copy();return t.index_=e,t}function QU(n){const e={};if(n.isDefault())return e;let t;if(n.index_===mr?t="$priority":n.index_===ok?t="$value":n.index_===xu?t="$key":((0,B.hu)(n.index_ instanceof sk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,B.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,B.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,B.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,B.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,B.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function XU(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==mr&&(e.i=n.index_.toString()),e}class yD extends FU{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=oI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,B.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=yD.getListenId_(e,r),d={};this.listens_[l]=d;const p=QU(e._queryParams);this.restRequest_(s+".json",p,(y,w)=>{let D=w;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,B.DV)(this.listens_,l)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(M,null)}})}unlisten(e,t){const r=yD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=QU(e._queryParams),r=e._path.toString(),i=new B.BH;return this.restRequest_(r+".json",t,(s,l)=>{let d=l;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,B.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,B.cI)(d.responseText)}catch{Ns("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,p)}else 401!==d.status&&404!==d.status&&Ns("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class J5{constructor(){this.rootNode_=on.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function vD(){return{value:null,children:new Map}}function Mv(n,e,t){if(gn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=pn(e);n.children.has(r)||n.children.set(r,vD()),Mv(n.children.get(r),e=ur(e),t)}}function uk(n,e){if(gn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(mr,(r,i)=>{Mv(n,new $n(r),i)}),uk(n,e)}}if(n.children.size>0){const t=pn(e);return e=ur(e),n.children.has(t)&&uk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function dk(n,e,t){null!==n.value?t(e,n.value):function e8(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{dk(i,new $n(e.toString()+"/"+r),t)})}class t8{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Xi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class i8{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new t8(e);const r=1e4+2e4*Math.random();lI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Xi(e,(i,s)=>{s>0&&(0,B.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),lI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ka=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ka||(Ka={})),Ka))();function pk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ED{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ka.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(gn(this.path)){if(null!=this.affectedTree.value)return(0,B.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new $n(e));return new ED(Fn(),t,this.revert)}}return(0,B.hu)(pn(this.path)===e,"operationForChild called for unrelated child."),new ED(ur(this.path),this.affectedTree,this.revert)}}class _I{constructor(e,t){this.source=e,this.path=t,this.type=Ka.LISTEN_COMPLETE}operationForChild(e){return gn(this.path)?new _I(this.source,Fn()):new _I(this.source,ur(this.path))}}class t_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ka.OVERWRITE}operationForChild(e){return gn(this.path)?new t_(this.source,Fn(),this.snap.getImmediateChild(e)):new t_(this.source,ur(this.path),this.snap)}}class xv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ka.MERGE}operationForChild(e){if(gn(this.path)){const t=this.children.subtree(new $n(e));return t.isEmpty()?null:t.value?new t_(this.source,Fn(),t.value):new xv(this.source,Fn(),t)}return(0,B.hu)(pn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new xv(this.source,ur(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(gn(e))return this.isFullyInitialized()&&!this.filtered_;const t=pn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class s8{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function yI(n,e,t,r,i,s){const l=r.filter(d=>d.type===t);l.sort((d,p)=>function l8(n,e,t){if(null==e.childName||null==t.childName)throw(0,B.g5)("Should only compare child_ events.");const r=new yn(e.childName,e.snapshotNode),i=new yn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,p)),l.forEach(d=>{const p=function a8(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(p,n.query_))})})}function wD(n,e){return{eventCache:n,serverCache:e}}function vI(n,e,t,r){return wD(new wp(e,t,r),n.serverCache)}function eB(n,e,t,r){return wD(n.eventCache,new wp(e,t,r))}function ID(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function n_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let gk;class _r{constructor(e,t=(()=>(gk||(gk=new bo(W9)),gk))()){this.value=e,this.children=t}static fromObject(e){let t=new _r(null);return Xi(e,(r,i)=>{t=t.set(new $n(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Fn(),value:this.value};if(gn(e))return null;{const r=pn(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ur(e),t);return null!=s?{path:Mr(new $n(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(gn(e))return this;{const t=pn(e),r=this.children.get(t);return null!==r?r.subtree(ur(e)):new _r(null)}}set(e,t){if(gn(e))return new _r(t,this.children);{const r=pn(e),s=(this.children.get(r)||new _r(null)).set(ur(e),t),l=this.children.insert(r,s);return new _r(this.value,l)}}remove(e){if(gn(e))return this.children.isEmpty()?new _r(null):new _r(null,this.children);{const t=pn(e),r=this.children.get(t);if(r){const i=r.remove(ur(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new _r(null):new _r(this.value,s)}return this}}get(e){if(gn(e))return this.value;{const t=pn(e),r=this.children.get(t);return r?r.get(ur(e)):null}}setTree(e,t){if(gn(e))return t;{const r=pn(e),s=(this.children.get(r)||new _r(null)).setTree(ur(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new _r(this.value,l)}}fold(e){return this.fold_(Fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Mr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Fn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(gn(e))return null;{const s=pn(e),l=this.children.get(s);return l?l.findOnPath_(ur(e),Mr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Fn(),t)}foreachOnPath_(e,t,r){if(gn(e))return this;{this.value&&r(t,this.value);const i=pn(e),s=this.children.get(i);return s?s.foreachOnPath_(ur(e),Mr(t,i),r):new _r(null)}}foreach(e){this.foreach_(Fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Mr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ql{constructor(e){this.writeTree_=e}static empty(){return new Ql(new _r(null))}}function EI(n,e,t){if(gn(e))return new Ql(new _r(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=io(i,e);return s=s.updateChild(l,t),new Ql(n.writeTree_.set(i,s))}{const i=new _r(t),s=n.writeTree_.setTree(e,i);return new Ql(s)}}}function mk(n,e,t){let r=n;return Xi(t,(i,s)=>{r=EI(r,Mr(e,i),s)}),r}function tB(n,e){if(gn(e))return Ql.empty();{const t=n.writeTree_.setTree(e,new _r(null));return new Ql(t)}}function _k(n,e){return null!=r_(n,e)}function r_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(io(t.path,e)):null}function nB(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(mr,(r,i)=>{e.push(new yn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new yn(r,i.value))}),e}function Ip(n,e){if(gn(e))return n;{const t=r_(n,e);return new Ql(null!=t?new _r(t):n.writeTree_.subtree(e))}}function yk(n){return n.writeTree_.isEmpty()}function Nv(n,e){return rB(Fn(),n.writeTree_,e)}function rB(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,B.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=rB(Mr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Mr(n,".priority"),r)),t}}function TD(n,e){return lB(e,n)}function p8(n,e){if(n.snap)return qa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&qa(Mr(n.path,t),e))return!0;return!1}function m8(n){return n.visible}function iB(n,e,t){let r=Ql.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let d;if(s.snap)qa(t,l)?(d=io(t,l),r=EI(r,d,s.snap)):qa(l,t)&&(d=io(l,t),r=EI(r,Fn(),s.snap.getChild(d)));else{if(!s.children)throw(0,B.g5)("WriteRecord should have .snap or .children");if(qa(t,l))d=io(t,l),r=mk(r,d,s.children);else if(qa(l,t))if(d=io(l,t),gn(d))r=mk(r,Fn(),s.children);else{const p=(0,B.DV)(s.children,pn(d));if(p){const y=p.getChild(ur(d));r=EI(r,Fn(),y)}}}}}return r}function sB(n,e,t,r,i){if(r||i){const s=Ip(n.visibleWrites,e);return!i&&yk(s)?t:i||null!=t||_k(s,Fn())?Nv(iB(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(qa(y.path,e)||qa(e,y.path))},e),t||on.EMPTY_NODE):null}{const s=r_(n.visibleWrites,e);if(null!=s)return s;{const l=Ip(n.visibleWrites,e);return yk(l)?t:null!=t||_k(l,Fn())?Nv(l,t||on.EMPTY_NODE):null}}}function bD(n,e,t,r){return sB(n.writeTree,n.treePath,e,t,r)}function vk(n,e){return function _8(n,e,t){let r=on.EMPTY_NODE;const i=r_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(mr,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=Ip(n.visibleWrites,e);return t.forEachChild(mr,(l,d)=>{const p=Nv(Ip(s,new $n(l)),d);r=r.updateImmediateChild(l,p)}),nB(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return nB(Ip(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function oB(n,e,t,r){return function y8(n,e,t,r,i){(0,B.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Mr(e,t);if(_k(n.visibleWrites,s))return null;{const l=Ip(n.visibleWrites,s);return yk(l)?i.getChild(t):Nv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function CD(n,e){return function E8(n,e){return r_(n.visibleWrites,e)}(n.writeTree,Mr(n.treePath,e))}function Ek(n,e,t){return function v8(n,e,t,r){const i=Mr(e,t),s=r_(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Nv(Ip(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function aB(n,e){return lB(Mr(n.treePath,e),n.writeTree)}function lB(n,e){return{treePath:n,writeTree:e}}class b8{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,B.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,B.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,gI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,pI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Pv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,B.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,gI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const cB=new class C8{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class wk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new wp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ek(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:n_(this.viewCache_),s=function T8(n,e,t,r,i,s){return function w8(n,e,t,r,i,s,l){let d;const p=Ip(n.visibleWrites,e),y=r_(p,Fn());if(null!=y)d=y;else{if(null==t)return[];d=Nv(p,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const w=[],D=l.getCompare(),M=s?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let O=M.getNext();for(;O&&w.length<i;)0!==D(O,r)&&w.push(O),O=M.getNext();return w}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function uB(n,e,t,r,i,s){const l=e.eventCache;if(null!=CD(r,t))return e;{let d,p;if(gn(t))if((0,B.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=n_(e),D=vk(r,y instanceof on?y:on.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=bD(r,n_(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=pn(t);if(".priority"===y){(0,B.hu)(1===Ep(t),"Can't have a priority with additional path components");const w=l.getNode();p=e.serverCache.getNode();const D=oB(r,t,w,p);d=null!=D?n.filter.updatePriority(w,D):l.getNode()}else{const w=ur(t);let D;if(l.isCompleteForChild(y)){p=e.serverCache.getNode();const M=oB(r,t,l.getNode(),p);D=null!=M?l.getNode().getImmediateChild(y).updateChild(w,M):l.getNode().getImmediateChild(y)}else D=Ek(r,y,e.serverCache);d=null!=D?n.filter.updateChild(l.getNode(),y,D,w,i,s):l.getNode()}}return vI(e,d,l.isFullyInitialized()||gn(t),n.filter.filtersNodes())}}function AD(n,e,t,r,i,s,l,d){const p=e.serverCache;let y;const w=l?n.filter:n.filter.getIndexedFilter();if(gn(t))y=w.updateFullNode(p.getNode(),r,null);else if(w.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,r);y=w.updateFullNode(p.getNode(),O,null)}else{const O=pn(t);if(!p.isCompleteForPath(t)&&Ep(t)>1)return e;const H=ur(t),re=p.getNode().getImmediateChild(O).updateChild(H,r);y=".priority"===O?w.updatePriority(p.getNode(),re):w.updateChild(p.getNode(),O,re,H,cB,null)}const D=eB(e,y,p.isFullyInitialized()||gn(t),w.filtersNodes());return uB(n,D,t,i,new wk(i,D,s),d)}function Ik(n,e,t,r,i,s,l){const d=e.eventCache;let p,y;const w=new wk(i,e,s);if(gn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),p=vI(e,y,!0,n.filter.filtersNodes());else{const D=pn(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=vI(e,y,d.isFullyInitialized(),d.isFiltered());else{const M=ur(t),O=d.getNode().getImmediateChild(D);let H;if(gn(M))H=r;else{const X=w.getCompleteChild(D);H=null!=X?".priority"===JN(M)&&X.getChild(BU(M)).isEmpty()?X:X.updateChild(M,r):on.EMPTY_NODE}p=O.equals(H)?e:vI(e,n.filter.updateChild(d.getNode(),D,H,M,w,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function dB(n,e){return n.eventCache.isCompleteForChild(e)}function hB(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Tk(n,e,t,r,i,s,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=gn(t)?r:new _r(null).setTree(t,r);const w=e.serverCache.getNode();return y.children.inorderTraversal((D,M)=>{if(w.hasChild(D)){const H=hB(0,e.serverCache.getNode().getImmediateChild(D),M);p=AD(n,p,new $n(D),H,i,s,l,d)}}),y.children.inorderTraversal((D,M)=>{const O=!e.serverCache.isCompleteForChild(D)&&null===M.value;if(!w.hasChild(D)&&!O){const X=hB(0,e.serverCache.getNode().getImmediateChild(D),M);p=AD(n,p,new $n(D),X,i,s,l,d)}}),p}class k8{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new ak(r.getIndex()),s=function K5(n){return n.loadsAllData()?new ak(n.getIndex()):n.hasLimit()?new q5(n):new mI(n)}(r);this.processor_=function A8(n){return{filter:n}}(s);const l=t.serverCache,d=t.eventCache,p=i.updateFullNode(on.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(on.EMPTY_NODE,d.getNode(),null),w=new wp(p,l.isFullyInitialized(),i.filtersNodes()),D=new wp(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=wD(D,w),this.eventGenerator_=new s8(this.query_)}get query(){return this.query_}}function L8(n,e){const t=n_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!gn(e)&&!t.getImmediateChild(pn(e)).isEmpty())?t.getChild(e):null}function fB(n){return 0===n.eventRegistrations_.length}function pB(n,e,t){const r=[];if(t){(0,B.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function gB(n,e,t,r){e.type===Ka.MERGE&&null!==e.source.queryId&&((0,B.hu)(n_(n.viewCache_),"We should always have a full cache before handling merges"),(0,B.hu)(ID(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function S8(n,e,t,r,i){const s=new b8;let l,d;if(t.type===Ka.OVERWRITE){const y=t;y.source.fromUser?l=Ik(n,e,y.path,y.snap,r,i,s):((0,B.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!gn(y.path),l=AD(n,e,y.path,y.snap,r,i,d,s))}else if(t.type===Ka.MERGE){const y=t;y.source.fromUser?l=function P8(n,e,t,r,i,s,l){let d=e;return r.foreach((p,y)=>{const w=Mr(t,p);dB(e,pn(w))&&(d=Ik(n,d,w,y,i,s,l))}),r.foreach((p,y)=>{const w=Mr(t,p);dB(e,pn(w))||(d=Ik(n,d,w,y,i,s,l))}),d}(n,e,y.path,y.children,r,i,s):((0,B.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),l=Tk(n,e,y.path,y.children,r,i,d,s))}else if(t.type===Ka.ACK_USER_WRITE){const y=t;l=y.revert?function N8(n,e,t,r,i,s){let l;if(null!=CD(r,t))return e;{const d=new wk(r,e,i),p=e.eventCache.getNode();let y;if(gn(t)||".priority"===pn(t)){let w;if(e.serverCache.isFullyInitialized())w=bD(r,n_(e));else{const D=e.serverCache.getNode();(0,B.hu)(D instanceof on,"serverChildren would be complete if leaf node"),w=vk(r,D)}y=n.filter.updateFullNode(p,w,s)}else{const w=pn(t);let D=Ek(r,w,e.serverCache);null==D&&e.serverCache.isCompleteForChild(w)&&(D=p.getImmediateChild(w)),y=null!=D?n.filter.updateChild(p,w,D,ur(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(p,w,on.EMPTY_NODE,ur(t),d,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=bD(r,n_(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=CD(r,Fn()),vI(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function M8(n,e,t,r,i,s,l){if(null!=CD(i,t))return e;const d=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(gn(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return AD(n,e,t,p.getNode().getChild(t),i,s,d,l);if(gn(t)){let y=new _r(null);return p.getNode().forEachChild(xu,(w,D)=>{y=y.set(new $n(w),D)}),Tk(n,e,t,y,i,s,d,l)}return e}{let y=new _r(null);return r.foreach((w,D)=>{const M=Mr(t,w);p.isCompleteForPath(M)&&(y=y.set(w,p.getNode().getChild(M)))}),Tk(n,e,t,y,i,s,d,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Ka.LISTEN_COMPLETE)throw(0,B.g5)("Unknown operation type: "+t.type);l=function x8(n,e,t,r,i){const s=e.serverCache;return uB(n,eB(e,s.getNode(),s.isFullyInitialized()||gn(t),s.isFiltered()),t,r,cB,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function R8(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ID(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(YU(ID(e)))}}(e,l,p),{viewCache:l,changes:p}}(n.processor_,i,e,t,r);return function D8(n,e){(0,B.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,B.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,B.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,mB(n,s.changes,s.viewCache.eventCache.getNode(),null)}function mB(n,e,t,r){return function o8(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function W5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),yI(n,i,"child_removed",e,r,t),yI(n,i,"child_added",e,r,t),yI(n,i,"child_moved",s,r,t),yI(n,i,"child_changed",e,r,t),yI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let DD,RD;class _B{constructor(){this.views=new Map}}function bk(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,B.hu)(null!=s,"SyncTree gave us an op for an invalid query."),gB(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(gB(l,e,t,r));return s}}function yB(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=bD(t,i?r:null),p=!1;d?p=!0:r instanceof on?(d=vk(t,r),p=!1):(d=on.EMPTY_NODE,p=!1);const y=wD(new wp(d,p,!1),new wp(r,i,!1));return new k8(e,y)}return l}function vB(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Tp(n,e){let t=null;for(const r of n.views.values())t=t||L8(r,e);return t}function EB(n,e){return e._queryParams.loadsAllData()?SD(n):n.views.get(e._queryIdentifier)}function wB(n,e){return null!=EB(n,e)}function bp(n){return null!=SD(n)}function SD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let q8=1;class IB{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _r(null),this.pendingWriteTree_=function I8(){return{visibleWrites:Ql.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ck(n,e,t,r,i){return function u8(n,e,t,r,i){(0,B.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=EI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?kv(n,new t_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Cp(n,e,t=!1){const r=function h8(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function f8(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,B.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&p8(d,r.path)?i=!1:qa(r.path,d.path)&&(s=!0)),l--}return!!i&&(s?(function g8(n){n.visibleWrites=iB(n.allWrites,m8,Fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=tB(n.visibleWrites,r.path):Xi(r.children,p=>{n.visibleWrites=tB(n.visibleWrites,Mr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new _r(null);return null!=r.snap?s=s.set(Fn(),!0):Xi(r.children,l=>{s=s.set(new $n(l),!0)}),kv(n,new ED(r.path,s,t))}return[]}function wI(n,e,t){return kv(n,new t_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function PD(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let d=[];if(l&&("default"===e._queryIdentifier||wB(l,e))){const p=function G8(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const d=bp(n);if("default"===i)for(const[p,y]of n.views.entries())l=l.concat(pB(y,t,r)),fB(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(l=l.concat(pB(p,t,r)),fB(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!bp(n)&&s.push(new(function j8(){return(0,B.hu)(DD,"Reference.ts has not been loaded"),DD}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function H8(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=p.removed;if(d=p.events,!i){const w=-1!==y.findIndex(M=>M._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(s,(M,O)=>bp(O));if(w&&!D){const M=n.syncPointTree_.subtree(s);if(!M.isEmpty()){const O=function eK(n){return n.fold((e,t,r)=>{if(t&&bp(t))return[SD(t)];{let i=[];return t&&(i=vB(t)),Xi(r,(s,l)=>{i=i.concat(l)}),i}})}(M);for(let H=0;H<O.length;++H){const X=O[H],re=X.query,ye=AB(n,X);n.listenProvider_.startListening(TI(re),II(n,re),ye.hashFn,ye.onComplete)}}}!D&&y.length>0&&!r&&(w?n.listenProvider_.stopListening(TI(e),null):y.forEach(M=>{const O=n.queryToTagMap.get(xD(M));n.listenProvider_.stopListening(TI(M),O)}))}!function tK(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=xD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function TB(n,e,t,r){const i=Dk(n,r);if(null!=i){const s=Sk(i),l=s.path,d=s.queryId,p=io(l,e);return Rk(n,l,new t_(pk(d),p,t))}return[]}function Ak(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(M,O)=>{const H=io(M,i);s=s||Tp(O,H),l=l||bp(O)});let p,d=n.syncPointTree_.get(i);d?(l=l||bp(d),s=s||Tp(d,Fn())):(d=new _B,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=s?p=!0:(p=!1,s=on.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((O,H)=>{const X=Tp(H,Fn());X&&(s=s.updateImmediateChild(O,X))}));const y=wB(d,e);if(!y&&!e._queryParams.loadsAllData()){const M=xD(e);(0,B.hu)(!n.queryToTagMap.has(M),"View does not exist, but we have a tag");const O=function nK(){return q8++}();n.queryToTagMap.set(M,O),n.tagToQueryMap.set(O,M)}let D=function $8(n,e,t,r,i,s){const l=yB(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function V8(n,e){n.eventRegistrations_.push(e)}(l,t),function U8(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(mr,(s,l)=>{r.push(Pv(s,l))}),t.isFullyInitialized()&&r.push(YU(t.getNode())),mB(n,r,t.getNode(),e)}(l,t)}(d,e,t,TD(n.pendingWriteTree_,i),s,p);if(!y&&!l&&!r){const M=EB(d,e);D=D.concat(function rK(n,e,t){const r=e._path,i=II(n,e),s=AB(n,t),l=n.listenProvider_.startListening(TI(e),i,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,B.hu)(!bp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,w,D)=>{if(!gn(y)&&w&&bp(w))return[SD(w).query];{let M=[];return w&&(M=M.concat(vB(w).map(O=>O.query))),Xi(D,(O,H)=>{M=M.concat(H)}),M}});for(let y=0;y<p.length;++y){const w=p[y];n.listenProvider_.stopListening(TI(w),II(n,w))}}return l}(n,e,M))}return D}function MD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,d)=>{const y=Tp(d,io(l,e));if(y)return y});return sB(i,e,s,t,!0)}function kv(n,e){return bB(e,n.syncPointTree_,null,TD(n.pendingWriteTree_,Fn()))}function bB(n,e,t,r){if(gn(n.path))return CB(n,e,t,r);{const i=e.get(Fn());null==t&&null!=i&&(t=Tp(i,Fn()));let s=[];const l=pn(n.path),d=n.operationForChild(l),p=e.children.get(l);if(p&&d){const y=t?t.getImmediateChild(l):null,w=aB(r,l);s=s.concat(bB(d,p,y,w))}return i&&(s=s.concat(bk(i,n,r,t))),s}}function CB(n,e,t,r){const i=e.get(Fn());null==t&&null!=i&&(t=Tp(i,Fn()));let s=[];return e.children.inorderTraversal((l,d)=>{const p=t?t.getImmediateChild(l):null,y=aB(r,l),w=n.operationForChild(l);w&&(s=s.concat(CB(w,d,p,y)))}),i&&(s=s.concat(bk(i,n,r,t))),s}function AB(n,e){const t=e.query,r=II(n,t);return{hashFn:()=>(function O8(n){return n.viewCache_.serverCache.getNode()}(e)||on.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Q8(n,e,t){const r=Dk(n,t);if(r){const i=Sk(r),s=i.path,l=i.queryId,d=io(s,e);return Rk(n,s,new _I(pk(l),d))}return[]}(n,t._path,r):function Y8(n,e){return kv(n,new _I({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Z9(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return PD(n,t,null,s)}}}}function II(n,e){const t=xD(e);return n.queryToTagMap.get(t)}function xD(n){return n._path.toString()+"$"+n._queryIdentifier}function Dk(n,e){return n.tagToQueryMap.get(e)}function Sk(n){const e=n.indexOf("$");return(0,B.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new $n(n.substr(0,e))}}function Rk(n,e,t){const r=n.syncPointTree_.get(e);return(0,B.hu)(r,"Missing sync point for query tag that we're tracking"),bk(r,t,TD(n.pendingWriteTree_,e),null)}function TI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function W8(){return(0,B.hu)(RD,"Reference.ts has not been loaded"),RD}())(n._repo,n._path):n}class Pk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Pk(t)}node(){return this.node_}}class Mk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Mr(this.path_,e);return new Mk(this.syncTree_,t)}node(){return MD(this.syncTree_,this.path_)}}const iK=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},DB=function(n,e,t){return n&&"object"==typeof n?((0,B.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?sK(n[".sv"],e,t):"object"==typeof n[".sv"]?oK(n[".sv"],e):void(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},sK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,B.hu)(!1,"Unexpected server value: "+n)},oK=function(n,e,t){n.hasOwnProperty("increment")||(0,B.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,B.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,B.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},SB=function(n,e,t,r){return Nk(e,new Mk(t,n),r)},xk=function(n,e,t){return Nk(n,new Pk(e),t)};function Nk(n,e,t){const r=n.getPriority().val(),i=DB(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,d=DB(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new Sv(d,Gr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new Sv(i))),l.forEachChild(mr,(d,p)=>{const y=Nk(p,e.getImmediateChild(d),t);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class kk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function ND(n,e){let t=e instanceof $n?e:new $n(e),r=n,i=pn(t);for(;null!==i;){const s=(0,B.DV)(r.node.children,i)||{children:{},childCount:0};r=new kk(i,r,s),t=ur(t),i=pn(t)}return r}function i_(n){return n.node.value}function Ok(n,e){n.node.value=e,Fk(n)}function RB(n){return n.node.childCount>0}function kD(n,e){Xi(n.node.children,(t,r)=>{e(new kk(t,n,r))})}function PB(n,e,t,r){t&&!r&&e(n),kD(n,i=>{PB(i,e,!0,r)}),t&&r&&e(n)}function bI(n){return new $n(null===n.parent?n.name:bI(n.parent)+"/"+n.name)}function Fk(n){null!==n.parent&&function cK(n,e,t){const r=function aK(n){return void 0===i_(n)&&!RB(n)}(t),i=(0,B.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Fk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Fk(n))}(n.parent,n.name,n)}const uK=/[\[\].#$\/\u0000-\u001F\u007F]/,dK=/[\[\].#$\u0000-\u001F\u007F]/,Lk=10485760,OD=function(n){return"string"==typeof n&&0!==n.length&&!uK.test(n)},MB=function(n){return"string"==typeof n&&0!==n.length&&!dK.test(n)},CI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!lD(n)||n&&"object"==typeof n&&(0,B.r3)(n,".sv")},Nu=function(n,e,t,r){r&&void 0===e||AI((0,B.gK)(n,"value"),e,t)},AI=function(n,e,t){const r=t instanceof $n?new S5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Jm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Jm(r)+" with contents = "+e.toString());if(lD(e))throw new Error(n+"contains "+e.toString()+" "+Jm(r));if("string"==typeof e&&e.length>Lk/3&&(0,B.ug)(e)>Lk)throw new Error(n+"contains a string greater than "+Lk+" utf8 bytes "+Jm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Xi(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!OD(l)))throw new Error(n+" contains an invalid key ("+l+") "+Jm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function R5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,B.ug)(e),jU(n)})(r,l),AI(n,d,r),function P5(n){const e=n.parts_.pop();n.byteLength_-=(0,B.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Jm(r)+" in addition to actual children.")}},xB=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,B.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Xi(e,(l,d)=>{const p=new $n(l);if(AI(i,d,Mr(t,p)),".priority"===JN(p)&&!CI(d))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=uI(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!OD(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(D5);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&qa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Vk=function(n,e,t){if(!t||void 0!==e){if(lD(e))throw new Error((0,B.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!CI(e))throw new Error((0,B.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},DI=function(n,e,t,r){if(!(r&&void 0===t||OD(t)))throw new Error((0,B.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},SI=function(n,e,t,r){if(!(r&&void 0===t||MB(t)))throw new Error((0,B.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pK=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),SI(n,e,t,r)},Za=function(n,e){if(".info"===pn(e))throw new Error(n+" failed = Can't modify data under /.info/")},NB=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!OD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),MB(n)}(t))throw new Error((0,B.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class gK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function FD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!ek(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function kB(n,e,t){FD(n,t),OB(n,r=>ek(r,e))}function ra(n,e,t){FD(n,t),OB(n,r=>qa(r,e)||qa(e,r))}function OB(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(mK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function mK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Qm&&Qi("event: "+t.toString()),Av(r)}}}const FB="repo_interrupt",_K=25;class yK{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vD(),this.transactionQueueTree_=new kk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function LB(n){const t=n.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function RI(n){return iK({timestamp:LB(n)})}function VB(n,e,t,r,i){n.dataUpdateCount++;const s=new $n(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const p=(0,B.UI)(t,y=>Gr(y));l=function X8(n,e,t,r){const i=Dk(n,r);if(i){const s=Sk(i),l=s.path,d=s.queryId,p=io(l,e),y=_r.fromObject(t);return Rk(n,l,new xv(pk(d),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=Gr(t);l=TB(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,B.UI)(t,y=>Gr(y));l=function Z8(n,e,t){const r=_r.fromObject(t);return kv(n,new xv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=Gr(t);l=wI(n.serverSyncTree_,s,p)}let d=s;l.length>0&&(d=Fv(n,s)),ra(n.eventQueue_,d,l)}function UB(n,e){Uk(n,"connected",e),!1===e&&function TK(n){Ov(n,"onDisconnectEvents");const e=RI(n),t=vD();dk(n.onDisconnect_,Fn(),(i,s)=>{const l=SB(i,s,n.serverSyncTree_,e);Mv(t,i,l)});let r=[];dk(t,Fn(),(i,s)=>{r=r.concat(wI(n.serverSyncTree_,i,s));const l=$k(n,i);Fv(n,l)}),n.onDisconnect_=vD(),ra(n.eventQueue_,Fn(),r)}(n)}function Uk(n,e,t){const r=new $n("/.info/"+e),i=Gr(t);n.infoData_.updateSnapshot(r,i);const s=wI(n.infoSyncTree_,r,i);ra(n.eventQueue_,r,s)}function LD(n){return n.nextWriteId_++}function Bk(n,e,t,r,i){Ov(n,"set",{path:e.toString(),value:t,priority:r});const s=RI(n),l=Gr(t,r),d=MD(n.serverSyncTree_,e),p=xk(l,d,s),y=LD(n),w=Ck(n.serverSyncTree_,e,p,y,!0);FD(n.eventQueue_,w),n.server_.put(e.toString(),l.val(!0),(M,O)=>{const H="ok"===M;H||Ns("set at "+e+" failed: "+M);const X=Cp(n.serverSyncTree_,y,!H);ra(n.eventQueue_,e,X),Ap(0,i,M,O)});const D=$k(n,e);Fv(n,D),ra(n.eventQueue_,D,[])}function bK(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&uk(n.onDisconnect_,e),Ap(0,t,r,i)})}function BB(n,e,t,r){const i=Gr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&Mv(n.onDisconnect_,e,i),Ap(0,r,s,l)})}function jk(n,e,t){let r;r=".info"===pn(e._path)?PD(n.infoSyncTree_,e,t):PD(n.serverSyncTree_,e,t),kB(n.eventQueue_,e._path,r)}function jB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(FB)}function Ov(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qi(t,...e)}function Ap(n,e,t,r){e&&Av(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function Hk(n,e,t){return MD(n.serverSyncTree_,e,t)||on.EMPTY_NODE}function VD(n,e=n.transactionQueueTree_){if(e||UD(n,e),i_(e)){const t=$B(n,e);(0,B.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function PK(n,e,t){const r=t.map(y=>y.currentWriteId),i=Hk(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,B.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const D=io(e,w.path);s=s.updateChild(D,w.currentOutputSnapshotRaw)}const d=s.val(!0),p=e;n.server_.put(p.toString(),d,y=>{Ov(n,"transaction put response",{path:p.toString(),status:y});let w=[];if("ok"===y){const D=[];for(let M=0;M<t.length;M++)t[M].status=2,w=w.concat(Cp(n.serverSyncTree_,t[M].currentWriteId)),t[M].onComplete&&D.push(()=>t[M].onComplete(null,!0,t[M].currentOutputSnapshotResolved)),t[M].unwatcher();UD(n,ND(n.transactionQueueTree_,e)),VD(n,n.transactionQueueTree_),ra(n.eventQueue_,e,w);for(let M=0;M<D.length;M++)Av(D[M])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Ns("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}Fv(n,e)}},l)}(n,bI(e),t)}else RB(e)&&kD(e,t=>{VD(n,t)})}function Fv(n,e){const t=HB(n,e),r=bI(t);return function MK(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const p=e[d],y=io(t,p.path);let D,w=!1;if((0,B.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)w=!0,D=p.abortReason,i=i.concat(Cp(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=_K)w=!0,D="maxretry",i=i.concat(Cp(n.serverSyncTree_,p.currentWriteId,!0));else{const M=Hk(n,p.path,l);p.currentInputSnapshot=M;const O=e[d].update(M.val());if(void 0!==O){AI("transaction failed: Data returned ",O,p.path);let H=Gr(O);"object"==typeof O&&null!=O&&(0,B.r3)(O,".priority")||(H=H.updatePriority(M.getPriority()));const re=p.currentWriteId,ye=RI(n),je=xk(H,M,ye);p.currentOutputSnapshotRaw=H,p.currentOutputSnapshotResolved=je,p.currentWriteId=LD(n),l.splice(l.indexOf(re),1),i=i.concat(Ck(n.serverSyncTree_,p.path,je,p.currentWriteId,p.applyLocally)),i=i.concat(Cp(n.serverSyncTree_,re,!0))}else w=!0,D="nodata",i=i.concat(Cp(n.serverSyncTree_,p.currentWriteId,!0))}ra(n.eventQueue_,t,i),i=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}UD(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Av(r[d]);VD(n,n.transactionQueueTree_)}(n,$B(n,t),r),r}function HB(n,e){let t,r=n.transactionQueueTree_;for(t=pn(e);null!==t&&void 0===i_(r);)r=ND(r,t),t=pn(e=ur(e));return r}function $B(n,e){const t=[];return GB(n,e,t),t.sort((r,i)=>r.order-i.order),t}function GB(n,e,t){const r=i_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);kD(e,i=>{GB(n,i,t)})}function UD(n,e){const t=i_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Ok(e,t.length>0?t:void 0)}kD(e,r=>{UD(n,r)})}function $k(n,e){const t=bI(HB(n,e)),r=ND(n.transactionQueueTree_,e);return function lK(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Gk(n,i)}),Gk(n,r),PB(r,i=>{Gk(n,i)}),t}function Gk(n,e){const t=i_(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,B.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,B.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Cp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ok(e,void 0):t.length=s+1,ra(n.eventQueue_,bI(e),i);for(let l=0;l<r.length;l++)Av(r[l])}}const zk=function(n,e){const t=kK(n),r=t.namespace;return"firebase.com"===t.domain&&Mu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Mu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new $n(t.pathString)}},kK=function(n){let e="",t="",r="",i="",s="",l=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(w,D)),w<D&&(i=function xK(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(w,D)));const M=function NK(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ns(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(l="https"===d||"wss"===d,p=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const H=e.indexOf(".");r=e.substring(0,H).toLowerCase(),t=e.substring(H+1),s=r}"ns"in M&&(s=M.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:s}},zB="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",OK=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=zB.charAt(t%64),t=Math.floor(t/64);(0,B.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=zB.charAt(e[i]);return(0,B.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class WB{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,B.Wl)(this.snapshot.exportVal())}}class qB{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,B.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class KB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new B.BH;return bK(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Za("OnDisconnect.remove",this._path);const e=new B.BH;return BB(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Za("OnDisconnect.set",this._path),Nu("OnDisconnect.set",e,this._path,!1);const t=new B.BH;return BB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Za("OnDisconnect.setWithPriority",this._path),Nu("OnDisconnect.setWithPriority",e,this._path,!1),Vk("OnDisconnect.setWithPriority",t,!1);const r=new B.BH;return function CK(n,e,t,r,i){const s=Gr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,d)=>{"ok"===l&&Mv(n.onDisconnect_,e,s),Ap(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Za("OnDisconnect.update",this._path),xB("OnDisconnect.update",e,this._path,!1);const t=new B.BH;return function AK(n,e,t,r){if((0,B.xb)(t))return Qi("onDisconnect().update() called with empty data.  Don't do anything."),void Ap(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Xi(t,(l,d)=>{const p=Gr(d);Mv(n.onDisconnect_,Mr(e,l),p)}),Ap(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return gn(this._path)?null:JN(this._path)}get ref(){return new Ya(this._repo,this._path)}get _queryIdentifier(){const e=XU(this._queryParams),t=zN(e);return"{}"===t?"default":t}get _queryObject(){return XU(this._queryParams)}isEqual(e){if(!((e=(0,B.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=ek(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function A5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function BD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Dp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===xu){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==yp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ch)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===mr){if(null!=e&&!CI(e)||null!=t&&!CI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,B.hu)(n.getIndex()instanceof sk||n.getIndex()===ok,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function jD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ya extends Co{constructor(e,t){super(e,t,new mD,!1)}get parent(){const e=BU(this._path);return null===e?null:new Ya(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class s_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new $n(e),r=o_(this.ref,e);return new s_(this._node.getChild(t),r,mr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new s_(i,o_(this.ref,r),mr)))}hasChild(e){const t=new $n(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ZB(n,e){return(n=(0,B.m9)(n))._checkNotDeleted("ref"),void 0!==e?o_(n._root,e):n._root}function YB(n,e){(n=(0,B.m9)(n))._checkNotDeleted("refFromURL");const t=zk(e,n._repo.repoInfo_.nodeAdmin);NB("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Mu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ZB(n,t.path.toString())}function o_(n,e){return null===pn((n=(0,B.m9)(n))._path)?pK("child","path",e,!1):SI("child","path",e,!1),new Ya(n._repo,Mr(n._path,e))}function qk(n,e){n=(0,B.m9)(n),Za("set",n._path),Nu("set",e,n._path,!1);const t=new B.BH;return Bk(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function BK(n,e){xB("update",e,n._path,!1);const t=new B.BH;return function IK(n,e,t,r){Ov(n,"update",{path:e.toString(),value:t});let i=!0;const s=RI(n),l={};if(Xi(t,(d,p)=>{i=!1,l[d]=SB(Mr(e,d),Gr(p),n.serverSyncTree_,s)}),i)Qi("update() called with empty data.  Don't do anything."),Ap(0,r,"ok",void 0);else{const d=LD(n),p=function K8(n,e,t,r){!function d8(n,e,t,r){(0,B.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=mk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=_r.fromObject(t);return kv(n,new xv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);FD(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,w)=>{const D="ok"===y;D||Ns("update at "+e+" failed: "+y);const M=Cp(n.serverSyncTree_,d,!D),O=M.length>0?Fv(n,e):e;ra(n.eventQueue_,O,M),Ap(0,r,y,w)}),Xi(t,y=>{const w=$k(n,Mr(e,y));Fv(n,w)}),ra(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function jK(n){n=(0,B.m9)(n);const e=new Wk(()=>{}),t=new PI(e);return function wK(n,e,t){const r=function J8(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const D=io(y,t);r=r||Tp(w,D)});let i=n.syncPointTree_.get(t);i?r=r||Tp(i,Fn()):(i=new _B,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new wp(r,!0,!1):null;return function F8(n){return ID(n.viewCache_)}(yB(i,e,TD(n.pendingWriteTree_,e._path),s?l.getNode():on.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Gr(i).withIndex(e._queryParams.getIndex());let l;if(Ak(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=wI(n.serverSyncTree_,e._path,s);else{const d=II(n.serverSyncTree_,e);l=TB(n.serverSyncTree_,e._path,s,d)}return ra(n.eventQueue_,e._path,l),PD(n.serverSyncTree_,e,t,null,!0),s},i=>(Ov(n,"get for query "+(0,B.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new s_(r,new Ya(n._repo,n._path),n._queryParams.getIndex()))}class PI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new WB("value",this,new s_(e.snapshotNode,new Ya(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qB(this,e,t):null}matches(e){return e instanceof PI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class HD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new qB(this,e,t):null}createEvent(e,t){(0,B.hu)(null!=e.childName,"Child events should have a childName.");const r=o_(new Ya(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new WB(e.type,this,new s_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof HD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function MI(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(w,D)=>{jk(n._repo,n,d),p(w,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new Wk(t,s||void 0),d="value"===e?new PI(l):new HD(e,l);return function DK(n,e,t){let r;r=".info"===pn(e._path)?Ak(n.infoSyncTree_,e,t):Ak(n.serverSyncTree_,e,t),kB(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>jk(n._repo,n,d)}function Kk(n,e,t,r){return MI(n,"value",e,t,r)}function QB(n,e,t,r){return MI(n,"child_added",e,t,r)}function XB(n,e,t,r){return MI(n,"child_changed",e,t,r)}function JB(n,e,t,r){return MI(n,"child_moved",e,t,r)}function ej(n,e,t,r){return MI(n,"child_removed",e,t,r)}function tj(n,e,t){let r=null;const i=t?new Wk(t):null;"value"===e?r=new PI(i):e&&(r=new HD(e,i)),jk(n._repo,n,r)}class Xl{}class nj extends Xl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Nu("endAt",this._value,e._path,!0);const t=ck(e._queryParams,this._value,this._key);if(jD(t),Dp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class $K extends Xl{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Nu("endBefore",this._value,e._path,!1);const t=function X5(n,e,t){let r;return r=ck(n,e,n.index_===xu||t?t:yp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(jD(t),Dp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class rj extends Xl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Nu("startAt",this._value,e._path,!0);const t=lk(e._queryParams,this._value,this._key);if(jD(t),Dp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class WK extends Xl{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Nu("startAfter",this._value,e._path,!1);const t=function Q5(n,e,t){let r;return r=lk(n,e,n.index_===xu||t?t:ch),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(jD(t),Dp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class KK extends Xl{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function Z5(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class YK extends Xl{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function Y5(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class XK extends Xl{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){BD(e,"orderByChild");const t=new $n(this._path);if(gn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new sk(t),i=_D(e._queryParams,r);return Dp(i),new Co(e._repo,e._path,i,!0)}}class e7 extends Xl{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){BD(e,"orderByKey");const t=_D(e._queryParams,xu);return Dp(t),new Co(e._repo,e._path,t,!0)}}class n7 extends Xl{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){BD(e,"orderByPriority");const t=_D(e._queryParams,mr);return Dp(t),new Co(e._repo,e._path,t,!0)}}class i7 extends Xl{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){BD(e,"orderByValue");const t=_D(e._queryParams,ok);return Dp(t),new Co(e._repo,e._path,t,!0)}}class o7 extends Xl{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Nu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nj(this._value,this._key)._apply(new rj(this._value,this._key)._apply(e))}}function Jl(n,...e){let t=(0,B.m9)(n);for(const r of e)t=r._apply(t);return t}(function B8(n){(0,B.hu)(!DD,"__referenceConstructor has already been defined"),DD=n})(Ya),function z8(n){(0,B.hu)(!RD,"__referenceConstructor has already been defined"),RD=n}(Ya);const l7="FIREBASE_DATABASE_EMULATOR_HOST",Zk={};let ij=!1;function Yk(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Mu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qi("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,l=zk(s,i),d=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env[l7]),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,l=zk(s,i),d=l.repoInfo):p=!l.repoInfo.secure;const w=i&&p?new cI(cI.OWNER):new t5(n.name,n.options,e);NB("Invalid Firebase Database URL",l),gn(l.path)||Mu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function d7(n,e,t,r){let i=Zk[e.name];i||(i={},Zk[e.name]=i);let s=i[n.toURLString()];return s&&Mu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new yK(n,ij,t,r),i[n.toURLString()]=s,s}(d,n,w,new e5(n.name,t));return new f7(D,n)}class f7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vK(n,e,t){if(n.stats_=YN(n.repoInfo_),n.forceRestClient_||J9())n.server_=new yD(n.repoInfo_,(r,i,s,l)=>{VB(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>UB(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,B.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new e_(n.repoInfo_,e,(r,i,s,l)=>{VB(n,r,i,s,l)},r=>{UB(n,r)},r=>{!function EK(n,e){Xi(e,(t,r)=>{Uk(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function i5(n,e){const t=n.toString();return ZN[t]||(ZN[t]=e()),ZN[t]}(n.repoInfo_,()=>new i8(n.stats_,n.server_)),n.infoData_=new J5,n.infoSyncTree_=new IB({startListening:(r,i,s,l)=>{let d=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(d=wI(n.infoSyncTree_,r._path,p),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),Uk(n,"connected",!1),n.serverSyncTree_=new IB({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(d,p)=>{const y=l(d,p);ra(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ya(this._repo,Fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function u7(n,e){const t=Zk[e];(!t||t[n.key]!==n)&&Mu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jB(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Mu("Cannot call "+e+" on a deleted database.")}}function sj(){SU.IS_TRANSPORT_INITIALIZED&&Ns("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function p7(){sj(),vp.forceDisallow()}function g7(){sj(),Dv.forceDisallow(),vp.forceAllow()}function y7(n,e){lU(n,e)}const E7={".sv":"timestamp"};class T7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}e_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},e_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function v7(n){HN(Ni.SDK_VERSION),(0,Ni._registerComponent)(new Ds.wA("database",(e,{instanceIdentifier:t})=>Yk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ni.registerVersion)(nU,"1.0.3",n),(0,Ni.registerVersion)(nU,"1.0.3","esm2017")}();const D7=new ki.Yd("@firebase/database-compat"),aj=function(n){D7.warn("FIREBASE WARNING: "+n)};class P7{constructor(e){this._delegate=e}cancel(e){(0,B.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,B.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,B.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,B.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,B.Dv)("OnDisconnect.set",1,2,arguments.length),(0,B.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,B.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,B.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,aj("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,B.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class M7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,B.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Sp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,B.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,B.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,B.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,B.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,B.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),SI("DataSnapshot.child","path",e,!1),new Sp(this._database,this._delegate.child(e))}hasChild(e){return(0,B.Dv)("DataSnapshot.hasChild",1,1,arguments.length),SI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,B.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,B.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,B.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Sp(this._database,t)))}hasChildren(){return(0,B.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,B.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,B.Dv)("DataSnapshot.ref",0,0,arguments.length),new ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ys{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,B.Dv)("Query.on",2,4,arguments.length),(0,B.Wj)("Query.on","callback",t,!1);const l=ys.getCancelAndContextArgs_("Query.on",r,i),d=(y,w)=>{t.call(l.context,new Sp(this.database,y),w)};d.userCallback=t,d.context=l.context;const p=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return Kk(this._delegate,d,p),t;case"child_added":return QB(this._delegate,d,p),t;case"child_removed":return ej(this._delegate,d,p),t;case"child_changed":return XB(this._delegate,d,p),t;case"child_moved":return JB(this._delegate,d,p),t;default:throw new Error((0,B.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,B.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,B.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,B.Wj)("Query.off","callback",t,!0),(0,B.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,tj(this._delegate,e,i)}else tj(this._delegate,e)}get(){return jK(this._delegate).then(e=>new Sp(this.database,e))}once(e,t,r,i){(0,B.Dv)("Query.once",1,4,arguments.length),(0,B.Wj)("Query.once","callback",t,!0);const s=ys.getCancelAndContextArgs_("Query.once",r,i),l=new B.BH,d=(y,w)=>{const D=new Sp(this.database,y);t&&t.call(s.context,D,w),l.resolve(D)};d.userCallback=t,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":Kk(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":QB(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":ej(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":XB(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":JB(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,B.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,B.Dv)("Query.limitToFirst",1,1,arguments.length),new ys(this.database,Jl(this._delegate,function ZK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new KK(n)}(e)))}limitToLast(e){return(0,B.Dv)("Query.limitToLast",1,1,arguments.length),new ys(this.database,Jl(this._delegate,function QK(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new YK(n)}(e)))}orderByChild(e){return(0,B.Dv)("Query.orderByChild",1,1,arguments.length),new ys(this.database,Jl(this._delegate,function JK(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return SI("orderByChild","path",n,!1),new XK(n)}(e)))}orderByKey(){return(0,B.Dv)("Query.orderByKey",0,0,arguments.length),new ys(this.database,Jl(this._delegate,function t7(){return new e7}()))}orderByPriority(){return(0,B.Dv)("Query.orderByPriority",0,0,arguments.length),new ys(this.database,Jl(this._delegate,function r7(){return new n7}()))}orderByValue(){return(0,B.Dv)("Query.orderByValue",0,0,arguments.length),new ys(this.database,Jl(this._delegate,function s7(){return new i7}()))}startAt(e=null,t){return(0,B.Dv)("Query.startAt",0,2,arguments.length),new ys(this.database,Jl(this._delegate,function zK(n=null,e){return DI("startAt","key",e,!0),new rj(n,e)}(e,t)))}startAfter(e=null,t){return(0,B.Dv)("Query.startAfter",0,2,arguments.length),new ys(this.database,Jl(this._delegate,function qK(n,e){return DI("startAfter","key",e,!0),new WK(n,e)}(e,t)))}endAt(e=null,t){return(0,B.Dv)("Query.endAt",0,2,arguments.length),new ys(this.database,Jl(this._delegate,function HK(n,e){return DI("endAt","key",e,!0),new nj(n,e)}(e,t)))}endBefore(e=null,t){return(0,B.Dv)("Query.endBefore",0,2,arguments.length),new ys(this.database,Jl(this._delegate,function GK(n,e){return DI("endBefore","key",e,!0),new $K(n,e)}(e,t)))}equalTo(e,t){return(0,B.Dv)("Query.equalTo",1,2,arguments.length),new ys(this.database,Jl(this._delegate,function a7(n,e){return DI("equalTo","key",e,!0),new o7(n,e)}(e,t)))}toString(){return(0,B.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,B.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,B.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ys))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,B.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,B.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,B.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ia(this.database,new Ya(this._delegate._repo,this._delegate._path))}}class ia extends ys{constructor(e,t){super(e,new Co(t._repo,t._path,new mD,!1)),this.database=e,this._delegate=t}getKey(){return(0,B.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,B.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ia(this.database,o_(this._delegate,e))}getParent(){(0,B.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ia(this.database,e):null}getRoot(){return(0,B.Dv)("Reference.root",0,0,arguments.length),new ia(this.database,this._delegate.root)}set(e,t){(0,B.Dv)("Reference.set",1,2,arguments.length),(0,B.Wj)("Reference.set","onComplete",t,!0);const r=qk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,B.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,aj("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Za("Reference.update",this._delegate._path),(0,B.Wj)("Reference.update","onComplete",t,!0);const r=BK(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,B.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,B.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function UK(n,e,t){if(Za("setWithPriority",n._path),Nu("setWithPriority",e,n._path,!1),Vk("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new B.BH;return Bk(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,B.Dv)("Reference.remove",0,1,arguments.length),(0,B.Wj)("Reference.remove","onComplete",e,!0);const t=function LK(n){return Za("remove",n._path),qk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,B.Dv)("Reference.transaction",1,3,arguments.length),(0,B.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,B.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,B.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function b7(n,e,t){var r;if(n=(0,B.m9)(n),Za("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new B.BH,d=Kk(n,()=>{});return function RK(n,e,t,r,i,s){Ov(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:sU(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=Hk(n,e,void 0);l.currentInputSnapshot=d;const p=l.update(d.val());if(void 0===p)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{AI("transaction failed: Data returned ",p,l.path),l.status=0;const y=ND(n.transactionQueueTree_,e),w=i_(y)||[];let D;w.push(l),Ok(y,w),"object"==typeof p&&null!==p&&(0,B.r3)(p,".priority")?(D=(0,B.DV)(p,".priority"),(0,B.hu)(CI(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(MD(n.serverSyncTree_,e)||on.EMPTY_NODE).getPriority().val();const M=RI(n),O=Gr(p,D),H=xk(O,d,M);l.currentOutputSnapshotRaw=O,l.currentOutputSnapshotResolved=H,l.currentWriteId=LD(n);const X=Ck(n.serverSyncTree_,e,H,l.currentWriteId,l.applyLocally);ra(n.eventQueue_,e,X),VD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,w)=>{let D=null;p?s.reject(p):(D=new s_(w,new Ya(n._repo,n._path),mr),s.resolve(new T7(y,D)))},d,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new M7(s.committed,new Sp(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,B.Dv)("Reference.setPriority",1,2,arguments.length),(0,B.Wj)("Reference.setPriority","onComplete",t,!0);const r=function VK(n,e){n=(0,B.m9)(n),Za("setPriority",n._path),Vk("setPriority",e,!1);const t=new B.BH;return Bk(n._repo,Mr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,B.Dv)("Reference.push",0,2,arguments.length),(0,B.Wj)("Reference.push","onComplete",t,!0);const r=function FK(n,e){n=(0,B.m9)(n),Za("push",n._path),Nu("push",e,n._path,!0);const t=LB(n._repo),r=OK(t),i=o_(n,r),s=o_(n,r);let l;return l=null!=e?qk(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ia(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new ia(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Za("Reference.onDisconnect",this._delegate._path),new P7(new KB(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class xI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:p7,forceLongPolling:g7}}useEmulator(e,t,r={}){!function oj(n,e,t,r={}){(n=(0,B.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Mu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Mu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new cI(cI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,B.Sg)(r.mockUserToken,n.app.options.projectId);s=new cI(l)}!function c7(n,e,t,r){n.repoInfo_=new qN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,B.Dv)("database.ref",0,1,arguments.length),e instanceof ia){const t=YB(this._delegate,e.toString());return new ia(this,t)}{const t=ZB(this._delegate,e);return new ia(this,t)}}refFromURL(e){(0,B.Dv)("database.refFromURL",1,1,arguments.length);const r=YB(this._delegate,e);return new ia(this,r)}goOffline(){return(0,B.Dv)("database.goOffline",0,0,arguments.length),function m7(n){(n=(0,B.m9)(n))._checkNotDeleted("goOffline"),jB(n._repo)}(this._delegate)}goOnline(){return(0,B.Dv)("database.goOnline",0,0,arguments.length),function _7(n){(n=(0,B.m9)(n))._checkNotDeleted("goOnline"),function SK(n){n.persistentConnection_&&n.persistentConnection_.resume(FB)}(n._repo)}(this._delegate)}}xI.ServerValue={TIMESTAMP:function w7(){return E7}(),increment:n=>function I7(n){return{".sv":{increment:n}}}(n)};var N7=Object.freeze({__proto__:null,initStandalone:function x7({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:l=!1}){HN(t);const d=new Ds.H0("database-standalone"),p=new Ds.zt("auth-internal",d);let y;return p.setComponent(new Ds.wA("auth-internal",()=>r,"PRIVATE")),i&&(y=new Ds.zt("app-check-internal",d),y.setComponent(new Ds.wA("app-check-internal",()=>i,"PRIVATE"))),{instance:new xI(Yk(n,p,y,e,l),n),namespace:s}}});const k7=xI.ServerValue;function lj(n){return null==n}function cj(n){return"function"==typeof n.set}function uj(n,e){return cj(e)?e:n.ref(e)}function dj(n,e){if(function F7(n){return"string"==typeof n}(n))return e.stringCase();if(cj(n))return e.firebaseCase();if(function L7(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function NI(n,e,t="on",r=Ag.z){return new Rr.y(i=>{let s=null;return s=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,gt.U)(i=>{const{snapshot:s,prevKey:l}=i;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:l,key:d}}),(0,nF.B)())}function hj(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function B7(n,e){const{payload:t,prevKey:r,key:i}=e,s=hj(n,i),l=function U7(n,e){if(lj(e))return 0;{const t=hj(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function fj(n){return(lj(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pj(n,e,t){return function V7(n,e,t){return NI(n,"value","once",t).pipe(hn(r=>{const i=[vt(r)];return e.forEach(s=>i.push(NI(n,s,"on",t))),(0,KM.T)(...i).pipe(Cl(B7,[]))}),$_())}(n,e=fj(e),t)}function gj(n,e,t){const r=(e=fj(e)).map(i=>NI(n,i,"on",t));return(0,KM.T)(...r)}function mj(n,e){return function(r,i){return dj(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function G7(n){return function(t){return t?dj(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function _j(n,e){return function(){return NI(n,"value","on",e)}}!function O7(n){n.INTERNAL.registerComponent(new Ds.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new xI(i,r)},"PUBLIC").setServiceProps({Reference:ia,Query:ys,Database:xI,DataSnapshot:Sp,enableLogging:y7,INTERNAL:N7,ServerValue:k7}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.3")}(G_.Z);const q7=new h.OlP("angularfire2.realtimeDatabaseURL"),K7=new h.OlP("angularfire2.database.use-emulator");let Z7=(()=>{class n{constructor(t,r,i,s,l,d,p,y,w,D,M,O,H,X,re){this.schedulers=d;const ye=p,je=(0,fi.on)(t,l,r);y&&bx(je,l,w,M,O,H,D,X),this.database=(0,fi.cc)(`${je.name}.database.${i}`,"AngularFireDatabase",je.name,()=>{const Oe=l.runOutsideAngular(()=>je.database(i||void 0));return ye&&Oe.useEmulator(...ye),Oe},[ye])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>uj(this.database,t));let s=i;return r&&(s=r(i)),function z7(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mj(r,"update"),set:mj(r,"set"),push:i=>r.push(i),remove:G7(r),snapshotChanges:i=>pj(n,i,t).pipe(Tn.iC),stateChanges:i=>gj(n,i,t).pipe(Tn.iC),auditTrail:i=>function j7(n,e,t){return function $7(n,e,t){return function H7(n,e){return NI(n,"value","on",e).pipe((0,gt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function B9(...n){const e=(0,Qr.jO)(n);return(0,qn.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),d=!1;for(let p=0;p<i;p++)(0,lt.Xf)(n[p]).subscribe((0,b.x)(r,y=>{s[p]=y,!d&&!l[p]&&(l[p]=!0,(d=l.every(Gs.y))&&(l=null))},WV.Z));t.subscribe((0,b.x)(r,p=>{if(d){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,gt.U)(([i,s])=>{const l=i.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:l,loadedKeys:d}}),function j9(n){return(0,qn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,b.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,gt.U)(i=>i.actions))}(n,gj(n,e).pipe(Cl((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Tn.iC),valueChanges:(i,s)=>pj(n,i,t).pipe((0,gt.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Tn.iC)}}(s,this)}object(t){return function W7(n,e){return{query:n,snapshotChanges:()=>_j(n,e.schedulers.outsideAngular)().pipe(Tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_j(n,e.schedulers.outsideAngular)().pipe(Tn.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>uj(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fi.Dh),h.LFG(fi.xv,8),h.LFG(q7,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(Tn.HU),h.LFG(K7,8),h.LFG(x0,8),h.LFG(yx,8),h.LFG(vx,8),h.LFG(Ex,8),h.LFG(wx,8),h.LFG(Ix,8),h.LFG(Tx,8),h.LFG(M0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Y7=(()=>{class n{constructor(){mA.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Z7]}),n})();const Q7_firebase={apiKey:"AIzaSyD248saqSe9tNz0ilhhcZcm2hoD1_SQ3rc",authDomain:"authentication-app-e8330.firebaseapp.com",projectId:"authentication-app-e8330",storageBucket:"authentication-app-e8330.appspot.com",messagingSenderId:"824051232527",appId:"1:824051232527:web:6c9240e3581aca0590587a",measurementId:"G-RFF8LFJX9P"};let X7=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=h.oAB({type:n,bootstrap:[Z3]});static#n=this.\u0275inj=h.cJS({imports:[Bn,K6,K3,j3,Uz,mz.forRoot(),B3,YW,fi.hO.initializeApp(Q7_firebase),VG,WG,U9,Y7]})}return n})();od().bootstrapModule(X7).catch(n=>console.error(n))},9751:(wt,Ne,j)=>{j.d(Ne,{y:()=>ge});var h=j(930),W=j(727),L=j(8822),ae=j(9635),he=j(2416),le=j(576),be=j(2806);let ge=(()=>{class ie{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const Xe=new ie;return Xe.source=this,Xe.operator=ke,Xe}subscribe(ke,Xe,ct){const we=function Y(ie){return ie&&ie instanceof h.Lv||function K(ie){return ie&&(0,le.m)(ie.next)&&(0,le.m)(ie.error)&&(0,le.m)(ie.complete)}(ie)&&(0,W.Nn)(ie)}(ke)?ke:new h.Hp(ke,Xe,ct);return(0,be.x)(()=>{const{operator:Pe,source:xe}=this;we.add(Pe?Pe.call(we,xe):xe?this._subscribe(we):this._trySubscribe(we))}),we}_trySubscribe(ke){try{return this._subscribe(ke)}catch(Xe){ke.error(Xe)}}forEach(ke,Xe){return new(Xe=ve(Xe))((ct,we)=>{const Pe=new h.Hp({next:xe=>{try{ke(xe)}catch(We){we(We),Pe.unsubscribe()}},error:we,complete:ct});this.subscribe(Pe)})}_subscribe(ke){var Xe;return null===(Xe=this.source)||void 0===Xe?void 0:Xe.subscribe(ke)}[L.L](){return this}pipe(...ke){return(0,ae.U)(ke)(this)}toPromise(ke){return new(ke=ve(ke))((Xe,ct)=>{let we;this.subscribe(Pe=>we=Pe,Pe=>ct(Pe),()=>Xe(we))})}}return ie.create=qe=>new ie(qe),ie})();function ve(ie){var qe;return null!==(qe=ie??he.v.Promise)&&void 0!==qe?qe:Promise}},7579:(wt,Ne,j)=>{j.d(Ne,{x:()=>be});var h=j(9751),W=j(727);const ae=(0,j(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=j(8737),le=j(2806);let be=(()=>{class ve extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Y){const ie=new ge(this,this);return ie.operator=Y,ie}_throwIfClosed(){if(this.closed)throw new ae}next(Y){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(Y)}})}error(Y){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Y;const{observers:ie}=this;for(;ie.length;)ie.shift().error(Y)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Y}=this;for(;Y.length;)Y.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Y;return(null===(Y=this.observers)||void 0===Y?void 0:Y.length)>0}_trySubscribe(Y){return this._throwIfClosed(),super._trySubscribe(Y)}_subscribe(Y){return this._throwIfClosed(),this._checkFinalizedStatuses(Y),this._innerSubscribe(Y)}_innerSubscribe(Y){const{hasError:ie,isStopped:qe,observers:ke}=this;return ie||qe?W.Lc:(this.currentObservers=null,ke.push(Y),new W.w0(()=>{this.currentObservers=null,(0,he.P)(ke,Y)}))}_checkFinalizedStatuses(Y){const{hasError:ie,thrownError:qe,isStopped:ke}=this;ie?Y.error(qe):ke&&Y.complete()}asObservable(){const Y=new h.y;return Y.source=this,Y}}return ve.create=(K,Y)=>new ge(K,Y),ve})();class ge extends be{constructor(K,Y){super(),this.destination=K,this.source=Y}next(K){var Y,ie;null===(ie=null===(Y=this.destination)||void 0===Y?void 0:Y.next)||void 0===ie||ie.call(Y,K)}error(K){var Y,ie;null===(ie=null===(Y=this.destination)||void 0===Y?void 0:Y.error)||void 0===ie||ie.call(Y,K)}complete(){var K,Y;null===(Y=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===Y||Y.call(K)}_subscribe(K){var Y,ie;return null!==(ie=null===(Y=this.source)||void 0===Y?void 0:Y.subscribe(K))&&void 0!==ie?ie:W.Lc}}},930:(wt,Ne,j)=>{j.d(Ne,{Hp:()=>ct,Lv:()=>ie});var h=j(576),W=j(727),L=j(2416),ae=j(7849),he=j(5032);const le=ve("C",void 0,void 0);function ve(Fe,Re,Le){return{kind:Fe,value:Re,error:Le}}var K=j(3410),Y=j(2806);class ie extends W.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,W.Nn)(Re)&&Re.add(this)):this.destination=We}static create(Re,Le,Ke){return new ct(Re,Le,Ke)}next(Re){this.isStopped?xe(function ge(Fe){return ve("N",Fe,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?xe(function be(Fe){return ve("E",void 0,Fe)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?xe(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function ke(Fe,Re){return qe.call(Fe,Re)}class Xe{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Le}=this;if(Le.next)try{Le.next(Re)}catch(Ke){we(Ke)}}error(Re){const{partialObserver:Le}=this;if(Le.error)try{Le.error(Re)}catch(Ke){we(Ke)}else we(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Le){we(Le)}}}class ct extends ie{constructor(Re,Le,Ke){let Ge;if(super(),(0,h.m)(Re)||!Re)Ge={next:Re??void 0,error:Le??void 0,complete:Ke??void 0};else{let Q;this&&L.v.useDeprecatedNextContext?(Q=Object.create(Re),Q.unsubscribe=()=>this.unsubscribe(),Ge={next:Re.next&&ke(Re.next,Q),error:Re.error&&ke(Re.error,Q),complete:Re.complete&&ke(Re.complete,Q)}):Ge=Re}this.destination=new Xe(Ge)}}function we(Fe){L.v.useDeprecatedSynchronousErrorHandling?(0,Y.O)(Fe):(0,ae.h)(Fe)}function xe(Fe,Re){const{onStoppedNotification:Le}=L.v;Le&&K.z.setTimeout(()=>Le(Fe,Re))}const We={closed:!0,next:he.Z,error:function Pe(Fe){throw Fe},complete:he.Z}},727:(wt,Ne,j)=>{j.d(Ne,{Lc:()=>le,w0:()=>he,Nn:()=>be});var h=j(576);const L=(0,j(3888).d)(ve=>function(Y){ve(this),this.message=Y?`${Y.length} errors occurred during unsubscription:\n${Y.map((ie,qe)=>`${qe+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Y});var ae=j(8737);class he{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:Y}=this;if(Y)if(this._parentage=null,Array.isArray(Y))for(const ke of Y)ke.remove(this);else Y.remove(this);const{initialTeardown:ie}=this;if((0,h.m)(ie))try{ie()}catch(ke){K=ke instanceof L?ke.errors:[ke]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const ke of qe)try{ge(ke)}catch(Xe){K=K??[],Xe instanceof L?K=[...K,...Xe.errors]:K.push(Xe)}}if(K)throw new L(K)}}add(K){var Y;if(K&&K!==this)if(this.closed)ge(K);else{if(K instanceof he){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(Y=this._finalizers)&&void 0!==Y?Y:[]).push(K)}}_hasParent(K){const{_parentage:Y}=this;return Y===K||Array.isArray(Y)&&Y.includes(K)}_addParent(K){const{_parentage:Y}=this;this._parentage=Array.isArray(Y)?(Y.push(K),Y):Y?[Y,K]:K}_removeParent(K){const{_parentage:Y}=this;Y===K?this._parentage=null:Array.isArray(Y)&&(0,ae.P)(Y,K)}remove(K){const{_finalizers:Y}=this;Y&&(0,ae.P)(Y,K),K instanceof he&&K._removeParent(this)}}he.EMPTY=(()=>{const ve=new he;return ve.closed=!0,ve})();const le=he.EMPTY;function be(ve){return ve instanceof he||ve&&"closed"in ve&&(0,h.m)(ve.remove)&&(0,h.m)(ve.add)&&(0,h.m)(ve.unsubscribe)}function ge(ve){(0,h.m)(ve)?ve():ve.unsubscribe()}},2416:(wt,Ne,j)=>{j.d(Ne,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,Ne,j)=>{j.d(Ne,{E:()=>W});const W=new(j(9751).y)(he=>he.complete())},8996:(wt,Ne,j)=>{j.d(Ne,{D:()=>Re});var h=j(8421),W=j(5363),L=j(9468),le=j(9751),ge=j(2202),ve=j(576),K=j(9672);function ie(Le,Ke){if(!Le)throw new Error("Iterable cannot be null");return new le.y(Ge=>{(0,K.f)(Ge,Ke,()=>{const Q=Le[Symbol.asyncIterator]();(0,K.f)(Ge,Ke,()=>{Q.next().then(Ce=>{Ce.done?Ge.complete():Ge.next(Ce.value)})},0,!0)})})}var qe=j(3670),ke=j(8239),Xe=j(1144),ct=j(6495),we=j(2206),Pe=j(4532),xe=j(3260);function Re(Le,Ke){return Ke?function Fe(Le,Ke){if(null!=Le){if((0,qe.c)(Le))return function ae(Le,Ke){return(0,h.Xf)(Le).pipe((0,L.R)(Ke),(0,W.Q)(Ke))}(Le,Ke);if((0,Xe.z)(Le))return function be(Le,Ke){return new le.y(Ge=>{let Q=0;return Ke.schedule(function(){Q===Le.length?Ge.complete():(Ge.next(Le[Q++]),Ge.closed||this.schedule())})})}(Le,Ke);if((0,ke.t)(Le))return function he(Le,Ke){return(0,h.Xf)(Le).pipe((0,L.R)(Ke),(0,W.Q)(Ke))}(Le,Ke);if((0,we.D)(Le))return ie(Le,Ke);if((0,ct.T)(Le))return function Y(Le,Ke){return new le.y(Ge=>{let Q;return(0,K.f)(Ge,Ke,()=>{Q=Le[ge.h](),(0,K.f)(Ge,Ke,()=>{let Ce,Ye;try{({value:Ce,done:Ye}=Q.next())}catch(Qe){return void Ge.error(Qe)}Ye?Ge.complete():Ge.next(Ce)},0,!0)}),()=>(0,ve.m)(Q?.return)&&Q.return()})}(Le,Ke);if((0,xe.L)(Le))return function We(Le,Ke){return ie((0,xe.Q)(Le),Ke)}(Le,Ke)}throw(0,Pe.z)(Le)}(Le,Ke):(0,h.Xf)(Le)}},8421:(wt,Ne,j)=>{j.d(Ne,{Xf:()=>qe});var h=j(7582),W=j(1144),L=j(8239),ae=j(9751),he=j(3670),le=j(2206),be=j(4532),ge=j(6495),ve=j(3260),K=j(576),Y=j(7849),ie=j(8822);function qe(Fe){if(Fe instanceof ae.y)return Fe;if(null!=Fe){if((0,he.c)(Fe))return function ke(Fe){return new ae.y(Re=>{const Le=Fe[ie.L]();if((0,K.m)(Le.subscribe))return Le.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,W.z)(Fe))return function Xe(Fe){return new ae.y(Re=>{for(let Le=0;Le<Fe.length&&!Re.closed;Le++)Re.next(Fe[Le]);Re.complete()})}(Fe);if((0,L.t)(Fe))return function ct(Fe){return new ae.y(Re=>{Fe.then(Le=>{Re.closed||(Re.next(Le),Re.complete())},Le=>Re.error(Le)).then(null,Y.h)})}(Fe);if((0,le.D)(Fe))return Pe(Fe);if((0,ge.T)(Fe))return function we(Fe){return new ae.y(Re=>{for(const Le of Fe)if(Re.next(Le),Re.closed)return;Re.complete()})}(Fe);if((0,ve.L)(Fe))return function xe(Fe){return Pe((0,ve.Q)(Fe))}(Fe)}throw(0,be.z)(Fe)}function Pe(Fe){return new ae.y(Re=>{(function We(Fe,Re){var Le,Ke,Ge,Q;return(0,h.mG)(this,void 0,void 0,function*(){try{for(Le=(0,h.KL)(Fe);!(Ke=yield Le.next()).done;)if(Re.next(Ke.value),Re.closed)return}catch(Ce){Ge={error:Ce}}finally{try{Ke&&!Ke.done&&(Q=Le.return)&&(yield Q.call(Le))}finally{if(Ge)throw Ge.error}}Re.complete()})})(Fe,Re).catch(Le=>Re.error(Le))})}},6451:(wt,Ne,j)=>{j.d(Ne,{T:()=>le});var h=j(8189),W=j(8421),L=j(515),ae=j(7669),he=j(8996);function le(...be){const ge=(0,ae.yG)(be),ve=(0,ae._6)(be,1/0),K=be;return K.length?1===K.length?(0,W.Xf)(K[0]):(0,h.J)(ve)((0,he.D)(K,ge)):L.E}},5403:(wt,Ne,j)=>{j.d(Ne,{x:()=>W});var h=j(930);function W(ae,he,le,be,ge){return new L(ae,he,le,be,ge)}class L extends h.Lv{constructor(he,le,be,ge,ve,K){super(he),this.onFinalize=ve,this.shouldUnsubscribe=K,this._next=le?function(Y){try{le(Y)}catch(ie){he.error(ie)}}:super._next,this._error=ge?function(Y){try{ge(Y)}catch(ie){he.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(Y){he.error(Y)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(wt,Ne,j)=>{j.d(Ne,{U:()=>L});var h=j(4482),W=j(5403);function L(ae,he){return(0,h.e)((le,be)=>{let ge=0;le.subscribe((0,W.x)(be,ve=>{be.next(ae.call(he,ve,ge++))}))})}},8189:(wt,Ne,j)=>{j.d(Ne,{J:()=>L});var h=j(5577),W=j(4671);function L(ae=1/0){return(0,h.z)(W.y,ae)}},5577:(wt,Ne,j)=>{j.d(Ne,{z:()=>ge});var h=j(4004),W=j(8421),L=j(4482),ae=j(9672),he=j(5403),be=j(576);function ge(ve,K,Y=1/0){return(0,be.m)(K)?ge((ie,qe)=>(0,h.U)((ke,Xe)=>K(ie,ke,qe,Xe))((0,W.Xf)(ve(ie,qe))),Y):("number"==typeof K&&(Y=K),(0,L.e)((ie,qe)=>function le(ve,K,Y,ie,qe,ke,Xe,ct){const we=[];let Pe=0,xe=0,We=!1;const Fe=()=>{We&&!we.length&&!Pe&&K.complete()},Re=Ke=>Pe<ie?Le(Ke):we.push(Ke),Le=Ke=>{ke&&K.next(Ke),Pe++;let Ge=!1;(0,W.Xf)(Y(Ke,xe++)).subscribe((0,he.x)(K,Q=>{qe?.(Q),ke?Re(Q):K.next(Q)},()=>{Ge=!0},void 0,()=>{if(Ge)try{for(Pe--;we.length&&Pe<ie;){const Q=we.shift();Xe?(0,ae.f)(K,Xe,()=>Le(Q)):Le(Q)}Fe()}catch(Q){K.error(Q)}}))};return ve.subscribe((0,he.x)(K,Re,()=>{We=!0,Fe()})),()=>{ct?.()}}(ie,qe,ve,Y)))}},5363:(wt,Ne,j)=>{j.d(Ne,{Q:()=>ae});var h=j(9672),W=j(4482),L=j(5403);function ae(he,le=0){return(0,W.e)((be,ge)=>{be.subscribe((0,L.x)(ge,ve=>(0,h.f)(ge,he,()=>ge.next(ve),le),()=>(0,h.f)(ge,he,()=>ge.complete(),le),ve=>(0,h.f)(ge,he,()=>ge.error(ve),le)))})}},3099:(wt,Ne,j)=>{j.d(Ne,{B:()=>he});var h=j(8421),W=j(7579),L=j(930),ae=j(4482);function he(be={}){const{connector:ge=(()=>new W.x),resetOnError:ve=!0,resetOnComplete:K=!0,resetOnRefCountZero:Y=!0}=be;return ie=>{let qe,ke,Xe,ct=0,we=!1,Pe=!1;const xe=()=>{ke?.unsubscribe(),ke=void 0},We=()=>{xe(),qe=Xe=void 0,we=Pe=!1},Fe=()=>{const Re=qe;We(),Re?.unsubscribe()};return(0,ae.e)((Re,Le)=>{ct++,!Pe&&!we&&xe();const Ke=Xe=Xe??ge();Le.add(()=>{ct--,0===ct&&!Pe&&!we&&(ke=le(Fe,Y))}),Ke.subscribe(Le),!qe&&ct>0&&(qe=new L.Hp({next:Ge=>Ke.next(Ge),error:Ge=>{Pe=!0,xe(),ke=le(We,ve,Ge),Ke.error(Ge)},complete:()=>{we=!0,xe(),ke=le(We,K),Ke.complete()}}),(0,h.Xf)(Re).subscribe(qe))})(ie)}}function le(be,ge,...ve){if(!0===ge)return void be();if(!1===ge)return;const K=new L.Hp({next:()=>{K.unsubscribe(),be()}});return(0,h.Xf)(ge(...ve)).subscribe(K)}},9468:(wt,Ne,j)=>{j.d(Ne,{R:()=>W});var h=j(4482);function W(L,ae=0){return(0,h.e)((he,le)=>{le.add(L.schedule(()=>he.subscribe(le),ae))})}},8505:(wt,Ne,j)=>{j.d(Ne,{b:()=>he});var h=j(576),W=j(4482),L=j(5403),ae=j(4671);function he(le,be,ge){const ve=(0,h.m)(le)||be||ge?{next:le,error:be,complete:ge}:le;return ve?(0,W.e)((K,Y)=>{var ie;null===(ie=ve.subscribe)||void 0===ie||ie.call(ve);let qe=!0;K.subscribe((0,L.x)(Y,ke=>{var Xe;null===(Xe=ve.next)||void 0===Xe||Xe.call(ve,ke),Y.next(ke)},()=>{var ke;qe=!1,null===(ke=ve.complete)||void 0===ke||ke.call(ve),Y.complete()},ke=>{var Xe;qe=!1,null===(Xe=ve.error)||void 0===Xe||Xe.call(ve,ke),Y.error(ke)},()=>{var ke,Xe;qe&&(null===(ke=ve.unsubscribe)||void 0===ke||ke.call(ve)),null===(Xe=ve.finalize)||void 0===Xe||Xe.call(ve)}))}):ae.y}},4408:(wt,Ne,j)=>{j.d(Ne,{o:()=>he});var h=j(727);class W extends h.w0{constructor(be,ge){super()}schedule(be,ge=0){return this}}const L={setInterval(le,be,...ge){const{delegate:ve}=L;return ve?.setInterval?ve.setInterval(le,be,...ge):setInterval(le,be,...ge)},clearInterval(le){const{delegate:be}=L;return(be?.clearInterval||clearInterval)(le)},delegate:void 0};var ae=j(8737);class he extends W{constructor(be,ge){super(be,ge),this.scheduler=be,this.work=ge,this.pending=!1}schedule(be,ge=0){var ve;if(this.closed)return this;this.state=be;const K=this.id,Y=this.scheduler;return null!=K&&(this.id=this.recycleAsyncId(Y,K,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(Y,this.id,ge),this}requestAsyncId(be,ge,ve=0){return L.setInterval(be.flush.bind(be,this),ve)}recycleAsyncId(be,ge,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ge;null!=ge&&L.clearInterval(ge)}execute(be,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(be,ge);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,ge){let K,ve=!1;try{this.work(be)}catch(Y){ve=!0,K=Y||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:be,scheduler:ge}=this,{actions:ve}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=be&&(this.id=this.recycleAsyncId(ge,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,Ne,j)=>{j.d(Ne,{v:()=>L});var h=j(6063);class W{constructor(he,le=W.now){this.schedulerActionCtor=he,this.now=le}schedule(he,le=0,be){return new this.schedulerActionCtor(this,he).schedule(be,le)}}W.now=h.l.now;class L extends W{constructor(he,le=W.now){super(he,le),this.actions=[],this._active=!1}flush(he){const{actions:le}=this;if(this._active)return void le.push(he);let be;this._active=!0;do{if(be=he.execute(he.state,he.delay))break}while(he=le.shift());if(this._active=!1,be){for(;he=le.shift();)he.unsubscribe();throw be}}}},4986:(wt,Ne,j)=>{j.d(Ne,{z:()=>L});var h=j(4408);const L=new(j(7565).v)(h.o)},6063:(wt,Ne,j)=>{j.d(Ne,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(wt,Ne,j)=>{j.d(Ne,{z:()=>h});const h={setTimeout(W,L,...ae){const{delegate:he}=h;return he?.setTimeout?he.setTimeout(W,L,...ae):setTimeout(W,L,...ae)},clearTimeout(W){const{delegate:L}=h;return(L?.clearTimeout||clearTimeout)(W)},delegate:void 0}},2202:(wt,Ne,j)=>{j.d(Ne,{h:()=>W});const W=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,Ne,j)=>{j.d(Ne,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(wt,Ne,j)=>{j.d(Ne,{_6:()=>le,jO:()=>ae,yG:()=>he});var h=j(576);function L(be){return be[be.length-1]}function ae(be){return(0,h.m)(L(be))?be.pop():void 0}function he(be){return function W(be){return be&&(0,h.m)(be.schedule)}(L(be))?be.pop():void 0}function le(be,ge){return"number"==typeof L(be)?be.pop():ge}},8737:(wt,Ne,j)=>{function h(W,L){if(W){const ae=W.indexOf(L);0<=ae&&W.splice(ae,1)}}j.d(Ne,{P:()=>h})},3888:(wt,Ne,j)=>{function h(W){const ae=W(he=>{Error.call(he),he.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}j.d(Ne,{d:()=>h})},2806:(wt,Ne,j)=>{j.d(Ne,{O:()=>ae,x:()=>L});var h=j(2416);let W=null;function L(he){if(h.v.useDeprecatedSynchronousErrorHandling){const le=!W;if(le&&(W={errorThrown:!1,error:null}),he(),le){const{errorThrown:be,error:ge}=W;if(W=null,be)throw ge}}else he()}function ae(he){h.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=he)}},9672:(wt,Ne,j)=>{function h(W,L,ae,he=0,le=!1){const be=L.schedule(function(){ae(),le?W.add(this.schedule(null,he)):this.unsubscribe()},he);if(W.add(be),!le)return be}j.d(Ne,{f:()=>h})},4671:(wt,Ne,j)=>{function h(W){return W}j.d(Ne,{y:()=>h})},1144:(wt,Ne,j)=>{j.d(Ne,{z:()=>h});const h=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(wt,Ne,j)=>{j.d(Ne,{D:()=>W});var h=j(576);function W(L){return Symbol.asyncIterator&&(0,h.m)(L?.[Symbol.asyncIterator])}},576:(wt,Ne,j)=>{function h(W){return"function"==typeof W}j.d(Ne,{m:()=>h})},3670:(wt,Ne,j)=>{j.d(Ne,{c:()=>L});var h=j(8822),W=j(576);function L(ae){return(0,W.m)(ae[h.L])}},6495:(wt,Ne,j)=>{j.d(Ne,{T:()=>L});var h=j(2202),W=j(576);function L(ae){return(0,W.m)(ae?.[h.h])}},8239:(wt,Ne,j)=>{j.d(Ne,{t:()=>W});var h=j(576);function W(L){return(0,h.m)(L?.then)}},3260:(wt,Ne,j)=>{j.d(Ne,{L:()=>ae,Q:()=>L});var h=j(7582),W=j(576);function L(he){return(0,h.FC)(this,arguments,function*(){const be=he.getReader();try{for(;;){const{value:ge,done:ve}=yield(0,h.qq)(be.read());if(ve)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ge)}}finally{be.releaseLock()}})}function ae(he){return(0,W.m)(he?.getReader)}},4482:(wt,Ne,j)=>{j.d(Ne,{A:()=>W,e:()=>L});var h=j(576);function W(ae){return(0,h.m)(ae?.lift)}function L(ae){return he=>{if(W(he))return he.lift(function(le){try{return ae(le,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,Ne,j)=>{function h(){}j.d(Ne,{Z:()=>h})},9635:(wt,Ne,j)=>{j.d(Ne,{U:()=>L,z:()=>W});var h=j(4671);function W(...ae){return L(ae)}function L(ae){return 0===ae.length?h.y:1===ae.length?ae[0]:function(le){return ae.reduce((be,ge)=>ge(be),le)}}},7849:(wt,Ne,j)=>{j.d(Ne,{h:()=>L});var h=j(2416),W=j(3410);function L(ae){W.z.setTimeout(()=>{const{onUnhandledError:he}=h.v;if(!he)throw ae;he(ae)})}},4532:(wt,Ne,j)=>{function h(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Ne,{z:()=>h})},4650:(wt,Ne,j)=>{j.d(Ne,{$8M:()=>uo,$WT:()=>Os,$Z:()=>AT,AFp:()=>Vy,AaK:()=>ge,BQk:()=>Tf,CHM:()=>Wu,CRH:()=>Vw,CZH:()=>Dm,CqO:()=>bf,D6c:()=>uP,EJc:()=>KR,EiD:()=>XD,EpF:()=>QE,F$t:()=>XE,F4k:()=>QT,FYo:()=>dE,FiY:()=>cs,Gf:()=>$d,GfV:()=>oT,Gpc:()=>Y,Hsn:()=>tb,Ikx:()=>Mf,JOm:()=>Ot,JVY:()=>UI,JZr:()=>ct,KtG:()=>qu,L6k:()=>BI,LAX:()=>Zh,LFG:()=>qt,LSH:()=>Jv,Lbi:()=>lC,Lck:()=>Vi,MAs:()=>X_,MMx:()=>Ay,MR2:()=>nS,NdJ:()=>ty,O4$:()=>Fp,OlP:()=>un,Oqu:()=>Fd,P3R:()=>QI,PXZ:()=>eP,Q6J:()=>Vg,QGY:()=>ey,QbO:()=>cC,Qsj:()=>uS,R0b:()=>Xs,RDi:()=>Gv,Rgc:()=>jf,SBq:()=>rf,Sil:()=>Qf,Suo:()=>Zi,TTD:()=>ua,TgZ:()=>ru,Tol:()=>ow,Udp:()=>kd,X6Q:()=>TC,XFs:()=>_t,Xpm:()=>zt,Xts:()=>tE,Y36:()=>uf,YKP:()=>om,YNc:()=>KE,Yjl:()=>dh,Yz7:()=>ut,Z0I:()=>vn,ZZ4:()=>Yy,_Bn:()=>Dw,_UZ:()=>ZE,_Vd:()=>nf,_c5:()=>cP,_uU:()=>cw,aQg:()=>d0,c2e:()=>qR,cJS:()=>St,cg1:()=>yw,d8E:()=>my,dDg:()=>XR,dqk:()=>En,eBb:()=>qD,eFA:()=>yu,eJc:()=>Wd,ekj:()=>Od,eoX:()=>Jw,f3M:()=>Me,g9A:()=>Sm,h0i:()=>Nn,hGG:()=>kC,hij:()=>Xg,iGM:()=>Ny,ifc:()=>U,ip1:()=>Yw,jDz:()=>ni,kL8:()=>lR,kcU:()=>Dr,lG2:()=>tc,lqb:()=>Td,lri:()=>zy,mCW:()=>Yh,n5z:()=>Dh,oAB:()=>oa,oJD:()=>ZI,oxw:()=>JT,pB0:()=>jI,q3G:()=>wr,q4F:()=>aT,qLn:()=>vg,qOj:()=>FE,qZA:()=>Bg,qzn:()=>As,rWj:()=>Xw,s9C:()=>Fl,sBO:()=>Xd,s_b:()=>My,soG:()=>Rm,tb:()=>_C,tp0:()=>gt,uIk:()=>Q_,vHH:()=>we,vpe:()=>Io,wAp:()=>Lt,xp6:()=>yT,ynx:()=>If,z2F:()=>Qd,z3N:()=>Go,zSh:()=>Jc,zs3:()=>af});var h=j(7579),W=j(727),L=j(9751),ae=j(6451),he=j(3099);function le(o){for(let a in o)if(o[a]===le)return a;throw Error("Could not find renamed property on target object.")}function be(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function ge(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(ge).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const K=le({__forward_ref__:le});function Y(o){return o.__forward_ref__=Y,o.toString=function(){return ge(this())},o}function ie(o){return qe(o)?o():o}function qe(o){return"function"==typeof o&&o.hasOwnProperty(K)&&o.__forward_ref__===Y}function ke(o){return o&&!!o.\u0275providers}const ct="https://g.co/ng/security#xss";class we extends Error{constructor(a,c){super(Pe(a,c)),this.code=a}}function Pe(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function xe(o){return"string"==typeof o?o:null==o?"":String(o)}function Ke(o,a){throw new we(-201,!1)}function me(o,a){null==o&&function se(o,a,c,u){throw new Error(`ASSERTION ERROR: ${o}`+(null==u?"":` [Expected=> ${c} ${u} ${a} <=Actual]`))}(a,o,null,"!=")}function ut(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function St(o){return{providers:o.providers||[],imports:o.imports||[]}}function Qt(o){return Sn(o,Rn)||Sn(o,si)}function vn(o){return null!==Qt(o)}function Sn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Zn(o){return o&&(o.hasOwnProperty(rr)||o.hasOwnProperty(Pn))?o[rr]:null}const Rn=le({\u0275prov:le}),rr=le({\u0275inj:le}),si=le({ngInjectableDef:le}),Pn=le({ngInjectorDef:le});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let On;function Vn(o){const a=On;return On=o,a}function vs(o,a,c){const u=Qt(o);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:c&_t.Optional?null:void 0!==a?a:void Ke(ge(o))}const En=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ir={},yr="__NG_DI_FLAG__",zn="ngTempTokenPath",Nr="ngTokenPath",kr=/\n/gm,qr="\u0275",Wt="__source";let oi;function Jt(o){const a=oi;return oi=o,a}function Es(o,a=_t.Default){if(void 0===oi)throw new we(-203,!1);return null===oi?vs(o,void 0,a):oi.get(o,a&_t.Optional?null:void 0,a)}function qt(o,a=_t.Default){return(function Bi(){return On}()||Es)(ie(o),a)}function Me(o,a=_t.Default){return qt(o,Je(a))}function Je(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function Rt(o){const a=[];for(let c=0;c<o.length;c++){const u=ie(o[c]);if(Array.isArray(u)){if(0===u.length)throw new we(900,!1);let f,m=_t.Default;for(let v=0;v<u.length;v++){const T=u[v],C=mn(T);"number"==typeof C?-1===C?f=T.token:m|=C:f=T}a.push(qt(f,m))}else a.push(qt(u))}return a}function Xt(o,a){return o[yr]=a,o.prototype[yr]=a,o}function mn(o){return o[yr]}function z(o){return{toString:o}.toString()}var V=(()=>((V=V||{})[V.OnPush=0]="OnPush",V[V.Default=1]="Default",V))(),U=(()=>{return(o=U||(U={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",U;var o})();const N={},ee=[],Ie=le({\u0275cmp:le}),ft=le({\u0275dir:le}),xt=le({\u0275pipe:le}),kt=le({\u0275mod:le}),Ht=le({\u0275fac:le}),Vt=le({__NG_ELEMENT_ID__:le});let Yn=0;function zt(o){return z(()=>{const a=hh(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===V.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||U.Emulated,id:"c"+Yn++,styles:o.styles||ee,_:null,schemas:o.schemas||null,tView:null};Kr(c);const u=o.dependencies;return c.directiveDefs=el(u,!1),c.pipeDefs=el(u,!0),c})}function ec(o){return In(o)||vr(o)}function Ja(o){return null!==o}function oa(o){return z(()=>({type:o.type,bootstrap:o.bootstrap||ee,declarations:o.declarations||ee,imports:o.imports||ee,exports:o.exports||ee,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function aa(o,a){if(null==o)return N;const c={};for(const u in o)if(o.hasOwnProperty(u)){let f=o[u],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=u,a&&(a[f]=m)}return c}function tc(o){return z(()=>{const a=hh(o);return Kr(a),a})}function dh(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function In(o){return o[Ie]||null}function vr(o){return o[ft]||null}function Or(o){return o[xt]||null}function Os(o){const a=In(o)||vr(o)||Or(o);return null!==a&&a.standalone}function ai(o,a){const c=o[kt]||null;if(!c&&!0===a)throw new Error(`Type ${ge(o)} does not have '\u0275mod' property.`);return c}function hh(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||ee,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:aa(o.inputs,a),outputs:aa(o.outputs)}}function Kr(o){o.features?.forEach(a=>a(o))}function el(o,a){if(!o)return null;const c=a?Or:ec;return()=>("function"==typeof o?o():o).map(u=>c(u)).filter(Ja)}const es=0,at=1,pt=2,Wn=3,br=4,Ao=5,Cr=6,oo=7,Qn=8,nc=9,ts=10,en=11,Fu=12,Do=13,rc=14,ns=15,Er=16,la=17,So=18,rs=19,ic=20,Pp=21,Un=22,Lu=1,Vu=2,sc=7,ji=8,Ri=9,Fr=10;function li(o){return Array.isArray(o)&&"object"==typeof o[Lu]}function ss(o){return Array.isArray(o)&&!0===o[Lu]}function tl(o){return 0!=(4&o.flags)}function nl(o){return o.componentOffset>-1}function rl(o){return 1==(1&o.flags)}function Pi(o){return!!o.template}function Uu(o){return 0!=(256&o[pt])}function ao(o,a){return o.hasOwnProperty(Ht)?o[Ht]:null}class ca{constructor(a,c,u){this.previousValue=a,this.currentValue=c,this.firstChange=u}isFirstChange(){return this.firstChange}}function ua(){return lc}function lc(o){return o.type.prototype.ngOnChanges&&(o.setInput=uc),cc}function cc(){const o=al(this),a=o?.current;if(a){const c=o.previous;if(c===N)o.previous=a;else for(let u in a)c[u]=a[u];o.current=null,this.ngOnChanges(a)}}function uc(o,a,c,u){const f=this.declaredInputs[c],m=al(o)||function lo(o,a){return o[dc]=a}(o,{previous:N,current:null}),v=m.current||(m.current={}),T=m.previous,C=T[f];v[f]=new ca(C&&C.currentValue,a,T===N),o[u]=a}ua.ngInherit=!0;const dc="__ngSimpleChanges__";function al(o){return o[dc]||null}const ci=function(o,a,c){},Lr="svg";function xn(o){for(;Array.isArray(o);)o=o[es];return o}function ws(o,a){return xn(a[o])}function Vr(o,a){return xn(a[o.index])}function pc(o,a){return o.data[a]}function sr(o,a){const c=a[o];return li(c)?c:c[es]}function Mo(o){return 64==(64&o[pt])}function Is(o,a){return null==a?null:o[a]}function cl(o){o[So]=0}function Zr(o,a){o[Ao]+=a;let c=o,u=o[Wn];for(;null!==u&&(1===a&&1===c[Ao]||-1===a&&0===c[Ao]);)u[Ao]+=a,c=u,u=u[Wn]}const Gt={lFrame:wh(null),bindingsEnabled:!0};function yh(){return Gt.bindingsEnabled}function Ee(){return Gt.lFrame.lView}function an(){return Gt.lFrame.tView}function Wu(o){return Gt.lFrame.contextLView=o,o[Qn]}function qu(o){return Gt.lFrame.contextLView=null,o}function Ar(){let o=_c();for(;null!==o&&64===o.type;)o=o.parent;return o}function _c(){return Gt.lFrame.currentTNode}function _i(o,a){const c=Gt.lFrame;c.currentTNode=o,c.isParent=a}function fa(){return Gt.lFrame.isParent}function Ku(){Gt.lFrame.isParent=!1}function Us(){return Gt.lFrame.bindingIndex++}function Hi(o){const a=Gt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Ec(o,a){const c=Gt.lFrame;c.bindingIndex=c.bindingRootIndex=o,ul(a)}function ul(o){Gt.lFrame.currentDirectiveIndex=o}function wc(o){const a=Gt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}function Yu(){return Gt.lFrame.currentQueryIndex}function Qu(o){Gt.lFrame.currentQueryIndex=o}function Ic(o){const a=o[at];return 2===a.type?a.declTNode:1===a.type?o[Cr]:null}function kp(o,a,c){if(c&_t.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&_t.Host||(f=Ic(m),null===f||(m=m[ns],10&f.type))););if(null===f)return!1;a=f,o=m}const u=Gt.lFrame=Eh();return u.currentTNode=a,u.lView=o,!0}function ma(o){const a=Eh(),c=o[at];Gt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Eh(){const o=Gt.lFrame,a=null===o?null:o.child;return null===a?wh(o):a}function wh(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function f_(){const o=Gt.lFrame;return Gt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const dl=f_;function Op(){const o=f_();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function di(){return Gt.lFrame.selectedIndex}function Bs(o){Gt.lFrame.selectedIndex=o}function Xn(){const o=Gt.lFrame;return pc(o.tView,o.selectedIndex)}function Fp(){Gt.lFrame.currentNamespace=Lr}function Dr(){!function Th(){Gt.lFrame.currentNamespace=null}()}function bc(o,a){for(let c=a.directiveStart,u=a.directiveEnd;c<u;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:T,ngAfterViewInit:C,ngAfterViewChecked:R,ngOnDestroy:k}=m;v&&(o.contentHooks??(o.contentHooks=[])).push(-c,v),T&&((o.contentHooks??(o.contentHooks=[])).push(c,T),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(c,T)),C&&(o.viewHooks??(o.viewHooks=[])).push(-c,C),R&&((o.viewHooks??(o.viewHooks=[])).push(c,R),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(c,R)),null!=k&&(o.destroyHooks??(o.destroyHooks=[])).push(c,k)}}function hl(o,a,c){Cc(o,a,3,c)}function Ju(o,a,c,u){(3&o[pt])===c&&Cc(o,a,c,u)}function fl(o,a){let c=o[pt];(3&c)===a&&(c&=2047,c+=1,o[pt]=c)}function Cc(o,a,c,u){const m=u??-1,v=a.length-1;let T=0;for(let C=void 0!==u?65535&o[So]:0;C<v;C++)if("number"==typeof a[C+1]){if(T=a[C],null!=u&&T>=u)break}else a[C]<0&&(o[So]+=65536),(T<m||-1==m)&&(js(o,c,a,C),o[So]=(4294901760&o[So])+C+2),C++}function js(o,a,c,u){const f=c[u]<0,m=c[u+1],T=o[f?-c[u]:c[u]];if(f){if(o[pt]>>11<o[So]>>16&&(3&o[pt])===a){o[pt]+=2048,ci(4,T,m);try{m.call(T)}finally{ci(5,T,m)}}}else{ci(4,T,m);try{m.call(T)}finally{ci(5,T,m)}}}const _a=-1;class $i{constructor(a,c,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=u}}function Dc(o,a,c){let u=0;for(;u<c.length;){const f=c[u];if("number"==typeof f){if(0!==f)break;u++;const m=c[u++],v=c[u++],T=c[u++];o.setAttribute(a,v,T,m)}else{const m=f,v=c[++u];va(m)?o.setProperty(a,m,v):o.setAttribute(a,m,v),u++}}return u}function gl(o){return 3===o||4===o||6===o}function va(o){return 64===o.charCodeAt(0)}function Hs(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?c=f:0===c||Sc(o,c,f,null,-1===c||2===c?a[++u]:null)}}return o}function Sc(o,a,c,u,f){let m=0,v=o.length;if(-1===a)v=-1;else for(;m<o.length;){const T=o[m++];if("number"==typeof T){if(T===a){v=-1;break}if(T>a){v=m-1;break}}}for(;m<o.length;){const T=o[m];if("number"==typeof T)break;if(T===c){if(null===u)return void(null!==f&&(o[m+1]=f));if(u===o[m+1])return void(o[m+2]=f)}m++,null!==u&&m++,null!==f&&m++}-1!==v&&(o.splice(v,0,a),m=v+1),o.splice(m++,0,c),null!==u&&o.splice(m++,0,u),null!==f&&o.splice(m++,0,f)}function Rc(o){return o!==_a}function Pc(o){return 32767&o}function Mc(o,a){let c=function td(o){return o>>16}(o),u=a;for(;c>0;)u=u[ns],c--;return u}let ml=!0;function xc(o){const a=ml;return ml=o,a}const jp=255,Nc=5;let Hp=0;const vi={};function Gi(o,a){const c=yl(o,a);if(-1!==c)return c;const u=a[at];u.firstCreatePass&&(o.injectorIndex=a.length,Ea(u.data,o),Ea(a,null),Ea(u.blueprint,null));const f=nd(o,a),m=o.injectorIndex;if(Rc(f)){const v=Pc(f),T=Mc(f,a),C=T[at].data;for(let R=0;R<8;R++)a[m+R]=T[v+R]|C[v+R]}return a[m+8]=f,m}function Ea(o,a){o.push(0,0,0,0,0,0,0,0,a)}function yl(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function nd(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,u=null,f=a;for(;null!==f;){if(u=Sh(f),null===u)return _a;if(c++,f=f[ns],-1!==u.injectorIndex)return u.injectorIndex|c<<16}return _a}function No(o,a,c){!function _l(o,a,c){let u;"string"==typeof c?u=c.charCodeAt(0)||0:c.hasOwnProperty(Vt)&&(u=c[Vt]),null==u&&(u=c[Vt]=Hp++);const f=u&jp;a.data[o+(f>>Nc)]|=1<<f}(o,a,c)}function id(o,a,c){if(c&_t.Optional||void 0!==o)return o;Ke()}function kc(o,a,c,u){if(c&_t.Optional&&void 0===u&&(u=null),!(c&(_t.Self|_t.Host))){const f=o[nc],m=Vn(void 0);try{return f?f.get(a,u,c&_t.Optional):vs(a,u,c&_t.Optional)}finally{Vn(m)}}return id(u,0,c)}function Oc(o,a,c,u=_t.Default,f){if(null!==o){if(1024&a[pt]){const v=function od(o,a,c,u,f){let m=o,v=a;for(;null!==m&&null!==v&&1024&v[pt]&&!(256&v[pt]);){const T=wa(m,v,c,u|_t.Self,vi);if(T!==vi)return T;let C=m.parent;if(!C){const R=v[Pp];if(R){const k=R.get(c,vi,u);if(k!==vi)return k}C=Sh(v),v=v[ns]}m=C}return f}(o,a,c,u,vi);if(v!==vi)return v}const m=wa(o,a,c,u,vi);if(m!==vi)return m}return kc(a,c,u,f)}function wa(o,a,c,u,f){const m=function $s(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Vt)?o[Vt]:void 0;return"number"==typeof a?a>=0?a&jp:sd:a}(c);if("function"==typeof m){if(!kp(a,o,u))return u&_t.Host?id(f,0,u):kc(a,c,u,f);try{const v=m(u);if(null!=v||u&_t.Optional)return v;Ke()}finally{dl()}}else if("number"==typeof m){let v=null,T=yl(o,a),C=_a,R=u&_t.Host?a[Er][Cr]:null;for((-1===T||u&_t.SkipSelf)&&(C=-1===T?nd(o,a):a[T+8],C!==_a&&Ah(u,!1)?(v=a[at],T=Pc(C),a=Mc(C,a)):T=-1);-1!==T;){const k=a[at];if(Fc(m,T,k.data)){const $=$p(T,a,c,v,u,R);if($!==vi)return $}C=a[T+8],C!==_a&&Ah(u,a[at].data[T+8]===R)&&Fc(m,T,a)?(v=k,T=Pc(C),a=Mc(C,a)):T=-1}}return f}function $p(o,a,c,u,f,m){const v=a[at],T=v.data[o+8],k=as(T,v,c,null==u?nl(T)&&ml:u!=v&&0!=(3&T.type),f&_t.Host&&m===T);return null!==k?ko(a,v,k,T):vi}function as(o,a,c,u,f){const m=o.providerIndexes,v=a.data,T=1048575&m,C=o.directiveStart,k=m>>20,J=f?T+k:o.directiveEnd;for(let oe=u?T:T+k;oe<J;oe++){const Ae=v[oe];if(oe<C&&c===Ae||oe>=C&&Ae.type===c)return oe}if(f){const oe=v[C];if(oe&&Pi(oe)&&oe.type===c)return C}return null}function ko(o,a,c,u){let f=o[c];const m=a.data;if(function Lp(o){return o instanceof $i}(f)){const v=f;v.resolving&&function Fe(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new we(-200,`Circular dependency in DI detected for ${o}${c}`)}(function We(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():xe(o)}(m[c]));const T=xc(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?Vn(v.injectImpl):null;kp(o,u,_t.Default);try{f=o[c]=v.factory(void 0,m,o,u),a.firstCreatePass&&c>=u.directiveStart&&function bh(o,a,c){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(u){const v=lc(a);(c.preOrderHooks??(c.preOrderHooks=[])).push(o,v),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,v)}f&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks??(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==C&&Vn(C),xc(T),v.resolving=!1,dl()}}return f}function Fc(o,a,c){return!!(c[a+(o>>Nc)]&1<<o)}function Ah(o,a){return!(o&_t.Self||o&_t.Host&&a)}class co{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,u){return Oc(this._tNode,this._lView,a,Je(u),c)}}function sd(){return new co(Ar(),Ee())}function Dh(o){return z(()=>{const a=o.prototype.constructor,c=a[Ht]||hi(a),u=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==u;){const m=f[Ht]||hi(f);if(m&&m!==c)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function hi(o){return qe(o)?()=>{const a=hi(ie(o));return a&&a()}:ao(o)}function Sh(o){const a=o[at],c=a.type;return 2===c?a.declTNode:1===c?o[Cr]:null}function uo(o){return function rd(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const u=c.length;let f=0;for(;f<u;){const m=c[f];if(gl(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<u&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(Ar(),o)}const Bn="__parameters__";function Fo(o,a,c){return z(()=>{const u=function Vc(o){return function(...c){if(o){const u=o(...c);for(const f in u)this[f]=u[f]}}}(a);function f(...m){if(this instanceof f)return u.apply(this,m),this;const v=new f(...m);return T.annotation=v,T;function T(C,R,k){const $=C.hasOwnProperty(Bn)?C[Bn]:Object.defineProperty(C,Bn,{value:[]})[Bn];for(;$.length<=k;)$.push(null);return($[k]=$[k]||[]).push(v),C}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class un{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=ut({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Lo(o,a){o.forEach(c=>Array.isArray(c)?Lo(c,a):a(c))}function xh(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function ld(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function jc(o,a){const c=[];for(let u=0;u<o;u++)c.push(a);return c}function Ei(o,a,c){let u=Qr(o,a);return u>=0?o[1|u]=c:(u=~u,function Ta(o,a,c,u){let f=o.length;if(f==a)o.push(c,u);else if(1===f)o.push(u,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=u}}(o,u,a,c)),u}function dn(o,a){const c=Qr(o,a);if(c>=0)return o[1|c]}function Qr(o,a){return function Sr(o,a,c){let u=0,f=o.length>>c;for(;f!==u;){const m=u+(f-u>>1),v=o[m<<c];if(a===v)return m<<c;v>a?f=m:u=m+1}return~(f<<c)}(o,a,1)}const cs=Xt(Fo("Optional"),8),gt=Xt(Fo("SkipSelf"),4);var Ot=(()=>((Ot=Ot||{})[Ot.Important=1]="Important",Ot[Ot.DashCase=2]="DashCase",Ot))();const fd=new Map;let fo=0;const Vh="__ngContext__";function Br(o,a){li(a)?(o[Vh]=a[ic],function Qp(o){fd.set(o[ic],o)}(a)):o[Vh]=a}let eg;function Sl(o,a){return eg(o,a)}function md(o){const a=o[Wn];return ss(a)?a[Wn]:a}function jh(o){return tg(o[Do])}function Zc(o){return tg(o[br])}function tg(o){for(;null!==o&&!ss(o);)o=o[br];return o}function Sa(o,a,c,u,f){if(null!=u){let m,v=!1;ss(u)?m=u:li(u)&&(v=!0,u=u[es]);const T=xn(u);0===o&&null!==c?null==f?lg(a,c,T):jo(a,c,T,f||null,!0):1===o&&null!==c?jo(a,c,T,f||null,!0):2===o?function te(o,a,c){const u=Ho(o,a);u&&function Ed(o,a,c,u){o.removeChild(a,c,u)}(o,u,a,c)}(a,T,v):3===o&&a.destroyNode(T),null!=m&&function tn(o,a,c,u,f){const m=c[sc];m!==xn(c)&&Sa(a,o,u,m,f);for(let T=Fr;T<c.length;T++){const C=c[T];Ve(C[at],C,o,a,u,m)}}(a,o,m,c,f)}}function rg(o,a,c){return o.createElement(a,c)}function b_(o,a){const c=o[Ri],u=c.indexOf(a),f=a[Wn];512&a[pt]&&(a[pt]&=-513,Zr(f,-1)),c.splice(u,1)}function yd(o,a){if(o.length<=Fr)return;const c=Fr+a,u=o[c];if(u){const f=u[la];null!==f&&f!==o&&b_(f,u),a>0&&(o[c-1][br]=u[br]);const m=ld(o,Fr+a);!function ig(o,a){Ve(o,a,a[en],2,null,null),a[es]=null,a[Cr]=null}(u[at],u);const v=m[rs];null!==v&&v.detachView(m[at]),u[Wn]=null,u[br]=null,u[pt]&=-65}return u}function $h(o,a){if(!(128&a[pt])){const c=a[en];c.destroyNode&&Ve(o,a,c,3,null,null),function og(o){let a=o[Do];if(!a)return vd(o[at],o);for(;a;){let c=null;if(li(a))c=a[Do];else{const u=a[Fr];u&&(c=u)}if(!c){for(;a&&!a[br]&&a!==o;)li(a)&&vd(a[at],a),a=a[Wn];null===a&&(a=o),li(a)&&vd(a[at],a),c=a&&a[br]}a=c}}(a)}}function vd(o,a){if(!(128&a[pt])){a[pt]&=-65,a[pt]|=128,function Ra(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let u=0;u<c.length;u+=2){const f=a[c[u]];if(!(f instanceof $i)){const m=c[u+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const T=f[m[v]],C=m[v+1];ci(4,T,C);try{C.call(T)}finally{ci(5,T,C)}}else{ci(4,f,m);try{m.call(f)}finally{ci(5,f,m)}}}}}(o,a),function ag(o,a){const c=o.cleanup,u=a[oo];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const v=c[m+3];v>=0?u[f=v]():u[f=-v].unsubscribe(),m+=2}else{const v=u[f=c[m+1]];c[m].call(v)}if(null!==u){for(let m=f+1;m<u.length;m++)(0,u[m])();a[oo]=null}}(o,a),1===a[at].type&&a[en].destroy();const c=a[la];if(null!==c&&ss(a[Wn])){c!==a[Wn]&&b_(c,a);const u=a[rs];null!==u&&u.detachView(o)}!function OI(o){fd.delete(o[ic])}(a)}}function Rl(o,a,c){return function C_(o,a,c){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return c[es];{const{componentOffset:f}=u;if(f>-1){const{encapsulation:m}=o.data[u.directiveStart+f];if(m===U.None||m===U.Emulated)return null}return Vr(u,c)}}(o,a.parent,c)}function jo(o,a,c,u,f){o.insertBefore(a,c,u,f)}function lg(o,a,c){o.appendChild(a,c)}function A_(o,a,c,u,f){null!==u?jo(o,a,c,u,f):lg(o,a,c)}function Ho(o,a){return o.parentNode(a)}function ug(o,a,c){return Pl(o,a,c)}let E,$o,zh,qh,Pl=function D_(o,a,c){return 40&o.type?Vr(o,c):null};function _(o,a,c,u){const f=Rl(o,u,a),m=a[en],T=ug(u.parent||a[Cr],u,a);if(null!=f)if(Array.isArray(c))for(let C=0;C<c.length;C++)A_(m,f,c[C],T,!1);else A_(m,f,c,T,!1);void 0!==E&&E(m,u,a,c,f)}function I(o,a){if(null!==a){const c=a.type;if(3&c)return Vr(a,o);if(4&c)return F(-1,o[a.index]);if(8&c){const u=a.child;if(null!==u)return I(o,u);{const f=o[a.index];return ss(f)?F(-1,f):xn(f)}}if(32&c)return Sl(a,o)()||xn(o[a.index]);{const u=P(o,a);return null!==u?Array.isArray(u)?u[0]:I(md(o[Er]),u):I(o,a.next)}}return null}function P(o,a){return null!==a?o[Er][Cr].projection[a.projection]:null}function F(o,a){const c=Fr+o+1;if(c<a.length){const u=a[c],f=u[at].firstChild;if(null!==f)return I(u,f)}return a[sc]}function fe(o,a,c,u,f,m,v){for(;null!=c;){const T=u[c.index],C=c.type;if(v&&0===a&&(T&&Br(xn(T),u),c.flags|=2),32!=(32&c.flags))if(8&C)fe(o,a,c.child,u,f,m,!1),Sa(a,o,f,T,m);else if(32&C){const R=Sl(c,u);let k;for(;k=R();)Sa(a,o,f,k,m);Sa(a,o,f,T,m)}else 16&C?bt(o,a,u,c,f,m):Sa(a,o,f,T,m);c=v?c.projectionNext:c.next}}function Ve(o,a,c,u,f,m){fe(c,u,o.firstChild,a,f,m,!1)}function bt(o,a,c,u,f,m){const v=c[Er],C=v[Cr].projection[u.projection];if(Array.isArray(C))for(let R=0;R<C.length;R++)Sa(a,o,f,C[R],m);else fe(o,a,C,v[Wn],f,m,!0)}function zs(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Qc(o,a,c){const{mergedAttrs:u,classes:f,styles:m}=c;null!==u&&Dc(o,a,u),null!==f&&zs(o,a,f),null!==m&&function po(o,a,c){o.setAttribute(a,"style",c)}(o,a,m)}function Ml(o){return function Xc(){if(void 0===$o&&($o=null,En.trustedTypes))try{$o=En.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return $o}()?.createHTML(o)||o}function Gv(o){zh=o}function zv(){if(void 0===qh&&(qh=null,En.trustedTypes))try{qh=En.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return qh}function FI(o){return zv()?.createHTML(o)||o}function LI(o){return zv()?.createScriptURL(o)||o}class wd{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ct})`}}class GD extends wd{getTypeName(){return"HTML"}}class zD extends wd{getTypeName(){return"Style"}}class WD extends wd{getTypeName(){return"Script"}}class VI extends wd{getTypeName(){return"URL"}}class qv extends wd{getTypeName(){return"ResourceURL"}}function Go(o){return o instanceof wd?o.changingThisBreaksApplicationSecurity:o}function As(o,a){const c=function Kh(o){return o instanceof wd&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${ct})`)}return c===a}function UI(o){return new GD(o)}function BI(o){return new zD(o)}function qD(o){return new WD(o)}function Zh(o){return new VI(o)}function jI(o){return new qv(o)}class R_{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Ml(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class $I{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=Ml(a),c}}const GI=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yh(o){return(o=String(o)).match(GI)?o:"unsafe:"+o}function zo(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function fg(...o){const a={};for(const c of o)for(const u in c)c.hasOwnProperty(u)&&(a[u]=!0);return a}const Qh=zo("area,br,col,hr,img,wbr"),zI=zo("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),WI=zo("rp,rt"),P_=fg(Qh,fg(zI,zo("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),fg(WI,zo("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fg(WI,zI)),M_=zo("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pg=fg(M_,zo("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),zo("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Zv=zo("script,style,template");class YD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let c=a.firstChild,u=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?u=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,u&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let f=this.checkClobberedElement(c,c.nextSibling);if(f){c=f;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(a){const c=a.nodeName.toLowerCase();if(!P_.hasOwnProperty(c))return this.sanitizedSomething=!0,!Zv.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const u=a.attributes;for(let f=0;f<u.length;f++){const m=u.item(f),v=m.name,T=v.toLowerCase();if(!pg.hasOwnProperty(T)){this.sanitizedSomething=!0;continue}let C=m.value;M_[T]&&(C=Yh(C)),this.buf.push(" ",v,'="',Qv(C),'"')}return this.buf.push(">"),!0}endElement(a){const c=a.nodeName.toLowerCase();P_.hasOwnProperty(c)&&!Qh.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(a){this.buf.push(Qv(a))}checkClobberedElement(a,c){if(c&&(a.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return c}}const QD=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yv=/([^\#-~ |!])/g;function Qv(o){return o.replace(/&/g,"&amp;").replace(QD,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Yv,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Xv;function XD(o,a){let c=null;try{Xv=Xv||function HI(o){const a=new $I(o);return function Kv(){try{return!!(new window.DOMParser).parseFromString(Ml(""),"text/html")}catch{return!1}}()?new R_(a):a}(o);let u=a?String(a):"";c=Xv.getInertBodyElement(u);let f=5,m=u;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,u=m,m=c.innerHTML,c=Xv.getInertBodyElement(u)}while(u!==m);return Ml((new YD).sanitizeChildren(KI(c)||c))}finally{if(c){const u=KI(c)||c;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function KI(o){return"content"in o&&function Jk(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function ZI(o){const a=mg();return a?FI(a.sanitize(wr.HTML,o)||""):As(o,"HTML")?FI(Go(o)):XD(function Wh(){return void 0!==zh?zh:typeof document<"u"?document:void 0}(),xe(o))}function Jv(o){const a=mg();return a?a.sanitize(wr.URL,o)||"":As(o,"URL")?Go(o):Yh(xe(o))}function N_(o){const a=mg();if(a)return LI(a.sanitize(wr.RESOURCE_URL,o)||"");if(As(o,"ResourceURL"))return LI(Go(o));throw new we(904,!1)}function QI(o,a,c){return function eS(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?N_:Jv}(a,c)(o)}function mg(){const o=Ee();return o&&o[Fu]}const tE=new un("ENVIRONMENT_INITIALIZER"),Id=new un("INJECTOR",-1),Xh=new un("INJECTOR_DEF_TYPES");class XI{get(a,c=ir){if(c===ir){const u=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw u.name="NullInjectorError",u}return c}}function nS(o){return{\u0275providers:o}}function _g(...o){return{\u0275providers:Jh(0,o),\u0275fromNgModule:!0}}function Jh(o,...a){const c=[],u=new Set;let f;return Lo(a,m=>{const v=m;nE(v,c,[],u)&&(f||(f=[]),f.push(v))}),void 0!==f&&JI(f,c),c}function JI(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];rE(f,m=>{a.push(m)})}}function nE(o,a,c,u){if(!(o=ie(o)))return!1;let f=null,m=Zn(o);const v=!m&&In(o);if(m||v){if(v&&!v.standalone)return!1;f=o}else{const C=o.ngModule;if(m=Zn(C),!m)return!1;f=C}const T=u.has(f);if(v){if(T)return!1;if(u.add(f),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const R of C)nE(R,a,c,u)}}else{if(!m)return!1;{if(null!=m.imports&&!T){let R;u.add(f);try{Lo(m.imports,k=>{nE(k,a,c,u)&&(R||(R=[]),R.push(k))})}finally{}void 0!==R&&JI(R,a)}if(!T){const R=ao(f)||(()=>new f);a.push({provide:f,useFactory:R,deps:ee},{provide:Xh,useValue:f,multi:!0},{provide:tE,useValue:()=>qt(f),multi:!0})}const C=m.providers;null==C||T||rE(C,k=>{a.push(k)})}}return f!==o&&void 0!==o.providers}function rE(o,a){for(let c of o)ke(c)&&(c=c.\u0275providers),Array.isArray(c)?rE(c,a):a(c)}const rS=le({provide:String,useValue:le});function iE(o){return null!==o&&"object"==typeof o&&rS in o}function xl(o){return"function"==typeof o}const Jc=new un("Set Injector scope."),O_={},sS={};let sE;function F_(){return void 0===sE&&(sE=new XI),sE}class Td{}class tT extends Td{get destroyed(){return this._destroyed}constructor(a,c,u,f){super(),this.parent=c,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,tf(a,v=>this.processProvider(v)),this.records.set(Id,ef(void 0,this)),f.has("environment")&&this.records.set(Td,ef(void 0,this));const m=this.records.get(Jc);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(Xh.multi,ee,_t.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=Jt(this),u=Vn(void 0);try{return a()}finally{Jt(c),Vn(u)}}get(a,c=ir,u=_t.Default){this.assertNotDestroyed(),u=Je(u);const f=Jt(this),m=Vn(void 0);try{if(!(u&_t.SkipSelf)){let T=this.records.get(a);if(void 0===T){const C=function cE(o){return"function"==typeof o||"object"==typeof o&&o instanceof un}(a)&&Qt(a);T=C&&this.injectableDefInScope(C)?ef(oE(a),O_):null,this.records.set(a,T)}if(null!=T)return this.hydrate(a,T)}return(u&_t.Self?F_():this.parent).get(a,c=u&_t.Optional&&c===ir?null:c)}catch(v){if("NullInjectorError"===v.name){if((v[zn]=v[zn]||[]).unshift(ge(a)),f)throw v;return function Hn(o,a,c,u){const f=o[zn];throw a[Wt]&&f.unshift(a[Wt]),o.message=function q(o,a,c,u=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==qr?o.slice(2):o;let f=ge(a);if(Array.isArray(a))f=a.map(ge).join(" -> ");else if("object"==typeof a){let m=[];for(let v in a)if(a.hasOwnProperty(v)){let T=a[v];m.push(v+":"+("string"==typeof T?JSON.stringify(T):ge(T)))}f=`{${m.join(", ")}}`}return`${c}${u?"("+u+")":""}[${f}]: ${o.replace(kr,"\n  ")}`}("\n"+o.message,f,c,u),o[Nr]=f,o[zn]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Vn(m),Jt(f)}}resolveInjectorInitializers(){const a=Jt(this),c=Vn(void 0);try{const u=this.get(tE.multi,ee,_t.Self);for(const f of u)f()}finally{Jt(a),Vn(c)}}toString(){const a=[],c=this.records;for(const u of c.keys())a.push(ge(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(a){let c=xl(a=ie(a))?a:ie(a&&a.provide);const u=function aS(o){return iE(o)?ef(void 0,o.useValue):ef(aE(o),O_)}(a);if(xl(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=ef(void 0,O_,!0),f.factory=()=>Rt(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,u)}hydrate(a,c){return c.value===O_&&(c.value=sS,c.value=c.factory()),"object"==typeof c.value&&c.value&&function nT(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=ie(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function oE(o){const a=Qt(o),c=null!==a?a.factory:ao(o);if(null!==c)return c;if(o instanceof un)throw new we(204,!1);if(o instanceof Function)return function oS(o){const a=o.length;if(a>0)throw jc(a,"?"),new we(204,!1);const c=function Gn(o){return o&&(o[Rn]||o[si])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new we(204,!1)}function aE(o,a,c){let u;if(xl(o)){const f=ie(o);return ao(f)||oE(f)}if(iE(o))u=()=>ie(o.useValue);else if(function eT(o){return!(!o||!o.useFactory)}(o))u=()=>o.useFactory(...Rt(o.deps||[]));else if(function iS(o){return!(!o||!o.useExisting)}(o))u=()=>qt(ie(o.useExisting));else{const f=ie(o&&(o.useClass||o.provide));if(!function lE(o){return!!o.deps}(o))return ao(f)||oE(f);u=()=>new f(...Rt(o.deps))}return u}function ef(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function tf(o,a){for(const c of o)Array.isArray(c)?tf(c,a):c&&ke(c)?tf(c.\u0275providers,a):a(c)}class lS{}class rT{}class sT{resolveComponentFactory(a){throw function cS(o){const a=Error(`No component factory found for ${ge(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let nf=(()=>{class o{}return o.NULL=new sT,o})();function L_(){return Nl(Ar(),Ee())}function Nl(o,a){return new rf(Vr(o,a))}let rf=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=L_,o})();function yg(o){return o instanceof rf?o.nativeElement:o}class dE{}let uS=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function dS(){const o=Ee(),c=sr(Ar().index,o);return(li(c)?c:o)[en]}(),o})(),hS=(()=>{class o{}return o.\u0275prov=ut({token:o,providedIn:"root",factory:()=>null}),o})();class oT{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const aT=new oT("15.2.10"),V_={},hE="ngOriginalError";function fE(o){return o[hE]}class vg{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&fE(a);for(;c&&fE(c);)c=fE(c);return c||null}}function Pa(o){return o instanceof Function?o():o}function fT(o,a,c){let u=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===u||o.charCodeAt(f+m)<=32)return f}c=f+1}}const pE="ng-template";function gE(o,a,c){let u=0,f=!0;for(;u<o.length;){let m=o[u++];if("string"==typeof m&&f){const v=o[u++];if(c&&"class"===m&&-1!==fT(v.toLowerCase(),a,0))return!0}else{if(1===m){for(;u<o.length&&"string"==typeof(m=o[u++]);)if(m.toLowerCase()===a)return!0;return!1}"number"==typeof m&&(f=!1)}}return!1}function mE(o){return 4===o.type&&o.value!==pE}function sf(o,a,c){return a===(4!==o.type||c?o.value:pE)}function _E(o,a,c){let u=4;const f=o.attrs||[],m=function gT(o){for(let a=0;a<o.length;a++)if(gl(o[a]))return a;return o.length}(f);let v=!1;for(let T=0;T<a.length;T++){const C=a[T];if("number"!=typeof C){if(!v)if(4&u){if(u=2|1&u,""!==C&&!sf(o,C,c)||""===C&&1===a.length){if(Wo(u))return!1;v=!0}}else{const R=8&u?C:a[++T];if(8&u&&null!==o.attrs){if(!gE(o.attrs,R,c)){if(Wo(u))return!1;v=!0}continue}const $=pT(8&u?"class":C,f,mE(o),c);if(-1===$){if(Wo(u))return!1;v=!0;continue}if(""!==R){let J;J=$>m?"":f[$+1].toLowerCase();const oe=8&u?J:null;if(oe&&-1!==fT(oe,R,0)||2&u&&R!==J){if(Wo(u))return!1;v=!0}}}}else{if(!v&&!Wo(u)&&!Wo(C))return!1;if(v&&Wo(C))continue;v=!1,u=C|1&u}}return Wo(u)||v}function Wo(o){return 0==(1&o)}function pT(o,a,c,u){if(null===a)return-1;let f=0;if(u||!c){let m=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)m=!0;else{if(1===v||2===v){let T=a[++f];for(;"string"==typeof T;)T=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=m?1:2}return-1}return function mT(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const u=o[c];if("number"==typeof u)return-1;if(u===a)return c;c++}return-1}(a,o)}function wg(o,a,c=!1){for(let u=0;u<a.length;u++)if(_E(o,a[u],c))return!0;return!1}function vS(o,a){e:for(let c=0;c<a.length;c++){const u=a[c];if(o.length===u.length){for(let f=0;f<o.length;f++)if(o[f]!==u[f])continue e;return!0}}return!1}function _T(o,a){return o?":not("+a.trim()+")":a}function ES(o){let a=o[0],c=1,u=2,f="",m=!1;for(;c<o.length;){let v=o[c];if("string"==typeof v)if(2&u){const T=o[++c];f+="["+v+(T.length>0?'="'+T+'"':"")+"]"}else 8&u?f+="."+v:4&u&&(f+=" "+v);else""!==f&&!Wo(v)&&(a+=_T(m,f),f=""),u=v,m=m||!Wo(u);c++}return""!==f&&(a+=_T(m,f)),a}const Kt={};function yT(o){vT(an(),Ee(),di()+o,!1)}function vT(o,a,c,u){if(!u)if(3==(3&a[pt])){const m=o.preOrderCheckHooks;null!==m&&hl(a,m,c)}else{const m=o.preOrderHooks;null!==m&&Ju(a,m,0,c)}Bs(c)}function wT(o,a=null,c=null,u){const f=yE(o,a,c,u);return f.resolveInjectorInitializers(),f}function yE(o,a=null,c=null,u,f=new Set){const m=[c||ee,_g(o)];return u=u||("object"==typeof o?void 0:ge(o)),new tT(m,a||F_(),u||null,f)}let af=(()=>{class o{static create(c,u){if(Array.isArray(c))return wT({name:""},u,c,"");{const f=c.name??"";return wT({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=ir,o.NULL=new XI,o.\u0275prov=ut({token:o,providedIn:"any",factory:()=>qt(Id)}),o.__NG_ELEMENT_ID__=-1,o})();function uf(o,a=_t.Default){const c=Ee();return null===c?qt(o,a):Oc(Ar(),c,ie(o),a)}function AT(){throw new Error("invalid")}function DT(o,a){const c=o.contentQueries;if(null!==c)for(let u=0;u<c.length;u+=2){const m=c[u+1];if(-1!==m){const v=o.data[m];Qu(c[u]),v.contentQueries(2,a[m],m)}}}function H_(o,a,c,u,f,m,v,T,C,R,k){const $=a.blueprint.slice();return $[es]=f,$[pt]=76|u,(null!==k||o&&1024&o[pt])&&($[pt]|=1024),cl($),$[Wn]=$[ns]=o,$[Qn]=c,$[ts]=v||o&&o[ts],$[en]=T||o&&o[en],$[Fu]=C||o&&o[Fu]||null,$[nc]=R||o&&o[nc]||null,$[Cr]=m,$[ic]=function Yp(){return fo++}(),$[Pp]=k,$[Er]=2==a.type?o[Er]:$,$}function Cg(o,a,c,u,f){let m=o.data[a];if(null===m)m=function TE(o,a,c,u,f){const m=_c(),v=fa(),C=o.data[a]=function Te(o,a,c,u,f,m){return{type:c,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,c,a,u,f);return null===o.firstChild&&(o.firstChild=C),null!==m&&(v?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C,C.prev=m)),C}(o,a,c,u,f),function vc(){return Gt.lFrame.inI18n}()&&(m.flags|=32);else if(64&m.type){m.type=c,m.value=u,m.attrs=f;const v=function ha(){const o=Gt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return _i(m,!0),m}function B(o,a,c,u){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(u),o.blueprint.push(u),o.data.push(null);return f}function Ni(o,a,c){ma(a);try{const u=o.viewQuery;null!==u&&Ng(1,u,c);const f=o.template;null!==f&&Ds(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&DT(o,a),o.staticViewQueries&&Ng(2,o.viewQuery,c);const m=o.components;null!==m&&function ST(o,a){for(let c=0;c<a.length;c++)OT(o,a[c])}(a,m)}catch(u){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),u}finally{a[pt]&=-5,Op()}}function ki(o,a,c,u){const f=a[pt];if(128!=(128&f)){ma(a);try{cl(a),function ga(o){return Gt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&Ds(o,a,c,2,u);const v=3==(3&f);if(v){const R=o.preOrderCheckHooks;null!==R&&hl(a,R,null)}else{const R=o.preOrderHooks;null!==R&&Ju(a,R,0,null),fl(a,0)}if(function hf(o){for(let a=jh(o);null!==a;a=Zc(a)){if(!a[Vu])continue;const c=a[Ri];for(let u=0;u<c.length;u++){const f=c[u];512&f[pt]||Zr(f[Wn],1),f[pt]|=512}}}(a),function HS(o){for(let a=jh(o);null!==a;a=Zc(a))for(let c=Fr;c<a.length;c++){const u=a[c],f=u[at];Mo(u)&&ki(f,u,f.template,u[Qn])}}(a),null!==o.contentQueries&&DT(o,a),v){const R=o.contentCheckHooks;null!==R&&hl(a,R)}else{const R=o.contentHooks;null!==R&&Ju(a,R,1),fl(a,1)}!function LS(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let u=0;u<c.length;u++){const f=c[u];if(f<0)Bs(~f);else{const m=f,v=c[++u],T=c[++u];Ec(v,m),T(2,a[m])}}}finally{Bs(-1)}}(o,a);const T=o.components;null!==T&&function VS(o,a){for(let c=0;c<a.length;c++)kT(o,a[c])}(a,T);const C=o.viewQuery;if(null!==C&&Ng(2,C,u),v){const R=o.viewCheckHooks;null!==R&&hl(a,R)}else{const R=o.viewHooks;null!==R&&Ju(a,R,2),fl(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[pt]&=-41,512&a[pt]&&(a[pt]&=-513,Zr(a[Wn],-1))}finally{Op()}}}function Ds(o,a,c,u,f){const m=di(),v=2&u;try{Bs(-1),v&&a.length>Un&&vT(o,a,Un,!1),ci(v?2:0,f),c(u,f)}finally{Bs(m),ci(v?3:1,f)}}function Ag(o,a,c){if(tl(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const v=o.data[m];v.contentQueries&&v.contentQueries(1,c[m],m)}}}function Tn(o,a,c){yh()&&(function Wi(o,a,c,u){const f=c.directiveStart,m=c.directiveEnd;nl(c)&&function jS(o,a,c){const u=Vr(a,o),f=$_(c),m=o[ts],v=xg(o,H_(o,f,null,c.onPush?32:16,u,a,m,m.createRenderer(u,c),null,null,null));o[a.index]=v}(a,c,o.data[f+c.componentOffset]),o.firstCreatePass||Gi(c,a),Br(u,a);const v=c.initialInputs;for(let T=f;T<m;T++){const C=o.data[T],R=ko(a,o,T,c);Br(R,a),null!==v&&Ma(0,T-f,R,C,0,v),Pi(C)&&(sr(c.index,a)[Qn]=ko(a,o,T,c))}}(o,a,c,Vr(c,a)),64==(64&c.flags)&&Pg(o,a,c))}function Dg(o,a,c=Vr){const u=a.localNames;if(null!==u){let f=a.index+1;for(let m=0;m<u.length;m+=2){const v=u[m+1],T=-1===v?c(a,o):o[v];o[f++]=T}}}function $_(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=bE(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function bE(o,a,c,u,f,m,v,T,C,R){const k=Un+u,$=k+f,J=function fi(o,a){const c=[];for(let u=0;u<a;u++)c.push(u<o?null:Kt);return c}(k,$),oe="function"==typeof R?R():R;return J[at]={type:o,blueprint:J,template:c,queries:null,viewQuery:T,declTNode:a,data:J.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:$,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:oe,incompleteFirstPass:!1}}function G_(o,a,c,u){const f=RE(a);null===c?f.push(u):(f.push(c),o.firstCreatePass&&VT(o).push(u,f.length-1))}function RT(o,a,c,u){for(let f in o)if(o.hasOwnProperty(f)){c=null===c?{}:c;const m=o[f];null===u?_o(c,a,f,m):u.hasOwnProperty(f)&&_o(c,a,u[f],m)}return c}function _o(o,a,c,u){o.hasOwnProperty(c)?o[c].push(a,u):o[c]=[a,u]}function Pt(o,a,c,u,f,m,v,T){const C=Vr(a,c);let k,R=a.inputs;!T&&null!=R&&(k=R[u])?(Ad(o,c,k,u,f),nl(a)&&function z_(o,a){const c=sr(a,o);16&c[pt]||(c[pt]|=32)}(c,a.index)):3&a.type&&(u=function CE(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(u),f=null!=v?v(f,a.value||"",u):f,m.setProperty(C,u,f))}function Rg(o,a,c,u){if(yh()){const f=null===u?null:{"":-1},m=function eu(o,a){const c=o.directiveRegistry;let u=null,f=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];if(wg(a,v.selectors,!1))if(u||(u=[]),Pi(v))if(null!==v.findHostDirectiveDefs){const T=[];f=f||new Map,v.findHostDirectiveDefs(v,T,f),u.unshift(...T,v),AE(o,a,T.length)}else u.unshift(v),AE(o,a,0);else f=f||new Map,v.findHostDirectiveDefs?.(v,u,f),u.push(v)}return null===u?null:[u,f]}(o,c);let v,T;null===m?v=T=null:[v,T]=m,null!==v&&PT(o,a,c,v,f,T),f&&function MT(o,a,c){if(a){const u=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new we(-301,!1);u.push(a[f],m)}}}(c,u,f)}c.mergedAttrs=Hs(c.mergedAttrs,c.attrs)}function PT(o,a,c,u,f,m){for(let R=0;R<u.length;R++)No(Gi(c,a),o,u[R].type);!function xT(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,u.length);for(let R=0;R<u.length;R++){const k=u[R];k.providersResolver&&k.providersResolver(k)}let v=!1,T=!1,C=B(o,a,u.length,null);for(let R=0;R<u.length;R++){const k=u[R];c.mergedAttrs=Hs(c.mergedAttrs,k.hostAttrs),qi(o,c,a,C,k),DE(C,k,f),null!==k.contentQueries&&(c.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(c.flags|=64);const $=k.type.prototype;!v&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(c.index),v=!0),!T&&($.ngOnChanges||$.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(c.index),T=!0),C++}!function ot(o,a,c){const f=a.directiveEnd,m=o.data,v=a.attrs,T=[];let C=null,R=null;for(let k=a.directiveStart;k<f;k++){const $=m[k],J=c?c.get($):null,Ae=J?J.outputs:null;C=RT($.inputs,k,C,J?J.inputs:null),R=RT($.outputs,k,R,Ae);const Ze=null===C||null===v||mE(a)?null:SE(C,k,v);T.push(Ze)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=8),C.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=T,a.inputs=C,a.outputs=R}(o,c,m)}function Pg(o,a,c){const u=c.directiveStart,f=c.directiveEnd,m=c.index,v=function Zu(){return Gt.lFrame.currentDirectiveIndex}();try{Bs(m);for(let T=u;T<f;T++){const C=o.data[T],R=a[T];ul(T),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&wi(C,R)}}finally{Bs(-1),ul(v)}}function wi(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function AE(o,a,c){a.componentOffset=c,(o.components??(o.components=[])).push(a.index)}function DE(o,a,c){if(c){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)c[a.exportAs[u]]=o;Pi(a)&&(c[""]=o)}}function qi(o,a,c,u,f){o.data[u]=f;const m=f.factory||(f.factory=ao(f.type)),v=new $i(m,Pi(f),uf);o.blueprint[u]=v,c[u]=v,function US(o,a,c,u,f){const m=f.hostBindings;if(m){let v=o.hostBindingOpCodes;null===v&&(v=o.hostBindingOpCodes=[]);const T=~a.index;(function BS(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(v)!=T&&v.push(T),v.push(c,u,m)}}(o,a,u,B(o,c,f.hostVars,Kt),f)}function Ss(o,a,c,u,f,m){const v=Vr(o,a);!function df(o,a,c,u,f,m,v){if(null==m)o.removeAttribute(a,f,c);else{const T=null==v?xe(m):v(m,u||"",f);o.setAttribute(a,f,T,c)}}(a[en],v,m,o.value,c,u,f)}function Ma(o,a,c,u,f,m){const v=m[a];if(null!==v){const T=u.setInput;for(let C=0;C<v.length;){const R=v[C++],k=v[C++],$=v[C++];null!==T?u.setInput(c,$,R,k):c[k]=$}}}function SE(o,a,c){let u=null,f=0;for(;f<c.length;){const m=c[f];if(0!==m)if(5!==m){if("number"==typeof m)break;if(o.hasOwnProperty(m)){null===u&&(u=[]);const v=o[m];for(let T=0;T<v.length;T+=2)if(v[T]===a){u.push(m,v[T+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return u}function NT(o,a,c,u){return[o,!0,!1,a,null,0,u,c,null,null]}function kT(o,a){const c=sr(a,o);if(Mo(c)){const u=c[at];48&c[pt]?ki(u,c,u.template,c[Qn]):c[Ao]>0&&Mg(c)}}function Mg(o){for(let u=jh(o);null!==u;u=Zc(u))for(let f=Fr;f<u.length;f++){const m=u[f];if(Mo(m))if(512&m[pt]){const v=m[at];ki(v,m,v.template,m[Qn])}else m[Ao]>0&&Mg(m)}const c=o[at].components;if(null!==c)for(let u=0;u<c.length;u++){const f=sr(c[u],o);Mo(f)&&f[Ao]>0&&Mg(f)}}function OT(o,a){const c=sr(a,o),u=c[at];(function $S(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(u,c),Ni(u,c,c[Qn])}function xg(o,a){return o[Do]?o[rc][br]=a:o[Do]=a,o[rc]=a,a}function ff(o){for(;o;){o[pt]|=32;const a=md(o);if(Uu(o)&&!a)return o;o=a}return null}function pf(o,a,c,u=!0){const f=a[ts];f.begin&&f.begin();try{ki(o,a,o.template,c)}catch(v){throw u&&UT(a,v),v}finally{f.end&&f.end()}}function Ng(o,a,c){Qu(0),a(o,c)}function RE(o){return o[oo]||(o[oo]=[])}function VT(o){return o.cleanup||(o.cleanup=[])}function UT(o,a){const c=o[nc],u=c?c.get(vg,null):null;u&&u.handleError(a)}function Ad(o,a,c,u,f){for(let m=0;m<c.length;){const v=c[m++],T=c[m++],C=a[v],R=o.data[v];null!==R.setInput?R.setInput(C,f,u,T):C[T]=f}}function W_(o,a,c){let u=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let v=0;v<a.length;v++){const T=a[v];"number"==typeof T?m=T:1==m?f=ve(f,T):2==m&&(u=ve(u,T+": "+a[++v]+";"))}c?o.styles=u:o.stylesWithoutHost=u,c?o.classes=f:o.classesWithoutHost=f}function Dd(o,a,c,u,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&u.push(xn(m)),ss(m))for(let T=Fr;T<m.length;T++){const C=m[T],R=C[at].firstChild;null!==R&&Dd(C[at],C,R,u)}const v=c.type;if(8&v)Dd(o,a,c.child,u);else if(32&v){const T=Sl(c,a);let C;for(;C=T();)u.push(C)}else if(16&v){const T=P(a,c);if(Array.isArray(T))u.push(...T);else{const C=md(a[Er]);Dd(C[at],C,T,u,!0)}}c=f?c.projectionNext:c.next}return u}class Sd{get rootNodes(){const a=this._lView,c=a[at];return Dd(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qn]}set context(a){this._lView[Qn]=a}get destroyed(){return 128==(128&this._lView[pt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[Wn];if(ss(a)){const c=a[ji],u=c?c.indexOf(this):-1;u>-1&&(yd(a,u),ld(c,u))}this._attachedToViewContainer=!1}$h(this._lView[at],this._lView)}onDestroy(a){G_(this._lView[at],this._lView,null,a)}markForCheck(){ff(this._cdRefInjectingView||this._lView)}detach(){this._lView[pt]&=-65}reattach(){this._lView[pt]|=64}detectChanges(){pf(this._lView[at],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Hh(o,a){Ve(o,a,a[en],2,null,null)}(this._lView[at],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=a}}class GS extends Sd{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;pf(a[at],a,a[Qn],!1)}checkNoChanges(){}get context(){return null}}class PE extends nf{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=In(a);return new Rd(c,this.ngModule)}}function ME(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class q_{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,u){u=Je(u);const f=this.injector.get(a,V_,u);return f!==V_||c===V_?f:this.parentInjector.get(a,c,u)}}class Rd extends rT{get inputs(){return ME(this.componentDef.inputs)}get outputs(){return ME(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function wS(o){return o.map(ES).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,u,f){let m=(f=f||this.ngModule)instanceof Td?f:f?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new q_(a,m):a,T=v.get(dE,null);if(null===T)throw new we(407,!1);const C=v.get(hS,null),R=T.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",$=u?function uO(o,a,c){return o.selectRootElement(a,c===U.ShadowDom)}(R,u,this.componentDef.encapsulation):rg(R,k,function BT(o){const a=o.toLowerCase();return"svg"===a?Lr:"math"===a?"math":null}(k)),J=this.componentDef.onPush?288:272,oe=bE(0,null,null,1,0,null,null,null,null,null),Ae=H_(null,oe,null,J,null,null,T,R,C,v,null);let Ze,it;ma(Ae);try{const yt=this.componentDef;let Ut,$e=null;yt.findHostDirectiveDefs?(Ut=[],$e=new Map,yt.findHostDirectiveDefs(yt,Ut,$e),Ut.push(yt)):Ut=[yt];const Yt=function NE(o,a){const c=o[at],u=Un;return o[u]=a,Cg(c,u,2,"#host",null)}(Ae,$),tr=function HT(o,a,c,u,f,m,v,T){const C=f[at];!function $T(o,a,c,u){for(const f of o)a.mergedAttrs=Hs(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(W_(a,a.mergedAttrs,!0),null!==c&&Qc(u,c,a))}(u,o,a,v);const R=m.createRenderer(a,c),k=H_(f,$_(c),null,c.onPush?32:16,f[o.index],o,m,R,T||null,null,null);return C.firstCreatePass&&AE(C,o,u.length-1),xg(f,k),f[o.index]=k}(Yt,$,yt,Ut,Ae,T,R);it=pc(oe,Un),$&&function GT(o,a,c,u){if(u)Dc(o,c,["ng-version",aT.full]);else{const{attrs:f,classes:m}=function IS(o){const a=[],c=[];let u=1,f=2;for(;u<o.length;){let m=o[u];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++u]):8===f&&c.push(m);else{if(!Wo(f))break;f=m}u++}return{attrs:a,classes:c}}(a.selectors[0]);f&&Dc(o,c,f),m&&m.length>0&&zs(o,c,m.join(" "))}}(R,yt,$,u),void 0!==c&&function zT(o,a,c){const u=o.projection=[];for(let f=0;f<a.length;f++){const m=c[f];u.push(null!=m?Array.from(m):null)}}(it,this.ngContentSelectors,c),Ze=function zS(o,a,c,u,f,m){const v=Ar(),T=f[at],C=Vr(v,f);PT(T,f,v,c,null,u);for(let k=0;k<c.length;k++)Br(ko(f,T,v.directiveStart+k,v),f);Pg(T,f,v),C&&Br(C,f);const R=ko(f,T,v.directiveStart+v.componentOffset,v);if(o[Qn]=f[Qn]=R,null!==m)for(const k of m)k(R,a);return Ag(T,v,o),R}(tr,yt,Ut,$e,Ae,[kE]),Ni(oe,Ae,null)}finally{Op()}return new xE(this.componentType,Ze,Nl(it,Ae),Ae,it)}}class xE extends lS{constructor(a,c,u,f,m){super(),this.location=u,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new GS(f),this.componentType=a}setInput(a,c){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[a])){const m=this._rootLView;Ad(m[at],m,f,a,c),ff(sr(this._tNode.index,m))}}get injector(){return new co(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function kE(){const o=Ar();bc(Ee()[at],o)}function FE(o){let a=function OE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const u=[o];for(;a;){let f;if(Pi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new we(903,!1);f=a.\u0275dir}if(f){if(c){u.push(f);const v=o;v.inputs=kg(o.inputs),v.declaredInputs=kg(o.declaredInputs),v.outputs=kg(o.outputs);const T=f.hostBindings;T&&Oi(o,T);const C=f.viewQuery,R=f.contentQueries;if(C&&VE(o,C),R&&Ii(o,R),be(o.inputs,f.inputs),be(o.declaredInputs,f.declaredInputs),be(o.outputs,f.outputs),Pi(f)&&f.data.animation){const k=o.data;k.animation=(k.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let v=0;v<m.length;v++){const T=m[v];T&&T.ngInherit&&T(o),T===FE&&(c=!1)}}a=Object.getPrototypeOf(a)}!function LE(o){let a=0,c=null;for(let u=o.length-1;u>=0;u--){const f=o[u];f.hostVars=a+=f.hostVars,f.hostAttrs=Hs(f.hostAttrs,c=Hs(c,f.hostAttrs))}}(u)}function kg(o){return o===N?{}:o===ee?[]:o}function VE(o,a){const c=o.viewQuery;o.viewQuery=c?(u,f)=>{a(u,f),c(u,f)}:a}function Ii(o,a){const c=o.contentQueries;o.contentQueries=c?(u,f,m)=>{a(u,f,m),c(u,f,m)}:a}function Oi(o,a){const c=o.hostBindings;o.hostBindings=c?(u,f)=>{a(u,f),c(u,f)}:a}function tu(o){return!!HE(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function HE(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Fi(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Q_(o,a,c,u){const f=Ee();return Fi(f,Us(),a)&&(an(),Ss(Xn(),f,o,a,c,u)),Q_}function Ol(o,a,c,u){return Fi(o,Us(),c)?a+xe(c)+u:Kt}function KE(o,a,c,u,f,m,v,T){const C=Ee(),R=an(),k=o+Un,$=R.firstCreatePass?function ZT(o,a,c,u,f,m,v,T,C){const R=a.consts,k=Cg(a,o,4,v||null,Is(R,T));Rg(a,c,k,Is(R,C)),bc(a,k);const $=k.tView=bE(2,k,u,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,R);return null!==a.queries&&(a.queries.template(a,k),$.queries=a.queries.embeddedTView(k)),k}(k,R,C,a,c,u,f,m,v):R.data[k];_i($,!1);const J=C[en].createComment("");_(R,C,J,$),Br(J,C),xg(C,C[k]=NT(J,C,J,$)),rl($)&&Tn(R,C,$),null!=v&&Dg(C,$,T)}function X_(o){return function Po(o,a){return o[a]}(function yc(){return Gt.lFrame.contextLView}(),Un+o)}function Vg(o,a,c){const u=Ee();return Fi(u,Us(),a)&&Pt(an(),Xn(),u,o,a,u[en],c,!1),Vg}function Ug(o,a,c,u,f){const v=f?"class":"style";Ad(o,c,a.inputs[v],v,u)}function ru(o,a,c,u){const f=Ee(),m=an(),v=Un+o,T=f[en],C=m.firstCreatePass?function J_(o,a,c,u,f,m){const v=a.consts,C=Cg(a,o,2,u,Is(v,f));return Rg(a,c,C,Is(v,m)),null!==C.attrs&&W_(C,C.attrs,!1),null!==C.mergedAttrs&&W_(C,C.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,C),C}(v,m,f,a,c,u):m.data[v],R=f[v]=rg(T,a,function yi(){return Gt.lFrame.currentNamespace}()),k=rl(C);return _i(C,!0),Qc(T,R,C),32!=(32&C.flags)&&_(m,f,R,C),0===function da(){return Gt.lFrame.elementDepthCount}()&&Br(R,f),function _h(){Gt.lFrame.elementDepthCount++}(),k&&(Tn(m,f,C),Ag(m,C,f)),null!==u&&Dg(f,C),ru}function Bg(){let o=Ar();fa()?Ku():(o=o.parent,_i(o,!1));const a=o;!function mc(){Gt.lFrame.elementDepthCount--}();const c=an();return c.firstCreatePass&&(bc(c,o),tl(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Up(o){return 0!=(8&o.flags)}(a)&&Ug(c,a,Ee(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function ya(o){return 0!=(16&o.flags)}(a)&&Ug(c,a,Ee(),a.stylesWithoutHost,!1),Bg}function ZE(o,a,c,u){return ru(o,a,c,u),Bg(),ZE}function If(o,a,c){const u=Ee(),f=an(),m=o+Un,v=f.firstCreatePass?function YT(o,a,c,u,f){const m=a.consts,v=Is(m,u),T=Cg(a,o,8,"ng-container",v);return null!==v&&W_(T,v,!0),Rg(a,c,T,Is(m,f)),null!==a.queries&&a.queries.elementStart(a,T),T}(m,f,u,a,c):f.data[m];_i(v,!0);const T=u[m]=u[en].createComment("");return _(f,u,T,v),Br(T,u),rl(v)&&(Tn(f,u,v),Ag(f,v,u)),null!=c&&Dg(u,v),If}function Tf(){let o=Ar();const a=an();return fa()?Ku():(o=o.parent,_i(o,!1)),a.firstCreatePass&&(bc(a,o),tl(o)&&a.queries.elementEnd(o)),Tf}function QE(){return Ee()}function ey(o){return!!o&&"function"==typeof o.then}function QT(o){return!!o&&"function"==typeof o.subscribe}const bf=QT;function ty(o,a,c,u){const f=Ee(),m=an(),v=Ar();return function iu(o,a,c,u,f,m,v){const T=rl(u),R=o.firstCreatePass&&VT(o),k=a[Qn],$=RE(a);let J=!0;if(3&u.type||v){const Ze=Vr(u,a),it=v?v(Ze):Ze,yt=$.length,Ut=v?Yt=>v(xn(Yt[u.index])):u.index;let $e=null;if(!v&&T&&($e=function Hg(o,a,c,u){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const v=f[m];if(v===c&&f[m+1]===u){const T=a[oo],C=f[m+2];return T.length>C?T[C]:null}"string"==typeof v&&(m+=2)}return null}(o,a,f,u.index)),null!==$e)($e.__ngLastListenerFn__||$e).__ngNextListenerFn__=m,$e.__ngLastListenerFn__=m,J=!1;else{m=XT(u,a,k,m,!1);const Yt=c.listen(it,f,m);$.push(m,Yt),R&&R.push(f,Ut,yt,yt+1)}}else m=XT(u,a,k,m,!1);const oe=u.outputs;let Ae;if(J&&null!==oe&&(Ae=oe[f])){const Ze=Ae.length;if(Ze)for(let it=0;it<Ze;it+=2){const tr=a[Ae[it]][Ae[it+1]].subscribe(m),Hr=$.length;$.push(m,tr),R&&R.push(f,u.index,Hr,-(Hr+1))}}}(m,f,f[en],v,o,a,u),ty}function ny(o,a,c,u){try{return ci(6,a,c),!1!==c(u)}catch(f){return UT(o,f),!1}finally{ci(7,a,c)}}function XT(o,a,c,u,f){return function m(v){if(v===Function)return u;ff(o.componentOffset>-1?sr(o.index,a):a);let C=ny(a,c,u,v),R=m.__ngNextListenerFn__;for(;R;)C=ny(a,c,R,v)&&C,R=R.__ngNextListenerFn__;return f&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function JT(o=1){return function Ih(o){return(Gt.lFrame.contextLView=function Xu(o,a){for(;o>0;)a=a[ns],o--;return a}(o,Gt.lFrame.contextLView))[Qn]}(o)}function eb(o,a){let c=null;const u=function U_(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const m=a[f];if("*"!==m){if(null===u?wg(o,m,!0):vS(u,m))return f}else c=f}return c}function XE(o){const a=Ee()[Er][Cr];if(!a.projection){const u=a.projection=jc(o?o.length:1,null),f=u.slice();let m=a.child;for(;null!==m;){const v=o?eb(m,o):0;null!==v&&(f[v]?f[v].projectionNext=m:u[v]=m,f[v]=m),m=m.next}}}function tb(o,a=0,c){const u=Ee(),f=an(),m=Cg(f,Un+o,16,null,c||null);null===m.projection&&(m.projection=a),Ku(),32!=(32&m.flags)&&function dt(o,a,c){bt(a[en],0,a,c,Rl(o,c,a),ug(c.parent||a[Cr],c,a))}(f,u,m)}function Fl(o,a,c){return Ko(o,"",a,"",c),Fl}function Ko(o,a,c,u,f){const m=Ee(),v=Ol(m,a,c,u);return v!==Kt&&Pt(an(),Xn(),m,o,v,m[en],f,!1),Ko}function Wg(o,a){return o<<17|a<<2}function su(o){return o>>17&32767}function ew(o){return 2|o}function Zo(o){return(131068&o)>>2}function xa(o,a){return-131069&o|a<<2}function ry(o){return 1|o}function tw(o,a,c,u,f){const m=o[c+1],v=null===a;let T=u?su(m):Zo(m),C=!1;for(;0!==T&&(!1===C||v);){const k=o[T+1];eR(o[T],a)&&(C=!0,o[T+1]=u?ry(k):ew(k)),T=u?su(k):Zo(k)}C&&(o[c+1]=u?ew(m):ry(m))}function eR(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Qr(o,a)>=0}const ei={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nw(o){return o.substring(ei.key,ei.keyEnd)}function sw(o,a){const c=ei.textEnd;return c===a?-1:(a=ei.keyEnd=function tR(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,ei.key=a,c),Df(o,a,c))}function Df(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function kd(o,a,c){return Yo(o,a,c,!1),kd}function Od(o,a){return Yo(o,a,null,!0),Od}function ow(o){!function Qo(o,a,c,u){const f=an(),m=Hi(2);f.firstUpdatePass&&lw(f,null,m,u);const v=Ee();if(c!==Kt&&Fi(v,m,c)){const T=f.data[di()];if(db(T,u)&&!aw(f,m)){let C=u?T.classesWithoutHost:T.stylesWithoutHost;null!==C&&(c=ve(C,c||"")),Ug(f,T,v,c,u)}else!function ub(o,a,c,u,f,m,v,T){f===Kt&&(f=ee);let C=0,R=0,k=0<f.length?f[0]:null,$=0<m.length?m[0]:null;for(;null!==k||null!==$;){const J=C<f.length?f[C+1]:void 0,oe=R<m.length?m[R+1]:void 0;let Ze,Ae=null;k===$?(C+=2,R+=2,J!==oe&&(Ae=$,Ze=oe)):null===$||null!==k&&k<$?(C+=2,Ae=k):(R+=2,Ae=$,Ze=oe),null!==Ae&&uy(o,a,c,u,Ae,Ze,v,T),k=C<f.length?f[C]:null,$=R<m.length?m[R]:null}}(f,T,v,v[en],v[m+1],v[m+1]=function cb(o,a,c){if(null==c||""===c)return ee;const u=[],f=Go(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(u,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(u,m,f[m]);else"string"==typeof f&&a(u,f);return u}(o,a,c),u,m)}}(Zg,ka,o,!0)}function ka(o,a){for(let c=function iw(o){return function ob(o){ei.key=0,ei.keyEnd=0,ei.value=0,ei.valueEnd=0,ei.textEnd=o.length}(o),sw(o,Df(o,0,ei.textEnd))}(a);c>=0;c=sw(a,c))Ei(o,nw(a),!0)}function Yo(o,a,c,u){const f=Ee(),m=an(),v=Hi(2);m.firstUpdatePass&&lw(m,o,v,u),a!==Kt&&Fi(f,v,a)&&uy(m,m.data[di()],f,f[en],o,f[v+1]=function dy(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=ge(Go(o)))),o}(a,c),u,v)}function aw(o,a){return a>=o.expandoStartIndex}function lw(o,a,c,u){const f=o.data;if(null===f[c+1]){const m=f[di()],v=aw(o,c);db(m,u)&&null===a&&!v&&(a=!1),a=function ab(o,a,c,u){const f=wc(o);let m=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(c=Kg(c=ly(null,o,a,c,u),a.attrs,u),m=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(c=ly(f,o,a,c,u),null===m){let C=function ay(o,a,c){const u=c?a.classBindings:a.styleBindings;if(0!==Zo(u))return o[su(u)]}(o,a,u);void 0!==C&&Array.isArray(C)&&(C=ly(null,o,a,C[1],u),C=Kg(C,a.attrs,u),function lb(o,a,c,u){o[su(c?a.classBindings:a.styleBindings)]=u}(o,a,u,C))}else m=function Oa(o,a,c){let u;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)u=Kg(u,o[m].hostAttrs,c);return Kg(u,a.attrs,c)}(o,a,u)}return void 0!==m&&(u?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,u),function XS(o,a,c,u,f,m){let v=m?a.classBindings:a.styleBindings,T=su(v),C=Zo(v);o[u]=c;let k,R=!1;if(Array.isArray(c)?(k=c[1],(null===k||Qr(c,k)>0)&&(R=!0)):k=c,f)if(0!==C){const J=su(o[T+1]);o[u+1]=Wg(J,T),0!==J&&(o[J+1]=xa(o[J+1],u)),o[T+1]=function YS(o,a){return 131071&o|a<<17}(o[T+1],u)}else o[u+1]=Wg(T,0),0!==T&&(o[T+1]=xa(o[T+1],u)),T=u;else o[u+1]=Wg(C,0),0===T?T=u:o[C+1]=xa(o[C+1],u),C=u;R&&(o[u+1]=ew(o[u+1])),tw(o,k,u,!0),tw(o,k,u,!1),function JS(o,a,c,u,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&Qr(m,a)>=0&&(c[u+1]=ry(c[u+1]))}(a,k,o,u,m),v=Wg(T,C),m?a.classBindings=v:a.styleBindings=v}(f,m,a,c,v,u)}}function ly(o,a,c,u,f){let m=null;const v=c.directiveEnd;let T=c.directiveStylingLast;for(-1===T?T=c.directiveStart:T++;T<v&&(m=a[T],u=Kg(u,m.hostAttrs,f),m!==o);)T++;return null!==o&&(c.directiveStylingLast=T),u}function Kg(o,a,c){const u=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const v=a[m];"number"==typeof v?f=v:f===u&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ei(o,v,!!c||a[++m]))}return void 0===o?null:o}function Zg(o,a,c){const u=String(a);""!==u&&!u.includes(" ")&&Ei(o,u,c)}function uy(o,a,c,u,f,m,v,T){if(!(3&a.type))return;const C=o.data,R=C[T+1],k=function rb(o){return 1==(1&o)}(R)?Yg(C,a,c,f,Zo(R),v):void 0;Qg(k)||(Qg(m)||function ZS(o){return 2==(2&o)}(R)&&(m=Yg(C,null,c,f,T,v)),function ar(o,a,c,u,f){if(a)f?o.addClass(c,u):o.removeClass(c,u);else{let m=-1===u.indexOf("-")?void 0:Ot.DashCase;null==f?o.removeStyle(c,u,m):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),m|=Ot.Important),o.setStyle(c,u,f,m))}}(u,v,ws(di(),c),f,m))}function Yg(o,a,c,u,f,m){const v=null===a;let T;for(;f>0;){const C=o[f],R=Array.isArray(C),k=R?C[1]:C,$=null===k;let J=c[f+1];J===Kt&&(J=$?ee:void 0);let oe=$?dn(J,u):k===u?J:void 0;if(R&&!Qg(oe)&&(oe=dn(C,u)),Qg(oe)&&(T=oe,v))return T;const Ae=o[f+1];f=v?su(Ae):Zo(Ae)}if(null!==a){let C=m?a.residualClasses:a.residualStyles;null!=C&&(T=dn(C,u))}return T}function Qg(o){return void 0!==o}function db(o,a){return 0!=(o.flags&(a?8:16))}function cw(o,a=""){const c=Ee(),u=an(),f=o+Un,m=u.firstCreatePass?Cg(u,f,1,a,null):u.data[f],v=c[f]=function Yc(o,a){return o.createText(a)}(c[en],a);_(u,c,v,m),_i(m,!1)}function Fd(o){return Xg("",o,""),Fd}function Xg(o,a,c){const u=Ee(),f=Ol(u,o,a,c);return f!==Kt&&function kl(o,a,c){const u=ws(a,o);!function ng(o,a,c){o.setValue(a,c)}(o[en],u,c)}(u,di(),f),Xg}function Mf(o,a,c){const u=Ee();return Fi(u,Us(),a)&&Pt(an(),Xn(),u,o,a,u[en],c,!0),Mf}function my(o,a,c){const u=Ee();if(Fi(u,Us(),a)){const m=an(),v=Xn();Pt(m,v,u,o,a,function gf(o,a,c){return(null===o||Pi(o))&&(c=function Vs(o){for(;Array.isArray(o);){if("object"==typeof o[Lu])return o;o=o[es]}return null}(c[a.index])),c[en]}(wc(m.data),v,u),c,!0)}return my}const Eo=void 0;var oR=["en",[["a","p"],["AM","PM"],Eo],[["AM","PM"],Eo,Eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eo,"{1} 'at' {0}",Eo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function sR(o){const c=Math.floor(Math.abs(o)),u=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===u?1:5}];let au={};function yw(o){const a=function xf(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=nm(a);if(c)return c;const u=a.split("-")[0];if(c=nm(u),c)return c;if("en"===u)return oR;throw new we(701,!1)}function lR(o){return yw(o)[Lt.PluralCase]}function nm(o){return o in au||(au[o]=En.ng&&En.ng.common&&En.ng.common.locales&&En.ng.common.locales[o]),au[o]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const Jo="en-US";let ds=Jo;function Tw(o,a,c,u,f){if(o=ie(o),Array.isArray(o))for(let m=0;m<o.length;m++)Tw(o[m],a,c,u,f);else{const m=an(),v=Ee();let T=xl(o)?o:ie(o.provide),C=aE(o);const R=Ar(),k=1048575&R.providerIndexes,$=R.directiveStart,J=R.providerIndexes>>20;if(xl(o)||!o.multi){const oe=new $i(C,f,uf),Ae=Cw(T,a,f?k:k+J,$);-1===Ae?(No(Gi(R,v),m,T),by(m,o,a.length),a.push(T),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),c.push(oe),v.push(oe)):(c[Ae]=oe,v[Ae]=oe)}else{const oe=Cw(T,a,k+J,$),Ae=Cw(T,a,k,k+J),it=Ae>=0&&c[Ae];if(f&&!it||!f&&!(oe>=0&&c[oe])){No(Gi(R,v),m,T);const yt=function du(o,a,c,u,f){const m=new $i(o,c,uf);return m.multi=[],m.index=a,m.componentProviders=0,bw(m,f,u&&!c),m}(f?Ci:Aw,c.length,f,u,C);!f&&it&&(c[Ae].providerFactory=yt),by(m,o,a.length,0),a.push(T),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),c.push(yt),v.push(yt)}else by(m,o,oe>-1?oe:Ae,bw(c[f?Ae:oe],C,!f&&u));!f&&u&&it&&c[Ae].componentProviders++}}}function by(o,a,c,u){const f=xl(a),m=function k_(o){return!!o.useClass}(a);if(f||m){const C=(m?ie(a.useClass):a).prototype.ngOnDestroy;if(C){const R=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const k=R.indexOf(c);-1===k?R.push(c,[u,C]):R[k+1].push(u,C)}else R.push(c,C)}}}function bw(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Cw(o,a,c,u){for(let f=c;f<u;f++)if(a[f]===o)return f;return-1}function Aw(o,a,c,u){return Cy(this.multi,[])}function Ci(o,a,c,u){const f=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,T=ko(c,c[at],this.providerFactory.index,u);m=T.slice(0,v),Cy(f,m);for(let C=v;C<T.length;C++)m.push(T[C])}else m=[],Cy(f,m);return m}function Cy(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function Dw(o,a=[]){return c=>{c.providersResolver=(u,f)=>function Fb(o,a,c){const u=an();if(u.firstCreatePass){const f=Pi(o);Tw(c,u.data,u.blueprint,f,!0),Tw(a,u.data,u.blueprint,f,!1)}}(u,f?f(o):o,a)}}class Nn{}class om{}function Vi(o,a){return new Sw(o,a??null)}class Sw extends Nn{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new PE(this);const u=ai(a);this._bootstrapComponents=Pa(u.bootstrap),this._r3Injector=yE(a,c,[{provide:Nn,useValue:this},{provide:nf,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class hu extends om{constructor(a){super(),this.moduleType=a}create(a){return new Sw(this.moduleType,a)}}class Ps extends Nn{constructor(a,c,u){super(),this.componentFactoryResolver=new PE(this),this.instance=null;const f=new tT([...a,{provide:Nn,useValue:this},{provide:nf,useValue:this.componentFactoryResolver}],c||F_(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function Ay(o,a,c=null){return new Ps(o,a,c).injector}let MR=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const u=Jh(0,c.type),f=u.length>0?Ay([u],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=ut({token:o,providedIn:"environment",factory:()=>new o(qt(Td))}),o})();function ni(o){o.getStandaloneInjector=a=>a.get(MR).getOrCreateStandaloneInjector(o)}function pm(o){return a=>{setTimeout(o,void 0,a)}}const Io=class Bf extends h.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,u){let f=a,m=c||(()=>null),v=u;if(a&&"object"==typeof a){const C=a;f=C.next?.bind(C),m=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(m=pm(m),f&&(f=pm(f)),v&&(v=pm(v)));const T=super.subscribe({next:f,error:m,complete:v});return a instanceof W.w0&&a.add(T),T}};function Gb(){return this._results[Symbol.iterator]()}class gm{get changes(){return this._changes||(this._changes=new Io)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=gm.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=Gb)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const u=this;u.dirty=!1;const f=function Ts(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function m_(o,a,c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++){let f=o[u],m=a[u];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(u._results,f,c))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let jf=(()=>{class o{}return o.__NG_ELEMENT_ID__=OR,o})();const zb=jf,Wb=class extends zb{constructor(a,c,u){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=u}createEmbeddedView(a,c){const u=this._declarationTContainer.tView,f=H_(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null,c||null);f[la]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[rs];return null!==v&&(f[rs]=v.createEmbeddedView(u)),Ni(u,f,a),new Sd(f)}};function OR(){return Py(Ar(),Ee())}function Py(o,a){return 4&o.type?new Wb(a,o,Nl(o,a)):null}let My=(()=>{class o{}return o.__NG_ELEMENT_ID__=qb,o})();function qb(){return Zb(Ar(),Ee())}const FR=My,Fw=class extends FR{constructor(a,c,u){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=u}get element(){return Nl(this._hostTNode,this._hostLView)}get injector(){return new co(this._hostTNode,this._hostLView)}get parentInjector(){const a=nd(this._hostTNode,this._hostLView);if(Rc(a)){const c=Mc(a,this._hostLView),u=Pc(a);return new co(c[at].data[u+8],c)}return new co(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=Kb(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-Fr}createEmbeddedView(a,c,u){let f,m;"number"==typeof u?f=u:null!=u&&(f=u.index,m=u.injector);const v=a.createEmbeddedView(c||{},m);return this.insert(v,f),v}createComponent(a,c,u,f,m){const v=a&&!function Bc(o){return"function"==typeof o}(a);let T;if(v)T=c;else{const $=c||{};T=$.index,u=$.injector,f=$.projectableNodes,m=$.environmentInjector||$.ngModuleRef}const C=v?a:new Rd(In(a)),R=u||this.parentInjector;if(!m&&null==C.ngModule){const J=(v?R:this.parentInjector).get(Td,null);J&&(m=J)}const k=C.create(R,f,void 0,m);return this.insert(k.hostView,T),k}insert(a,c){const u=a._lView,f=u[at];if(function Np(o){return ss(o[Wn])}(u)){const k=this.indexOf(a);if(-1!==k)this.detach(k);else{const $=u[Wn],J=new Fw($,$[Cr],$[Wn]);J.detach(J.indexOf(a))}}const m=this._adjustIndex(c),v=this._lContainer;!function Hv(o,a,c,u){const f=Fr+u,m=c.length;u>0&&(c[f-1][br]=a),u<m-Fr?(a[br]=c[f],xh(c,Fr+u,a)):(c.push(a),a[br]=null),a[Wn]=c;const v=a[la];null!==v&&c!==v&&function T_(o,a){const c=o[Ri];a[Er]!==a[Wn][Wn][Er]&&(o[Vu]=!0),null===c?o[Ri]=[a]:c.push(a)}(v,a);const T=a[rs];null!==T&&T.insertView(o),a[pt]|=64}(f,u,v,m);const T=F(m,v),C=u[en],R=Ho(C,v[sc]);return null!==R&&function sg(o,a,c,u,f,m){u[es]=f,u[Cr]=a,Ve(o,u,c,1,f,m)}(f,v[Cr],C,u,R,T),a.attachToViewContainerRef(),xh(Lw(v),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=Kb(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),u=yd(this._lContainer,c);u&&(ld(Lw(this._lContainer),c),$h(u[at],u))}detach(a){const c=this._adjustIndex(a,-1),u=yd(this._lContainer,c);return u&&null!=ld(Lw(this._lContainer),c)?new Sd(u):null}_adjustIndex(a,c=0){return a??this.length+c}};function Kb(o){return o[ji]}function Lw(o){return o[ji]||(o[ji]=[])}function Zb(o,a){let c;const u=a[o.index];if(ss(u))c=u;else{let f;if(8&o.type)f=xn(u);else{const m=a[en];f=m.createComment("");const v=Vr(o,a);jo(m,Ho(m,v),f,function cg(o,a){return o.nextSibling(a)}(m,v),!1)}a[o.index]=c=NT(u,a,f,o),xg(a,c)}return new Fw(c,o,a)}class mm{constructor(a){this.queryList=a,this.matches=null}clone(){return new mm(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hl{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const u=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<u;m++){const v=c.getByIndex(m);f.push(this.queries[v.indexInDeclarationView].clone())}return new Hl(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Gd(a,c).matches&&this.queries[c].setDirty()}}class Hf{constructor(a,c,u=null){this.predicate=a,this.flags=c,this.read=u}}class $f{constructor(a=[]){this.queries=a}elementStart(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let u=0;u<this.length;u++){const f=null!==c?c.length:0,m=this.getByIndex(u).embeddedTView(a,f);m&&(m.indexInDeclarationView=u,null!==c?c.push(m):c=[m])}return null!==c?new $f(c):null}template(a,c){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class Gf{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new Gf(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==c;)u=u.parent;return c===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const m=u[f];this.matchTNodeWithReadOption(a,c,Yb(c,m)),this.matchTNodeWithReadOption(a,c,as(c,a,m,!1,!1))}else u===jf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,as(c,a,u,!1,!1))}matchTNodeWithReadOption(a,c,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===rf||f===My||f===jf&&4&c.type)this.addMatch(c.index,-2);else{const m=as(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,u)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function Yb(o,a){const c=o.localNames;if(null!==c)for(let u=0;u<c.length;u+=2)if(c[u]===a)return c[u+1];return null}function $l(o,a,c,u){return-1===c?function Qb(o,a){return 11&o.type?Nl(o,a):4&o.type?Py(o,a):null}(a,o):-2===c?function Xb(o,a,c){return c===rf?Nl(a,o):c===jf?Py(a,o):c===My?Zb(a,o):void 0}(o,a,u):ko(o,o[at],c,a)}function Hd(o,a,c,u){const f=a[rs].queries[u];if(null===f.matches){const m=o.data,v=c.matches,T=[];for(let C=0;C<v.length;C+=2){const R=v[C];T.push(R<0?null:$l(a,m[R],v[C+1],c.metadata.read))}f.matches=T}return f.matches}function xy(o,a,c,u){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const v=Hd(o,a,f,c);for(let T=0;T<m.length;T+=2){const C=m[T];if(C>0)u.push(v[T/2]);else{const R=m[T+1],k=a[-C];for(let $=Fr;$<k.length;$++){const J=k[$];J[la]===J[Wn]&&xy(J[at],J,R,u)}if(null!==k[Ri]){const $=k[Ri];for(let J=0;J<$.length;J++){const oe=$[J];xy(oe[at],oe,R,u)}}}}}return u}function Ny(o){const a=Ee(),c=an(),u=Yu();Qu(u+1);const f=Gd(c,u);if(o.dirty&&function gh(o){return 4==(4&o[pt])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?xy(c,a,u,[]):Hd(c,a,f,u);o.reset(m,yg),o.notifyOnChanges()}return!0}return!1}function $d(o,a,c){const u=an();u.firstCreatePass&&(zf(u,new Hf(o,a,c),-1),2==(2&a)&&(u.staticViewQueries=!0)),_m(u,Ee(),a)}function Zi(o,a,c,u){const f=an();if(f.firstCreatePass){const m=Ar();zf(f,new Hf(a,c,u),m.index),function Jb(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}_m(f,Ee(),c)}function Vw(){return function Uw(o,a){return o[rs].queries[a].queryList}(Ee(),Yu())}function _m(o,a,c){const u=new gm(4==(4&c));G_(o,a,u,u.destroy),null===a[rs]&&(a[rs]=new Hl),a[rs].queries.push(new mm(u))}function zf(o,a,c){null===o.queries&&(o.queries=new $f),o.queries.track(new Gf(a,c))}function Gd(o,a){return o.queries.getByIndex(a)}function Wd(o){return!!ai(o)}function Am(...o){}const Yw=new un("Application Initializer");let Dm=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Am,this.reject=Am,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(ey(m))c.push(m);else if(bf(m)){const v=new Promise((T,C)=>{m.subscribe({complete:T,error:C})});c.push(v)}}Promise.all(c).then(()=>{u()}).catch(f=>{this.reject(f)}),0===c.length&&u(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(qt(Yw,8))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Vy=new un("AppId",{providedIn:"root",factory:function Yf(){return`${Kd()}${Kd()}${Kd()}`}});function Kd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sm=new un("Platform Initializer"),lC=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),cC=new un("AnimationModuleType");let qR=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Rm=new un("LocaleId",{providedIn:"root",factory:()=>Me(Rm,_t.Optional|_t.SkipSelf)||function uC(){return typeof $localize<"u"&&$localize.locale||Jo}()}),KR=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Qw{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Qf=(()=>{class o{compileModuleSync(c){return new hu(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const u=this.compileModuleSync(c),m=Pa(ai(c).declarations).reduce((v,T)=>{const C=In(T);return C&&v.push(new Rd(C)),v},[]);return new Qw(u,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const $a=(()=>Promise.resolve(0))();function Hy(o){typeof Zone>"u"?$a.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Xs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Io(!1),this.onMicrotaskEmpty=new Io(!1),this.onStable=new Io(!1),this.onError=new Io(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&c,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function hC(){let o=En.requestAnimationFrame,a=En.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function QR(o){const a=()=>{!function YR(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(En,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Zd(o),o.isCheckStableRunning=!0,$y(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Zd(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,u,f,m,v,T)=>{try{return Gy(o),c.invokeTask(f,m,v,T)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),gC(o)}},onInvoke:(c,u,f,m,v,T,C)=>{try{return Gy(o),c.invoke(f,m,v,T,C)}finally{o.shouldCoalesceRunChangeDetection&&a(),gC(o)}},onHasTask:(c,u,f,m)=>{c.hasTask(f,m),u===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,Zd(o),$y(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,u,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Xs.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Xs.isInAngularZone())throw new we(909,!1)}run(a,c,u){return this._inner.run(a,c,u)}runTask(a,c,u,f){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+f,a,pC,Am,Am);try{return m.runTask(v,c,u)}finally{m.cancelTask(v)}}runGuarded(a,c,u){return this._inner.runGuarded(a,c,u)}runOutsideAngular(a){return this._outer.run(a)}}const pC={};function $y(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Zd(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Gy(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function gC(o){o._nesting--,$y(o)}class mC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Io,this.onMicrotaskEmpty=new Io,this.onStable=new Io,this.onError=new Io}run(a,c,u){return a.apply(c,u)}runGuarded(a,c,u){return a.apply(c,u)}runOutsideAngular(a){return a()}runTask(a,c,u,f){return a.apply(c,u)}}const zy=new un(""),Xw=new un("");let e0,XR=(()=>{class o{constructor(c,u,f){this._ngZone=c,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,e0||(function JR(o){e0=o}(f),f.addToWindow(u)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Xs.assertNotInAngularZone(),Hy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hy(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(c)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,u,f){let m=-1;u&&u>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),c(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,u,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(qt(Xs),qt(Jw),qt(Xw))},o.\u0275prov=ut({token:o,factory:o.\u0275fac}),o})(),Jw=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,u){this._applications.set(c,u)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,u=!0){return e0?.findTestabilityInTree(this,c,u)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const zl=!1;let fs=null;const Yd=new un("AllowMultipleToken"),Wy=new un("PlatformDestroyListeners"),_C=new un("appBootstrapListener");class eP{constructor(a,c){this.name=a,this.token=c}}function yu(o,a,c=[]){const u=`Platform: ${a}`,f=new un(u);return(m=[])=>{let v=Mm();if(!v||v.injector.get(Yd,!1)){const T=[...c,...m,{provide:f,useValue:!0}];o?o(T):function EC(o){if(fs&&!fs.get(Yd,!1))throw new we(400,!1);fs=o;const a=o.get(n0);(function _u(o){const a=o.get(Sm,null);a&&a.forEach(c=>c())})(o)}(function t0(o=[],a){return af.create({name:a,providers:[{provide:Jc,useValue:"platform"},{provide:Wy,useValue:new Set([()=>fs=null])},...o]})}(T,u))}return function Pm(o){const a=Mm();if(!a)throw new we(401,!1);return a}()}}function Mm(){return fs?.get(n0)??null}let n0=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,u){const f=function IC(o,a){let c;return c="noop"===o?new mC:("zone.js"===o?void 0:o)||new Xs(a),c}(u?.ngZone,function r0(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(u)),m=[{provide:Xs,useValue:f}];return f.run(()=>{const v=af.create({providers:m,parent:this.injector,name:c.moduleType.name}),T=c.create(v),C=T.injector.get(vg,null);if(!C)throw new we(402,!1);return f.runOutsideAngular(()=>{const R=f.onError.subscribe({next:k=>{C.handleError(k)}});T.onDestroy(()=>{vu(this._modules,T),R.unsubscribe()})}),function s0(o,a,c){try{const u=c();return ey(u)?u.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>o.handleError(u)),u}}(C,f,()=>{const R=T.injector.get(Dm);return R.runInitializers(),R.donePromise.then(()=>(function yy(o){me(o,"Expected localeId to be defined"),"string"==typeof o&&(ds=o.toLowerCase().replace(/_/g,"-"))}(T.injector.get(Rm,Jo)||Jo),this._moduleDoBootstrap(T),T))})})}bootstrapModule(c,u=[]){const f=o0({},u);return function yC(o,a,c){const u=new hu(c);return Promise.resolve(u)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const u=c.injector.get(Qd);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new we(-403,!1);c.instance.ngDoBootstrap(u)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const c=this._injector.get(Wy,null);c&&(c.forEach(u=>u()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(qt(af))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function o0(o,a){return Array.isArray(a)?a.reduce(o0,o):{...o,...a}}let Qd=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,u,f){this._zone=c,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),v=new L.y(T=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{Xs.assertNotInAngularZone(),Hy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Xs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{C.unsubscribe(),R.unsubscribe()}});this.isStable=(0,ae.T)(m,v.pipe((0,he.B)()))}bootstrap(c,u){const f=c instanceof rT;if(!this._injector.get(Dm).done){!f&&Os(c);throw new we(405,zl)}let v;v=f?c:this._injector.get(nf).resolveComponentFactory(c),this.componentTypes.push(v.componentType);const T=function vC(o){return o.isBoundToModule}(v)?void 0:this._injector.get(Nn),R=v.create(af.NULL,[],u||v.selector,T),k=R.location.nativeElement,$=R.injector.get(zy,null);return $?.registerApplication(k),R.onDestroy(()=>{this.detachView(R.hostView),vu(this.components,R),$?.unregisterApplication(k)}),this._loadComponent(R),R}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const u=c;this._views.push(u),u.attachToAppRef(this)}detachView(c){const u=c;vu(this._views,u),u.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const u=this._injector.get(_C,[]);u.push(...this._bootstrapListeners),u.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>vu(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new we(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(qt(Xs),qt(Td),qt(vg))},o.\u0275prov=ut({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function vu(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}function TC(){return!1}let Xd=(()=>{class o{}return o.__NG_ELEMENT_ID__=wu,o})();function wu(o){return function bC(o,a,c){if(nl(o)&&!c){const u=sr(o.index,a);return new Sd(u,u)}return 47&o.type?new Sd(a[Er],a):null}(Ar(),Ee(),16==(16&o))}class Nm{constructor(){}supports(a){return tu(a)}create(a){return new PC(a)}}const Zy=(o,a)=>a;class PC{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Zy}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,u=this._removalsHead,f=0,m=null;for(;c||u;){const v=!u||c&&c.currentIndex<bu(u,f,m)?c:u,T=bu(v,f,m),C=v.currentIndex;if(v===u)f--,u=u._nextRemoved;else if(c=c._next,null==v.previousIndex)f++;else{m||(m=[]);const R=T-f,k=C-f;if(R!=k){for(let J=0;J<R;J++){const oe=J<m.length?m[J]:m[J]=0,Ae=oe+J;k<=Ae&&Ae<R&&(m[J]=oe+1)}m[v.previousIndex]=k-R}}T!==C&&a(v,T,C)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!tu(a))throw new we(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,v,c=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let T=0;T<this.length;T++)m=a[T],v=this._trackByFn(T,m),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,m,v,T)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,v,T),u=!0),c=c._next}else f=0,function KT(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let u;for(;!(u=c.next()).done;)a(u.value)}}(a,T=>{v=this._trackByFn(f,T),null!==c&&Object.is(c.trackById,v)?(u&&(c=this._verifyReinsertion(c,T,v,f)),Object.is(c.item,T)||this._addIdentityChange(c,T)):(c=this._mismatch(c,T,v,f),u=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,u,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new Tu(c,u),m,f),a}_verifyReinsertion(a,c,u,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,u),this._addToMoves(a,u),a}_moveAfter(a,c,u){return this._unlink(a),this._insertAfter(a,c,u),this._addToMoves(a,u),a}_addAfter(a,c,u){return this._insertAfter(a,c,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,u){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new c0),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,u=a._next;return null===c?this._itHead=u:c._next=u,null===u?this._itTail=c:u._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new c0),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Tu{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class np{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===c||c<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const c=a._prevDup,u=a._nextDup;return null===c?this._head=u:c._nextDup=u,null===u?this._tail=c:u._prevDup=c,null===this._head}}class c0{constructor(){this.map=new Map}put(a){const c=a.trackById;let u=this.map.get(c);u||(u=new np,this.map.set(c,u)),u.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function bu(o,a,c){const u=o.previousIndex;if(null===u)return u;let f=0;return c&&u<c.length&&(f=c[u]),u+a+f}class MC{constructor(){}supports(a){return a instanceof Map||HE(a)}create(){return new rp}}class rp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||HE(a)))throw new we(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,u),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,u);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let u=c;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const u=a._prev;return c._next=a,c._prev=u,a._prev=c,u&&(u._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,v=f._next;return m&&(m._next=v),v&&(v._prev=m),f._next=null,f._prev=null,f}const u=new xC(a);return this._records.set(a,u),u.currentValue=c,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(u=>c(a[u],u))}}class xC{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ql(){return new Yy([new Nm])}let Yy=(()=>{class o{constructor(c){this.factories=c}static create(c,u){if(null!=u){const f=u.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:u=>o.create(c,u||ql()),deps:[[o,new gt,new cs]]}}find(c){const u=this.factories.find(f=>f.supports(c));if(null!=u)return u;throw new we(901,!1)}}return o.\u0275prov=ut({token:o,providedIn:"root",factory:ql}),o})();function u0(){return new d0([new MC])}let d0=(()=>{class o{constructor(c){this.factories=c}static create(c,u){if(u){const f=u.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:u=>o.create(c,u||u0()),deps:[[o,new gt,new cs]]}}find(c){const u=this.factories.find(f=>f.supports(c));if(u)return u;throw new we(901,!1)}}return o.\u0275prov=ut({token:o,providedIn:"root",factory:u0}),o})();const cP=yu(null,"core",[]);let kC=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(qt(Qd))},o.\u0275mod=oa({type:o}),o.\u0275inj=St({}),o})();function uP(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3942:(wt,Ne,j)=>{j.d(Ne,{Z:()=>Xe});var h=j(2090),W=j(4859),L=j(9681),ae=j(1877);class he{constructor(we,Pe){this._delegate=we,this.firebase=Pe,(0,L._addComponent)(we,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=we.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this._delegate.automaticDataCollectionEnabled=we}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(we=>{this._delegate.checkDestroyed(),we()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(we,Pe=L._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(we);return!We.isInitialized()&&"EXPLICIT"===(null===(xe=We.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:Pe})}_removeServiceInstance(we,Pe=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(we).clearInstance(Pe)}_addComponent(we){(0,L._addComponent)(this._delegate,we)}_addOrOverwriteComponent(we){(0,L._addOrOverwriteComponent)(this._delegate,we)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function ve(){const ct=function ge(ct){const we={},Pe={__esModule:!0,initializeApp:function Fe(Ge,Q={}){const Ce=L.initializeApp(Ge,Q);if((0,h.r3)(we,Ce.name))return we[Ce.name];const Ye=new ct(Ce,Pe);return we[Ce.name]=Ye,Ye},app:We,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Le(Ge){const Q=Ge.name,Ce=Q.replace("-compat","");if(L._registerComponent(Ge)&&"PUBLIC"===Ge.type){const Ye=(Qe=We())=>{if("function"!=typeof Qe[Ce])throw be.create("invalid-app-argument",{appName:Q});return Qe[Ce]()};void 0!==Ge.serviceProps&&(0,h.ZB)(Ye,Ge.serviceProps),Pe[Ce]=Ye,ct.prototype[Ce]=function(...Qe){return this._getService.bind(this,Q).apply(this,Ge.multipleInstances?Qe:[])}}return"PUBLIC"===Ge.type?Pe[Ce]:null},removeApp:function xe(Ge){delete we[Ge]},useAsService:function Ke(Ge,Q){return"serverAuth"===Q?null:Q},modularAPIs:L}};function We(Ge){if(!(0,h.r3)(we,Ge=Ge||L._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:Ge});return we[Ge]}return Pe.default=Pe,Object.defineProperty(Pe,"apps",{get:function Re(){return Object.keys(we).map(Ge=>we[Ge])}}),We.App=ct,Pe}(he);return ct.INTERNAL=Object.assign(Object.assign({},ct.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function we(Pe){(0,h.ZB)(ct,Pe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),ct}(),Y=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){Y.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ct=self.firebase.SDK_VERSION;ct&&ct.indexOf("LITE")>=0&&Y.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=K;!function ke(ct){(0,L.registerVersion)("@firebase/app-compat","0.2.27",ct)}()},9681:(wt,Ne,j)=>{j.r(Ne),j.d(Ne,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Gn,_DEFAULT_ENTRY_NAME:()=>de,_addComponent:()=>Se,_addOrOverwriteComponent:()=>ze,_apps:()=>me,_clearComponents:()=>St,_components:()=>se,_getProvider:()=>ut,_registerComponent:()=>mt,_removeServiceInstance:()=>cn,deleteApp:()=>si,getApp:()=>Rn,getApps:()=>rr,initializeApp:()=>Zn,onLog:()=>On,registerVersion:()=>_t,setLogLevel:()=>Bi});var h=j(5861),W=j(4859),L=j(1877),ae=j(2090),he=j(8766);class le{constructor(Me){this.container=Me}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function be(rt){return"VERSION"===rt.getComponent()?.type}(Je)){const Rt=Je.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(Je=>Je).join(" ")}}const ge="@firebase/app",K=new L.Yd("@firebase/app"),de="[DEFAULT]",_e={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},me=new Map,se=new Map;function Se(rt,Me){try{rt.container.addComponent(Me)}catch(Je){K.debug(`Component ${Me.name} failed to register with FirebaseApp ${rt.name}`,Je)}}function ze(rt,Me){rt.container.addOrOverwriteComponent(Me)}function mt(rt){const Me=rt.name;if(se.has(Me))return K.debug(`There were multiple attempts to register component ${Me}.`),!1;se.set(Me,rt);for(const Je of me.values())Se(Je,rt);return!0}function ut(rt,Me){const Je=rt.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),rt.container.getProvider(Me)}function cn(rt,Me,Je=de){ut(rt,Me).clearInstance(Je)}function St(){se.clear()}const vn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Sn{constructor(Me,Je,Rt){this._isDeleted=!1,this._options=Object.assign({},Me),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Me){this.checkDestroyed(),this._automaticDataCollectionEnabled=Me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Me){this._isDeleted=Me}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}const Gn="10.8.0";function Zn(rt,Me={}){let Je=rt;"object"!=typeof Me&&(Me={name:Me});const Rt=Object.assign({name:de,automaticDataCollectionEnabled:!1},Me),Xt=Rt.name;if("string"!=typeof Xt||!Xt)throw vn.create("bad-app-name",{appName:String(Xt)});if(Je||(Je=(0,ae.aH)()),!Je)throw vn.create("no-options");const mn=me.get(Xt);if(mn){if((0,ae.vZ)(Je,mn.options)&&(0,ae.vZ)(Rt,mn.config))return mn;throw vn.create("duplicate-app",{appName:Xt})}const Hn=new W.H0(Xt);for(const z of se.values())Hn.addComponent(z);const q=new Sn(Je,Rt,Hn);return me.set(Xt,q),q}function Rn(rt=de){const Me=me.get(rt);if(!Me&&rt===de&&(0,ae.aH)())return Zn();if(!Me)throw vn.create("no-app",{appName:rt});return Me}function rr(){return Array.from(me.values())}function si(rt){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,h.Z)(function*(rt){const Me=rt.name;me.has(Me)&&(me.delete(Me),yield Promise.all(rt.container.getProviders().map(Je=>Je.delete())),rt.isDeleted=!0)})).apply(this,arguments)}function _t(rt,Me,Je){var Rt;let Xt=null!==(Rt=_e[rt])&&void 0!==Rt?Rt:rt;Je&&(Xt+=`-${Je}`);const mn=Xt.match(/\s|\//),Hn=Me.match(/\s|\//);if(mn||Hn){const q=[`Unable to register library "${Xt}" with version "${Me}":`];return mn&&q.push(`library name "${Xt}" contains illegal characters (whitespace or "/")`),mn&&Hn&&q.push("and"),Hn&&q.push(`version name "${Me}" contains illegal characters (whitespace or "/")`),void K.warn(q.join(" "))}mt(new W.wA(`${Xt}-version`,()=>({library:Xt,version:Me}),"VERSION"))}function On(rt,Me){if(null!==rt&&"function"!=typeof rt)throw vn.create("invalid-log-argument");(0,L.Am)(rt,Me)}function Bi(rt){(0,L.Ub)(rt)}const Vn="firebase-heartbeat-database",vs=1,dr="firebase-heartbeat-store";let En=null;function Mn(){return En||(En=(0,he.X3)(Vn,vs,{upgrade:(rt,Me)=>{if(0===Me)try{rt.createObjectStore(dr)}catch(Je){console.warn(Je)}}}).catch(rt=>{throw vn.create("idb-open",{originalErrorMessage:rt.message})})),En}function jt(){return(jt=(0,h.Z)(function*(rt){try{const Je=(yield Mn()).transaction(dr),Rt=yield Je.objectStore(dr).get(zn(rt));return yield Je.done,Rt}catch(Me){if(Me instanceof ae.ZR)K.warn(Me.message);else{const Je=vn.create("idb-get",{originalErrorMessage:Me?.message});K.warn(Je.message)}}})).apply(this,arguments)}function ir(rt,Me){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(rt,Me){try{const Rt=(yield Mn()).transaction(dr,"readwrite");yield Rt.objectStore(dr).put(Me,zn(rt)),yield Rt.done}catch(Je){if(Je instanceof ae.ZR)K.warn(Je.message);else{const Rt=vn.create("idb-set",{originalErrorMessage:Je?.message});K.warn(Rt.message)}}})).apply(this,arguments)}function zn(rt){return`${rt.name}!${rt.options.appId}`}class qr{constructor(Me){this.container=Me,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Jt(Je),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Me=this;return(0,h.Z)(function*(){var Je,Rt;const mn=Me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Hn=Wt();if((null!=(null===(Je=Me._heartbeatsCache)||void 0===Je?void 0:Je.heartbeats)||(Me._heartbeatsCache=yield Me._heartbeatsCachePromise,null!=(null===(Rt=Me._heartbeatsCache)||void 0===Rt?void 0:Rt.heartbeats)))&&Me._heartbeatsCache.lastSentHeartbeatDate!==Hn&&!Me._heartbeatsCache.heartbeats.some(q=>q.date===Hn))return Me._heartbeatsCache.heartbeats.push({date:Hn,agent:mn}),Me._heartbeatsCache.heartbeats=Me._heartbeatsCache.heartbeats.filter(q=>{const z=new Date(q.date).valueOf();return Date.now()-z<=2592e6}),Me._storage.overwrite(Me._heartbeatsCache)})()}getHeartbeatsHeader(){var Me=this;return(0,h.Z)(function*(){var Je;if(null===Me._heartbeatsCache&&(yield Me._heartbeatsCachePromise),null==(null===(Je=Me._heartbeatsCache)||void 0===Je?void 0:Je.heartbeats)||0===Me._heartbeatsCache.heartbeats.length)return"";const Rt=Wt(),{heartbeatsToSend:Xt,unsentEntries:mn}=function oi(rt,Me=1024){const Je=[];let Rt=rt.slice();for(const Xt of rt){const mn=Je.find(Hn=>Hn.agent===Xt.agent);if(mn){if(mn.dates.push(Xt.date),Es(Je)>Me){mn.dates.pop();break}}else if(Je.push({agent:Xt.agent,dates:[Xt.date]}),Es(Je)>Me){Je.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:Rt}}(Me._heartbeatsCache.heartbeats),Hn=(0,ae.L)(JSON.stringify({version:2,heartbeats:Xt}));return Me._heartbeatsCache.lastSentHeartbeatDate=Rt,mn.length>0?(Me._heartbeatsCache.heartbeats=mn,yield Me._storage.overwrite(Me._heartbeatsCache)):(Me._heartbeatsCache.heartbeats=[],Me._storage.overwrite(Me._heartbeatsCache)),Hn})()}}function Wt(){return(new Date).toISOString().substring(0,10)}class Jt{constructor(Me){this.app=Me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Me=this;return(0,h.Z)(function*(){if(yield Me._canUseIndexedDBPromise){const Rt=yield function Et(rt){return jt.apply(this,arguments)}(Me.app);return Rt?.heartbeats?Rt:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(Me){var Je=this;return(0,h.Z)(function*(){var Rt;if(yield Je._canUseIndexedDBPromise){const mn=yield Je.read();return ir(Je.app,{lastSentHeartbeatDate:null!==(Rt=Me.lastSentHeartbeatDate)&&void 0!==Rt?Rt:mn.lastSentHeartbeatDate,heartbeats:Me.heartbeats})}})()}add(Me){var Je=this;return(0,h.Z)(function*(){var Rt;if(yield Je._canUseIndexedDBPromise){const mn=yield Je.read();return ir(Je.app,{lastSentHeartbeatDate:null!==(Rt=Me.lastSentHeartbeatDate)&&void 0!==Rt?Rt:mn.lastSentHeartbeatDate,heartbeats:[...mn.heartbeats,...Me.heartbeats]})}})()}}function Es(rt){return(0,ae.L)(JSON.stringify({version:2,heartbeats:rt})).length}!function qt(rt){mt(new W.wA("platform-logger",Me=>new le(Me),"PRIVATE")),mt(new W.wA("heartbeat",Me=>new qr(Me),"PRIVATE")),_t(ge,"0.9.27",rt),_t(ge,"0.9.27","esm2017"),_t("fire-js","")}("")},4859:(wt,Ne,j)=>{j.d(Ne,{H0:()=>ge,wA:()=>L,zt:()=>he});var h=j(5861),W=j(2090);class L{constructor(K,Y,ie){this.name=K,this.instanceFactory=Y,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ae="[DEFAULT]";class he{constructor(K,Y){this.name=K,this.container=Y,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const Y=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(Y)){const ie=new W.BH;if(this.instancesDeferred.set(Y,ie),this.isInitialized(Y)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:Y});qe&&ie.resolve(qe)}catch{}}return this.instancesDeferred.get(Y).promise}getImmediate(K){var Y;const ie=this.normalizeInstanceIdentifier(K?.identifier),qe=null!==(Y=K?.optional)&&void 0!==Y&&Y;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(ke){if(qe)return null;throw ke}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function be(ve){return"EAGER"===ve.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[Y,ie]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(Y);try{const ke=this.getOrInitializeService({instanceIdentifier:qe});ie.resolve(ke)}catch{}}}}clearInstance(K=ae){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,h.Z)(function*(){const Y=Array.from(K.instances.values());yield Promise.all([...Y.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...Y.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ae){return this.instances.has(K)}getOptions(K=ae){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:Y={}}=K,ie=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:ie,options:Y});for(const[ke,Xe]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(ke)&&Xe.resolve(qe);return qe}onInit(K,Y){var ie;const qe=this.normalizeInstanceIdentifier(Y),ke=null!==(ie=this.onInitCallbacks.get(qe))&&void 0!==ie?ie:new Set;ke.add(K),this.onInitCallbacks.set(qe,ke);const Xe=this.instances.get(qe);return Xe&&K(Xe,qe),()=>{ke.delete(K)}}invokeOnInitCallbacks(K,Y){const ie=this.onInitCallbacks.get(Y);if(ie)for(const qe of ie)try{qe(K,Y)}catch{}}getOrInitializeService({instanceIdentifier:K,options:Y={}}){let ie=this.instances.get(K);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=K,ve===ae?void 0:ve),options:Y}),this.instances.set(K,ie),this.instancesOptions.set(K,Y),this.invokeOnInitCallbacks(ie,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,ie)}catch{}var ve;return ie||null}normalizeInstanceIdentifier(K=ae){return this.component?this.component.multipleInstances?K:ae:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const Y=this.getProvider(K.name);if(Y.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);Y.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const Y=new he(K,this);return this.providers.set(K,Y),Y}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,Ne,j)=>{j.d(Ne,{Am:()=>ve,Ub:()=>ge,Yd:()=>be,in:()=>W});const h=[];var W=(()=>{return(K=W||(W={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",W;var K})();const L={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},ae=W.INFO,he={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},le=(K,Y,...ie)=>{if(Y<K.logLevel)return;const qe=(new Date).toISOString(),ke=he[Y];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${Y})`);console[ke](`[${qe}]  ${K.name}:`,...ie)};class be{constructor(Y){this.name=Y,this._logLevel=ae,this._logHandler=le,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(Y){if(!(Y in W))throw new TypeError(`Invalid value "${Y}" assigned to \`logLevel\``);this._logLevel=Y}setLogLevel(Y){this._logLevel="string"==typeof Y?L[Y]:Y}get logHandler(){return this._logHandler}set logHandler(Y){if("function"!=typeof Y)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Y}get userLogHandler(){return this._userLogHandler}set userLogHandler(Y){this._userLogHandler=Y}debug(...Y){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...Y),this._logHandler(this,W.DEBUG,...Y)}log(...Y){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...Y),this._logHandler(this,W.VERBOSE,...Y)}info(...Y){this._userLogHandler&&this._userLogHandler(this,W.INFO,...Y),this._logHandler(this,W.INFO,...Y)}warn(...Y){this._userLogHandler&&this._userLogHandler(this,W.WARN,...Y),this._logHandler(this,W.WARN,...Y)}error(...Y){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...Y),this._logHandler(this,W.ERROR,...Y)}}function ge(K){h.forEach(Y=>{Y.setLogLevel(K)})}function ve(K,Y){for(const ie of h){let qe=null;Y&&Y.level&&(qe=L[Y.level]),ie.userLogHandler=null===K?null:(ke,Xe,...ct)=>{const we=ct.map(Pe=>{if(null==Pe)return null;if("string"==typeof Pe)return Pe;if("number"==typeof Pe||"boolean"==typeof Pe)return Pe.toString();if(Pe instanceof Error)return Pe.message;try{return JSON.stringify(Pe)}catch{return null}}).filter(Pe=>Pe).join(" ");Xe>=(qe??ke.logLevel)&&K({level:W[Xe].toLowerCase(),message:we,args:ct,type:ke.name})}}}},259:(wt,Ne,j)=>{j.d(Ne,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=j(9681);(0,h.registerVersion)("firebase","10.8.0","app")},9260:(wt,Ne,j)=>{j.d(Ne,{Z:()=>h.Z});var h=j(3942);h.Z.registerVersion("firebase","10.8.0","app-compat")},9568:(wt,Ne,j)=>{j.r(Ne);var h=j(5861),W=j(3942),L=j(45),ae=j(2090),be=(j(9681),j(1877),j(4859));function ge(){return window}const ve=2e3;function Y(){return Y=(0,h.Z)(function*(V,U,N){var ee;const{BuildInfo:Ie}=ge();(0,L.au)(U.sessionId,"AuthEvent did not contain a session ID");const ft=yield function Pe(V){return xe.apply(this,arguments)}(U.sessionId),xt={};return(0,L.av)()?xt.ibi=Ie.packageName:(0,L.aw)()?xt.apn=Ie.packageName:(0,L.ax)(V,"operation-not-supported-in-this-environment"),Ie.displayName&&(xt.appDisplayName=Ie.displayName),xt.sessionId=ft,(0,L.ay)(V,N,U.type,void 0,null!==(ee=U.eventId)&&void 0!==ee?ee:void 0,xt)}),Y.apply(this,arguments)}function qe(){return(qe=(0,h.Z)(function*(V){const{BuildInfo:U}=ge(),N={};(0,L.av)()?N.iosBundleId=U.packageName:(0,L.aw)()?N.androidPackageName=U.packageName:(0,L.ax)(V,"operation-not-supported-in-this-environment"),yield(0,L.az)(V,N)})).apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(V,U,N){const{cordova:ee}=ge();let Ie=()=>{};try{yield new Promise((ft,xt)=>{let kt=null;function Ht(){var zt;ft();const Si=null===(zt=ee.plugins.browsertab)||void 0===zt?void 0:zt.close;"function"==typeof Si&&Si(),"function"==typeof N?.close&&N.close()}function Vt(){kt||(kt=window.setTimeout(()=>{xt((0,L.aB)(V,"redirect-cancelled-by-user"))},ve))}function Yn(){"visible"===document?.visibilityState&&Vt()}U.addPassiveListener(Ht),document.addEventListener("resume",Vt,!1),(0,L.aw)()&&document.addEventListener("visibilitychange",Yn,!1),Ie=()=>{U.removePassiveListener(Ht),document.removeEventListener("resume",Vt,!1),document.removeEventListener("visibilitychange",Yn,!1),kt&&window.clearTimeout(kt)}})}finally{Ie()}})).apply(this,arguments)}function xe(){return(xe=(0,h.Z)(function*(V){const U=function We(V){if((0,L.au)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const U=new ArrayBuffer(V.length),N=new Uint8Array(U);for(let ee=0;ee<V.length;ee++)N[ee]=V.charCodeAt(ee);return N}(V),N=yield crypto.subtle.digest("SHA-256",U);return Array.from(new Uint8Array(N)).map(Ie=>Ie.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Fe=20;class Re extends L.aD{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(U=>{this.resolveInialized=U})}addPassiveListener(U){this.passiveListeners.add(U)}removePassiveListener(U){this.passiveListeners.delete(U)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(U){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(U)),super.onEvent(U)}initialized(){var U=this;return(0,h.Z)(function*(){yield U.initPromise})()}}function Ge(V){return Q.apply(this,arguments)}function Q(){return(Q=(0,h.Z)(function*(V){const U=yield Qe()._get(Mt(V));return U&&(yield Qe()._remove(Mt(V))),U})).apply(this,arguments)}function Ye(){const V=[],U="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<Fe;N++){const ee=Math.floor(Math.random()*U.length);V.push(U.charAt(ee))}return V.join("")}function Qe(){return(0,L.aE)(L.b)}function Mt(V){return(0,L.aF)("authEvent",V.config.apiKey,V.name)}function xr(V){if(!V?.includes("?"))return{};const[U,...N]=V.split("?");return(0,ae.zd)(N.join("?"))}const de=class Wr{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(U){var N=this;return(0,h.Z)(function*(){const ee=U._key();let Ie=N.eventManagers.get(ee);return Ie||(Ie=new Re(U),N.eventManagers.set(ee,Ie),N.attachCallbackListeners(U,Ie)),Ie})()}_openPopup(U){(0,L.ax)(U,"operation-not-supported-in-this-environment")}_openRedirect(U,N,ee,Ie){var ft=this;return(0,h.Z)(function*(){!function we(V){var U,N,ee,Ie,ft,xt,kt,Ht,Vt,Yn;const zt=ge();(0,L.aC)("function"==typeof(null===(U=zt?.universalLinks)||void 0===U?void 0:U.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.aC)(typeof(null===(N=zt?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.aC)("function"==typeof(null===(ft=null===(Ie=null===(ee=zt?.cordova)||void 0===ee?void 0:ee.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===ft?void 0:ft.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(Ht=null===(kt=null===(xt=zt?.cordova)||void 0===xt?void 0:xt.plugins)||void 0===kt?void 0:kt.browsertab)||void 0===Ht?void 0:Ht.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.aC)("function"==typeof(null===(Yn=null===(Vt=zt?.cordova)||void 0===Vt?void 0:Vt.InAppBrowser)||void 0===Yn?void 0:Yn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(U);const xt=yield ft._initialize(U);yield xt.initialized(),xt.resetRedirect(),(0,L.aI)(),yield ft._originValidation(U);const kt=function Le(V,U,N=null){return{type:U,eventId:N,urlResponse:null,sessionId:Ye(),postBody:null,tenantId:V.tenantId,error:(0,L.aB)(V,"no-auth-event")}}(U,ee,Ie);yield function Ke(V,U){return Qe()._set(Mt(V),U)}(U,kt);const Ht=yield function K(V,U,N){return Y.apply(this,arguments)}(U,kt,N),Vt=yield function ke(V){const{cordova:U}=ge();return new Promise(N=>{U.plugins.browsertab.isAvailable(ee=>{let Ie=null;ee?U.plugins.browsertab.openUrl(V):Ie=U.InAppBrowser.open(V,(0,L.aA)()?"_blank":"_system","location=yes"),N(Ie)})})}(Ht);return function Xe(V,U,N){return ct.apply(this,arguments)}(U,xt,Vt)})()}_isIframeWebStorageSupported(U,N){throw new Error("Method not implemented.")}_originValidation(U){const N=U._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function ie(V){return qe.apply(this,arguments)}(U)),this.originValidationPromises[N]}attachCallbackListeners(U,N){const{universalLinks:ee,handleOpenURL:Ie,BuildInfo:ft}=ge(),xt=setTimeout((0,h.Z)(function*(){yield Ge(U),N.onEvent(_e())}),500),kt=function(){var Yn=(0,h.Z)(function*(zt){clearTimeout(xt);const Si=yield Ge(U);let ec=null;Si&&zt?.url&&(ec=function Ce(V,U){var N,ee;const Ie=function Ln(V){const U=xr(V),N=U.link?decodeURIComponent(U.link):void 0,ee=xr(N).link,Ie=U.deep_link_id?decodeURIComponent(U.deep_link_id):void 0;return xr(Ie).link||Ie||ee||N||V}(U);if(Ie.includes("/__/auth/callback")){const ft=xr(Ie),xt=ft.firebaseError?function nt(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(ft.firebaseError)):null,kt=null===(ee=null===(N=xt?.code)||void 0===N?void 0:N.split("auth/"))||void 0===ee?void 0:ee[1],Ht=kt?(0,L.aB)(kt):null;return Ht?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:Ht,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:Ie,postBody:null}}return null}(Si,zt.url)),N.onEvent(ec||_e())});return function(Si){return Yn.apply(this,arguments)}}();typeof ee<"u"&&"function"==typeof ee.subscribe&&ee.subscribe(null,kt);const Ht=Ie,Vt=`${ft.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var Yn=(0,h.Z)(function*(zt){if(zt.toLowerCase().startsWith(Vt)&&kt({url:zt}),"function"==typeof Ht)try{Ht(zt)}catch(Si){console.error(Si)}});return function(zt){return Yn.apply(this,arguments)}}()}};function _e(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aB)("no-auth-event")}}const ze=1e3;function mt(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function cn(V=(0,ae.z$)()){return!("file:"!==mt()&&"ionic:"!==mt()&&"capacitor:"!==mt()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gn(){try{const V=self.localStorage,U=L.aN();if(V)return V.setItem(U,"1"),V.removeItem(U),!function Sn(V=(0,ae.z$)()){return function Qt(){return(0,ae.w1)()&&11===document?.documentMode}()||function vn(V=(0,ae.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,ae.hl)()}catch{return Zn()&&(0,ae.hl)()}return!1}function Zn(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rn(){return(function ut(){return"http:"===mt()||"https:"===mt()}()||(0,ae.ru)()||cn())&&!function St(){return(0,ae.b$)()||(0,ae.UG)()}()&&Gn()&&!Zn()}function rr(){return cn()&&typeof document<"u"}function Pn(){return(Pn=(0,h.Z)(function*(){return!!rr()&&new Promise(V=>{const U=setTimeout(()=>{V(!1)},ze);document.addEventListener("deviceready",()=>{clearTimeout(U),V(!0)})})})).apply(this,arguments)}const On={LOCAL:"local",NONE:"none",SESSION:"session"},Bi=L.aC,Vn="persistence";function dr(V){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(V){yield V._initializationPromise;const U=Et(),N=L.aF(Vn,V.config.apiKey,V.name);U&&U.setItem(N,V._getPersistence())})).apply(this,arguments)}function Et(){var V;try{return(null===(V=function _t(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const jt=L.aC;class ir{constructor(){this.browserResolver=L.aE(L.k),this.cordovaResolver=L.aE(de),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aG,this._overrideRedirectResult=L.aH}_initialize(U){var N=this;return(0,h.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(U)})()}_openPopup(U,N,ee,Ie){var ft=this;return(0,h.Z)(function*(){return yield ft.selectUnderlyingResolver(),ft.assertedUnderlyingResolver._openPopup(U,N,ee,Ie)})()}_openRedirect(U,N,ee,Ie){var ft=this;return(0,h.Z)(function*(){return yield ft.selectUnderlyingResolver(),ft.assertedUnderlyingResolver._openRedirect(U,N,ee,Ie)})()}_isIframeWebStorageSupported(U,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(U,N)}_originValidation(U){return this.assertedUnderlyingResolver._originValidation(U)}get _shouldInitProactively(){return rr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var U=this;return(0,h.Z)(function*(){if(U.underlyingResolver)return;const N=yield function si(){return Pn.apply(this,arguments)}();U.underlyingResolver=N?U.cordovaResolver:U.browserResolver})()}}function yr(V){return V.unwrap()}function Nr(V){return qr(V)}function qr(V){const{_tokenResponse:U}=V instanceof ae.ZR?V.customData:V;if(!U)return null;if(!(V instanceof ae.ZR)&&"temporaryProof"in U&&"phoneNumber"in U)return L.P.credentialFromResult(V);const N=U.providerId;if(!N||N===L.p.PASSWORD)return null;let ee;switch(N){case L.p.GOOGLE:ee=L.X;break;case L.p.FACEBOOK:ee=L.W;break;case L.p.GITHUB:ee=L.Y;break;case L.p.TWITTER:ee=L.$;break;default:const{oauthIdToken:Ie,oauthAccessToken:ft,oauthTokenSecret:xt,pendingToken:kt,nonce:Ht}=U;return ft||xt||Ie||kt?kt?N.startsWith("saml.")?L.aQ._create(N,kt):L.N._fromParams({providerId:N,signInMethod:N,pendingToken:kt,idToken:Ie,accessToken:ft}):new L.Z(N).credential({idToken:Ie,accessToken:ft,rawNonce:Ht}):null}return V instanceof ae.ZR?ee.credentialFromError(V):ee.credentialFromResult(V)}function Wt(V,U){return U.catch(N=>{throw N instanceof ae.ZR&&function kr(V,U){var N;const ee=null===(N=U.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===U?.code)U.resolver=new Es(V,L.as(V,U));else if(ee){const Ie=qr(U),ft=U;Ie&&(ft.credential=Ie,ft.tenantId=ee.tenantId||void 0,ft.email=ee.email||void 0,ft.phoneNumber=ee.phoneNumber||void 0)}}(V,N),N}).then(N=>{const Ie=N.user;return{operationType:N.operationType,credential:Nr(N),additionalUserInfo:L.aq(N),user:qt.getOrCreate(Ie)}})}function oi(V,U){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,h.Z)(function*(V,U){const N=yield U;return{verificationId:N.verificationId,confirm:ee=>Wt(V,N.confirm(ee))}})).apply(this,arguments)}class Es{constructor(U,N){this.resolver=N,this.auth=function zn(V){return V.wrapped()}(U)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(U){return Wt(yr(this.auth),this.resolver.resolveSignIn(U))}}class qt{constructor(U){this._delegate=U,this.multiFactor=L.at(U)}static getOrCreate(U){return qt.USER_MAP.has(U)||qt.USER_MAP.set(U,new qt(U)),qt.USER_MAP.get(U)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(U){return this._delegate.getIdTokenResult(U)}getIdToken(U){return this._delegate.getIdToken(U)}linkAndRetrieveDataWithCredential(U){return this.linkWithCredential(U)}linkWithCredential(U){var N=this;return(0,h.Z)(function*(){return Wt(N.auth,L.a2(N._delegate,U))})()}linkWithPhoneNumber(U,N){var ee=this;return(0,h.Z)(function*(){return oi(ee.auth,L.l(ee._delegate,U,N))})()}linkWithPopup(U){var N=this;return(0,h.Z)(function*(){return Wt(N.auth,L.d(N._delegate,U,ir))})()}linkWithRedirect(U){var N=this;return(0,h.Z)(function*(){return yield dr(L.aJ(N.auth)),L.g(N._delegate,U,ir)})()}reauthenticateAndRetrieveDataWithCredential(U){return this.reauthenticateWithCredential(U)}reauthenticateWithCredential(U){var N=this;return(0,h.Z)(function*(){return Wt(N.auth,L.a3(N._delegate,U))})()}reauthenticateWithPhoneNumber(U,N){return oi(this.auth,L.r(this._delegate,U,N))}reauthenticateWithPopup(U){return Wt(this.auth,L.e(this._delegate,U,ir))}reauthenticateWithRedirect(U){var N=this;return(0,h.Z)(function*(){return yield dr(L.aJ(N.auth)),L.h(N._delegate,U,ir)})()}sendEmailVerification(U){return L.ag(this._delegate,U)}unlink(U){var N=this;return(0,h.Z)(function*(){return yield L.ap(N._delegate,U),N})()}updateEmail(U){return L.al(this._delegate,U)}updatePassword(U){return L.am(this._delegate,U)}updatePhoneNumber(U){return L.u(this._delegate,U)}updateProfile(U){return L.ak(this._delegate,U)}verifyBeforeUpdateEmail(U,N){return L.ah(this._delegate,U,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qt.USER_MAP=new WeakMap;const rt=L.aC;let Me=(()=>{class V{constructor(N,ee){if(this.app=N,ee.isInitialized())return this._delegate=ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ie}=N.options;rt(Ie,"invalid-api-key",{appName:N.name}),rt(Ie,"invalid-api-key",{appName:N.name});const ft=typeof window<"u"?ir:void 0;this._delegate=ee.initialize({options:{persistence:Rt(Ie,N.name),popupRedirectResolver:ft}}),this._delegate._updateErrorMap(L.G),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,ee){L.K(this._delegate,N,ee)}applyActionCode(N){return L.a7(this._delegate,N)}checkActionCode(N){return L.a8(this._delegate,N)}confirmPasswordReset(N,ee){return L.a6(this._delegate,N,ee)}createUserWithEmailAndPassword(N,ee){var Ie=this;return(0,h.Z)(function*(){return Wt(Ie._delegate,L.aa(Ie._delegate,N,ee))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return L.af(this._delegate,N)}isSignInWithEmailLink(N){return L.ad(this._delegate,N)}getRedirectResult(){var N=this;return(0,h.Z)(function*(){rt(Rn(),N._delegate,"operation-not-supported-in-this-environment");const ee=yield L.j(N._delegate,ir);return ee?Wt(N._delegate,Promise.resolve(ee)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function me(V,U){(0,L.aJ)(V)._logFramework(U)}(this._delegate,N)}onAuthStateChanged(N,ee,Ie){const{next:ft,error:xt,complete:kt}=Je(N,ee,Ie);return this._delegate.onAuthStateChanged(ft,xt,kt)}onIdTokenChanged(N,ee,Ie){const{next:ft,error:xt,complete:kt}=Je(N,ee,Ie);return this._delegate.onIdTokenChanged(ft,xt,kt)}sendSignInLinkToEmail(N,ee){return L.ac(this._delegate,N,ee)}sendPasswordResetEmail(N,ee){return L.a5(this._delegate,N,ee||void 0)}setPersistence(N){var ee=this;return(0,h.Z)(function*(){let Ie;switch(function vs(V,U){Bi(Object.values(On).includes(U),V,"invalid-persistence-type"),(0,ae.b$)()?Bi(U!==On.SESSION,V,"unsupported-persistence-type"):(0,ae.UG)()?Bi(U===On.NONE,V,"unsupported-persistence-type"):Zn()?Bi(U===On.NONE||U===On.LOCAL&&(0,ae.hl)(),V,"unsupported-persistence-type"):Bi(U===On.NONE||Gn(),V,"unsupported-persistence-type")}(ee._delegate,N),N){case On.SESSION:Ie=L.a;break;case On.LOCAL:Ie=(yield L.aE(L.i)._isAvailable())?L.i:L.b;break;case On.NONE:Ie=L.U;break;default:return L.ax("argument-error",{appName:ee._delegate.name})}return ee._delegate.setPersistence(Ie)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return Wt(this._delegate,L.a0(this._delegate))}signInWithCredential(N){return Wt(this._delegate,L.a1(this._delegate,N))}signInWithCustomToken(N){return Wt(this._delegate,L.a4(this._delegate,N))}signInWithEmailAndPassword(N,ee){return Wt(this._delegate,L.ab(this._delegate,N,ee))}signInWithEmailLink(N,ee){return Wt(this._delegate,L.ae(this._delegate,N,ee))}signInWithPhoneNumber(N,ee){return oi(this._delegate,L.s(this._delegate,N,ee))}signInWithPopup(N){var ee=this;return(0,h.Z)(function*(){return rt(Rn(),ee._delegate,"operation-not-supported-in-this-environment"),Wt(ee._delegate,L.c(ee._delegate,N,ir))})()}signInWithRedirect(N){var ee=this;return(0,h.Z)(function*(){return rt(Rn(),ee._delegate,"operation-not-supported-in-this-environment"),yield dr(ee._delegate),L.f(ee._delegate,N,ir)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return L.a9(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=On,V})();function Je(V,U,N){let ee=V;"function"!=typeof V&&({next:ee,error:U,complete:N}=V);const Ie=ee;return{next:xt=>Ie(xt&&qt.getOrCreate(xt)),error:U,complete:N}}function Rt(V,U){const N=function Mn(V,U){const N=Et();if(!N)return[];const ee=L.aF(Vn,V,U);switch(N.getItem(ee)){case On.NONE:return[L.U];case On.LOCAL:return[L.i,L.a];case On.SESSION:return[L.a];default:return[]}}(V,U);if(typeof self<"u"&&!N.includes(L.i)&&N.push(L.i),typeof window<"u")for(const ee of[L.b,L.a])N.includes(ee)||N.push(ee);return N.includes(L.U)||N.push(L.U),N}class Xt{constructor(){this.providerId="phone",this._delegate=new L.P(yr(W.Z.auth()))}static credential(U,N){return L.P.credential(U,N)}verifyPhoneNumber(U,N){return this._delegate.verifyPhoneNumber(U,N)}unwrap(){return this._delegate}}Xt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,Xt.PROVIDER_ID=L.P.PROVIDER_ID;const mn=L.aC;class Hn{constructor(U,N,ee=W.Z.app()){var Ie;mn(null===(Ie=ee.options)||void 0===Ie?void 0:Ie.apiKey,"invalid-api-key",{appName:ee.name}),this._delegate=new L.R(ee.auth(),U,N),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function z(V){V.INTERNAL.registerComponent(new be.wA("auth-compat",U=>{const N=U.getProvider("app-compat").getImmediate(),ee=U.getProvider("auth");return new Me(N,ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.V,FacebookAuthProvider:L.W,GithubAuthProvider:L.Y,GoogleAuthProvider:L.X,OAuthProvider:L.Z,SAMLAuthProvider:L._,PhoneAuthProvider:Xt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:Hn,TwitterAuthProvider:L.$,Auth:Me,AuthCredential:L.L,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.5.2")}(W.Z)},8766:(wt,Ne,j)=>{j.d(Ne,{Lj:()=>Fe,X3:()=>We});var h=j(5861);const W=(Q,Ce)=>Ce.some(Ye=>Q instanceof Ye);let L,ae;const be=new WeakMap,ge=new WeakMap,ve=new WeakMap,K=new WeakMap,Y=new WeakMap;let ke={get(Q,Ce,Ye){if(Q instanceof IDBTransaction){if("done"===Ce)return ge.get(Q);if("objectStoreNames"===Ce)return Q.objectStoreNames||ve.get(Q);if("store"===Ce)return Ye.objectStoreNames[1]?void 0:Ye.objectStore(Ye.objectStoreNames[0])}return Pe(Q[Ce])},set:(Q,Ce,Ye)=>(Q[Ce]=Ye,!0),has:(Q,Ce)=>Q instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in Q};function we(Q){return"function"==typeof Q?function ct(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function le(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...Ce){return Q.apply(xe(this),Ce),Pe(be.get(this))}:function(...Ce){return Pe(Q.apply(xe(this),Ce))}:function(Ce,...Ye){const Qe=Q.call(xe(this),Ce,...Ye);return ve.set(Qe,Ce.sort?Ce.sort():[Ce]),Pe(Qe)}}(Q):(Q instanceof IDBTransaction&&function qe(Q){if(ge.has(Q))return;const Ce=new Promise((Ye,Qe)=>{const Mt=()=>{Q.removeEventListener("complete",nt),Q.removeEventListener("error",Ln),Q.removeEventListener("abort",Ln)},nt=()=>{Ye(),Mt()},Ln=()=>{Qe(Q.error||new DOMException("AbortError","AbortError")),Mt()};Q.addEventListener("complete",nt),Q.addEventListener("error",Ln),Q.addEventListener("abort",Ln)});ge.set(Q,Ce)}(Q),W(Q,function he(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,ke):Q)}function Pe(Q){if(Q instanceof IDBRequest)return function ie(Q){const Ce=new Promise((Ye,Qe)=>{const Mt=()=>{Q.removeEventListener("success",nt),Q.removeEventListener("error",Ln)},nt=()=>{Ye(Pe(Q.result)),Mt()},Ln=()=>{Qe(Q.error),Mt()};Q.addEventListener("success",nt),Q.addEventListener("error",Ln)});return Ce.then(Ye=>{Ye instanceof IDBCursor&&be.set(Ye,Q)}).catch(()=>{}),Y.set(Ce,Q),Ce}(Q);if(K.has(Q))return K.get(Q);const Ce=we(Q);return Ce!==Q&&(K.set(Q,Ce),Y.set(Ce,Q)),Ce}const xe=Q=>Y.get(Q);function We(Q,Ce,{blocked:Ye,upgrade:Qe,blocking:Mt,terminated:nt}={}){const Ln=indexedDB.open(Q,Ce),xr=Pe(Ln);return Qe&&Ln.addEventListener("upgradeneeded",Dn=>{Qe(Pe(Ln.result),Dn.oldVersion,Dn.newVersion,Pe(Ln.transaction),Dn)}),Ye&&Ln.addEventListener("blocked",Dn=>Ye(Dn.oldVersion,Dn.newVersion,Dn)),xr.then(Dn=>{nt&&Dn.addEventListener("close",()=>nt()),Mt&&Dn.addEventListener("versionchange",Wr=>Mt(Wr.oldVersion,Wr.newVersion,Wr))}).catch(()=>{}),xr}function Fe(Q,{blocked:Ce}={}){const Ye=indexedDB.deleteDatabase(Q);return Ce&&Ye.addEventListener("blocked",Qe=>Ce(Qe.oldVersion,Qe)),Pe(Ye).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Le=["put","add","delete","clear"],Ke=new Map;function Ge(Q,Ce){if(!(Q instanceof IDBDatabase)||Ce in Q||"string"!=typeof Ce)return;if(Ke.get(Ce))return Ke.get(Ce);const Ye=Ce.replace(/FromIndex$/,""),Qe=Ce!==Ye,Mt=Le.includes(Ye);if(!(Ye in(Qe?IDBIndex:IDBObjectStore).prototype)||!Mt&&!Re.includes(Ye))return;const nt=function(){var Ln=(0,h.Z)(function*(xr,...Dn){const Wr=this.transaction(xr,Mt?"readwrite":"readonly");let de=Wr.store;return Qe&&(de=de.index(Dn.shift())),(yield Promise.all([de[Ye](...Dn),Mt&&Wr.done]))[0]});return function(Dn){return Ln.apply(this,arguments)}}();return Ke.set(Ce,nt),nt}!function Xe(Q){ke=Q(ke)}(Q=>({...Q,get:(Ce,Ye,Qe)=>Ge(Ce,Ye)||Q.get(Ce,Ye,Qe),has:(Ce,Ye)=>!!Ge(Ce,Ye)||Q.has(Ce,Ye)}))},5861:(wt,Ne,j)=>{function h(L,ae,he,le,be,ge,ve){try{var K=L[ge](ve),Y=K.value}catch(ie){return void he(ie)}K.done?ae(Y):Promise.resolve(Y).then(le,be)}function W(L){return function(){var ae=this,he=arguments;return new Promise(function(le,be){var ge=L.apply(ae,he);function ve(Y){h(ge,le,be,ve,K,"next",Y)}function K(Y){h(ge,le,be,ve,K,"throw",Y)}ve(void 0)})}}j.d(Ne,{Z:()=>W})},7582:(wt,Ne,j)=>{function ae(de,_e){var me={};for(var se in de)Object.prototype.hasOwnProperty.call(de,se)&&_e.indexOf(se)<0&&(me[se]=de[se]);if(null!=de&&"function"==typeof Object.getOwnPropertySymbols){var Se=0;for(se=Object.getOwnPropertySymbols(de);Se<se.length;Se++)_e.indexOf(se[Se])<0&&Object.prototype.propertyIsEnumerable.call(de,se[Se])&&(me[se[Se]]=de[se[Se]])}return me}function ie(de,_e,me,se){return new(me||(me=Promise))(function(ze,mt){function ut(Qt){try{St(se.next(Qt))}catch(vn){mt(vn)}}function cn(Qt){try{St(se.throw(Qt))}catch(vn){mt(vn)}}function St(Qt){Qt.done?ze(Qt.value):function Se(ze){return ze instanceof me?ze:new me(function(mt){mt(ze)})}(Qt.value).then(ut,cn)}St((se=se.apply(de,_e||[])).next())})}function Fe(de){return this instanceof Fe?(this.v=de,this):new Fe(de)}function Re(de,_e,me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,se=me.apply(de,_e||[]),ze=[];return Se={},mt("next"),mt("throw"),mt("return"),Se[Symbol.asyncIterator]=function(){return this},Se;function mt(Sn){se[Sn]&&(Se[Sn]=function(Gn){return new Promise(function(Zn,Rn){ze.push([Sn,Gn,Zn,Rn])>1||ut(Sn,Gn)})})}function ut(Sn,Gn){try{!function cn(Sn){Sn.value instanceof Fe?Promise.resolve(Sn.value.v).then(St,Qt):vn(ze[0][2],Sn)}(se[Sn](Gn))}catch(Zn){vn(ze[0][3],Zn)}}function St(Sn){ut("next",Sn)}function Qt(Sn){ut("throw",Sn)}function vn(Sn,Gn){Sn(Gn),ze.shift(),ze.length&&ut(ze[0][0],ze[0][1])}}function Ke(de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var me,_e=de[Symbol.asyncIterator];return _e?_e.call(de):(de=function ct(de){var _e="function"==typeof Symbol&&Symbol.iterator,me=_e&&de[_e],se=0;if(me)return me.call(de);if(de&&"number"==typeof de.length)return{next:function(){return de&&se>=de.length&&(de=void 0),{value:de&&de[se++],done:!de}}};throw new TypeError(_e?"Object is not iterable.":"Symbol.iterator is not defined.")}(de),me={},se("next"),se("throw"),se("return"),me[Symbol.asyncIterator]=function(){return this},me);function se(ze){me[ze]=de[ze]&&function(mt){return new Promise(function(ut,cn){!function Se(ze,mt,ut,cn){Promise.resolve(cn).then(function(St){ze({value:St,done:ut})},mt)}(ut,cn,(mt=de[ze](mt)).done,mt.value)})}}}j.d(Ne,{FC:()=>Re,KL:()=>Ke,_T:()=>ae,mG:()=>ie,qq:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},wt=>{wt(wt.s=1745)}]);